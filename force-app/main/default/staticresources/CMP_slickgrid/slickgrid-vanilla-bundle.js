(function(Mn,pl){typeof exports=="object"&&typeof module<"u"?pl(exports):typeof define=="function"&&define.amd?define(["exports"],pl):(Mn=typeof globalThis<"u"?globalThis:Mn||self,pl(Mn.Slicker={}))})(this,function(Mn){"use strict";function pl(a,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in a)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var Ji;(function(a){a.local="local",a.remote="remote"})(Ji||(Ji={}));class Op{constructor(t){this.rxjs=t}addRxJsResource(t){this.rxjs=t}executeBackendProcessesCallback(t,e,n,r){const o=new Date;e&&n.service.postProcess&&n.service.postProcess(e),e&&(n!=null&&n.internalPostProcess)&&n.internalPostProcess(e),n.postProcess!==void 0&&(e instanceof Object&&(e.metrics={startTime:t,endTime:o,executionTime:o.valueOf()-t.valueOf(),itemCount:r,totalItemCount:r}),n.postProcess(e))}onBackendError(t,e){if(typeof(e==null?void 0:e.onError)=="function")e.onError(t);else throw t}executeBackendCallback(t,e,n,r,o,s){var l;if(t){n&&!n.clearFilterTriggered&&!n.clearSortTriggered&&(s!=null&&s.emitActionChangedCallback)&&s.emitActionChangedCallback.call(this,Ji.remote);const u=t.process(e);if(u instanceof Promise&&u.then)u.then(h=>{var c;this.executeBackendProcessesCallback(r,h,t,o),(c=s==null?void 0:s.successCallback)===null||c===void 0||c.call(this,n)}).catch(h=>{var c;(c=s==null?void 0:s.errorCallback)===null||c===void 0||c.call(this,n),this.onBackendError(h,t)});else if(!((l=this.rxjs)===null||l===void 0)&&l.isObservable(u)){const h=this.rxjs;h.isObservable(s==null?void 0:s.httpCancelRequestSubject)&&(s==null||s.httpCancelRequestSubject.next()),u.pipe(h.takeUntil(h.iif(()=>h.isObservable(s==null?void 0:s.httpCancelRequestSubject),s==null?void 0:s.httpCancelRequestSubject,h.EMPTY))).subscribe(c=>{var p;this.executeBackendProcessesCallback(r,c,t,o),(p=s==null?void 0:s.successCallback)===null||p===void 0||p.call(this,n)},c=>{var p;(p=s==null?void 0:s.errorCallback)===null||p===void 0||p.call(this,n),this.onBackendError(c,t)})}}}refreshBackendDataset(t){var e,n;let r="";const o=t==null?void 0:t.backendServiceApi;if(!o||!o.service||!o.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(o.service&&(r=o.service.buildQuery()),r&&r!==""){const s=new Date;o.preProcess&&o.preProcess();const l=(n=(e=t==null?void 0:t.pagination)===null||e===void 0?void 0:e.totalItems)!==null&&n!==void 0?n:0;this.executeBackendCallback(o,r,null,s,l)}}}const Jg=Object.freeze(Object.defineProperty({__proto__:null,BackendUtilityService:Op},Symbol.toStringTag,{value:"Module"}));function Ma(a,t){["pop","push","reverse","shift","unshift","splice","sort"].forEach(n=>{a[n]=(...r)=>{const o=Array.prototype[n].apply(a,r);return t.apply(a,[a,r]),o}})}function Jc(a,t,e){let n=a[t];Object.defineProperty(a,t,{configurable:!0,get(){return n},set(r){n=r,e.apply(a,[r,a[t]])}})}const e_=Object.freeze(Object.defineProperty({__proto__:null,collectionObserver:Ma,propertyObserver:Jc},Symbol.toStringTag,{value:"Module"})),t_=a=>a;function i_(a,t,e=t_,n=()=>{}){const r=a&&a.length?[{pointer:a,offset:0}]:[],o=[];let s;for(;r.length;)for(s=r.pop();s.offset<s.pointer.length;){const l=s.pointer[s.offset],u=n(l),h=t(l);o.push(e(l,s.node,u,s.nodeId)),s.offset+=1,h&&(r.push(s),s={pointer:h,offset:0,node:l,nodeId:u})}return o}var Pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Na(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ap={exports:{}};(function(a,t){(function(e,n){a.exports=n()})(Pr,function(){var e;function n(){return e.apply(null,arguments)}function r(g){return g instanceof Array||Object.prototype.toString.call(g)==="[object Array]"}function o(g){return g!=null&&Object.prototype.toString.call(g)==="[object Object]"}function s(g,w){return Object.prototype.hasOwnProperty.call(g,w)}function l(g){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(g).length===0;for(var w in g)if(s(g,w))return;return 1}function u(g){return g===void 0}function h(g){return typeof g=="number"||Object.prototype.toString.call(g)==="[object Number]"}function c(g){return g instanceof Date||Object.prototype.toString.call(g)==="[object Date]"}function p(g,w){for(var R=[],H=g.length,te=0;te<H;++te)R.push(w(g[te],te));return R}function m(g,w){for(var R in w)s(w,R)&&(g[R]=w[R]);return s(w,"toString")&&(g.toString=w.toString),s(w,"valueOf")&&(g.valueOf=w.valueOf),g}function v(g,w,R,H){return Je(g,w,R,H,!0).utc()}function _(g){return g._pf==null&&(g._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),g._pf}function C(g){if(g._isValid==null){var w=_(g),R=S.call(w.parsedDateParts,function(H){return H!=null}),R=!isNaN(g._d.getTime())&&w.overflow<0&&!w.empty&&!w.invalidEra&&!w.invalidMonth&&!w.invalidWeekday&&!w.weekdayMismatch&&!w.nullInput&&!w.invalidFormat&&!w.userInvalidated&&(!w.meridiem||w.meridiem&&R);if(g._strict&&(R=R&&w.charsLeftOver===0&&w.unusedTokens.length===0&&w.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(g))return R;g._isValid=R}return g._isValid}function x(g){var w=v(NaN);return g!=null?m(_(w),g):_(w).userInvalidated=!0,w}var S=Array.prototype.some||function(g){for(var w=Object(this),R=w.length>>>0,H=0;H<R;H++)if(H in w&&g.call(this,w[H],H,w))return!0;return!1},E=n.momentProperties=[],D=!1;function A(g,w){var R,H,te,we=E.length;if(u(w._isAMomentObject)||(g._isAMomentObject=w._isAMomentObject),u(w._i)||(g._i=w._i),u(w._f)||(g._f=w._f),u(w._l)||(g._l=w._l),u(w._strict)||(g._strict=w._strict),u(w._tzm)||(g._tzm=w._tzm),u(w._isUTC)||(g._isUTC=w._isUTC),u(w._offset)||(g._offset=w._offset),u(w._pf)||(g._pf=_(w)),u(w._locale)||(g._locale=w._locale),0<we)for(R=0;R<we;R++)u(te=w[H=E[R]])||(g[H]=te);return g}function P(g){A(this,g),this._d=new Date(g._d!=null?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),D===!1&&(D=!0,n.updateOffset(this),D=!1)}function M(g){return g instanceof P||g!=null&&g._isAMomentObject!=null}function B(g){n.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+g)}function Z(g,w){var R=!0;return m(function(){if(n.deprecationHandler!=null&&n.deprecationHandler(null,g),R){for(var H,te,we=[],Be=arguments.length,qe=0;qe<Be;qe++){if(H="",typeof arguments[qe]=="object"){for(te in H+=`
[`+qe+"] ",arguments[0])s(arguments[0],te)&&(H+=te+": "+arguments[0][te]+", ");H=H.slice(0,-2)}else H=arguments[qe];we.push(H)}B(g+`
Arguments: `+Array.prototype.slice.call(we).join("")+`
`+new Error().stack),R=!1}return w.apply(this,arguments)},w)}var L={};function de(g,w){n.deprecationHandler!=null&&n.deprecationHandler(g,w),L[g]||(B(w),L[g]=!0)}function be(g){return typeof Function<"u"&&g instanceof Function||Object.prototype.toString.call(g)==="[object Function]"}function J(g,w){var R,H=m({},g);for(R in w)s(w,R)&&(o(g[R])&&o(w[R])?(H[R]={},m(H[R],g[R]),m(H[R],w[R])):w[R]!=null?H[R]=w[R]:delete H[R]);for(R in g)s(g,R)&&!s(w,R)&&o(g[R])&&(H[R]=m({},H[R]));return H}function U(g){g!=null&&this.set(g)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var F=Object.keys||function(g){var w,R=[];for(w in g)s(g,w)&&R.push(w);return R};function ae(g,w,R){var H=""+Math.abs(g);return(0<=g?R?"+":"":"-")+Math.pow(10,Math.max(0,w-H.length)).toString().substr(1)+H}var Ke=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ie=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xe={},Oe={};function De(g,w,R,H){var te=typeof H=="string"?function(){return this[H]()}:H;g&&(Oe[g]=te),w&&(Oe[w[0]]=function(){return ae(te.apply(this,arguments),w[1],w[2])}),R&&(Oe[R]=function(){return this.localeData().ordinal(te.apply(this,arguments),g)})}function ne(g,w){return g.isValid()?(w=pe(w,g.localeData()),xe[w]=xe[w]||function(R){for(var H,te=R.match(Ke),we=0,Be=te.length;we<Be;we++)Oe[te[we]]?te[we]=Oe[te[we]]:te[we]=(H=te[we]).match(/\[[\s\S]/)?H.replace(/^\[|\]$/g,""):H.replace(/\\/g,"");return function(qe){for(var yt="",ft=0;ft<Be;ft++)yt+=be(te[ft])?te[ft].call(qe,R):te[ft];return yt}}(w),xe[w](g)):g.localeData().invalidDate()}function pe(g,w){var R=5;function H(te){return w.longDateFormat(te)||te}for(Ie.lastIndex=0;0<=R&&Ie.test(g);)g=g.replace(Ie,H),Ie.lastIndex=0,--R;return g}var Ve={};function Ye(g,w){var R=g.toLowerCase();Ve[R]=Ve[R+"s"]=Ve[w]=g}function Ue(g){return typeof g=="string"?Ve[g]||Ve[g.toLowerCase()]:void 0}function ce(g){var w,R,H={};for(R in g)s(g,R)&&(w=Ue(R))&&(H[w]=g[R]);return H}var Ce={};function _e(g,w){Ce[g]=w}function He(g){return g%4==0&&g%100!=0||g%400==0}function ot(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function ze(w){var w=+w,R=0;return R=w!=0&&isFinite(w)?ot(w):R}function St(g,w){return function(R){return R!=null?(k(this,g,R),n.updateOffset(this,w),this):ct(this,g)}}function ct(g,w){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+w]():NaN}function k(g,w,R){g.isValid()&&!isNaN(R)&&(w==="FullYear"&&He(g.year())&&g.month()===1&&g.date()===29?(R=ze(R),g._d["set"+(g._isUTC?"UTC":"")+w](R,g.month(),Mi(R,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+w](R))}var ee=/\d/,Ft=/\d\d/,ge=/\d{3}/,Ki=/\d{4}/,rn=/[+-]?\d{6}/,$=/\d\d?/,X=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,Pe=/\d{1,3}/,qn=/\d{1,4}/,wr=/[+-]?\d{1,6}/,Fe=/\d+/,me=/[+-]?\d+/,Ge=/Z|[+-]\d\d:?\d\d/gi,mt=/Z|[+-]\d\d(?::?\d\d)?/gi,We=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Le(g,w,R){bi[g]=be(w)?w:function(H,te){return H&&R?R:w}}function jt(g,w){return s(bi,g)?bi[g](w._strict,w._locale):new RegExp(It(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(R,H,te,we,Be){return H||te||we||Be})))}function It(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var bi={},K={};function G(g,w){var R,H,te=w;for(typeof g=="string"&&(g=[g]),h(w)&&(te=function(we,Be){Be[w]=ze(we)}),H=g.length,R=0;R<H;R++)K[g[R]]=te}function ve(g,w){G(g,function(R,H,te,we){te._w=te._w||{},w(R,te._w,te,we)})}var ke,at=0,st=1,ht=2,Rt=3,Lt=4,Ot=5,zt=6,qt=7,Fi=8;function Mi(g,w){if(isNaN(g)||isNaN(w))return NaN;var R=(w%(R=12)+R)%R;return g+=(w-R)/12,R==1?He(g)?29:28:31-R%7%2}ke=Array.prototype.indexOf||function(g){for(var w=0;w<this.length;++w)if(this[w]===g)return w;return-1},De("M",["MM",2],"Mo",function(){return this.month()+1}),De("MMM",0,0,function(g){return this.localeData().monthsShort(this,g)}),De("MMMM",0,0,function(g){return this.localeData().months(this,g)}),Ye("month","M"),_e("month",8),Le("M",$),Le("MM",$,Ft),Le("MMM",function(g,w){return w.monthsShortRegex(g)}),Le("MMMM",function(g,w){return w.monthsRegex(g)}),G(["M","MM"],function(g,w){w[st]=ze(g)-1}),G(["MMM","MMMM"],function(g,w,R,H){H=R._locale.monthsParse(g,H,R._strict),H!=null?w[st]=H:_(R).invalidMonth=g});var z="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Q="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),he=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee=We,lt=We;function vt(g,w){var R;if(g.isValid()){if(typeof w=="string"){if(/^\d+$/.test(w))w=ze(w);else if(!h(w=g.localeData().monthsParse(w)))return}R=Math.min(g.date(),Mi(g.year(),w)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](w,R)}}function it(g){return g!=null?(vt(this,g),n.updateOffset(this,!0),this):ct(this,"Month")}function wt(){function g(Be,qe){return qe.length-Be.length}for(var w,R=[],H=[],te=[],we=0;we<12;we++)w=v([2e3,we]),R.push(this.monthsShort(w,"")),H.push(this.months(w,"")),te.push(this.months(w,"")),te.push(this.monthsShort(w,""));for(R.sort(g),H.sort(g),te.sort(g),we=0;we<12;we++)R[we]=It(R[we]),H[we]=It(H[we]);for(we=0;we<24;we++)te[we]=It(te[we]);this._monthsRegex=new RegExp("^("+te.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+H.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+R.join("|")+")","i")}function Ht(g){return He(g)?366:365}De("Y",0,0,function(){var g=this.year();return g<=9999?ae(g,4):"+"+g}),De(0,["YY",2],0,function(){return this.year()%100}),De(0,["YYYY",4],0,"year"),De(0,["YYYYY",5],0,"year"),De(0,["YYYYYY",6,!0],0,"year"),Ye("year","y"),_e("year",1),Le("Y",me),Le("YY",$,Ft),Le("YYYY",qn,Ki),Le("YYYYY",wr,rn),Le("YYYYYY",wr,rn),G(["YYYYY","YYYYYY"],at),G("YYYY",function(g,w){w[at]=g.length===2?n.parseTwoDigitYear(g):ze(g)}),G("YY",function(g,w){w[at]=n.parseTwoDigitYear(g)}),G("Y",function(g,w){w[at]=parseInt(g,10)}),n.parseTwoDigitYear=function(g){return ze(g)+(68<ze(g)?1900:2e3)};var Oo=St("FullYear",!0);function Et(g,w,R,H,te,we,Be){var qe;return g<100&&0<=g?(qe=new Date(g+400,w,R,H,te,we,Be),isFinite(qe.getFullYear())&&qe.setFullYear(g)):qe=new Date(g,w,R,H,te,we,Be),qe}function gt(g){var w;return g<100&&0<=g?((w=Array.prototype.slice.call(arguments))[0]=g+400,w=new Date(Date.UTC.apply(null,w)),isFinite(w.getUTCFullYear())&&w.setUTCFullYear(g)):w=new Date(Date.UTC.apply(null,arguments)),w}function ei(g,w,R){return R=7+w-R,R-(7+gt(g,0,R).getUTCDay()-w)%7-1}function Ai(g,Be,qe,H,te){var we,Be=1+7*(Be-1)+(7+qe-H)%7+ei(g,H,te),qe=Be<=0?Ht(we=g-1)+Be:Be>Ht(g)?(we=g+1,Be-Ht(g)):(we=g,Be);return{year:we,dayOfYear:qe}}function zi(g,w,R){var H,te,we=ei(g.year(),w,R),we=Math.floor((g.dayOfYear()-we-1)/7)+1;return we<1?H=we+Zt(te=g.year()-1,w,R):we>Zt(g.year(),w,R)?(H=we-Zt(g.year(),w,R),te=g.year()+1):(te=g.year(),H=we),{week:H,year:te}}function Zt(g,te,R){var H=ei(g,te,R),te=ei(g+1,te,R);return(Ht(g)-H+te)/7}De("w",["ww",2],"wo","week"),De("W",["WW",2],"Wo","isoWeek"),Ye("week","w"),Ye("isoWeek","W"),_e("week",5),_e("isoWeek",5),Le("w",$),Le("ww",$,Ft),Le("W",$),Le("WW",$,Ft),ve(["w","ww","W","WW"],function(g,w,R,H){w[H.substr(0,1)]=ze(g)});function Ni(g,w){return g.slice(w,7).concat(g.slice(0,w))}De("d",0,"do","day"),De("dd",0,0,function(g){return this.localeData().weekdaysMin(this,g)}),De("ddd",0,0,function(g){return this.localeData().weekdaysShort(this,g)}),De("dddd",0,0,function(g){return this.localeData().weekdays(this,g)}),De("e",0,0,"weekday"),De("E",0,0,"isoWeekday"),Ye("day","d"),Ye("weekday","e"),Ye("isoWeekday","E"),_e("day",11),_e("weekday",11),_e("isoWeekday",11),Le("d",$),Le("e",$),Le("E",$),Le("dd",function(g,w){return w.weekdaysMinRegex(g)}),Le("ddd",function(g,w){return w.weekdaysShortRegex(g)}),Le("dddd",function(g,w){return w.weekdaysRegex(g)}),ve(["dd","ddd","dddd"],function(g,w,R,H){H=R._locale.weekdaysParse(g,H,R._strict),H!=null?w.d=H:_(R).invalidWeekday=g}),ve(["d","e","E"],function(g,w,R,H){w[H]=ze(g)});var Bn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),fn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ct="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Se=We,Xe=We,xt=We;function ti(){function g(ft,Vt){return Vt.length-ft.length}for(var w,R,H,te=[],we=[],Be=[],qe=[],yt=0;yt<7;yt++)H=v([2e3,1]).day(yt),w=It(this.weekdaysMin(H,"")),R=It(this.weekdaysShort(H,"")),H=It(this.weekdays(H,"")),te.push(w),we.push(R),Be.push(H),qe.push(w),qe.push(R),qe.push(H);te.sort(g),we.sort(g),Be.sort(g),qe.sort(g),this._weekdaysRegex=new RegExp("^("+qe.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+Be.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+we.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+te.join("|")+")","i")}function Ui(){return this.hours()%12||12}function Wi(g,w){De(g,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),w)})}function Li(g,w){return w._meridiemParse}De("H",["HH",2],0,"hour"),De("h",["hh",2],0,Ui),De("k",["kk",2],0,function(){return this.hours()||24}),De("hmm",0,0,function(){return""+Ui.apply(this)+ae(this.minutes(),2)}),De("hmmss",0,0,function(){return""+Ui.apply(this)+ae(this.minutes(),2)+ae(this.seconds(),2)}),De("Hmm",0,0,function(){return""+this.hours()+ae(this.minutes(),2)}),De("Hmmss",0,0,function(){return""+this.hours()+ae(this.minutes(),2)+ae(this.seconds(),2)}),Wi("a",!0),Wi("A",!1),Ye("hour","h"),_e("hour",13),Le("a",Li),Le("A",Li),Le("H",$),Le("h",$),Le("k",$),Le("HH",$,Ft),Le("hh",$,Ft),Le("kk",$,Ft),Le("hmm",X),Le("hmmss",re),Le("Hmm",X),Le("Hmmss",re),G(["H","HH"],Rt),G(["k","kk"],function(g,w,R){g=ze(g),w[Rt]=g===24?0:g}),G(["a","A"],function(g,w,R){R._isPm=R._locale.isPM(g),R._meridiem=g}),G(["h","hh"],function(g,w,R){w[Rt]=ze(g),_(R).bigHour=!0}),G("hmm",function(g,w,R){var H=g.length-2;w[Rt]=ze(g.substr(0,H)),w[Lt]=ze(g.substr(H)),_(R).bigHour=!0}),G("hmmss",function(g,w,R){var H=g.length-4,te=g.length-2;w[Rt]=ze(g.substr(0,H)),w[Lt]=ze(g.substr(H,2)),w[Ot]=ze(g.substr(te)),_(R).bigHour=!0}),G("Hmm",function(g,w,R){var H=g.length-2;w[Rt]=ze(g.substr(0,H)),w[Lt]=ze(g.substr(H))}),G("Hmmss",function(g,w,R){var H=g.length-4,te=g.length-2;w[Rt]=ze(g.substr(0,H)),w[Lt]=ze(g.substr(H,2)),w[Ot]=ze(g.substr(te))}),We=St("Hours",!0);var pn,Gn={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:z,monthsShort:Q,week:{dow:0,doy:6},weekdays:Bn,weekdaysMin:Ct,weekdaysShort:fn,meridiemParse:/[ap]\.?m?\.?/i},Kt={},Gi={};function lr(g){return g&&g.toLowerCase().replace("_","-")}function bo(g){for(var w,R,H,te,we=0;we<g.length;){for(w=(te=lr(g[we]).split("-")).length,R=(R=lr(g[we+1]))?R.split("-"):null;0<w;){if(H=er(te.slice(0,w).join("-")))return H;if(R&&R.length>=w&&function(Be,qe){for(var yt=Math.min(Be.length,qe.length),ft=0;ft<yt;ft+=1)if(Be[ft]!==qe[ft])return ft;return yt}(te,R)>=w-1)break;w--}we++}return pn}function er(g){var w;if(Kt[g]===void 0&&a&&a.exports&&g.match("^[^/\\\\]*$")!=null)try{w=pn._abbr,Na("./locale/"+g),tr(w)}catch{Kt[g]=null}return Kt[g]}function tr(g,w){return g&&((w=u(w)?mr(g):Co(g,w))?pn=w:typeof console<"u"&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),pn._abbr}function Co(g,w){if(w===null)return delete Kt[g],null;var R,H=Gn;if(w.abbr=g,Kt[g]!=null)de("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),H=Kt[g]._config;else if(w.parentLocale!=null)if(Kt[w.parentLocale]!=null)H=Kt[w.parentLocale]._config;else{if((R=er(w.parentLocale))==null)return Gi[w.parentLocale]||(Gi[w.parentLocale]=[]),Gi[w.parentLocale].push({name:g,config:w}),null;H=R._config}return Kt[g]=new U(J(H,w)),Gi[g]&&Gi[g].forEach(function(te){Co(te.name,te.config)}),tr(g),Kt[g]}function mr(g){var w;if(!(g=g&&g._locale&&g._locale._abbr?g._locale._abbr:g))return pn;if(!r(g)){if(w=er(g))return w;g=[g]}return bo(g)}function ar(g){var w=g._a;return w&&_(g).overflow===-2&&(w=w[st]<0||11<w[st]?st:w[ht]<1||w[ht]>Mi(w[at],w[st])?ht:w[Rt]<0||24<w[Rt]||w[Rt]===24&&(w[Lt]!==0||w[Ot]!==0||w[zt]!==0)?Rt:w[Lt]<0||59<w[Lt]?Lt:w[Ot]<0||59<w[Ot]?Ot:w[zt]<0||999<w[zt]?zt:-1,_(g)._overflowDayOfYear&&(w<at||ht<w)&&(w=ht),_(g)._overflowWeeks&&w===-1&&(w=qt),_(g)._overflowWeekday&&w===-1&&(w=Fi),_(g).overflow=w),g}var Sr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$n=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vn=/Z|[+-]\d\d(?::?\d\d)?/,di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],zn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],to=/^\/?Date\((-?\d+)/i,yo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ir(g){var w,R,H,te,we,Be,yt=g._i,qe=Sr.exec(yt)||$n.exec(yt),yt=di.length,ft=zn.length;if(qe){for(_(g).iso=!0,w=0,R=yt;w<R;w++)if(di[w][1].exec(qe[1])){te=di[w][0],H=di[w][2]!==!1;break}if(te==null)g._isValid=!1;else{if(qe[3]){for(w=0,R=ft;w<R;w++)if(zn[w][1].exec(qe[3])){we=(qe[2]||" ")+zn[w][0];break}if(we==null)return void(g._isValid=!1)}if(H||we==null){if(qe[4]){if(!Vn.exec(qe[4]))return void(g._isValid=!1);Be="Z"}g._f=te+(we||"")+(Be||""),ye(g)}else g._isValid=!1}}else g._isValid=!1}function vr(g,w,R,H,te,we){return g=[function(Be){Be=parseInt(Be,10);{if(Be<=49)return 2e3+Be;if(Be<=999)return 1900+Be}return Be}(g),Q.indexOf(w),parseInt(R,10),parseInt(H,10),parseInt(te,10)],we&&g.push(parseInt(we,10)),g}function gr(g){var w,R,H,te,we=yo.exec(g._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));we?(w=vr(we[4],we[3],we[2],we[5],we[6],we[7]),R=we[1],H=w,te=g,R&&fn.indexOf(R)!==new Date(H[0],H[1],H[2]).getDay()?(_(te).weekdayMismatch=!0,te._isValid=!1):(g._a=w,g._tzm=(R=we[8],H=we[9],te=we[10],R?mn[R]:H?0:60*(((R=parseInt(te,10))-(H=R%100))/100)+H),g._d=gt.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),_(g).rfc2822=!0)):g._isValid=!1}function se(g,w,R){return g??w??R}function ue(g){var w,R,H,te,we,Be,qe,yt,ft,Vt,Mt,qi=[];if(!g._d){for(H=g,te=new Date(n.now()),R=H._useUTC?[te.getUTCFullYear(),te.getUTCMonth(),te.getUTCDate()]:[te.getFullYear(),te.getMonth(),te.getDate()],g._w&&g._a[ht]==null&&g._a[st]==null&&((te=(H=g)._w).GG!=null||te.W!=null||te.E!=null?(yt=1,ft=4,we=se(te.GG,H._a[at],zi(dt(),1,4).year),Be=se(te.W,1),((qe=se(te.E,1))<1||7<qe)&&(Vt=!0)):(yt=H._locale._week.dow,ft=H._locale._week.doy,Mt=zi(dt(),yt,ft),we=se(te.gg,H._a[at],Mt.year),Be=se(te.w,Mt.week),te.d!=null?((qe=te.d)<0||6<qe)&&(Vt=!0):te.e!=null?(qe=te.e+yt,(te.e<0||6<te.e)&&(Vt=!0)):qe=yt),Be<1||Be>Zt(we,yt,ft)?_(H)._overflowWeeks=!0:Vt!=null?_(H)._overflowWeekday=!0:(Mt=Ai(we,Be,qe,yt,ft),H._a[at]=Mt.year,H._dayOfYear=Mt.dayOfYear)),g._dayOfYear!=null&&(te=se(g._a[at],R[at]),(g._dayOfYear>Ht(te)||g._dayOfYear===0)&&(_(g)._overflowDayOfYear=!0),Vt=gt(te,0,g._dayOfYear),g._a[st]=Vt.getUTCMonth(),g._a[ht]=Vt.getUTCDate()),w=0;w<3&&g._a[w]==null;++w)g._a[w]=qi[w]=R[w];for(;w<7;w++)g._a[w]=qi[w]=g._a[w]==null?w===2?1:0:g._a[w];g._a[Rt]===24&&g._a[Lt]===0&&g._a[Ot]===0&&g._a[zt]===0&&(g._nextDay=!0,g._a[Rt]=0),g._d=(g._useUTC?gt:Et).apply(null,qi),we=g._useUTC?g._d.getUTCDay():g._d.getDay(),g._tzm!=null&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[Rt]=24),g._w&&g._w.d!==void 0&&g._w.d!==we&&(_(g).weekdayMismatch=!0)}}function ye(g){if(g._f===n.ISO_8601)ir(g);else if(g._f===n.RFC_2822)gr(g);else{g._a=[],_(g).empty=!0;for(var w,R,H,te,we,Be=""+g._i,qe=Be.length,yt=0,ft=pe(g._f,g._locale).match(Ke)||[],Vt=ft.length,Mt=0;Mt<Vt;Mt++)R=ft[Mt],(w=(Be.match(jt(R,g))||[])[0])&&(0<(H=Be.substr(0,Be.indexOf(w))).length&&_(g).unusedInput.push(H),Be=Be.slice(Be.indexOf(w)+w.length),yt+=w.length),Oe[R]?(w?_(g).empty=!1:_(g).unusedTokens.push(R),H=R,we=g,(te=w)!=null&&s(K,H)&&K[H](te,we._a,we,H)):g._strict&&!w&&_(g).unusedTokens.push(R);_(g).charsLeftOver=qe-yt,0<Be.length&&_(g).unusedInput.push(Be),g._a[Rt]<=12&&_(g).bigHour===!0&&0<g._a[Rt]&&(_(g).bigHour=void 0),_(g).parsedDateParts=g._a.slice(0),_(g).meridiem=g._meridiem,g._a[Rt]=function(qi,an,Zi){return Zi==null?an:qi.meridiemHour!=null?qi.meridiemHour(an,Zi):qi.isPM!=null?((qi=qi.isPM(Zi))&&an<12&&(an+=12),an=qi||an!==12?an:0):an}(g._locale,g._a[Rt],g._meridiem),(qe=_(g).era)!==null&&(g._a[at]=g._locale.erasConvertYear(qe,g._a[at])),ue(g),ar(g)}}function $e(g){var w,R,H,te=g._i,we=g._f;return g._locale=g._locale||mr(g._l),te===null||we===void 0&&te===""?x({nullInput:!0}):(typeof te=="string"&&(g._i=te=g._locale.preparse(te)),M(te)?new P(ar(te)):(c(te)?g._d=te:r(we)?function(Be){var qe,yt,ft,Vt,Mt,qi,an=!1,Zi=Be._f.length;if(Zi===0)return _(Be).invalidFormat=!0,Be._d=new Date(NaN);for(Vt=0;Vt<Zi;Vt++)Mt=0,qi=!1,qe=A({},Be),Be._useUTC!=null&&(qe._useUTC=Be._useUTC),qe._f=Be._f[Vt],ye(qe),C(qe)&&(qi=!0),Mt=(Mt+=_(qe).charsLeftOver)+10*_(qe).unusedTokens.length,_(qe).score=Mt,an?Mt<ft&&(ft=Mt,yt=qe):(ft==null||Mt<ft||qi)&&(ft=Mt,yt=qe,qi&&(an=!0));m(Be,yt||qe)}(g):we?ye(g):u(we=(te=g)._i)?te._d=new Date(n.now()):c(we)?te._d=new Date(we.valueOf()):typeof we=="string"?(R=te,(w=to.exec(R._i))!==null?R._d=new Date(+w[1]):(ir(R),R._isValid===!1&&(delete R._isValid,gr(R),R._isValid===!1&&(delete R._isValid,R._strict?R._isValid=!1:n.createFromInputFallback(R))))):r(we)?(te._a=p(we.slice(0),function(Be){return parseInt(Be,10)}),ue(te)):o(we)?(w=te)._d||(H=(R=ce(w._i)).day===void 0?R.date:R.day,w._a=p([R.year,R.month,H,R.hour,R.minute,R.second,R.millisecond],function(Be){return Be&&parseInt(Be,10)}),ue(w)):h(we)?te._d=new Date(we):n.createFromInputFallback(te),C(g)||(g._d=null),g))}function Je(g,w,R,H,te){var we={};return w!==!0&&w!==!1||(H=w,w=void 0),R!==!0&&R!==!1||(H=R,R=void 0),(o(g)&&l(g)||r(g)&&g.length===0)&&(g=void 0),we._isAMomentObject=!0,we._useUTC=we._isUTC=te,we._l=R,we._i=g,we._f=w,we._strict=H,(te=new P(ar($e(te=we))))._nextDay&&(te.add(1,"d"),te._nextDay=void 0),te}function dt(g,w,R,H){return Je(g,w,R,H,!1)}n.createFromInputFallback=Z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){},X=Z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=dt.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:x()}),re=Z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=dt.apply(null,arguments);return this.isValid()&&g.isValid()?this<g?this:g:x()});function At(g,w){var R,H;if(!(w=w.length===1&&r(w[0])?w[0]:w).length)return dt();for(R=w[0],H=1;H<w.length;++H)w[H].isValid()&&!w[H][g](R)||(R=w[H]);return R}var Bt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ui(w){var w=ce(w),R=w.year||0,H=w.quarter||0,te=w.month||0,we=w.week||w.isoWeek||0,Be=w.day||0,qe=w.hour||0,yt=w.minute||0,ft=w.second||0,Vt=w.millisecond||0;this._isValid=function(Mt){var qi,an,Zi=!1,is=Bt.length;for(qi in Mt)if(s(Mt,qi)&&(ke.call(Bt,qi)===-1||Mt[qi]!=null&&isNaN(Mt[qi])))return!1;for(an=0;an<is;++an)if(Mt[Bt[an]]){if(Zi)return!1;parseFloat(Mt[Bt[an]])!==ze(Mt[Bt[an]])&&(Zi=!0)}return!0}(w),this._milliseconds=+Vt+1e3*ft+6e4*yt+1e3*qe*60*60,this._days=+Be+7*we,this._months=+te+3*H+12*R,this._data={},this._locale=mr(),this._bubble()}function Ci(g){return g instanceof ui}function Ei(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function yn(g,w){De(g,0,0,function(){var R=this.utcOffset(),H="+";return R<0&&(R=-R,H="-"),H+ae(~~(R/60),2)+w+ae(~~R%60,2)})}yn("Z",":"),yn("ZZ",""),Le("Z",mt),Le("ZZ",mt),G(["Z","ZZ"],function(g,w,R){R._useUTC=!0,R._tzm=jn(mt,g)});var Yn=/([\+\-]|\d\d)/gi;function jn(g,R){var R=(R||"").match(g);return R===null?null:(R=60*(g=((R[R.length-1]||[])+"").match(Yn)||["-",0,0])[1]+ze(g[2]))===0?0:g[0]==="+"?R:-R}function Xn(g,w){var R;return w._isUTC?(w=w.clone(),R=(M(g)||c(g)?g:dt(g)).valueOf()-w.valueOf(),w._d.setTime(w._d.valueOf()+R),n.updateOffset(w,!1),w):dt(g).local()}function io(g){return-Math.round(g._d.getTimezoneOffset())}function _r(){return!!this.isValid()&&this._isUTC&&this._offset===0}n.updateOffset=function(){};var Eo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Hi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Oi(g,w){var R,H=g,te=null;return Ci(g)?H={ms:g._milliseconds,d:g._days,M:g._months}:h(g)||!isNaN(+g)?(H={},w?H[w]=+g:H.milliseconds=+g):(te=Eo.exec(g))?(R=te[1]==="-"?-1:1,H={y:0,d:ze(te[ht])*R,h:ze(te[Rt])*R,m:ze(te[Lt])*R,s:ze(te[Ot])*R,ms:ze(Ei(1e3*te[zt]))*R}):(te=Hi.exec(g))?(R=te[1]==="-"?-1:1,H={y:Br(te[2],R),M:Br(te[3],R),w:Br(te[4],R),d:Br(te[5],R),h:Br(te[6],R),m:Br(te[7],R),s:Br(te[8],R)}):H==null?H={}:typeof H=="object"&&("from"in H||"to"in H)&&(w=function(we,Be){var qe;return!we.isValid()||!Be.isValid()?{milliseconds:0,months:0}:(Be=Xn(Be,we),we.isBefore(Be)?qe=Cs(we,Be):((qe=Cs(Be,we)).milliseconds=-qe.milliseconds,qe.months=-qe.months),qe)}(dt(H.from),dt(H.to)),(H={}).ms=w.milliseconds,H.M=w.months),te=new ui(H),Ci(g)&&s(g,"_locale")&&(te._locale=g._locale),Ci(g)&&s(g,"_isValid")&&(te._isValid=g._isValid),te}function Br(g,w){return g=g&&parseFloat(g.replace(",",".")),(isNaN(g)?0:g)*w}function Cs(g,w){var R={};return R.months=w.month()-g.month()+12*(w.year()-g.year()),g.clone().add(R.months,"M").isAfter(w)&&--R.months,R.milliseconds=+w-+g.clone().add(R.months,"M"),R}function So(g,w){return function(R,H){var te;return H===null||isNaN(+H)||(de(w,"moment()."+w+"(period, number) is deprecated. Please use moment()."+w+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),te=R,R=H,H=te),Ks(this,Oi(R,H),g),this}}function Ks(g,Be,R,H){var te=Be._milliseconds,we=Ei(Be._days),Be=Ei(Be._months);g.isValid()&&(H=H==null||H,Be&&vt(g,ct(g,"Month")+Be*R),we&&k(g,"Date",ct(g,"Date")+we*R),te&&g._d.setTime(g._d.valueOf()+te*R),H&&n.updateOffset(g,we||Be))}Oi.fn=ui.prototype,Oi.invalid=function(){return Oi(NaN)},z=So(1,"add"),Bn=So(-1,"subtract");function ys(g){return typeof g=="string"||g instanceof String}function ia(g){return M(g)||c(g)||ys(g)||h(g)||function(w){var R=r(w),H=!1;return R&&(H=w.filter(function(te){return!h(te)&&ys(w)}).length===0),R&&H}(g)||function(w){var R,H,te=o(w)&&!l(w),we=!1,Be=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],qe=Be.length;for(R=0;R<qe;R+=1)H=Be[R],we=we||s(w,H);return te&&we}(g)||g==null}function Jo(g,te){if(g.date()<te.date())return-Jo(te,g);var R=12*(te.year()-g.year())+(te.month()-g.month()),H=g.clone().add(R,"months"),te=te-H<0?(te-H)/(H-g.clone().add(R-1,"months")):(te-H)/(g.clone().add(1+R,"months")-H);return-(R+te)||0}function Es(g){return g===void 0?this._locale._abbr:((g=mr(g))!=null&&(this._locale=g),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Ct=Z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(g){return g===void 0?this.localeData():this.locale(g)});function ki(){return this._locale}var vi=126227808e5;function wo(g,w){return(g%w+w)%w}function xo(g,w,R){return g<100&&0<=g?new Date(g+400,w,R)-vi:new Date(g,w,R).valueOf()}function Ss(g,w,R){return g<100&&0<=g?Date.UTC(g+400,w,R)-vi:Date.UTC(g,w,R)}function xl(g,w){return w.erasAbbrRegex(g)}function qs(){for(var g=[],w=[],R=[],H=[],te=this.eras(),we=0,Be=te.length;we<Be;++we)w.push(It(te[we].name)),g.push(It(te[we].abbr)),R.push(It(te[we].narrow)),H.push(It(te[we].name)),H.push(It(te[we].abbr)),H.push(It(te[we].narrow));this._erasRegex=new RegExp("^("+H.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+w.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+R.join("|")+")","i")}function es(g,w){De(0,[g,g.length],0,w)}function ws(g,w,R,H,te){var we;return g==null?zi(this,H,te).year:(we=Zt(g,H,te),(function(Be,qe,yt,ft,Vt){return Be=Ai(Be,qe,yt,ft,Vt),qe=gt(Be.year,0,Be.dayOfYear),this.year(qe.getUTCFullYear()),this.month(qe.getUTCMonth()),this.date(qe.getUTCDate()),this}).call(this,g,w=we<w?we:w,R,H,te))}De("N",0,0,"eraAbbr"),De("NN",0,0,"eraAbbr"),De("NNN",0,0,"eraAbbr"),De("NNNN",0,0,"eraName"),De("NNNNN",0,0,"eraNarrow"),De("y",["y",1],"yo","eraYear"),De("y",["yy",2],0,"eraYear"),De("y",["yyy",3],0,"eraYear"),De("y",["yyyy",4],0,"eraYear"),Le("N",xl),Le("NN",xl),Le("NNN",xl),Le("NNNN",function(g,w){return w.erasNameRegex(g)}),Le("NNNNN",function(g,w){return w.erasNarrowRegex(g)}),G(["N","NN","NNN","NNNN","NNNNN"],function(g,w,R,H){H=R._locale.erasParse(g,H,R._strict),H?_(R).era=H:_(R).invalidEra=g}),Le("y",Fe),Le("yy",Fe),Le("yyy",Fe),Le("yyyy",Fe),Le("yo",function(g,w){return w._eraYearOrdinalRegex||Fe}),G(["y","yy","yyy","yyyy"],at),G(["yo"],function(g,w,R,H){var te;R._locale._eraYearOrdinalRegex&&(te=g.match(R._locale._eraYearOrdinalRegex)),R._locale.eraYearOrdinalParse?w[at]=R._locale.eraYearOrdinalParse(g,te):w[at]=parseInt(g,10)}),De(0,["gg",2],0,function(){return this.weekYear()%100}),De(0,["GG",2],0,function(){return this.isoWeekYear()%100}),es("gggg","weekYear"),es("ggggg","weekYear"),es("GGGG","isoWeekYear"),es("GGGGG","isoWeekYear"),Ye("weekYear","gg"),Ye("isoWeekYear","GG"),_e("weekYear",1),_e("isoWeekYear",1),Le("G",me),Le("g",me),Le("GG",$,Ft),Le("gg",$,Ft),Le("GGGG",qn,Ki),Le("gggg",qn,Ki),Le("GGGGG",wr,rn),Le("ggggg",wr,rn),ve(["gggg","ggggg","GGGG","GGGGG"],function(g,w,R,H){w[H.substr(0,2)]=ze(g)}),ve(["gg","GG"],function(g,w,R,H){w[H]=n.parseTwoDigitYear(g)}),De("Q",0,"Qo","quarter"),Ye("quarter","Q"),_e("quarter",7),Le("Q",ee),G("Q",function(g,w){w[st]=3*(ze(g)-1)}),De("D",["DD",2],"Do","date"),Ye("date","D"),_e("date",9),Le("D",$),Le("DD",$,Ft),Le("Do",function(g,w){return g?w._dayOfMonthOrdinalParse||w._ordinalParse:w._dayOfMonthOrdinalParseLenient}),G(["D","DD"],ht),G("Do",function(g,w){w[ht]=ze(g.match($)[0])}),qn=St("Date",!0),De("DDD",["DDDD",3],"DDDo","dayOfYear"),Ye("dayOfYear","DDD"),_e("dayOfYear",4),Le("DDD",Pe),Le("DDDD",ge),G(["DDD","DDDD"],function(g,w,R){R._dayOfYear=ze(g)}),De("m",["mm",2],0,"minute"),Ye("minute","m"),_e("minute",14),Le("m",$),Le("mm",$,Ft),G(["m","mm"],Lt);var kt,Ki=St("Minutes",!1),wr=(De("s",["ss",2],0,"second"),Ye("second","s"),_e("second",15),Le("s",$),Le("ss",$,Ft),G(["s","ss"],Ot),St("Seconds",!1));for(De("S",0,0,function(){return~~(this.millisecond()/100)}),De(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),De(0,["SSS",3],0,"millisecond"),De(0,["SSSS",4],0,function(){return 10*this.millisecond()}),De(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),De(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),De(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),De(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),De(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Ye("millisecond","ms"),_e("millisecond",16),Le("S",Pe,ee),Le("SS",Pe,Ft),Le("SSS",Pe,ge),kt="SSSS";kt.length<=9;kt+="S")Le(kt,Fe);function Ho(g,w){w[zt]=ze(1e3*("0."+g))}for(kt="S";kt.length<=9;kt+="S")G(kt,Ho);rn=St("Milliseconds",!1),De("z",0,0,"zoneAbbr"),De("zz",0,0,"zoneName"),ee=P.prototype;function Tl(g){return g}ee.add=z,ee.calendar=function(R,te){arguments.length===1&&(arguments[0]?ia(arguments[0])?(R=arguments[0],te=void 0):function(we){for(var Be=o(we)&&!l(we),qe=!1,yt=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],ft=0;ft<yt.length;ft+=1)qe=qe||s(we,yt[ft]);return Be&&qe}(arguments[0])&&(te=arguments[0],R=void 0):te=R=void 0);var R=R||dt(),H=Xn(R,this).startOf("day"),H=n.calendarFormat(this,H)||"sameElse",te=te&&(be(te[H])?te[H].call(this,R):te[H]);return this.format(te||this.localeData().calendar(H,this,dt(R)))},ee.clone=function(){return new P(this)},ee.diff=function(g,w,R){var H,te,we;if(!this.isValid())return NaN;if(!(H=Xn(g,this)).isValid())return NaN;switch(te=6e4*(H.utcOffset()-this.utcOffset()),w=Ue(w)){case"year":we=Jo(this,H)/12;break;case"month":we=Jo(this,H);break;case"quarter":we=Jo(this,H)/3;break;case"second":we=(this-H)/1e3;break;case"minute":we=(this-H)/6e4;break;case"hour":we=(this-H)/36e5;break;case"day":we=(this-H-te)/864e5;break;case"week":we=(this-H-te)/6048e5;break;default:we=this-H}return R?we:ot(we)},ee.endOf=function(g){var w,R;if((g=Ue(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?Ss:xo,g){case"year":w=R(this.year()+1,0,1)-1;break;case"quarter":w=R(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":w=R(this.year(),this.month()+1,1)-1;break;case"week":w=R(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":w=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":w=R(this.year(),this.month(),this.date()+1)-1;break;case"hour":w=this._d.valueOf(),w+=36e5-wo(w+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":w=this._d.valueOf(),w+=6e4-wo(w,6e4)-1;break;case"second":w=this._d.valueOf(),w+=1e3-wo(w,1e3)-1;break}return this._d.setTime(w),n.updateOffset(this,!0),this},ee.format=function(g){return g=g||(this.isUtc()?n.defaultFormatUtc:n.defaultFormat),g=ne(this,g),this.localeData().postformat(g)},ee.from=function(g,w){return this.isValid()&&(M(g)&&g.isValid()||dt(g).isValid())?Oi({to:this,from:g}).locale(this.locale()).humanize(!w):this.localeData().invalidDate()},ee.fromNow=function(g){return this.from(dt(),g)},ee.to=function(g,w){return this.isValid()&&(M(g)&&g.isValid()||dt(g).isValid())?Oi({from:this,to:g}).locale(this.locale()).humanize(!w):this.localeData().invalidDate()},ee.toNow=function(g){return this.to(dt(),g)},ee.get=function(g){return be(this[g=Ue(g)])?this[g]():this},ee.invalidAt=function(){return _(this).overflow},ee.isAfter=function(g,w){return g=M(g)?g:dt(g),!(!this.isValid()||!g.isValid())&&((w=Ue(w)||"millisecond")==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(w).valueOf())},ee.isBefore=function(g,w){return g=M(g)?g:dt(g),!(!this.isValid()||!g.isValid())&&((w=Ue(w)||"millisecond")==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(w).valueOf()<g.valueOf())},ee.isBetween=function(g,w,R,H){return g=M(g)?g:dt(g),w=M(w)?w:dt(w),!!(this.isValid()&&g.isValid()&&w.isValid())&&((H=H||"()")[0]==="("?this.isAfter(g,R):!this.isBefore(g,R))&&(H[1]===")"?this.isBefore(w,R):!this.isAfter(w,R))},ee.isSame=function(R,w){var R=M(R)?R:dt(R);return!(!this.isValid()||!R.isValid())&&((w=Ue(w)||"millisecond")==="millisecond"?this.valueOf()===R.valueOf():(R=R.valueOf(),this.clone().startOf(w).valueOf()<=R&&R<=this.clone().endOf(w).valueOf()))},ee.isSameOrAfter=function(g,w){return this.isSame(g,w)||this.isAfter(g,w)},ee.isSameOrBefore=function(g,w){return this.isSame(g,w)||this.isBefore(g,w)},ee.isValid=function(){return C(this)},ee.lang=Ct,ee.locale=Es,ee.localeData=ki,ee.max=re,ee.min=X,ee.parsingFlags=function(){return m({},_(this))},ee.set=function(g,w){if(typeof g=="object")for(var R=function(we){var Be,qe=[];for(Be in we)s(we,Be)&&qe.push({unit:Be,priority:Ce[Be]});return qe.sort(function(yt,ft){return yt.priority-ft.priority}),qe}(g=ce(g)),H=R.length,te=0;te<H;te++)this[R[te].unit](g[R[te].unit]);else if(be(this[g=Ue(g)]))return this[g](w);return this},ee.startOf=function(g){var w,R;if((g=Ue(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?Ss:xo,g){case"year":w=R(this.year(),0,1);break;case"quarter":w=R(this.year(),this.month()-this.month()%3,1);break;case"month":w=R(this.year(),this.month(),1);break;case"week":w=R(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":w=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":w=R(this.year(),this.month(),this.date());break;case"hour":w=this._d.valueOf(),w-=wo(w+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":w=this._d.valueOf(),w-=wo(w,6e4);break;case"second":w=this._d.valueOf(),w-=wo(w,1e3);break}return this._d.setTime(w),n.updateOffset(this,!0),this},ee.subtract=Bn,ee.toArray=function(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]},ee.toObject=function(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}},ee.toDate=function(){return new Date(this.valueOf())},ee.toISOString=function(g){if(!this.isValid())return null;var w=(g=g!==!0)?this.clone().utc():this;return w.year()<0||9999<w.year()?ne(w,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):be(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ne(w,"Z")):ne(w,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ee.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,w="moment",R="";return this.isLocal()||(w=this.utcOffset()===0?"moment.utc":"moment.parseZone",R="Z"),w="["+w+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(w+g+"-MM-DD[T]HH:mm:ss.SSS"+(R+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ee.toJSON=function(){return this.isValid()?this.toISOString():null},ee.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ee.unix=function(){return Math.floor(this.valueOf()/1e3)},ee.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ee.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ee.eraName=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].name;return""},ee.eraNarrow=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].narrow;return""},ee.eraAbbr=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].abbr;return""},ee.eraYear=function(){for(var g,w,R=this.localeData().eras(),H=0,te=R.length;H<te;++H)if(g=R[H].since<=R[H].until?1:-1,w=this.clone().startOf("day").valueOf(),R[H].since<=w&&w<=R[H].until||R[H].until<=w&&w<=R[H].since)return(this.year()-n(R[H].since).year())*g+R[H].offset;return this.year()},ee.year=Oo,ee.isLeapYear=function(){return He(this.year())},ee.weekYear=function(g){return ws.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ee.isoWeekYear=function(g){return ws.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)},ee.quarter=ee.quarters=function(g){return g==null?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)},ee.month=it,ee.daysInMonth=function(){return Mi(this.year(),this.month())},ee.week=ee.weeks=function(g){var w=this.localeData().week(this);return g==null?w:this.add(7*(g-w),"d")},ee.isoWeek=ee.isoWeeks=function(g){var w=zi(this,1,4).week;return g==null?w:this.add(7*(g-w),"d")},ee.weeksInYear=function(){var g=this.localeData()._week;return Zt(this.year(),g.dow,g.doy)},ee.weeksInWeekYear=function(){var g=this.localeData()._week;return Zt(this.weekYear(),g.dow,g.doy)},ee.isoWeeksInYear=function(){return Zt(this.year(),1,4)},ee.isoWeeksInISOWeekYear=function(){return Zt(this.isoWeekYear(),1,4)},ee.date=qn,ee.day=ee.days=function(g){if(!this.isValid())return g!=null?this:NaN;var w,R,H=this._isUTC?this._d.getUTCDay():this._d.getDay();return g!=null?(w=g,R=this.localeData(),g=typeof w!="string"?w:isNaN(w)?typeof(w=R.weekdaysParse(w))=="number"?w:null:parseInt(w,10),this.add(g-H,"d")):H},ee.weekday=function(g){if(!this.isValid())return g!=null?this:NaN;var w=(this.day()+7-this.localeData()._week.dow)%7;return g==null?w:this.add(g-w,"d")},ee.isoWeekday=function(g){return this.isValid()?g!=null?(w=g,R=this.localeData(),R=typeof w=="string"?R.weekdaysParse(w)%7||7:isNaN(w)?null:w,this.day(this.day()%7?R:R-7)):this.day()||7:g!=null?this:NaN;var w,R},ee.dayOfYear=function(g){var w=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return g==null?w:this.add(g-w,"d")},ee.hour=ee.hours=We,ee.minute=ee.minutes=Ki,ee.second=ee.seconds=wr,ee.millisecond=ee.milliseconds=rn,ee.utcOffset=function(g,w,R){var H,te=this._offset||0;if(!this.isValid())return g!=null?this:NaN;if(g==null)return this._isUTC?te:io(this);if(typeof g=="string"){if((g=jn(mt,g))===null)return this}else Math.abs(g)<16&&!R&&(g*=60);return!this._isUTC&&w&&(H=io(this)),this._offset=g,this._isUTC=!0,H!=null&&this.add(H,"m"),te!==g&&(!w||this._changeInProgress?Ks(this,Oi(g-te,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},ee.utc=function(g){return this.utcOffset(0,g)},ee.local=function(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(io(this),"m")),this},ee.parseZone=function(){var g;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((g=jn(Ge,this._i))!=null?this.utcOffset(g):this.utcOffset(0,!0)),this},ee.hasAlignedHourOffset=function(g){return!!this.isValid()&&(g=g?dt(g).utcOffset():0,(this.utcOffset()-g)%60==0)},ee.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ee.isLocal=function(){return!!this.isValid()&&!this._isUTC},ee.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ee.isUtc=_r,ee.isUTC=_r,ee.zoneAbbr=function(){return this._isUTC?"UTC":""},ee.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ee.dates=Z("dates accessor is deprecated. Use date instead.",qn),ee.months=Z("months accessor is deprecated. Use month instead",it),ee.years=Z("years accessor is deprecated. Use year instead",Oo),ee.zone=Z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(g,w){return g!=null?(this.utcOffset(g=typeof g!="string"?-g:g,w),this):-this.utcOffset()}),ee.isDSTShifted=Z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var g,w={};return A(w,this),(w=$e(w))._a?(g=(w._isUTC?v:dt)(w._a),this._isDSTShifted=this.isValid()&&0<function(R,H,te){for(var we=Math.min(R.length,H.length),Be=Math.abs(R.length-H.length),qe=0,yt=0;yt<we;yt++)(te&&R[yt]!==H[yt]||!te&&ze(R[yt])!==ze(H[yt]))&&qe++;return qe+Be}(w._a,g.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),Ft=U.prototype;function no(g,w,R,we){var te=mr(),we=v().set(we,w);return te[R](we,g)}function Kn(g,w,R){if(h(g)&&(w=g,g=void 0),g=g||"",w!=null)return no(g,w,R,"month");for(var H=[],te=0;te<12;te++)H[te]=no(g,te,R,"month");return H}function Zs(g,w,R,H){w=(typeof g=="boolean"?h(w)&&(R=w,w=void 0):(w=g,g=!1,h(R=w)&&(R=w,w=void 0)),w||"");var te,we=mr(),Be=g?we._week.dow:0,qe=[];if(R!=null)return no(w,(R+Be)%7,H,"day");for(te=0;te<7;te++)qe[te]=no(w,(te+Be)%7,H,"day");return qe}Ft.calendar=function(g,w,R){return be(g=this._calendar[g]||this._calendar.sameElse)?g.call(w,R):g},Ft.longDateFormat=function(g){var w=this._longDateFormat[g],R=this._longDateFormat[g.toUpperCase()];return w||!R?w:(this._longDateFormat[g]=R.match(Ke).map(function(H){return H==="MMMM"||H==="MM"||H==="DD"||H==="dddd"?H.slice(1):H}).join(""),this._longDateFormat[g])},Ft.invalidDate=function(){return this._invalidDate},Ft.ordinal=function(g){return this._ordinal.replace("%d",g)},Ft.preparse=Tl,Ft.postformat=Tl,Ft.relativeTime=function(g,w,R,H){var te=this._relativeTime[R];return be(te)?te(g,w,R,H):te.replace(/%d/i,g)},Ft.pastFuture=function(g,w){return be(g=this._relativeTime[0<g?"future":"past"])?g(w):g.replace(/%s/i,w)},Ft.set=function(g){var w,R;for(R in g)s(g,R)&&(be(w=g[R])?this[R]=w:this["_"+R]=w);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Ft.eras=function(g,w){for(var R,H=this._eras||mr("en")._eras,te=0,we=H.length;te<we;++te){switch(typeof H[te].since){case"string":R=n(H[te].since).startOf("day"),H[te].since=R.valueOf();break}switch(typeof H[te].until){case"undefined":H[te].until=1/0;break;case"string":R=n(H[te].until).startOf("day").valueOf(),H[te].until=R.valueOf();break}}return H},Ft.erasParse=function(g,w,R){var H,te,we,Be,qe,yt=this.eras();for(g=g.toUpperCase(),H=0,te=yt.length;H<te;++H)if(we=yt[H].name.toUpperCase(),Be=yt[H].abbr.toUpperCase(),qe=yt[H].narrow.toUpperCase(),R)switch(w){case"N":case"NN":case"NNN":if(Be===g)return yt[H];break;case"NNNN":if(we===g)return yt[H];break;case"NNNNN":if(qe===g)return yt[H];break}else if(0<=[we,Be,qe].indexOf(g))return yt[H]},Ft.erasConvertYear=function(g,w){var R=g.since<=g.until?1:-1;return w===void 0?n(g.since).year():n(g.since).year()+(w-g.offset)*R},Ft.erasAbbrRegex=function(g){return s(this,"_erasAbbrRegex")||qs.call(this),g?this._erasAbbrRegex:this._erasRegex},Ft.erasNameRegex=function(g){return s(this,"_erasNameRegex")||qs.call(this),g?this._erasNameRegex:this._erasRegex},Ft.erasNarrowRegex=function(g){return s(this,"_erasNarrowRegex")||qs.call(this),g?this._erasNarrowRegex:this._erasRegex},Ft.months=function(g,w){return g?(r(this._months)?this._months:this._months[(this._months.isFormat||he).test(w)?"format":"standalone"])[g.month()]:r(this._months)?this._months:this._months.standalone},Ft.monthsShort=function(g,w){return g?(r(this._monthsShort)?this._monthsShort:this._monthsShort[he.test(w)?"format":"standalone"])[g.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Ft.monthsParse=function(g,w,R){var H,te;if(this._monthsParseExact)return(function(Mt,Be,qe){var yt,ft,Vt,Mt=Mt.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],yt=0;yt<12;++yt)Vt=v([2e3,yt]),this._shortMonthsParse[yt]=this.monthsShort(Vt,"").toLocaleLowerCase(),this._longMonthsParse[yt]=this.months(Vt,"").toLocaleLowerCase();return qe?Be==="MMM"?(ft=ke.call(this._shortMonthsParse,Mt))!==-1?ft:null:(ft=ke.call(this._longMonthsParse,Mt))!==-1?ft:null:Be==="MMM"?(ft=ke.call(this._shortMonthsParse,Mt))!==-1||(ft=ke.call(this._longMonthsParse,Mt))!==-1?ft:null:(ft=ke.call(this._longMonthsParse,Mt))!==-1||(ft=ke.call(this._shortMonthsParse,Mt))!==-1?ft:null}).call(this,g,w,R);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),H=0;H<12;H++)if(te=v([2e3,H]),R&&!this._longMonthsParse[H]&&(this._longMonthsParse[H]=new RegExp("^"+this.months(te,"").replace(".","")+"$","i"),this._shortMonthsParse[H]=new RegExp("^"+this.monthsShort(te,"").replace(".","")+"$","i")),R||this._monthsParse[H]||(te="^"+this.months(te,"")+"|^"+this.monthsShort(te,""),this._monthsParse[H]=new RegExp(te.replace(".",""),"i")),R&&w==="MMMM"&&this._longMonthsParse[H].test(g)||R&&w==="MMM"&&this._shortMonthsParse[H].test(g)||!R&&this._monthsParse[H].test(g))return H},Ft.monthsRegex=function(g){return this._monthsParseExact?(s(this,"_monthsRegex")||wt.call(this),g?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=lt),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)},Ft.monthsShortRegex=function(g){return this._monthsParseExact?(s(this,"_monthsRegex")||wt.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Ee),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)},Ft.week=function(g){return zi(g,this._week.dow,this._week.doy).week},Ft.firstDayOfYear=function(){return this._week.doy},Ft.firstDayOfWeek=function(){return this._week.dow},Ft.weekdays=function(g,w){return w=r(this._weekdays)?this._weekdays:this._weekdays[g&&g!==!0&&this._weekdays.isFormat.test(w)?"format":"standalone"],g===!0?Ni(w,this._week.dow):g?w[g.day()]:w},Ft.weekdaysMin=function(g){return g===!0?Ni(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin},Ft.weekdaysShort=function(g){return g===!0?Ni(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort},Ft.weekdaysParse=function(g,w,R){var H,te;if(this._weekdaysParseExact)return(function(Mt,Be,qe){var yt,ft,Vt,Mt=Mt.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],yt=0;yt<7;++yt)Vt=v([2e3,1]).day(yt),this._minWeekdaysParse[yt]=this.weekdaysMin(Vt,"").toLocaleLowerCase(),this._shortWeekdaysParse[yt]=this.weekdaysShort(Vt,"").toLocaleLowerCase(),this._weekdaysParse[yt]=this.weekdays(Vt,"").toLocaleLowerCase();return qe?Be==="dddd"?(ft=ke.call(this._weekdaysParse,Mt))!==-1?ft:null:Be==="ddd"?(ft=ke.call(this._shortWeekdaysParse,Mt))!==-1?ft:null:(ft=ke.call(this._minWeekdaysParse,Mt))!==-1?ft:null:Be==="dddd"?(ft=ke.call(this._weekdaysParse,Mt))!==-1||(ft=ke.call(this._shortWeekdaysParse,Mt))!==-1||(ft=ke.call(this._minWeekdaysParse,Mt))!==-1?ft:null:Be==="ddd"?(ft=ke.call(this._shortWeekdaysParse,Mt))!==-1||(ft=ke.call(this._weekdaysParse,Mt))!==-1||(ft=ke.call(this._minWeekdaysParse,Mt))!==-1?ft:null:(ft=ke.call(this._minWeekdaysParse,Mt))!==-1||(ft=ke.call(this._weekdaysParse,Mt))!==-1||(ft=ke.call(this._shortWeekdaysParse,Mt))!==-1?ft:null}).call(this,g,w,R);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),H=0;H<7;H++)if(te=v([2e3,1]).day(H),R&&!this._fullWeekdaysParse[H]&&(this._fullWeekdaysParse[H]=new RegExp("^"+this.weekdays(te,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[H]=new RegExp("^"+this.weekdaysShort(te,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[H]=new RegExp("^"+this.weekdaysMin(te,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[H]||(te="^"+this.weekdays(te,"")+"|^"+this.weekdaysShort(te,"")+"|^"+this.weekdaysMin(te,""),this._weekdaysParse[H]=new RegExp(te.replace(".",""),"i")),R&&w==="dddd"&&this._fullWeekdaysParse[H].test(g)||R&&w==="ddd"&&this._shortWeekdaysParse[H].test(g)||R&&w==="dd"&&this._minWeekdaysParse[H].test(g)||!R&&this._weekdaysParse[H].test(g))return H},Ft.weekdaysRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ti.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Se),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)},Ft.weekdaysShortRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ti.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xe),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ft.weekdaysMinRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ti.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xt),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ft.isPM=function(g){return(g+"").toLowerCase().charAt(0)==="p"},Ft.meridiem=function(g,w,R){return 11<g?R?"pm":"PM":R?"am":"AM"},tr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var w=g%10;return g+(ze(g%100/10)===1?"th":w==1?"st":w==2?"nd":w==3?"rd":"th")}}),n.lang=Z("moment.lang is deprecated. Use moment.locale instead.",tr),n.langData=Z("moment.langData is deprecated. Use moment.localeData instead.",mr);var xr=Math.abs;function Ol(g,w,R,H){return w=Oi(w,R),g._milliseconds+=H*w._milliseconds,g._days+=H*w._days,g._months+=H*w._months,g._bubble()}function xs(g){return g<0?Math.floor(g):Math.ceil(g)}function Al(g){return 4800*g/146097}function Ts(g){return 146097*g/4800}function nn(g){return function(){return this.as(g)}}Pe=nn("ms"),ge=nn("s"),z=nn("m"),re=nn("h"),X=nn("d"),Bn=nn("w"),We=nn("M"),Ki=nn("Q"),wr=nn("y");function To(g){return function(){return this.isValid()?this._data[g]:NaN}}var rn=To("milliseconds"),qn=To("seconds"),Oo=To("minutes"),Ft=To("hours"),Qs=To("days"),Js=To("months"),$i=To("years"),Un=Math.round,Ao={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function fd(g,w,R,H){var ft=Oi(g).abs(),Vt=Un(ft.as("s")),te=Un(ft.as("m")),we=Un(ft.as("h")),Be=Un(ft.as("d")),qe=Un(ft.as("M")),yt=Un(ft.as("w")),ft=Un(ft.as("y")),Vt=(Vt<=R.ss?["s",Vt]:Vt<R.s&&["ss",Vt])||te<=1&&["m"]||te<R.m&&["mm",te]||we<=1&&["h"]||we<R.h&&["hh",we]||Be<=1&&["d"]||Be<R.d&&["dd",Be];return(Vt=(Vt=R.w!=null?Vt||yt<=1&&["w"]||yt<R.w&&["ww",yt]:Vt)||qe<=1&&["M"]||qe<R.M&&["MM",qe]||ft<=1&&["y"]||["yy",ft])[2]=w,Vt[3]=0<+g,Vt[4]=H,(function(Mt,qi,an,Zi,is){return is.relativeTime(qi||1,!!an,Mt,Zi)}).apply(null,Vt)}var Os=Math.abs;function ts(g){return(0<g)-(g<0)||+g}function el(){if(!this.isValid())return this.localeData().invalidDate();var g,w,R,H,te,we,Be,qe=Os(this._milliseconds)/1e3,yt=Os(this._days),ft=Os(this._months),Vt=this.asSeconds();return Vt?(g=ot(qe/60),w=ot(g/60),qe%=60,g%=60,R=ot(ft/12),ft%=12,H=qe?qe.toFixed(3).replace(/\.?0+$/,""):"",te=ts(this._months)!==ts(Vt)?"-":"",we=ts(this._days)!==ts(Vt)?"-":"",Be=ts(this._milliseconds)!==ts(Vt)?"-":"",(Vt<0?"-":"")+"P"+(R?te+R+"Y":"")+(ft?te+ft+"M":"")+(yt?we+yt+"D":"")+(w||g||qe?"T":"")+(w?Be+w+"H":"")+(g?Be+g+"M":"")+(qe?Be+H+"S":"")):"P0D"}var hi=ui.prototype;return hi.isValid=function(){return this._isValid},hi.abs=function(){var g=this._data;return this._milliseconds=xr(this._milliseconds),this._days=xr(this._days),this._months=xr(this._months),g.milliseconds=xr(g.milliseconds),g.seconds=xr(g.seconds),g.minutes=xr(g.minutes),g.hours=xr(g.hours),g.months=xr(g.months),g.years=xr(g.years),this},hi.add=function(g,w){return Ol(this,g,w,1)},hi.subtract=function(g,w){return Ol(this,g,w,-1)},hi.as=function(g){if(!this.isValid())return NaN;var w,R,H=this._milliseconds;if((g=Ue(g))==="month"||g==="quarter"||g==="year")switch(w=this._days+H/864e5,R=this._months+Al(w),g){case"month":return R;case"quarter":return R/3;case"year":return R/12}else switch(w=this._days+Math.round(Ts(this._months)),g){case"week":return w/7+H/6048e5;case"day":return w+H/864e5;case"hour":return 24*w+H/36e5;case"minute":return 1440*w+H/6e4;case"second":return 86400*w+H/1e3;case"millisecond":return Math.floor(864e5*w)+H;default:throw new Error("Unknown unit "+g)}},hi.asMilliseconds=Pe,hi.asSeconds=ge,hi.asMinutes=z,hi.asHours=re,hi.asDays=X,hi.asWeeks=Bn,hi.asMonths=We,hi.asQuarters=Ki,hi.asYears=wr,hi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ze(this._months/12):NaN},hi._bubble=function(){var g=this._milliseconds,w=this._days,R=this._months,H=this._data;return 0<=g&&0<=w&&0<=R||g<=0&&w<=0&&R<=0||(g+=864e5*xs(Ts(R)+w),R=w=0),H.milliseconds=g%1e3,g=ot(g/1e3),H.seconds=g%60,g=ot(g/60),H.minutes=g%60,g=ot(g/60),H.hours=g%24,w+=ot(g/24),R+=g=ot(Al(w)),w-=xs(Ts(g)),g=ot(R/12),R%=12,H.days=w,H.months=R,H.years=g,this},hi.clone=function(){return Oi(this)},hi.get=function(g){return g=Ue(g),this.isValid()?this[g+"s"]():NaN},hi.milliseconds=rn,hi.seconds=qn,hi.minutes=Oo,hi.hours=Ft,hi.days=Qs,hi.weeks=function(){return ot(this.days()/7)},hi.months=Js,hi.years=$i,hi.humanize=function(g,w){if(!this.isValid())return this.localeData().invalidDate();var R=!1,H=Ao;return typeof g=="object"&&(w=g,g=!1),typeof g=="boolean"&&(R=g),typeof w=="object"&&(H=Object.assign({},Ao,w),w.s!=null&&w.ss==null&&(H.ss=w.s-1)),g=this.localeData(),w=fd(this,!R,H,g),R&&(w=g.pastFuture(+this,w)),g.postformat(w)},hi.toISOString=el,hi.toString=el,hi.toJSON=el,hi.locale=Es,hi.localeData=ki,hi.toIsoString=Z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",el),hi.lang=Ct,De("X",0,0,"unix"),De("x",0,0,"valueOf"),Le("x",me),Le("X",/[+-]?\d+(\.\d{1,3})?/),G("X",function(g,w,R){R._d=new Date(1e3*parseFloat(g))}),G("x",function(g,w,R){R._d=new Date(ze(g))}),n.version="2.29.4",e=dt,n.fn=ee,n.min=function(){return At("isBefore",[].slice.call(arguments,0))},n.max=function(){return At("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=v,n.unix=function(g){return dt(1e3*g)},n.months=function(g,w){return Kn(g,w,"months")},n.isDate=c,n.locale=tr,n.invalid=x,n.duration=Oi,n.isMoment=M,n.weekdays=function(g,w,R){return Zs(g,w,R,"weekdays")},n.parseZone=function(){return dt.apply(null,arguments).parseZone()},n.localeData=mr,n.isDuration=Ci,n.monthsShort=function(g,w){return Kn(g,w,"monthsShort")},n.weekdaysMin=function(g,w,R){return Zs(g,w,R,"weekdaysMin")},n.defineLocale=Co,n.updateLocale=function(g,w){var R,H;return w!=null?(H=Gn,Kt[g]!=null&&Kt[g].parentLocale!=null?Kt[g].set(J(Kt[g]._config,w)):(w=J(H=(R=er(g))!=null?R._config:H,w),R==null&&(w.abbr=g),(H=new U(w)).parentLocale=Kt[g],Kt[g]=H),tr(g)):Kt[g]!=null&&(Kt[g].parentLocale!=null?(Kt[g]=Kt[g].parentLocale,g===tr()&&tr(g)):Kt[g]!=null&&delete Kt[g]),Kt[g]},n.locales=function(){return F(Kt)},n.weekdaysShort=function(g,w,R){return Zs(g,w,R,"weekdaysShort")},n.normalizeUnits=Ue,n.relativeTimeRounding=function(g){return g===void 0?Un:typeof g=="function"&&(Un=g,!0)},n.relativeTimeThreshold=function(g,w){return Ao[g]!==void 0&&(w===void 0?Ao[g]:(Ao[g]=w,g==="s"&&(Ao.ss=w-1),!0))},n.calendarFormat=function(g,w){return(g=g.diff(w,"days",!0))<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"},n.prototype=ee,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})})(Ap);var kp=Ap.exports;const Us=eh(kp),hs=pl({__proto__:null,default:Us},[kp]);class je{}je.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},je.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},je.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2,je.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2,je.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2,je.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4,je.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0,je.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".",je.DEFAULT_NUMBER_THOUSAND_SEPARATOR="",je.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1,je.SLIDER_DEFAULT_MIN_VALUE=0,je.SLIDER_DEFAULT_MAX_VALUE=100,je.SLIDER_DEFAULT_STEP=1,je.VALIDATION_REQUIRED_FIELD="Field is required",je.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",je.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",je.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",je.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",je.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",je.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",je.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",je.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",je.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var th;(function(a){a[a.camelCase=0]="camelCase",a[a.pascalCase=1]="pascalCase",a[a.snakeCase=2]="snakeCase",a[a.kebabCase=3]="kebabCase"})(th||(th={}));var fs;(function(a){a.colon=":",a.comma=",",a.equalSign="=",a.pipe="|",a.semicolon=";",a.space=" ",a.tab="	",a.doubleColon="::",a.doublePipe="||",a.doubleSemicolon=";;"})(fs||(fs={}));var ii;(function(a){a.autoTooltip="autoTooltip",a.cellExternalCopyManager="cellExternalCopyManager",a.cellMenu="cellMenu",a.checkboxSelector="checkboxSelector",a.columnPicker="columnPicker",a.contextMenu="contextMenu",a.customTooltip="customTooltip",a.draggableGrouping="draggableGrouping",a.groupItemMetaProvider="groupItemMetaProvider",a.gridMenu="gridMenu",a.headerButton="headerButton",a.headerMenu="headerMenu",a.rowDetailView="rowDetailView",a.rowMoveManager="rowMoveManager",a.rowSelection="rowSelection"})(ii||(ii={}));const ie={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var dn;(function(a){a.csv="csv",a.txt="txt",a.xls="xls",a.xlsx="xlsx"})(dn||(dn={}));var Vl;(function(a){a.merge="merge",a.chain="chain"})(Vl||(Vl={}));var Yd;(function(a){a.none="NOA",a.legacyOff="LOF",a.legacyForceFit="LFF",a.ignoreViewport="IGV",a.fitColsToViewport="FCV",a.fitViewportToCols="FVC"})(Yd||(Yd={}));var ur;(function(a){a.columns="columns",a.filter="filter",a.pagination="pagination",a.pinning="pinning",a.rowSelection="rowSelection",a.sorter="sorter",a.treeData="treeData"})(ur||(ur={}));var xi;(function(a){a[a.C=67]="C",a[a.V=86]="V",a[a.BACKSPACE=8]="BACKSPACE",a[a.DELETE=46]="DELETE",a[a.DOWN=40]="DOWN",a[a.END=35]="END",a[a.ENTER=13]="ENTER",a[a.ESCAPE=27]="ESCAPE",a[a.HOME=36]="HOME",a[a.INSERT=45]="INSERT",a[a.LEFT=37]="LEFT",a[a.PAGE_DOWN=34]="PAGE_DOWN",a[a.PAGE_UP=33]="PAGE_UP",a[a.RIGHT=39]="RIGHT",a[a.TAB=9]="TAB",a[a.UP=38]="UP",a[a.SPACE=32]="SPACE"})(xi||(xi={}));var Nt;(function(a){a.empty="",a.contains="Contains",a.notContains="Not_Contains",a.lessThan="LT",a.lessThanOrEqual="LE",a.greaterThan="GT",a.greaterThanOrEqual="GE",a.notEqual="NE",a.equal="EQ",a.endsWith="EndsWith",a.rangeInclusive="RangeInclusive",a.rangeExclusive="RangeExclusive",a.startsWith="StartsWith",a.in="IN",a.notIn="NOT_IN",a.inContains="IN_CONTAINS",a.notInContains="NOT_IN_CONTAINS",a.inCollection="IN_COLLECTION",a.notInCollection="NOT_IN_COLLECTION"})(Nt||(Nt={}));var Do;(function(a){a.asc="asc",a.ASC="ASC",a.desc="desc",a.DESC="DESC"})(Do||(Do={}));var ji;(function(a){a[a.asc=1]="asc",a[a.desc=-1]="desc",a[a.neutral=0]="neutral"})(ji||(ji={}));var ps;(function(a){a.toggleCollapse="toggle-collapse",a.fullExpand="full-expand",a.fullCollapse="full-collapse",a.toggleExpand="toggle-expand"})(ps||(ps={}));const ih=Object.freeze(Object.defineProperty({__proto__:null,get CaseType(){return th},get DelimiterType(){return fs},get EmitterType(){return Ji},get ExtensionName(){return ii},FieldType:ie,get FileType(){return dn},get FilterMultiplePassType(){return Vl},get GridAutosizeColsMode(){return Yd},get GridStateType(){return ur},get KeyCode(){return xi},get OperatorType(){return Nt},get SortDirection(){return Do},get SortDirectionNumber(){return ji},get ToggleStateChangeType(){return ps}},Symbol.toStringTag,{value:"Module"})),n_=Us||hs;class La extends Error{constructor(t){super(t),Object.setPrototypeOf(this,La.prototype)}}function Ip(a){let t=!1;return a instanceof Promise?{promise:a.then(e=>{if(t)throw new La("Cancelled Promise");return e}),cancel:()=>t=!0}:a}function Dp(a,t,e=""){let n=t;if(t instanceof Promise)return t;if(a.isObservable(t)&&(n=a.firstValueFrom(t)),!(n instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${e} is not able to convert the Observable into a Promise.`);return n}function jd(a,t,e=0){var n;const r=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP;if(Array.isArray(a))for(const o of a)o&&(Array.isArray(o[r])&&o[r].length>0&&(e++,jd(o[r],t,e),e--),o[t.levelPropName]=e)}function Ha(a,t,e=0,n=null){var r;const o=(r=t==null?void 0:t.childrenPropName)!==null&&r!==void 0?r:je.treeDataProperties.CHILDREN_PROP,{aggregator:s}=t;if(Array.isArray(a)){for(const l of a)if(l){const u=Array.isArray(l[o]);Array.isArray(l[o])&&l[o].length>0&&(s.init(l,!0),e++,Ha(l[o],t,e,l),e--),n&&s.isInitialized&&typeof s.accumulate=="function"&&!(l!=null&&l.__filteredOut)&&(s.accumulate(l,u),s.storeResult(n.__treeTotals)),l[t.levelPropName]=e}}}function Rp(a,t){var e,n,r,o,s;const l=(e=t==null?void 0:t.identifierPropName)!==null&&e!==void 0?e:"id",u=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP,h=(r=t==null?void 0:t.hasChildrenPropName)!==null&&r!==void 0?r:je.treeDataProperties.HAS_CHILDREN_PROP,c=(o=t==null?void 0:t.parentPropName)!==null&&o!==void 0?o:je.treeDataProperties.PARENT_PROP,p=(s=t==null?void 0:t.levelPropName)!==null&&s!==void 0?s:je.treeDataProperties.TREE_LEVEL_PROP;return t!=null&&t.shouldAddTreeLevelNumber&&(t!=null&&t.aggregators?t.aggregators.forEach(v=>{Ha(a,{childrenPropName:u,levelPropName:p,aggregator:v})}):jd(a,{childrenPropName:u,levelPropName:p})),i_(a,v=>v[u],(v,_)=>({[l]:v[l],[c]:_!==void 0?_[l]:null,[h]:!!v[u],...Fp(v,u)}))}function Pp(a,t){var e,n,r,o,s;const l=(e=t==null?void 0:t.identifierPropName)!==null&&e!==void 0?e:"id",u=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP,h=(r=t==null?void 0:t.parentPropName)!==null&&r!==void 0?r:je.treeDataProperties.PARENT_PROP,c=(o=t==null?void 0:t.levelPropName)!==null&&o!==void 0?o:je.treeDataProperties.TREE_LEVEL_PROP,p=(s=t==null?void 0:t.collapsedPropName)!==null&&s!==void 0?s:je.treeDataProperties.COLLAPSED_PROP,m=a||[],v=[],_={};return m.forEach(C=>_[C[l]]=C),Object.keys(_).forEach(C=>{var x;const S=_[C];if(!(h in S)||S[h]===null||S[h]===void 0||S[h]==="")v.push(S);else if(S[h]in _){const E=_[S[h]];u in E||(E[u]=[]),E[u].push(S),E[p]===void 0&&(E[p]=(x=t==null?void 0:t.initiallyCollapsed)!==null&&x!==void 0?x:!1)}}),t!=null&&t.aggregators?t.aggregators.forEach(C=>{Ha(v,{childrenPropName:u,levelPropName:c,aggregator:C},0)}):jd(v,{childrenPropName:u,levelPropName:c},0),v}function Ba(a,t,e){if(!e)throw new Error('findRecursive requires parameter "childrenPropertyName"');const n=a.find(t),r=a.filter(o=>(o==null?void 0:o.hasOwnProperty(e))&&o[e]);if(n)return n;if(r.length){const o=[];return r.forEach(s=>{s!=null&&s.hasOwnProperty(e)&&o.push(...s[e])}),Ba(o,t,e)}}function Ws(a,t,e,n=".",r=""){if(isNaN(+a))return a;const o=t===void 0?2:t,s=e===void 0?2:e;let l=String(Math.round(+a*Math.pow(10,s))/Math.pow(10,s));for(l.indexOf(".")<0&&o>0&&(l+=".");l.length-l.indexOf(".")<=o;)l+="0";const u=l.split(".");let h,c;r?h=u.length>=1?ms(u[0],r):void 0:h=u.length>=1?u[0]:l,u.length>1&&(c=u[1]);let p="";return h!==void 0&&c!==void 0?p=`${h}${n}${c}`:h!=null&&(p=h),p}function wn(a,t,e,n,r="",o="",s=".",l=""){if(isNaN(+a))return a;const u=Math.round(parseFloat(a)*1e6)/1e6;if(u<0){const h=Math.abs(u);if(n){if(!isNaN(t)||!isNaN(e))return`(${r}${Ws(h,t,e,s,l)}${o})`;const c=ms(`${h}`,l);return`(${r}${c}${o})`}else{if(!isNaN(t)||!isNaN(e))return`-${r}${Ws(h,t,e,s,l)}${o}`;const c=ms(`${h}`,l);return`-${r}${c}${o}`}}else{if(!isNaN(t)||!isNaN(e))return`${r}${Ws(a,t,e,s,l)}${o}`;const h=ms(`${a}`,l);return`${r}${h}${o}`}}function Va(a,t,e){if(typeof a.queryFieldNameGetterFn=="function"){const n=a.queryFieldNameGetterFn(t);(n==null?void 0:n.indexOf("."))>=0?e=_n(t,n):e=t.hasOwnProperty(n)?t[n]:e}return e}function _n(a,t){return!a||!t?a:t.split(".").reduce((e,n)=>e&&e[n],a)}function ho(a){return a&&a.translationNamespace?a.translationNamespace+(a.translationNamespaceSeparator||""):""}function za(a){return a.outputType||a.type||ie.string}function nh(a){switch(a){case ie.date:case ie.dateTime:case ie.dateIso:case ie.dateTimeIso:case ie.dateTimeShortIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeEuro:case ie.dateTimeShortEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeUs:case ie.dateTimeShortUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:case ie.dateUtc:return!0;default:return!1}}function Fr(a){let t;switch(a){case ie.dateTime:case ie.dateTimeIso:t="YYYY-MM-DD HH:mm:ss";break;case ie.dateTimeIsoAmPm:t="YYYY-MM-DD hh:mm:ss a";break;case ie.dateTimeIsoAM_PM:t="YYYY-MM-DD hh:mm:ss A";break;case ie.dateTimeShortIso:t="YYYY-MM-DD HH:mm";break;case ie.dateEuro:t="DD/MM/YYYY";break;case ie.dateEuroShort:t="D/M/YY";break;case ie.dateTimeEuro:t="DD/MM/YYYY HH:mm:ss";break;case ie.dateTimeShortEuro:t="DD/MM/YYYY HH:mm";break;case ie.dateTimeEuroAmPm:t="DD/MM/YYYY hh:mm:ss a";break;case ie.dateTimeEuroAM_PM:t="DD/MM/YYYY hh:mm:ss A";break;case ie.dateTimeEuroShort:t="D/M/YY H:m:s";break;case ie.dateTimeEuroShortAmPm:t="D/M/YY h:m:s a";break;case ie.dateTimeEuroShortAM_PM:t="D/M/YY h:m:s A";break;case ie.dateUs:t="MM/DD/YYYY";break;case ie.dateUsShort:t="M/D/YY";break;case ie.dateTimeUs:t="MM/DD/YYYY HH:mm:ss";break;case ie.dateTimeUsAmPm:t="MM/DD/YYYY hh:mm:ss a";break;case ie.dateTimeUsAM_PM:t="MM/DD/YYYY hh:mm:ss A";break;case ie.dateTimeUsShort:t="M/D/YY H:m:s";break;case ie.dateTimeUsShortAmPm:t="M/D/YY h:m:s a";break;case ie.dateTimeUsShortAM_PM:t="M/D/YY h:m:s A";break;case ie.dateTimeShortUs:t="MM/DD/YYYY HH:mm";break;case ie.dateUtc:t="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case ie.date:case ie.dateIso:default:t="YYYY-MM-DD";break}return t}function Ua(a){let t;switch(a){case ie.dateTime:case ie.dateTimeIso:t="Y-m-d H:i:S";break;case ie.dateTimeShortIso:t="Y-m-d H:i";break;case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:t="Y-m-d h:i:S K";break;case ie.dateEuro:t="d/m/Y";break;case ie.dateEuroShort:t="d/m/y";break;case ie.dateTimeEuro:t="d/m/Y H:i:S";break;case ie.dateTimeShortEuro:t="d/m/y H:i";break;case ie.dateTimeEuroAmPm:t="d/m/Y h:i:S K";break;case ie.dateTimeEuroAM_PM:t="d/m/Y h:i:s K";break;case ie.dateTimeEuroShort:t="d/m/y H:i:s";break;case ie.dateTimeEuroShortAmPm:t="d/m/y h:i:s K";break;case ie.dateUs:t="m/d/Y";break;case ie.dateUsShort:t="m/d/y";break;case ie.dateTimeUs:t="m/d/Y H:i:S";break;case ie.dateTimeShortUs:t="m/d/y H:i";break;case ie.dateTimeUsAmPm:t="m/d/Y h:i:S K";break;case ie.dateTimeUsAM_PM:t="m/d/Y h:i:s K";break;case ie.dateTimeUsShort:t="m/d/y H:i:s";break;case ie.dateTimeUsShortAmPm:t="m/d/y h:i:s K";break;case ie.dateUtc:t="Z";break;case ie.date:case ie.dateIso:default:t="Y-m-d";break}return t}function r_(a){let t;switch(a){case"<":case"LT":t=Nt.lessThan;break;case"<=":case"LE":t=Nt.lessThanOrEqual;break;case">":case"GT":t=Nt.greaterThan;break;case">=":case"GE":t=Nt.greaterThanOrEqual;break;case"<>":case"!=":case"NE":t=Nt.notEqual;break;case"*":case"a*":case"StartsWith":t=Nt.startsWith;break;case"*z":case"EndsWith":t=Nt.endsWith;break;case"=":case"==":case"EQ":t=Nt.equal;break;case"IN":t=Nt.in;break;case"NIN":case"NOT_IN":t=Nt.notIn;break;case"Not_Contains":case"NOT_CONTAINS":t=Nt.notContains;break;case"Contains":case"CONTAINS":default:t=Nt.contains;break}return t}function zl(a){let t="";switch(a){case Nt.greaterThan:case">":t=">";break;case Nt.greaterThanOrEqual:case">=":t=">=";break;case Nt.lessThan:case"<":t="<";break;case Nt.lessThanOrEqual:case"<=":t="<=";break;case Nt.notEqual:case"<>":t="<>";break;case Nt.equal:case"=":case"==":case"EQ":t="=";break;case Nt.startsWith:case"a*":case"*":t="a*";break;case Nt.endsWith:case"*z":t="*z";break;default:t=a;break}return t}function rh(a){let t;if(nh(a))t=Nt.equal;else switch(a){case ie.unknown:case ie.string:case ie.text:case ie.password:case ie.readonly:t=Nt.contains;break;case ie.float:case ie.number:default:t=Nt.equal;break}return t}function Fp(a,t){return Object.keys(a).reduce((e,n)=>(n!==t&&(e[n]=a[n]),e),{})}function o_(a,t){let e="";if(typeof a=="string"&&/^[0-9\-\/]*$/.test(a)){const n=decodeURIComponent(a),r=n_(new Date(n));r.isValid()&&r.year().toString().length===4&&(e=t?r.utc().format():r.format())}return e}function ms(a,t=","){if(a!=null){const e=`${a}`,n=e.split(".");return n.length===2?`${n[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)}.${n[1]}`:e.replace(/\B(?=(\d{3})+(?!\d))/g,t)}return a}function vs(a,t,e={}){return Array.isArray(a)?a.find(t)||e:a}function Xd(a){if(Array.isArray(a))for(;a.length>0;){const t=a.pop();t!=null&&t.unsubscribe&&t.unsubscribe()}return a}const s_=Object.freeze(Object.defineProperty({__proto__:null,CancelledException:La,addTreeLevelAndAggregatorsByMutation:Ha,addTreeLevelByMutation:jd,cancellablePromise:Ip,castObservableToPromise:Dp,decimalFormatted:Ws,findItemInTreeStructure:Ba,findOrDefault:vs,flattenToParentChildArray:Rp,formatNumber:wn,getCellValueFromQueryFieldGetter:Va,getColumnFieldType:za,getDescendantProperty:_n,getTranslationPrefix:ho,isColumnDateType:nh,mapFlatpickrDateFormatWithFieldType:Ua,mapMomentDateFormatWithFieldType:Fr,mapOperatorByFieldType:rh,mapOperatorToShorthandDesignation:zl,mapOperatorType:r_,objectWithoutKey:Fp,parseUtcDate:o_,thousandSeparatorFormatted:ms,unflattenParentChildArrayToTree:Pp,unsubscribeAll:Xd},Symbol.toStringTag,{value:"Module"})),l_=(a,t,e)=>{e==null&&(e=ji.neutral);let n=0;return a===t?n=0:a===null?n=-1:t===null?n=1:e?n=a<t?-1:1:n=a<t?1:-1,e*n},a_=(a,t,e,n,r)=>{var o,s;if(!n||!n.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const l=a!=null&&a.hasOwnProperty(n.dataKey)?a[n.dataKey]:a,u=t!=null&&t.hasOwnProperty(n.dataKey)?t[n.dataKey]:t,h=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1;e==null&&(e=ji.neutral);let c=0;return typeof a!="object"?c=-99e10:typeof t!="object"?c=99e10:l===null||h&&l===void 0?c=-1:u===null||h&&u===void 0?c=1:l===u?c=0:e?c=l<u?-1:1:c=l<u?1:-1,e*c};function d_(a,t,e="id"){let n=-1;t&&typeof t=="object"&&e in t?n=a.findIndex(r=>r[e]===t[e]):n=a.findIndex(r=>r===t),n<0&&a.push(t)}function Wa(a,t=" "){let e="";for(let n=0;n<a;n++)e+=t;return e}function oh(a,t){return a.filter((e,n)=>t!==n)}function fo(a){const t=()=>{const r={};for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=fo(a[o]));return r},e=()=>a.map(r=>fo(r)),n=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();return n==="object"?t():n==="array"?e():a}function ml(a,...t){if(!t.length)return a;const e=t.shift();if(a=!Xo(a)&&Xo(e)?{}:a,Xo(a)&&Xo(e))for(const n in e)e.hasOwnProperty(n)&&(n in a?typeof a[n]!="object"||typeof e[n]!="object"?a[n]=e[n]:a[n].concat&&e[n].concat?a[n]=a[n].concat(e[n]):a[n]=ml(a[n],e[n]):a[n]=e[n]);return ml(a,...t)}function sh(a,...t){if(!t.length||t[0]===void 0)return a;const e=t.shift();if(a=!Xo(a)&&Xo(e)?{}:a,Xo(a)&&Xo(e))for(const n of Object.keys(e))typeof e[n]=="object"&&e[n]!==null&&sh(a[n],e[n]),(a[n]===null||a[n]===void 0)&&e[n]!==null&&e[n]!==void 0&&(a[n]=e[n]);return sh(a,...t)}function Mp(a){for(const t in a)a.hasOwnProperty(t)&&delete a[t];return a=null,a={},a}function lh(a){return a==null?!0:Object.entries(a).length===0}function ah(a){return a!=null&&a!==""}function Xo(a){return a!==null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)}function Kd(a){return a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"}function qd(a){return a!=null&&a!==""}function en(a,t=!1){return t?a==null||typeof a=="string"?!1:!isNaN(a):a==null||a===""?!1:!isNaN(+a)}function Np(a){return!a||a&&typeof a=="object"&&Object.keys(a).length===0}function Zd(a){return/(true|1)/i.test(a+"")}function Ul(a,t=!1){const e=typeof a.normalize=="function"?a.normalize("NFD").replace(/[\u0300-\u036f]/g,""):a;return t?e.toLowerCase():e}function cr(a,t,e){if(typeof t=="string"&&(t=t.split(".")),t.length>1){const n=t.shift();a&&n!==void 0&&cr(a[n]=qd(a[n])&&(Array.isArray(a[n])||Object.prototype.toString.call(a[n])==="[object Object]")?a[n]:{},t,e)}else a&&t[0]&&(a[t[0]]=e)}function vl(a,t=!1){return typeof a=="string"?t?a.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()):a.charAt(0).toUpperCase()+a.slice(1):a}function dh(a){return typeof a=="string"?a.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,(t,e)=>/[\s+\-_\/]/.test(t)?"":e===0?t.toLowerCase():t.toUpperCase()):a}function Ga(a){return typeof a=="string"?dh(a).replace(/([A-Z])/g,"-$1").toLowerCase():a}function Kr(a){if(typeof a=="string"){const t=a.replace(/([A-Z])|(\-)/g," $1").replace(/\s+/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)}return a}function u_(a){return typeof a=="string"?dh(a).replace(/([A-Z])/g,"_$1").toLowerCase():a}function Lp(a){return Array.isArray(a)&&a.length>0?a.filter((t,e)=>a.indexOf(t)>=e):a}function c_(a,t="id"){if(Array.isArray(a)&&a.length>0){const e=[],n=new Map;for(const r of a)r&&!n.has(r[t])&&(n.set(r[t],!0),e.push({id:r[t],name:r.name}));return e}return a}const h_=Object.freeze(Object.defineProperty({__proto__:null,addToArrayWhenNotExists:d_,addWhiteSpaces:Wa,arrayRemoveItemByIndex:oh,deepCopy:fo,deepMerge:ml,emptyObject:Mp,hasData:qd,isDefined:ah,isEmptyObject:lh,isNumber:en,isObject:Xo,isObjectEmpty:Np,isPrimitiveValue:Kd,objectAssignAndExtend:sh,parseBoolean:Zd,removeAccentFromText:Ul,setDeepValue:cr,titleCase:vl,toCamelCase:dh,toKebabCase:Ga,toSentenceCase:Kr,toSnakeCase:u_,uniqueArray:Lp,uniqueObjectArray:c_},Symbol.toStringTag,{value:"Module"})),f_=(a,t,e,n,r)=>{var o,s;e==null&&(e=ji.neutral);let l=0;const u=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1;return a===t?l=0:a===null||u&&a===void 0?l=-1:t===null||u&&t===void 0?l=1:(r!=null&&r.ignoreAccentOnStringFilterAndSort&&(a=Ul(a,!1),t=Ul(t,!1)),e?l=a<t?-1:1:l=a<t?1:-1),e*l},Hp=(a,t,e,n,r)=>{var o,s;const l=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1,u=isNaN(a)||a===""||a===null||l&&a===void 0?-99e10:parseFloat(a),h=isNaN(t)||t===""||t===null||l&&t===void 0?-99e10:parseFloat(t);return e*(u===h?0:u>h?1:-1)},Qd=Us||hs;function Bp(a,t,e,n,r){let o=0;if(a===t)o=0;else{let s=Qd(a,n,r),l=Qd(t,n,r);s.isValid()||(s=new Date(1001,1,1)),l.isValid()||(l=new Date(1001,1,1)),o=s.valueOf()-l.valueOf()}return e*o}function Xi(a){const t=a===ie.date?Qd.ISO_8601:Fr(a);return(e,n,r)=>t===Qd.ISO_8601?Bp(e,n,r,t,!1):Bp(e,n,r,t,!0)}const gl={boolean:l_,date:Xi(ie.date),dateIso:Xi(ie.dateIso),dateUtc:Xi(ie.dateUtc),dateTime:Xi(ie.dateTime),dateTimeIso:Xi(ie.dateTimeIso),dateTimeIsoAmPm:Xi(ie.dateTimeIsoAmPm),dateTimeIsoAM_PM:Xi(ie.dateTimeIsoAM_PM),dateTimeShortIso:Xi(ie.dateTimeShortIso),dateEuro:Xi(ie.dateEuro),dateEuroShort:Xi(ie.dateEuroShort),dateTimeShortEuro:Xi(ie.dateTimeShortEuro),dateTimeEuro:Xi(ie.dateTimeEuro),dateTimeEuroAmPm:Xi(ie.dateTimeEuroAmPm),dateTimeEuroAM_PM:Xi(ie.dateTimeEuroAM_PM),dateTimeEuroShort:Xi(ie.dateTimeEuroShort),dateTimeEuroShortAmPm:Xi(ie.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:Xi(ie.dateTimeEuroShortAM_PM),dateUs:Xi(ie.dateUs),dateUsShort:Xi(ie.dateUsShort),dateTimeShortUs:Xi(ie.dateTimeShortUs),dateTimeUs:Xi(ie.dateTimeUs),dateTimeUsAmPm:Xi(ie.dateTimeUsAmPm),dateTimeUsAM_PM:Xi(ie.dateTimeUsAM_PM),dateTimeUsShort:Xi(ie.dateTimeUsShort),dateTimeUsShortAmPm:Xi(ie.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:Xi(ie.dateTimeUsShortAM_PM),numeric:Hp,objectString:a_,string:f_};function Wl(a,t,e,n,r,o){let s=0;switch(a){case ie.boolean:s=gl.boolean(t,e,n,r,o);break;case ie.float:case ie.integer:case ie.number:s=gl.numeric(t,e,n,r,o);break;case ie.date:case ie.dateIso:case ie.dateUtc:case ie.dateTime:case ie.dateTimeIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateTimeShortIso:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeShortEuro:case ie.dateTimeEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeShortUs:case ie.dateTimeUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:s=Xi(a).call(this,t,e,n,r,o);break;case ie.object:s=gl.objectString(t,e,n,r,o);break;case ie.string:case ie.text:case ie.password:case ie.readonly:default:s=gl.string(t,e,n,r,o);break}return s}const p_=Object.freeze(Object.defineProperty({__proto__:null,sortByFieldType:Wl},Symbol.toStringTag,{value:"Module"}));var Ro;(function(a){a.camelCase="camelCase",a.kebabCase="kebabCase",a.lowerCase="lowerCase",a.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix"})(Ro||(Ro={}));class Vp{get elementSource(){return this._elementSource}set elementSource(t){this._elementSource=t}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(t=>t.name)}constructor(t){this._subscribedEvents=[],this.eventNamingStyle=Ro.camelCase,this._elementSource=t||document.createElement("div")}dispose(){var t;this.unsubscribeAll(),this._subscribedEvents=[],clearTimeout(this._timer),(t=this._elementSource)===null||t===void 0||t.remove(),this._elementSource=null}dispatchCustomEvent(t,e,n=!0,r=!0){var o;const s={bubbles:n,cancelable:r};return e&&(s.detail=e),(o=this._elementSource)===null||o===void 0?void 0:o.dispatchEvent(new CustomEvent(t,s))}getEventNameByNamingConvention(t,e){let n="";switch(this.eventNamingStyle){case Ro.camelCase:n=e!==""?`${e}${vl(t)}`:t;break;case Ro.kebabCase:n=e!==""?`${e}-${Ga(t)}`:Ga(t);break;case Ro.lowerCase:n=`${e}${t}`.toLowerCase();break;case Ro.lowerCaseWithoutOnPrefix:n=`${e}${t.replace(/^on/,"")}`.toLowerCase();break}return n}publish(t,e,n){const r=this.getEventNameByNamingConvention(t,"");return n?new Promise(o=>{this._timer=setTimeout(()=>o(this.dispatchCustomEvent(r,e,!0,!0)),n)}):this.dispatchCustomEvent(r,e,!0,!0)}subscribe(t,e){const n=this.getEventNameByNamingConvention(t,"");return this._elementSource.addEventListener(n,r=>e.call(null,r.detail)),this._subscribedEvents.push({name:n,listener:e}),{unsubscribe:()=>this.unsubscribe(n,e)}}subscribeEvent(t,e){const n=this.getEventNameByNamingConvention(t,"");return this._elementSource.addEventListener(n,e),this._subscribedEvents.push({name:n,listener:e}),{unsubscribe:()=>this.unsubscribe(n,e)}}unsubscribe(t,e,n=!0){const r=this.getEventNameByNamingConvention(t,"");this._elementSource.removeEventListener(r,e),n&&this.removeSubscribedEventWhenFound(t,e)}unsubscribeAll(t){if(Array.isArray(t)){let e;do e=t.pop(),e!=null&&e.dispose?e.dispose():e!=null&&e.unsubscribe&&e.unsubscribe();while(e)}else{let e=this._subscribedEvents.pop();for(;e;)this.unsubscribe(e.name,e.listener,!1),e=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(t,e){const n=this._subscribedEvents.findIndex(r=>r.name===t&&r.listener===e);n>=0&&this._subscribedEvents.splice(n,1)}}var zp={exports:{}};(function(a,t){(function(e,n){a.exports=n()})(Pr,function(){function e(n){var r=document,o=n.container||r.createElement("div"),s=n.preventSubmit||0;o.id=o.id||"autocomplete-"+P();var l=o.style,u=n.debounceWaitMs||0,h=n.disableAutoSelect||!1,c=o.parentElement,p=[],m="",v=2,_=n.showOnFocus,C,x=0,S,E=!1,D=!1;if(n.minLength!==void 0&&(v=n.minLength),!n.input)throw new Error("input undefined");var A=n.input;o.className="autocomplete "+(n.className||""),o.setAttribute("role","listbox"),A.setAttribute("role","combobox"),A.setAttribute("aria-expanded","false"),A.setAttribute("aria-autocomplete","list"),A.setAttribute("aria-controls",o.id),A.setAttribute("aria-owns",o.id),A.setAttribute("aria-activedescendant",""),A.setAttribute("aria-haspopup","listbox"),l.position="absolute";function P(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function M(){var k=o.parentNode;k&&k.removeChild(o)}function B(){S&&window.clearTimeout(S)}function Z(){o.parentNode||(c||r.body).appendChild(o)}function L(){return!!o.parentNode}function de(){x++,p=[],m="",C=void 0,A.setAttribute("aria-activedescendant",""),A.setAttribute("aria-expanded","false"),M()}function be(){if(!L())return;A.setAttribute("aria-expanded","true"),l.height="auto",l.width=A.offsetWidth+"px";var k=0,ee;function ge(){var $=r.documentElement,X=$.clientTop||r.body.clientTop||0,re=$.clientLeft||r.body.clientLeft||0,Pe=window.pageYOffset||$.scrollTop,Fe=window.pageXOffset||$.scrollLeft;ee=A.getBoundingClientRect();var me=ee.top+A.offsetHeight+Pe-X,Ge=ee.left+Fe-re;l.top=me+"px",l.left=Ge+"px",k=window.innerHeight-(ee.top+A.offsetHeight),k<0&&(k=0),l.top=me+"px",l.bottom="",l.left=Ge+"px",l.maxHeight=k+"px"}ge(),ge(),n.customize&&ee&&n.customize(A,ee,o,k)}function J(){o.textContent="",A.setAttribute("aria-activedescendant","");var k=function(re,Pe,Fe){var me=r.createElement("div");return me.textContent=re.label||"",me};n.render&&(k=n.render);var ee=function(re,Pe){var Fe=r.createElement("div");return Fe.textContent=re,Fe};n.renderGroup&&(ee=n.renderGroup);var ge=r.createDocumentFragment(),$=P();if(p.forEach(function(re,Pe){if(re.group&&re.group!==$){$=re.group;var Fe=ee(re.group,m);Fe&&(Fe.className+=" group",ge.appendChild(Fe))}var me=k(re,m,Pe);me&&(me.id=o.id+"_"+Pe,me.setAttribute("role","option"),me.addEventListener("click",function(Ge){D=!0;try{n.onSelect(re,A)}finally{D=!1}de(),Ge.preventDefault(),Ge.stopPropagation()}),re===C&&(me.className+=" selected",me.setAttribute("aria-selected","true"),A.setAttribute("aria-activedescendant",me.id)),ge.appendChild(me))}),o.appendChild(ge),p.length<1)if(n.emptyMsg){var X=r.createElement("div");X.id=o.id+"_"+P(),X.className="empty",X.textContent=n.emptyMsg,o.appendChild(X),A.setAttribute("aria-activedescendant",X.id)}else{de();return}Z(),be(),Ie()}function U(){L()&&J()}function F(){U()}function ae(k){k.target!==o?U():k.preventDefault()}function Ke(){D||Ce(0)}function Ie(){var k=o.getElementsByClassName("selected");if(k.length>0){var ee=k[0],ge=ee.previousElementSibling;if(ge&&ge.className.indexOf("group")!==-1&&!ge.previousElementSibling&&(ee=ge),ee.offsetTop<o.scrollTop)o.scrollTop=ee.offsetTop;else{var $=ee.offsetTop+ee.offsetHeight,X=o.scrollTop+o.offsetHeight;$>X&&(o.scrollTop+=$-X)}}}function xe(){var k=p.indexOf(C);C=k===-1?void 0:p[(k+p.length-1)%p.length],De(k)}function Oe(){var k=p.indexOf(C);C=p.length<1?void 0:k===-1?p[0]:p[(k+1)%p.length],De(k)}function De(k){p.length>0&&(pe(k),ne(p.indexOf(C)),Ie())}function ne(k){var ee=r.getElementById(o.id+"_"+k);ee&&(ee.classList.add("selected"),ee.setAttribute("aria-selected","true"),A.setAttribute("aria-activedescendant",ee.id))}function pe(k){var ee=r.getElementById(o.id+"_"+k);ee&&(ee.classList.remove("selected"),ee.removeAttribute("aria-selected"),A.removeAttribute("aria-activedescendant"))}function Ve(k,ee){var ge=L();if(ee==="Escape")de();else{if(!ge||p.length<1)return;ee==="ArrowUp"?xe():Oe()}k.preventDefault(),ge&&k.stopPropagation()}function Ye(k){if(C){s===2&&k.preventDefault(),D=!0;try{n.onSelect(C,A)}finally{D=!1}de()}s===1&&k.preventDefault()}function Ue(k){var ee=k.key;switch(ee){case"ArrowUp":case"ArrowDown":case"Escape":Ve(k,ee);break;case"Enter":Ye(k);break}}function ce(){_&&Ce(1)}function Ce(k){A.value.length>=v||k===1?(B(),S=window.setTimeout(function(){return _e(A.value,k,A.selectionStart||0)},k===0||k===2?u:0)):de()}function _e(k,ee,ge){if(!E){var $=++x;n.fetch(k,function(X){x===$&&X&&(p=X,m=k,C=p.length<1||h?void 0:p[0],J())},ee,ge)}}function He(k){if(n.keyup){n.keyup({event:k,fetch:function(){return Ce(0)}});return}!L()&&k.key==="ArrowDown"&&Ce(0)}function ot(k){n.click&&n.click({event:k,fetch:function(){return Ce(2)}})}function ze(){setTimeout(function(){r.activeElement!==A&&de()},200)}function St(){_e(A.value,3,A.selectionStart||0)}o.addEventListener("mousedown",function(k){k.stopPropagation(),k.preventDefault()}),o.addEventListener("focus",function(){return A.focus()}),M();function ct(){A.removeEventListener("focus",ce),A.removeEventListener("keyup",He),A.removeEventListener("click",ot),A.removeEventListener("keydown",Ue),A.removeEventListener("input",Ke),A.removeEventListener("blur",ze),window.removeEventListener("resize",F),r.removeEventListener("scroll",ae,!0),A.removeAttribute("role"),A.removeAttribute("aria-expanded"),A.removeAttribute("aria-autocomplete"),A.removeAttribute("aria-controls"),A.removeAttribute("aria-activedescendant"),A.removeAttribute("aria-owns"),A.removeAttribute("aria-haspopup"),B(),de(),E=!0}return A.addEventListener("keyup",He),A.addEventListener("click",ot),A.addEventListener("keydown",Ue),A.addEventListener("input",Ke),A.addEventListener("blur",ze),A.addEventListener("focus",ce),window.addEventListener("resize",F),r.addEventListener("scroll",ae,!0),{destroy:ct,fetch:St}}return e})})(zp);var Up=zp.exports;const uh=eh(Up),Jd=pl({__proto__:null,default:uh},[Up]);function Wp(a,t){const e=t.fetch;e&&(t.fetch=(n,r,o,s)=>{a.classList.add("slick-autocomplete-loading");const l=r;e(n,h=>{l(h),a.classList.remove("slick-autocomplete-loading")},o,s)})}class Nn{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(t,e,n,r,o=""){const s=Array.isArray(e)?e:[e];if(t!=null&&t.forEach)t.forEach(l=>{for(const u of s)l.addEventListener(u,n,r),this._boundedEvents.push({element:l,eventName:u,listener:n,groupName:o})});else for(const l of s)t.addEventListener(l,n,r),this._boundedEvents.push({element:t,eventName:l,listener:n,groupName:o})}unbind(t,e,n){const r=Array.isArray(t)?t:[t],o=Array.isArray(e)?e:[e];for(const s of o)for(const l of r)typeof(l==null?void 0:l.removeEventListener)=="function"&&l.removeEventListener(s,n)}unbindAll(t){if(t){const e=Array.isArray(t)?t:[t];for(let n=this._boundedEvents.length-1;n>=0;--n){const r=this._boundedEvents[n];if(e.some(o=>o===r.groupName)){const{element:o,eventName:s,listener:l}=r;this.unbind(o,s,l),this._boundedEvents.splice(n,1)}}}else for(;this._boundedEvents.length>0;){const e=this._boundedEvents.pop(),{element:n,eventName:r,listener:o}=e;this.unbind(n,r,o)}}}class Gp{constructor(t){this.translaterService=t}filterCollection(t,e,n=Vl.chain){let r=[];if(Array.isArray(e)){r=n===Vl.merge?[]:[...t];for(const o of e)if(n===Vl.merge){const s=this.singleFilterCollection(t,o);r=Lp([...r,...s])}else r=this.singleFilterCollection(r,o)}else r=this.singleFilterCollection(t,e);return r}singleFilterCollection(t,e){let n=[];if(e){const r=e.property,o=e.operator||Nt.equal,s=typeof e.value>"u"?"":e.value;switch(o){case Nt.equal:r?n=t.filter(l=>l[r]===s):n=t.filter(l=>l===s);break;case Nt.contains:r?n=t.filter(l=>{var u;return((u=l[r])===null||u===void 0?void 0:u.toString().indexOf(s.toString()))!==-1}):n=t.filter(l=>l!=null&&l.toString().indexOf(s.toString())!==-1);break;case Nt.notContains:r?n=t.filter(l=>{var u;return((u=l[r])===null||u===void 0?void 0:u.toString().indexOf(s.toString()))===-1}):n=t.filter(l=>l!=null&&l.toString().indexOf(s.toString())===-1);break;case Nt.notEqual:default:r?n=t.filter(l=>l[r]!==s):n=t.filter(l=>l!==s)}}return n}sortCollection(t,e,n,r){var o,s,l,u;if(r&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let h=[];if(n){if(Array.isArray(n))h=e.sort((c,p)=>{var m,v,_,C;for(let x=0,S=n.length;x<S;x++){const E=n[x];if(E!=null&&E.property){const D=E.sortDesc?ji.desc:ji.asc,A=E.property,P=(v=(m=E==null?void 0:E.fieldType)!==null&&m!==void 0?m:t==null?void 0:t.type)!==null&&v!==void 0?v:ie.string,M=r?((_=this.translaterService)===null||_===void 0?void 0:_.translate)&&this.translaterService.translate(c[A]||" "):c[A],B=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(p[A]||" "):p[A],Z=Wl(P,M,B,D,t);if(Z!==ji.neutral)return Z}}return ji.neutral});else if(n!=null&&n.property){const c=n.property,p=n.sortDesc?ji.desc:ji.asc,m=(s=(o=n==null?void 0:n.fieldType)!==null&&o!==void 0?o:t==null?void 0:t.type)!==null&&s!==void 0?s:ie.string;h=e.sort((v,_)=>{var C,x;const S=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(v[c]||" "):v[c],E=r?((x=this.translaterService)===null||x===void 0?void 0:x.translate)&&this.translaterService.translate(_[c]||" "):_[c],D=Wl(m,S,E,p,t);return D!==ji.neutral?D:ji.neutral})}else if(n&&!n.property){const c=n.sortDesc?ji.desc:ji.asc,p=(u=(l=n==null?void 0:n.fieldType)!==null&&l!==void 0?l:t==null?void 0:t.type)!==null&&u!==void 0?u:ie.string;h=e.sort((m,v)=>{var _,C;const x=r?((_=this.translaterService)===null||_===void 0?void 0:_.translate)&&this.translaterService.translate(m||" "):m,S=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(v||" "):v,E=Wl(p,x,S,c,t);return E!==ji.neutral?E:ji.neutral})}}return h}}/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:$p,setPrototypeOf:Yp,isFrozen:m_,getPrototypeOf:v_,getOwnPropertyDescriptor:jp}=Object;let{freeze:Cr,seal:Po,create:Xp}=Object,{apply:ch,construct:hh}=typeof Reflect<"u"&&Reflect;Cr||(Cr=function(t){return t}),Po||(Po=function(t){return t}),ch||(ch=function(t,e,n){return t.apply(e,n)}),hh||(hh=function(t,e){return new t(...e)});const eu=po(Array.prototype.forEach),Kp=po(Array.prototype.pop),$a=po(Array.prototype.push),tu=po(String.prototype.toLowerCase),fh=po(String.prototype.toString),g_=po(String.prototype.match),Ya=po(String.prototype.replace),__=po(String.prototype.indexOf),b_=po(String.prototype.trim),qr=po(RegExp.prototype.test),ja=C_(TypeError);function po(a){return function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ch(a,t,n)}}function C_(a){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return hh(a,e)}}function ai(a,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tu;Yp&&Yp(a,null);let n=t.length;for(;n--;){let r=t[n];if(typeof r=="string"){const o=e(r);o!==r&&(m_(t)||(t[n]=o),r=o)}a[r]=!0}return a}function Gl(a){const t=Xp(null);for(const[e,n]of $p(a))jp(a,e)!==void 0&&(t[e]=n);return t}function iu(a,t){for(;a!==null;){const n=jp(a,t);if(n){if(n.get)return po(n.get);if(typeof n.value=="function")return po(n.value)}a=v_(a)}function e(n){return console.warn("fallback value for",n),null}return e}const qp=Cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ph=Cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mh=Cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),y_=Cr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vh=Cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),E_=Cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zp=Cr(["#text"]),Qp=Cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),gh=Cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Jp=Cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nu=Cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),S_=Po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),w_=Po(/<%[\w\W]*|[\w\W]*%>/gm),x_=Po(/\${[\w\W]*}/gm),T_=Po(/^data-[\-\w.\u00B7-\uFFFF]/),O_=Po(/^aria-[\-\w]+$/),em=Po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),A_=Po(/^(?:\w+script|data):/i),k_=Po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tm=Po(/^html$/i);var im=Object.freeze({__proto__:null,MUSTACHE_EXPR:S_,ERB_EXPR:w_,TMPLIT_EXPR:x_,DATA_ATTR:T_,ARIA_ATTR:O_,IS_ALLOWED_URI:em,IS_SCRIPT_OR_DATA:A_,ATTR_WHITESPACE:k_,DOCTYPE_NAME:tm});const I_=function(){return typeof window>"u"?null:window},D_=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function nm(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I_();const t=Ct=>nm(Ct);if(t.version="3.0.6",t.removed=[],!a||!a.document||a.document.nodeType!==9)return t.isSupported=!1,t;let{document:e}=a;const n=e,r=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:h,NamedNodeMap:c=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:v}=a,_=u.prototype,C=iu(_,"cloneNode"),x=iu(_,"nextSibling"),S=iu(_,"childNodes"),E=iu(_,"parentNode");if(typeof s=="function"){const Ct=e.createElement("template");Ct.content&&Ct.content.ownerDocument&&(e=Ct.content.ownerDocument)}let D,A="";const{implementation:P,createNodeIterator:M,createDocumentFragment:B,getElementsByTagName:Z}=e,{importNode:L}=n;let de={};t.isSupported=typeof $p=="function"&&typeof E=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:J,TMPLIT_EXPR:U,DATA_ATTR:F,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:Ke,ATTR_WHITESPACE:Ie}=im;let{IS_ALLOWED_URI:xe}=im,Oe=null;const De=ai({},[...qp,...ph,...mh,...vh,...Zp]);let ne=null;const pe=ai({},[...Qp,...gh,...Jp,...nu]);let Ve=Object.seal(Xp(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,Ue=null,ce=!0,Ce=!0,_e=!1,He=!0,ot=!1,ze=!1,St=!1,ct=!1,k=!1,ee=!1,ge=!1,$=!0,X=!1;const re="user-content-";let Pe=!0,Fe=!1,me={},Ge=null;const mt=ai({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let We=null;const Le=ai({},["audio","video","img","source","image","track"]);let jt=null;const It=ai({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bi="http://www.w3.org/1998/Math/MathML",K="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xhtml";let ve=G,ke=!1,at=null;const st=ai({},[bi,K,G],fh);let ht=null;const Rt=["application/xhtml+xml","text/html"],Lt="text/html";let Ot=null,zt=null;const qt=e.createElement("form"),Fi=function(Se){return Se instanceof RegExp||Se instanceof Function},Mi=function(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(zt&&zt===Se)){if((!Se||typeof Se!="object")&&(Se={}),Se=Gl(Se),ht=Rt.indexOf(Se.PARSER_MEDIA_TYPE)===-1?ht=Lt:ht=Se.PARSER_MEDIA_TYPE,Ot=ht==="application/xhtml+xml"?fh:tu,Oe="ALLOWED_TAGS"in Se?ai({},Se.ALLOWED_TAGS,Ot):De,ne="ALLOWED_ATTR"in Se?ai({},Se.ALLOWED_ATTR,Ot):pe,at="ALLOWED_NAMESPACES"in Se?ai({},Se.ALLOWED_NAMESPACES,fh):st,jt="ADD_URI_SAFE_ATTR"in Se?ai(Gl(It),Se.ADD_URI_SAFE_ATTR,Ot):It,We="ADD_DATA_URI_TAGS"in Se?ai(Gl(Le),Se.ADD_DATA_URI_TAGS,Ot):Le,Ge="FORBID_CONTENTS"in Se?ai({},Se.FORBID_CONTENTS,Ot):mt,Ye="FORBID_TAGS"in Se?ai({},Se.FORBID_TAGS,Ot):{},Ue="FORBID_ATTR"in Se?ai({},Se.FORBID_ATTR,Ot):{},me="USE_PROFILES"in Se?Se.USE_PROFILES:!1,ce=Se.ALLOW_ARIA_ATTR!==!1,Ce=Se.ALLOW_DATA_ATTR!==!1,_e=Se.ALLOW_UNKNOWN_PROTOCOLS||!1,He=Se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ot=Se.SAFE_FOR_TEMPLATES||!1,ze=Se.WHOLE_DOCUMENT||!1,k=Se.RETURN_DOM||!1,ee=Se.RETURN_DOM_FRAGMENT||!1,ge=Se.RETURN_TRUSTED_TYPE||!1,ct=Se.FORCE_BODY||!1,$=Se.SANITIZE_DOM!==!1,X=Se.SANITIZE_NAMED_PROPS||!1,Pe=Se.KEEP_CONTENT!==!1,Fe=Se.IN_PLACE||!1,xe=Se.ALLOWED_URI_REGEXP||em,ve=Se.NAMESPACE||G,Ve=Se.CUSTOM_ELEMENT_HANDLING||{},Se.CUSTOM_ELEMENT_HANDLING&&Fi(Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ve.tagNameCheck=Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&Fi(Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ve.attributeNameCheck=Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&typeof Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ve.allowCustomizedBuiltInElements=Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ot&&(Ce=!1),ee&&(k=!0),me&&(Oe=ai({},[...Zp]),ne=[],me.html===!0&&(ai(Oe,qp),ai(ne,Qp)),me.svg===!0&&(ai(Oe,ph),ai(ne,gh),ai(ne,nu)),me.svgFilters===!0&&(ai(Oe,mh),ai(ne,gh),ai(ne,nu)),me.mathMl===!0&&(ai(Oe,vh),ai(ne,Jp),ai(ne,nu))),Se.ADD_TAGS&&(Oe===De&&(Oe=Gl(Oe)),ai(Oe,Se.ADD_TAGS,Ot)),Se.ADD_ATTR&&(ne===pe&&(ne=Gl(ne)),ai(ne,Se.ADD_ATTR,Ot)),Se.ADD_URI_SAFE_ATTR&&ai(jt,Se.ADD_URI_SAFE_ATTR,Ot),Se.FORBID_CONTENTS&&(Ge===mt&&(Ge=Gl(Ge)),ai(Ge,Se.FORBID_CONTENTS,Ot)),Pe&&(Oe["#text"]=!0),ze&&ai(Oe,["html","head","body"]),Oe.table&&(ai(Oe,["tbody"]),delete Ye.tbody),Se.TRUSTED_TYPES_POLICY){if(typeof Se.TRUSTED_TYPES_POLICY.createHTML!="function")throw ja('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ja('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=Se.TRUSTED_TYPES_POLICY,A=D.createHTML("")}else D===void 0&&(D=D_(v,r)),D!==null&&typeof A=="string"&&(A=D.createHTML(""));Cr&&Cr(Se),zt=Se}},z=ai({},["mi","mo","mn","ms","mtext"]),Q=ai({},["foreignobject","desc","title","annotation-xml"]),he=ai({},["title","style","font","a","script"]),Ee=ai({},ph);ai(Ee,mh),ai(Ee,y_);const lt=ai({},vh);ai(lt,E_);const vt=function(Se){let Xe=E(Se);(!Xe||!Xe.tagName)&&(Xe={namespaceURI:ve,tagName:"template"});const xt=tu(Se.tagName),ti=tu(Xe.tagName);return at[Se.namespaceURI]?Se.namespaceURI===K?Xe.namespaceURI===G?xt==="svg":Xe.namespaceURI===bi?xt==="svg"&&(ti==="annotation-xml"||z[ti]):!!Ee[xt]:Se.namespaceURI===bi?Xe.namespaceURI===G?xt==="math":Xe.namespaceURI===K?xt==="math"&&Q[ti]:!!lt[xt]:Se.namespaceURI===G?Xe.namespaceURI===K&&!Q[ti]||Xe.namespaceURI===bi&&!z[ti]?!1:!lt[xt]&&(he[xt]||!Ee[xt]):!!(ht==="application/xhtml+xml"&&at[Se.namespaceURI]):!1},it=function(Se){$a(t.removed,{element:Se});try{Se.parentNode.removeChild(Se)}catch{Se.remove()}},wt=function(Se,Xe){try{$a(t.removed,{attribute:Xe.getAttributeNode(Se),from:Xe})}catch{$a(t.removed,{attribute:null,from:Xe})}if(Xe.removeAttribute(Se),Se==="is"&&!ne[Se])if(k||ee)try{it(Xe)}catch{}else try{Xe.setAttribute(Se,"")}catch{}},Ht=function(Se){let Xe=null,xt=null;if(ct)Se="<remove></remove>"+Se;else{const Wi=g_(Se,/^[\r\n\t ]+/);xt=Wi&&Wi[0]}ht==="application/xhtml+xml"&&ve===G&&(Se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Se+"</body></html>");const ti=D?D.createHTML(Se):Se;if(ve===G)try{Xe=new m().parseFromString(ti,ht)}catch{}if(!Xe||!Xe.documentElement){Xe=P.createDocument(ve,"template",null);try{Xe.documentElement.innerHTML=ke?A:ti}catch{}}const Ui=Xe.body||Xe.documentElement;return Se&&xt&&Ui.insertBefore(e.createTextNode(xt),Ui.childNodes[0]||null),ve===G?Z.call(Xe,ze?"html":"body")[0]:ze?Xe.documentElement:Ui},Et=function(Se){return M.call(Se.ownerDocument||Se,Se,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null)},gt=function(Se){return Se instanceof p&&(typeof Se.nodeName!="string"||typeof Se.textContent!="string"||typeof Se.removeChild!="function"||!(Se.attributes instanceof c)||typeof Se.removeAttribute!="function"||typeof Se.setAttribute!="function"||typeof Se.namespaceURI!="string"||typeof Se.insertBefore!="function"||typeof Se.hasChildNodes!="function")},ei=function(Se){return typeof l=="function"&&Se instanceof l},Ai=function(Se,Xe,xt){de[Se]&&eu(de[Se],ti=>{ti.call(t,Xe,xt,zt)})},zi=function(Se){let Xe=null;if(Ai("beforeSanitizeElements",Se,null),gt(Se))return it(Se),!0;const xt=Ot(Se.nodeName);if(Ai("uponSanitizeElement",Se,{tagName:xt,allowedTags:Oe}),Se.hasChildNodes()&&!ei(Se.firstElementChild)&&qr(/<[/\w]/g,Se.innerHTML)&&qr(/<[/\w]/g,Se.textContent))return it(Se),!0;if(!Oe[xt]||Ye[xt]){if(!Ye[xt]&&Ni(xt)&&(Ve.tagNameCheck instanceof RegExp&&qr(Ve.tagNameCheck,xt)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(xt)))return!1;if(Pe&&!Ge[xt]){const ti=E(Se)||Se.parentNode,Ui=S(Se)||Se.childNodes;if(Ui&&ti){const Wi=Ui.length;for(let Li=Wi-1;Li>=0;--Li)ti.insertBefore(C(Ui[Li],!0),x(Se))}}return it(Se),!0}return Se instanceof u&&!vt(Se)||(xt==="noscript"||xt==="noembed"||xt==="noframes")&&qr(/<\/no(script|embed|frames)/i,Se.innerHTML)?(it(Se),!0):(ot&&Se.nodeType===3&&(Xe=Se.textContent,eu([be,J,U],ti=>{Xe=Ya(Xe,ti," ")}),Se.textContent!==Xe&&($a(t.removed,{element:Se.cloneNode()}),Se.textContent=Xe)),Ai("afterSanitizeElements",Se,null),!1)},Zt=function(Se,Xe,xt){if($&&(Xe==="id"||Xe==="name")&&(xt in e||xt in qt))return!1;if(!(Ce&&!Ue[Xe]&&qr(F,Xe))){if(!(ce&&qr(ae,Xe))){if(!ne[Xe]||Ue[Xe]){if(!(Ni(Se)&&(Ve.tagNameCheck instanceof RegExp&&qr(Ve.tagNameCheck,Se)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(Se))&&(Ve.attributeNameCheck instanceof RegExp&&qr(Ve.attributeNameCheck,Xe)||Ve.attributeNameCheck instanceof Function&&Ve.attributeNameCheck(Xe))||Xe==="is"&&Ve.allowCustomizedBuiltInElements&&(Ve.tagNameCheck instanceof RegExp&&qr(Ve.tagNameCheck,xt)||Ve.tagNameCheck instanceof Function&&Ve.tagNameCheck(xt))))return!1}else if(!jt[Xe]){if(!qr(xe,Ya(xt,Ie,""))){if(!((Xe==="src"||Xe==="xlink:href"||Xe==="href")&&Se!=="script"&&__(xt,"data:")===0&&We[Se])){if(!(_e&&!qr(Ke,Ya(xt,Ie,"")))){if(xt)return!1}}}}}}return!0},Ni=function(Se){return Se.indexOf("-")>0},Bn=function(Se){Ai("beforeSanitizeAttributes",Se,null);const{attributes:Xe}=Se;if(!Xe)return;const xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};let ti=Xe.length;for(;ti--;){const Ui=Xe[ti],{name:Wi,namespaceURI:Li,value:pn}=Ui,Gn=Ot(Wi);let Kt=Wi==="value"?pn:b_(pn);if(xt.attrName=Gn,xt.attrValue=Kt,xt.keepAttr=!0,xt.forceKeepAttr=void 0,Ai("uponSanitizeAttribute",Se,xt),Kt=xt.attrValue,xt.forceKeepAttr||(wt(Wi,Se),!xt.keepAttr))continue;if(!He&&qr(/\/>/i,Kt)){wt(Wi,Se);continue}ot&&eu([be,J,U],lr=>{Kt=Ya(Kt,lr," ")});const Gi=Ot(Se.nodeName);if(Zt(Gi,Gn,Kt)){if(X&&(Gn==="id"||Gn==="name")&&(wt(Wi,Se),Kt=re+Kt),D&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!Li)switch(v.getAttributeType(Gi,Gn)){case"TrustedHTML":{Kt=D.createHTML(Kt);break}case"TrustedScriptURL":{Kt=D.createScriptURL(Kt);break}}try{Li?Se.setAttributeNS(Li,Wi,Kt):Se.setAttribute(Wi,Kt),Kp(t.removed)}catch{}}}Ai("afterSanitizeAttributes",Se,null)},fn=function Ct(Se){let Xe=null;const xt=Et(Se);for(Ai("beforeSanitizeShadowDOM",Se,null);Xe=xt.nextNode();)Ai("uponSanitizeShadowNode",Xe,null),!zi(Xe)&&(Xe.content instanceof o&&Ct(Xe.content),Bn(Xe));Ai("afterSanitizeShadowDOM",Se,null)};return t.sanitize=function(Ct){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=null,xt=null,ti=null,Ui=null;if(ke=!Ct,ke&&(Ct="<!-->"),typeof Ct!="string"&&!ei(Ct))if(typeof Ct.toString=="function"){if(Ct=Ct.toString(),typeof Ct!="string")throw ja("dirty is not a string, aborting")}else throw ja("toString is not a function");if(!t.isSupported)return Ct;if(St||Mi(Se),t.removed=[],typeof Ct=="string"&&(Fe=!1),Fe){if(Ct.nodeName){const pn=Ot(Ct.nodeName);if(!Oe[pn]||Ye[pn])throw ja("root node is forbidden and cannot be sanitized in-place")}}else if(Ct instanceof l)Xe=Ht("<!---->"),xt=Xe.ownerDocument.importNode(Ct,!0),xt.nodeType===1&&xt.nodeName==="BODY"||xt.nodeName==="HTML"?Xe=xt:Xe.appendChild(xt);else{if(!k&&!ot&&!ze&&Ct.indexOf("<")===-1)return D&&ge?D.createHTML(Ct):Ct;if(Xe=Ht(Ct),!Xe)return k?null:ge?A:""}Xe&&ct&&it(Xe.firstChild);const Wi=Et(Fe?Ct:Xe);for(;ti=Wi.nextNode();)zi(ti)||(ti.content instanceof o&&fn(ti.content),Bn(ti));if(Fe)return Ct;if(k){if(ee)for(Ui=B.call(Xe.ownerDocument);Xe.firstChild;)Ui.appendChild(Xe.firstChild);else Ui=Xe;return(ne.shadowroot||ne.shadowrootmode)&&(Ui=L.call(n,Ui,!0)),Ui}let Li=ze?Xe.outerHTML:Xe.innerHTML;return ze&&Oe["!doctype"]&&Xe.ownerDocument&&Xe.ownerDocument.doctype&&Xe.ownerDocument.doctype.name&&qr(tm,Xe.ownerDocument.doctype.name)&&(Li="<!DOCTYPE "+Xe.ownerDocument.doctype.name+`>
`+Li),ot&&eu([be,J,U],pn=>{Li=Ya(Li,pn," ")}),D&&ge?D.createHTML(Li):Li},t.setConfig=function(){let Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mi(Ct),St=!0},t.clearConfig=function(){zt=null,St=!1},t.isValidAttribute=function(Ct,Se,Xe){zt||Mi({});const xt=Ot(Ct),ti=Ot(Se);return Zt(xt,ti,Xe)},t.addHook=function(Ct,Se){typeof Se=="function"&&(de[Ct]=de[Ct]||[],$a(de[Ct],Se))},t.removeHook=function(Ct){if(de[Ct])return Kp(de[Ct])},t.removeHooks=function(Ct){de[Ct]&&(de[Ct]=[])},t.removeAllHooks=function(){de={}},t}var rm=nm();const _h=Object.freeze(Object.defineProperty({__proto__:null,default:rm},Symbol.toStringTag,{value:"Module"}));var bh;const ru=(bh=_h==null?void 0:rm)!==null&&bh!==void 0?bh:_h;function om(a,t,e,n,r=!1,o,s){var l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z;const L=(l=e==null?void 0:e.id)!==null&&l!==void 0?l:"",de=n.getOptions(),be=(u=a==="editor"?e==null?void 0:e.internalColumnEditor:e==null?void 0:e.filter)!==null&&u!==void 0?u:{},J=(h=be==null?void 0:be.collectionOptions)!==null&&h!==void 0?h:{},U=(c=J==null?void 0:J.separatorBetweenTextLabels)!==null&&c!==void 0?c:"",F=(p=be==null?void 0:be.enableTranslateLabel)!==null&&p!==void 0?p:!1,ae=(m=de==null?void 0:de.enableTranslate)!==null&&m!==void 0?m:!1,Ke=(v=be==null?void 0:be.enableRenderHtml)!==null&&v!==void 0?v:!1,Ie=(_=de==null?void 0:de.sanitizeHtmlOptions)!==null&&_!==void 0?_:{},xe=(x=(C=be==null?void 0:be.customStructure)===null||C===void 0?void 0:C.label)!==null&&x!==void 0?x:"label",Oe=(E=(S=be==null?void 0:be.customStructure)===null||S===void 0?void 0:S.labelPrefix)!==null&&E!==void 0?E:"labelPrefix",De=(A=(D=be==null?void 0:be.customStructure)===null||D===void 0?void 0:D.labelSuffix)!==null&&A!==void 0?A:"labelSuffix",ne=(M=(P=be==null?void 0:be.customStructure)===null||P===void 0?void 0:P.optionLabel)!==null&&M!==void 0?M:"value",pe=(Z=(B=be==null?void 0:be.customStructure)===null||B===void 0?void 0:B.value)!==null&&Z!==void 0?Z:"value",Ve=Re("select",{className:"ms-filter search-filter"}),Ye=a==="filter"?["search-filter",`filter-${L}`]:["select-editor",`editor-${L}`];Ve.classList.add(...Ye),Ve.multiple=r;const Ue=[];let ce=!1;if(Array.isArray(t))if(t.every(Ce=>typeof Ce=="number"||typeof Ce=="string"))for(const Ce of t){const _e={text:Ce,value:Ce};a==="filter"&&Array.isArray(s)&&(_e.selected=s.findIndex(He=>He===Ce)>=0),Ue.push(_e),(_e.selected&&r||_e.selected&&!r&&Ce!=="")&&(ce=!0)}else t.forEach(Ce=>{if(Ce===void 0||typeof Ce=="object"&&Ce[xe]===void 0&&Ce.labelKey===void 0)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const _e=Ce.labelKey||Ce[xe],He=(Ce.labelKey||F&&o)&&_e&&ae?o==null?void 0:o.translate(_e||" "):_e;let ot=Ce[Oe]||"",ze=Ce[De]||"",St=Ce.hasOwnProperty(ne)?Ce[ne]:"";St!=null&&St.toString&&(St=St.toString().replace(/\"/g,"'")),ot=F&&o&&ot&&typeof ot=="string"?o.translate(ot||" "):ot,ze=F&&o&&ze&&typeof ze=="string"?o.translate(ze||" "):ze,St=F&&o&&St&&typeof St=="string"?o.translate(St||" "):St;let k=[ot,typeof He=="string"||typeof He=="number"?He.toString():He,ze].filter($=>$).join(U);const ee={text:"",value:""};Ke&&(k=Ln(de,k,Ie)),ee.text=k;let ge=Ce[pe];ge==null&&(ge=""),a==="filter"&&Array.isArray(s)&&(ee.selected=s.findIndex($=>`${$}`==`${Ce[pe]}`)>=0),ee.value=`${ge??""}`,Ue.push(ee),(ee.selected&&r||ee.selected&&!r&&Ce[pe]!=="")&&(ce=!0)});return{selectElement:Ve,dataCollection:Ue,hasFoundSearchTerm:ce}}function ou(a){var t,e,n,r;let o=0,s=0,l=0,u=0;const h=(t=window.innerHeight)!==null&&t!==void 0?t:0,c=(e=window.innerWidth)!==null&&e!==void 0?e:0,p=H_(),m=p.top,v=p.left,_=Wn(a);if(_){const C=(n=_.top)!==null&&n!==void 0?n:0,x=(r=_.left)!==null&&r!==void 0?r:0;s=C-m,o=h-(C-m),l=x-v,u=c-(x-v)}return{top:s,bottom:o,left:l,right:u}}function Re(a,t,e){const n=document.createElement(a);return t&&Object.keys(t).forEach(r=>{r==="innerHTML"&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${a}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);const o=t[r];typeof o=="object"?Object.assign(n[r],o):n[r]=t[r]}),e!=null&&e.appendChild&&e.appendChild(n),n}function Ch(a){if(a)for(const t of Object.keys(a))Array.isArray(a[t])&&Ch(a[t]),a[t]instanceof HTMLElement&&(a[t]=null)}function on(a){if(a!=null&&a.firstChild)for(;a.firstChild;)a.lastChild&&a.removeChild(a.lastChild);return a}function R_(a,t){if(!a||!t)return;const e=a.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-e.top,right:n.right-e.right,bottom:n.bottom-e.bottom,left:n.left-e.left}}function Wn(a){var t;if(!a)return;const e=(t=a==null?void 0:a.getBoundingClientRect)===null||t===void 0?void 0:t.call(a);let n=0,r=0,o=0,s=0;return(e==null?void 0:e.top)!==void 0&&e.left!==void 0&&(n=e.top+window.pageYOffset,r=e.left+window.pageXOffset,s=e.right,o=e.bottom),{top:n,left:r,bottom:o,right:s}}function sm(a,t){let e=0;if(a){const n=t==="height"?"clientHeight":"clientWidth",r=t==="height"?["top","bottom"]:["left","right"];e=a[n];for(const o of r)e-=parseFloat(P_(a,`padding-${o}`))||0}return e}function P_(a,t){return window.getComputedStyle(a,null).getPropertyValue(t)}function F_(a){let t="";return a!=null&&a.localName&&(t=a!=null&&a.className?`${a.localName}.${Array.from(a.classList).join(".")}`:a.localName),t}function su(a,t){if(a)for(const e of t){const n=a.getAttribute(e);if(n)return n}return null}function Gs(a,t="auto"){return(/^[0-9]+$/i.test(`${a}`)?`${+a}px`:a)||t}function M_(a){const t=typeof a=="string"?a:String(a),e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(t||"").toString().replace(/[&<>"']/g,n=>e[n])}function N_(a){return a.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e))}function L_(a,t){const e=a.length;let n=M_(a);if(e<t)for(let r=e;r<t;r++)n+="&nbsp;";return n}function or(a){const t=document.createElement("div");return t.innerHTML=a,t.textContent||t.innerText||""}function Ln(a,t,e){let n=t;return typeof(a==null?void 0:a.sanitizer)=="function"?n=a.sanitizer(t||""):typeof(ru==null?void 0:ru.sanitize)=="function"&&(n=(ru.sanitize(t||"",e||{RETURN_TRUSTED_TYPE:!0})||"").toString()),n}function H_(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}class B_{constructor(t,e,n){this.sharedService=t,this.backendUtilities=e,this.translaterService=n}getPickerTitleOutputString(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let E="";const D=(r=(n=this.sharedService.gridOptions)===null||n===void 0?void 0:n[e])!==null&&r!==void 0?r:{},A=(s=(o=this.sharedService.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,P=(u=(l=this.sharedService.gridOptions)===null||l===void 0?void 0:l.locales)!==null&&u!==void 0?u:je.locales,M=D==null?void 0:D[t],B=D==null?void 0:D[`${t}Key`],Z=this.sharedService.gridOptions,L=ho(Z);if(B&&(!((h=this.translaterService)===null||h===void 0)&&h.translate))E=this.translaterService.translate(B||" ");else switch(t){case"commandTitle":E=M||A&&((c=this.translaterService)===null||c===void 0?void 0:c.getCurrentLanguage)&&((p=this.translaterService)===null||p===void 0?void 0:p.translate(`${L}COMMANDS`||" "))||(P==null?void 0:P.TEXT_COMMANDS);break;case"columnTitle":E=M||A&&((m=this.translaterService)===null||m===void 0?void 0:m.getCurrentLanguage)&&((v=this.translaterService)===null||v===void 0?void 0:v.translate(`${L}COLUMNS`||" "))||(P==null?void 0:P.TEXT_COLUMNS);break;case"forceFitTitle":E=M||A&&((_=this.translaterService)===null||_===void 0?void 0:_.getCurrentLanguage)&&((C=this.translaterService)===null||C===void 0?void 0:C.translate(`${L}FORCE_FIT_COLUMNS`||" "))||(P==null?void 0:P.TEXT_FORCE_FIT_COLUMNS);break;case"syncResizeTitle":E=M||A&&((x=this.translaterService)===null||x===void 0?void 0:x.getCurrentLanguage)&&((S=this.translaterService)===null||S===void 0?void 0:S.translate(`${L}SYNCHRONOUS_RESIZE`||" "))||(P==null?void 0:P.TEXT_SYNCHRONOUS_RESIZE);break;default:E=M;break}return E}readjustFrozenColumnIndexWhenNeeded(t,e,n){if(t>=0){const r=n.findIndex(o=>o.id===this.sharedService.frozenVisibleColumnId);r>=0&&r!==t&&(this.sharedService.gridOptions.frozenColumn=r,this.sharedService.slickGrid.setOptions({frozenColumn:r})),Array.isArray(n)&&Array.isArray(e)&&n.length!==e.length&&this.sharedService.slickGrid.setColumns(n)}}refreshBackendDataset(t){var e;let n=this.sharedService.gridOptions;t&&(n={...this.sharedService.gridOptions,...t},this.sharedService.gridOptions=n),(e=this.backendUtilities)===null||e===void 0||e.refreshBackendDataset(n)}runOverrideFunctionWhenExists(t,e){return typeof t=="function"?!!t.call(this,e):!0}sortItems(t,e){Array.isArray(t)&&t.sort((n,r)=>n&&r&&n.hasOwnProperty(e)&&r.hasOwnProperty(e)?n[e]-r[e]:0)}translateItems(t,e,n){var r,o;if(Array.isArray(t))for(const s of t)s.hasOwnProperty(e)&&(s[n]=(o=(r=this.translaterService)===null||r===void 0?void 0:r.translate)===null||o===void 0?void 0:o.call(r,s[e]))}translateMenuItemsFromTitleKey(t,e="commandItems"){for(const n of t)typeof n=="object"&&(n.titleKey&&(n.title=this.translateWhenEnabledAndServiceExist(`${n.titleKey}`,`TEXT_${n.titleKey}`)),n.subMenuTitleKey&&(n.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${n.subMenuTitleKey}`,`TEXT_${n.subMenuTitleKey}`))),Array.isArray(n==null?void 0:n[e])&&this.translateMenuItemsFromTitleKey(n==null?void 0:n[e])}translateWhenEnabledAndServiceExist(t,e,n){var r,o,s;let l="";const u=(r=this.sharedService)===null||r===void 0?void 0:r.gridOptions,h=(o=u==null?void 0:u.locales)!==null&&o!==void 0?o:je.locales;return n?l=n:u.enableTranslate&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)?l=this.translaterService.translate(t||" "):e in h?l=h[e]:l=e,l}}class V_{constructor(t){this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this.pluginName="AutoTooltips",this._eventHandler=new Slick.EventHandler,this._addonOptions=t}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(t){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=t,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}handleMouseEnter(t){var e,n,r,o,s;const l=this._grid.getCellFromEvent(t);if(l){let u=this._grid.getCellNode(l.row,l.cell),h;this._addonOptions&&u&&(!u.title||!((e=this._addonOptions)===null||e===void 0)&&e.replaceExisting)&&(u.clientWidth<u.scrollWidth?(h=(r=(n=u.textContent)===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:"",!((o=this._addonOptions)===null||o===void 0)&&o.maxToolTipLength&&h.length>((s=this._addonOptions)===null||s===void 0?void 0:s.maxToolTipLength)&&(h=h.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):h="",u.title=h),u=null}}handleHeaderMouseEnter(t,e){var n;const r=e.column;let o;const s=t.target;s&&(o=s.closest(".slick-header-column"),o&&!(r!=null&&r.toolTip)&&(o.title=s.clientWidth<o.clientWidth&&(n=r==null?void 0:r.name)!==null&&n!==void 0?n:"")),o=null}}class z_{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new Slick.EventHandler,this._bindingEventService=new Nn}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(t,e){this._grid=t,this.createUndoRedoBuffer(),this._cellSelectionModel=new Y_,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...e},this._cellExternalCopyManagerPlugin=new W_,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(n,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(n,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(n,r)})}dispose(){var t,e;this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),(t=this._cellSelectionModel)===null||t===void 0||t.dispose(),(e=this._cellExternalCopyManagerPlugin)===null||e===void 0||e.dispose()}createUndoRedoBuffer(){let t=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:e=>{this._commandQueue[t]=e,t++,e.execute()},undo:()=>{if(t===0)return;t--;const e=this._commandQueue[t];e&&Slick.GlobalEditorLock.cancelCurrentEdit()&&e.undo()},redo:()=>{if(t>=this._commandQueue.length)return;const e=this._commandQueue[t];t++,e&&Slick.GlobalEditorLock.cancelCurrentEdit()&&e.execute()}}}getDefaultOptions(){let t=0;return{clipboardCommandHandler:e=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,e)},dataItemColumnValueExtractor:(e,n)=>{var r,o;if(!this.gridOptions.editable||!n.editor){const s=n.exportWithFormatter!==void 0?n.exportWithFormatter:(r=this.gridOptions.textExportOptions)===null||r===void 0?void 0:r.exportWithFormatter;if(n.formatter&&s){const l=n.formatter(0,0,e[n.field],n,e,this._grid);if(n.sanitizeDataExport||!((o=this.gridOptions.textExportOptions)===null||o===void 0)&&o.sanitizeDataExport){let u=l;return l&&typeof l=="object"&&l.hasOwnProperty("text")&&(u=l.text),u===null&&(u=""),or(u)}return l}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:e=>{for(let n=0;n<e;n++)this._grid.getData().addItem({id:`newRow_${t++}`})}}}handleBodyKeyDown(t){(t.keyCode||t.code)===90&&(t.ctrlKey||t.metaKey)&&(t.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}const U_=2e3,lm=100;class W_{constructor(){this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this.pluginName="CellExternalCopyManager",this.onCopyCells=new Slick.Event,this.onCopyCancelled=new Slick.Event,this.onPasteCells=new Slick.Event,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(t,e){this._grid=t,this._addonOptions={...this._addonOptions,...e},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0,this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const n=t.getSelectionModel();if(!n)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new Slick.CellSelectionModel())");this._eventHandler.subscribe(n.onSelectedRangesChanged,()=>{this._grid.getEditorLock().isActive()||this._grid.focus()})}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(t){if(typeof this._addonOptions.headerColumnValueExtractor=="function"){const e=this._addonOptions.headerColumnValueExtractor(t);if(e)return e}return t.name}getDataItemValueForColumn(t,e,n){if(typeof this._addonOptions.dataItemColumnValueExtractor=="function"){const o=this._addonOptions.dataItemColumnValueExtractor(t,e);if(o)return o}let r="";if(e)if(e.editor){const o=document.createElement("p"),s=new e.editor({container:o,column:e,event:n,position:{top:0,left:0},grid:this._grid});s.loadValue(t),r=s.serializeValue(),s.destroy(),o.remove()}else r=t[e.field||""];return r}setDataItemValueForColumn(t,e,n){if(!(e!=null&&e.denyPaste)){if(this._addonOptions.dataItemColumnValueSetter)return this._addonOptions.dataItemColumnValueSetter(t,e,n);if(e.editor){const r=document.createElement("div"),o=new e.editor({container:r,column:e,position:{top:0,left:0},grid:this._grid});o.loadValue(t),o.applyValue(t,n),o.destroy(),r.remove()}else t[e.field]=n}}setIncludeHeaderWhenCopying(t){this._addonOptions.includeHeaderWhenCopying=t}createTextBox(t){const e=Re("textarea",{value:t,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}},this._bodyElement);return e.select(),e}decodeTabularData(t,e){var n;const r=t.getColumns(),s=e.value.split(/[\n\f\r]/);s[s.length-1]===""&&s.pop();let l=0;const u=[];this._bodyElement.removeChild(e);for(const P of s)u[l++]=P!==""?P.split("	"):[""];const h=this._grid.getActiveCell(),c=(n=this._grid.getSelectionModel())===null||n===void 0?void 0:n.getSelectedRanges(),p=c!=null&&c.length?c[0]:null;let m,v;if(p)m=p.fromRow,v=p.fromCell;else if(h)m=h.row,v=h.cell;else return;let _=!1,C=u.length,x=u.length?u[0].length:0;u.length===1&&u[0].length===1&&p&&(_=!0,C=p.toRow-p.fromRow+1,x=p.toCell-p.fromCell+1);const S=this._grid.getData().length-m;let E=0;if(S<C&&typeof this._addonOptions.newRowCreator=="function"){const P=this._grid.getData();for(E=1;E<=C-S;E++)P.push({});this._grid.setData(P),this._grid.render()}if(m+C>this._grid.getDataLength()&&typeof this._addonOptions.newRowCreator=="function"){const P=m+C-this._grid.getDataLength();this._addonOptions.newRowCreator(P)}const A={isClipboardCommand:!0,clippedRange:u,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:_,activeRow:m,activeCell:v,destH:C,destW:x,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{var P;A.h=0;for(let B=0;B<A.destH;B++){A.oldValues[B]=[],A.w=0,A.h++;for(let Z=0;Z<A.destW;Z++){A.w++;const L=m+B,de=v+Z;if(L<A.maxDestY&&de<A.maxDestX){const be=this._grid.getDataItem(L);A.oldValues[B][Z]=be[r[de].field],_?this.setDataItemValueForColumn(be,r[de],u[0][0]):this.setDataItemValueForColumn(be,r[de],u[B]?u[B][Z]:""),this._grid.updateCell(L,de),this._grid.onCellChange.notify({row:L,cell:de,item:be,grid:this._grid,column:{}})}}}const M={fromCell:v,fromRow:m,toCell:v+A.w-1,toRow:m+A.h-1};this.markCopySelection([M]),(P=this._grid.getSelectionModel())===null||P===void 0||P.setSelectedRanges([M]),this.onPasteCells.notify({ranges:[M]})},undo:()=>{var P;for(let B=0;B<A.destH;B++)for(let Z=0;Z<A.destW;Z++){const L=m+B,de=v+Z;if(L<A.maxDestY&&de<A.maxDestX){const be=this._grid.getDataItem(L);_?this.setDataItemValueForColumn(be,r[de],A.oldValues[0][0]):this.setDataItemValueForColumn(be,r[de],A.oldValues[B][Z]),this._grid.updateCell(L,de),this._grid.onCellChange.notify({row:L,cell:de,item:be,grid:this._grid,column:{}})}}const M={fromCell:v,fromRow:m,toCell:v+A.w-1,toRow:m+A.h-1};if(this.markCopySelection([M]),(P=this._grid.getSelectionModel())===null||P===void 0||P.setSelectedRanges([M]),this.onPasteCells.notify({ranges:[M]}),typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(new Slick.EventData,{ranges:[M]}),E>1){const B=this._grid.getData();for(;E>1;E--)B.splice(B.length-1,1);this._grid.setData(B),this._grid.render()}}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(A):A.execute()}handleKeyDown(t){var e,n,r,o,s,l;let u;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if((t.which===xi.ESCAPE||t.key==="Escape")&&this._copiedRanges&&(t.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(t,{ranges:this._copiedRanges}),this._copiedRanges=null),(t.which===xi.C||t.key==="c"||t.which===xi.INSERT||t.key==="Insert")&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&(typeof this._onCopyInit=="function"&&this._onCopyInit.call(this),u=(n=(e=this._grid.getSelectionModel())===null||e===void 0?void 0:e.getSelectedRanges())!==null&&n!==void 0?n:[],u.length!==0)){this._copiedRanges=u,this.markCopySelection(u),this.onCopyCells.notify({ranges:u}),typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(t,{ranges:u});const h=this._grid.getColumns();let c="";for(let p=0;p<u.length;p++){const m=u[p],v=[];for(let _=m.fromRow;_<m.toRow+1;_++){const C=[],x=this._grid.getDataItem(_);if(v.length===0&&this._addonOptions.includeHeaderWhenCopying){const S=[];for(let E=m.fromCell;E<m.toCell+1;E++)h[E].name.length>0&&S.push(this.getHeaderValueForColumn(h[E]));v.push(S.join("	"))}for(let S=m.fromCell;S<m.toCell+1;S++)C.push(this.getDataItemValueForColumn(x,h[S],t));v.push(C.join("	"))}c+=v.join(`\r
`)+`\r
`}if(window.clipboardData)return window.clipboardData.setData("Text",c),!0;{const p=document.activeElement,m=this.createTextBox(c);if(m.focus(),setTimeout(()=>{this._bodyElement.removeChild(m),p?p.focus():console.log("No element to restore focus to after copy?")},(o=(r=this.addonOptions)===null||r===void 0?void 0:r.clipboardPasteDelay)!==null&&o!==void 0?o:lm),typeof this._onCopySuccess=="function"){const v=u.length===1?u[0].toRow+1-u[0].fromRow:u.length;this._onCopySuccess(v)}return!1}}if(!this._addonOptions.readOnlyMode&&((t.which===xi.V||t.key==="v")&&(t.ctrlKey||t.metaKey)&&!t.shiftKey||(t.which===xi.INSERT||t.key==="Insert")&&t.shiftKey&&!t.ctrlKey)){const h=this.createTextBox("");return setTimeout(()=>this.decodeTabularData(this._grid,h),(l=(s=this.addonOptions)===null||s===void 0?void 0:s.clipboardPasteDelay)!==null&&l!==void 0?l:lm),!1}}}markCopySelection(t){var e;this.clearCopySelection();const n=this._grid.getColumns(),r={};for(const o of t)for(let s=o.fromRow;s<=o.toRow;s++){r[s]={};for(let l=o.fromCell;l<=o.toCell&&l<n.length;l++)r[s][n[l].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,r),clearTimeout(this._clearCopyTI),this._clearCopyTI=setTimeout(()=>this.clearCopySelection(),((e=this.addonOptions)===null||e===void 0?void 0:e.clearCopySelectionDelay)||U_)}}class lu{constructor(t,e,n){this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new Nn,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}set addonOptions(t){this._addonOptions=t}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get gridUid(){var t,e;return this._gridUid||((e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){var t,e,n,r,o;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),(e=this._commandTitleElm)===null||e===void 0||e.remove(),(n=this._optionTitleElm)===null||n===void 0||n.remove(),this.disposeAllMenus(),on(this._menuElm),(r=this.menuElement)===null||r===void 0||r.remove(),(o=this._menuElm)===null||o===void 0||o.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(t=>t.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(t=>t.remove())}setOptions(t){this._addonOptions={...this._addonOptions,...t}}addSubMenuTitleWhenExists(t,e){if(t!=="divider"&&(t!=null&&t.subMenuTitle)){const n=document.createElement("div");n.className="slick-menu-title",n.textContent=t.subMenuTitle;const r=t.subMenuTitleCssClass;r&&n.classList.add(...r.split(" ")),e.appendChild(n)}}populateCommandOrOptionItems(t,e,n,r,o,s,l){if(o&&r&&e)for(const u of r)this.populateSingleCommandOrOptionItem(t,e,n,u,o,s,l)}populateCommandOrOptionTitle(t,e,n,r){var o,s;if(e){const l=r>0,u=(s=(o=this._menuElm)===null||o===void 0?void 0:o.querySelector(`.slick-${t}-header`))!==null&&s!==void 0?s:Re("div",{className:`slick-${t}-header`}),h=`${t}Title`;l||(e!=null&&e[h]?(on(u),this[`_${t}TitleElm`]=Re("span",{className:"slick-menu-title",textContent:e[h]}),u.appendChild(this[`_${t}TitleElm`]),u.classList.add("with-title")):u.classList.add("no-title"),n.appendChild(u))}}populateSingleCommandOrOptionItem(t,e,n,r,o,s,l){var u;let h=null;if(o&&r&&e){const c=(o==null?void 0:o.level)||0,p=this._camelPluginName==="headerButtons"?"":"-item",m=`${this._menuCssPrefix}${p}`;let v=!0,_=!0;if(typeof r=="object"&&(v=this.extensionUtility.runOverrideFunctionWhenExists(r.itemVisibilityOverride,o),_=this.extensionUtility.runOverrideFunctionWhenExists(r.itemUsabilityOverride,o)),!v)return null;if(typeof r=="object"&&r.itemUsabilityOverride&&(r.disabled=!_),h=Re("li",{className:m,role:"menuitem"}),typeof r=="object"&&qd(r[t])&&(h.dataset[t]=r==null?void 0:r[t]),n&&n.appendChild(h),typeof r=="object"&&r.divider||r==="divider")return h.classList.add(`${m}-divider`),h;if(r.disabled&&h.classList.add(`${m}-disabled`),(r.hidden||r.showOnHover)&&h.classList.add(`${m}-hidden`),r.cssClass&&h.classList.add(...r.cssClass.split(" ")),r.tooltip&&(h.title=r.tooltip),this._camelPluginName!=="headerButtons"){const x=Re("div",{className:`${this._menuCssPrefix}-icon`});h.appendChild(x),r.iconCssClass?x.classList.add(...r.iconCssClass.split(" ")):!r.commandItems&&!r.optionItems&&!r.items&&(x.textContent="◦");const S=Re("span",{className:`${this._menuCssPrefix}-content`,textContent:typeof r=="object"&&r.title||""},h);r.textCssClass&&S.classList.add(...r.textCssClass.split(" "))}const C=c>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(h,"click",x=>s.call(this,x,t,r,c,o==null?void 0:o.column),void 0,C),((u=this._addonOptions)===null||u===void 0?void 0:u.subMenuOpenByEvent)==="mouseover"&&typeof l=="function"&&this._bindEventService.bind(h,"mouseover",x=>l.call(this,x,t,r,c),void 0,C),r.commandItems||r.optionItems||r.items){const x=document.createElement("span");x.className="sub-item-chevron",this._addonOptions.subItemChevronClass?x.classList.add(...this._addonOptions.subItemChevronClass.split(" ")):x.textContent="⮞",h.classList.add("slick-submenu-item"),h.appendChild(x)}}return h}}class am extends lu{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(t){var e,n,r,o,s,l,u;(e=this.menuElement)===null||e===void 0||e.remove(),this._menuElm=void 0;const h=this.grid.getCellFromEvent(t);if(h){this._currentCell=(n=h.cell)!==null&&n!==void 0?n:0,this._currentRow=(r=h.row)!==null&&r!==void 0?r:0;const c=((o=this._addonOptions)===null||o===void 0?void 0:o.commandItems)||[],p=((s=this._addonOptions)===null||s===void 0?void 0:s.optionItems)||[],m={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(t,m),typeof t.stopPropagation=="function"&&(this.pubSubService.publish(`on${vl(this._camelPluginName)}BeforeMenuShow`,m),typeof((l=this.addonOptions)===null||l===void 0?void 0:l.onBeforeMenuShow)=="function"&&this.addonOptions.onBeforeMenuShow(t,m)===!1)||(this._menuElm=this.createMenu(c,p),this._menuElm&&(this._menuElm.style.top=`${t.pageY+5}px`,this._menuElm.style.left=`${t.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${vl(this._camelPluginName)}AfterMenuShow`,m),typeof((u=this.addonOptions)===null||u===void 0?void 0:u.onAfterMenuShow)=="function"&&this.addonOptions.onAfterMenuShow(t,m)===!1))return}return this._menuElm}createMenu(t,e,n=0,r){var o,s,l,u,h,c,p,m;const v=this.grid.getColumns()[this._currentCell],_=this.grid.getDataItem(this._currentRow),C=(r==null?void 0:r.command)||(r==null?void 0:r.option);let x=n===1&&C?String(C).replace(/\s/g,""):"";x&&(this._subMenuParentId=x),n>1&&(x=this._subMenuParentId);let S=!0,E=!0;if(this._camelPluginName==="contextMenu"){if(S=this.checkIsColumnAllowed((s=(o=this._addonOptions)===null||o===void 0?void 0:o.optionShownOverColumnIds)!==null&&s!==void 0?s:[],v.id),E=this.checkIsColumnAllowed((u=(l=this._addonOptions)===null||l===void 0?void 0:l.commandShownOverColumnIds)!==null&&u!==void 0?u:[],v.id),!v||(!E||!t.length)&&(!S||!e.length)){this.hideMenu();return}}else if(!v||!v.cellMenu||!t.length&&!e.length)return;const D=`${this.menuCssClass} slick-menu-level-${n} ${this.gridUid}`,A=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${n}${this.gridUidSelector}`);if(A){if(A.dataset.subMenuParent===x)return A;this.disposeSubMenus()}const P=document.createElement("div");P.className=D,n>0&&(P.classList.add("slick-submenu"),x&&(P.dataset.subMenuParent=x));const M=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${(h=this.addonOptions.maxHeight)!==null&&h!==void 0?h:0}px`,B=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${(c=this.addonOptions.maxWidth)!==null&&c!==void 0?c:0}px`;M&&(P.style.maxHeight=M),B&&(P.style.maxWidth=B),!((p=this.addonOptions)===null||p===void 0)&&p.width&&(P.style.width=Gs((m=this.addonOptions)===null||m===void 0?void 0:m.width));const Z=Re("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"×",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&S&&e.length>0){const L=Re("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},P);this.populateCommandOrOptionTitle("option",this.addonOptions,L,n),!this.addonOptions.hideCloseButton&&n<1&&this.populateCommandOrOptionCloseBtn("option",Z,L),r&&n>0&&this.addSubMenuTitleWhenExists(r,L),this.populateCommandOrOptionItems("option",this.addonOptions,L,e,{cell:this._currentCell,row:this._currentRow,column:v,dataContext:_,grid:this.grid,level:n},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&E&&t.length>0){const L=Re("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},P);this.populateCommandOrOptionTitle("command",this.addonOptions,L,n),!this.addonOptions.hideCloseButton&&n<1&&(!S||e.length===0||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",Z,L),r&&n>0&&this.addSubMenuTitleWhenExists(r,L),this.populateCommandOrOptionItems("command",this.addonOptions,L,t,{cell:this._currentCell,row:this._currentRow,column:v,dataContext:_,grid:this.grid,level:n},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return n++,P}closeMenu(t,e){var n;if(this.menuElement){if(typeof((n=this.addonOptions)===null||n===void 0?void 0:n.onBeforeMenuClose)=="function"&&this.addonOptions.onBeforeMenuClose(t,e)===!1)return;this.hideMenu()}}hideMenu(){var t;(t=this.menuElement)===null||t===void 0||t.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(t,e){return(t==null?void 0:t.length)>0?t.findIndex(n=>n===e)>=0:!0}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this.menuElement!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.closeMenu(t,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(t){t.defaultPrevented||this.closeMenu(t,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(t,e,n,r=0){(n==null?void 0:n[e])!==void 0&&n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems||n.optionItems||n.items?(this.repositionSubMenu(n,e,r,t),this._lastMenuTypeClicked=e):r===0&&this.disposeSubMenus())}handleMenuItemCommandClick(t,e,n,r=0){var o;if((n==null?void 0:n[e])!==void 0&&n!=="divider"&&!n.disabled&&!n.divider&&this._currentCell!==void 0&&this._currentRow!==void 0){if(e==="option"&&!this.grid.getEditorLock().commitCurrentEdit())return;const s=this._currentCell,l=this._currentRow,u=this.grid.getColumns()[this._currentCell],h=this.grid.getDataItem(this._currentRow),c=n[e]!==void 0?n[e]:"";if(c!==void 0&&!n[`${e}Items`]){const p={cell:this._currentCell,row:this._currentRow,grid:this.grid,[e]:c,item:n,column:u,dataContext:h},m=e==="command"?"onCommand":"onOptionSelected",v=`${this._camelPluginName}:${m}`;this.pubSubService.publish(v,p),typeof((o=this._addonOptions)===null||o===void 0?void 0:o[m])=="function"&&this._addonOptions[m](t,p),typeof n.action=="function"&&n.action.call(this,t,p),t.defaultPrevented||this.closeMenu(t,{cell:s,row:l,grid:this.grid})}else(n.commandItems||n.optionItems)&&this.repositionSubMenu(n,e,r,t);this._lastMenuTypeClicked=e}}populateCommandOrOptionCloseBtn(t,e,n){var r;this._bindEventService.bind(e,"click",s=>this.handleCloseButtonClicked(s),void 0,"parent-menu");const o=(r=n.querySelector(`.slick-${t}-header`))!==null&&r!==void 0?r:Re("div",{className:`slick-${t}-header`});o==null||o.appendChild(e),n.appendChild(o),o.classList.add("with-close")}repositionSubMenu(t,e,n,r){(r.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==e)&&this.disposeSubMenus();const o=this.createMenu((t==null?void 0:t.commandItems)||[],(t==null?void 0:t.optionItems)||[],n+1,t);o&&(o.style.display="block",document.body.appendChild(o),this.repositionMenu(r,o))}repositionMenu(t,e){var n,r,o,s,l,u;const h=e==null?void 0:e.classList.contains("slick-submenu"),c=h?t.target.closest(`.${this._menuCssPrefix}-item`):t.target.closest(".slick-cell");if(e&&c){e.style.top="0px",e.style.left="0px";const p=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,m=Wn(c);let v=c&&this._camelPluginName==="cellMenu"?(o=m==null?void 0:m.left)!==null&&o!==void 0?o:0:p.pageX,_=c&&this._camelPluginName==="cellMenu"?(s=m==null?void 0:m.top)!==null&&s!==void 0?s:0:p.pageY;h&&this._camelPluginName==="contextMenu"&&(v=(l=m==null?void 0:m.left)!==null&&l!==void 0?l:0,_=(u=m==null?void 0:m.top)!==null&&u!==void 0?u:0);const C=c.offsetWidth||0,x=(e==null?void 0:e.offsetHeight)||0,S=(e==null?void 0:e.offsetWidth)||this._addonOptions.width||0,E=this.gridOptions.rowHeight||0,D=Number(this._addonOptions.autoAdjustDropOffset||0),A=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:P,top:M}=ou(c),B=P+D-E,Z=M-D+E;(B<x&&Z>B?"top":"bottom")==="top"||this._addonOptions.dropDirection==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),h?_-=x-D-c.clientHeight:_-=x-D):(e.classList.remove("dropup"),e.classList.add("dropdown"),_=_+D,this._camelPluginName==="cellMenu"&&(h?_+=D:_+=E+D))}if(this._addonOptions.autoAlignSide||this._addonOptions.dropSide==="left"){const P=this.grid.getGridPosition();let M=v+Number(S);h&&(M+=c.clientWidth);const B=document.documentElement.clientWidth;(M>=P.width||M>=B?"left":"right")==="left"||!h&&this._addonOptions.dropSide==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),this._camelPluginName==="cellMenu"&&!h?v-=Number(S)-C-A:v-=Number(S)-A):(e.classList.remove("dropleft"),e.classList.add("dropright"),h?v+=A+c.offsetWidth:v+=A)}e.style.top=`${_}px`,e.style.left=`${v}px`}}}class G_ extends am{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this.pluginName="CellMenu",this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(n.gridOptions.cellMenu)}init(t){this._addonOptions={...this._defaults,...t},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){var t;const e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions,n=this.sharedService.allColumns;e!=null&&e.enableTranslate&&Array.isArray(n)&&n.forEach(r=>{if(r!=null&&r.cellMenu&&(Array.isArray(r.cellMenu.commandItems)||Array.isArray(r.cellMenu.optionItems))){const o=r.cellMenu.commandItems||[],s=r.cellMenu.optionItems||[];r.cellMenu.commandTitleKey&&(r.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.commandTitleKey,"TEXT_COMMANDS")||r.cellMenu.commandTitle),r.cellMenu.optionTitleKey&&(r.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.optionTitleKey,"TEXT_COMMANDS")||r.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(o,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(s,"optionItems")}})}handleCellClick(t,e){this.disposeAllMenus();const n=this.grid.getCellFromEvent(t);if(n){const r=this.grid.getDataItem(n.row),o=this.grid.getColumns()[n.cell];if(o!=null&&o.cellMenu&&t.preventDefault(),this._addonOptions={...this._addonOptions,...o.cellMenu},e=e||{},e.column=o,e.dataContext=r,e.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,e))return;this._menuElm=this.createParentMenu(t),this._menuElm&&(this.repositionMenu(t,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(t){t.forEach(e=>{var n,r;!((n=e==null?void 0:e.cellMenu)===null||n===void 0)&&n.commandItems&&this.extensionUtility.sortItems(e.cellMenu.commandItems||[],"positionOrder"),!((r=e==null?void 0:e.cellMenu)===null||r===void 0)&&r.optionItems&&this.extensionUtility.sortItems(e.cellMenu.optionItems||[],"positionOrder")})}}class $_{constructor(t,e){this.grid=t,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._addonOptions=ml(this._defaults,e)}get addonOptions(){return this._addonOptions}get addonElement(){return this._elem}dispose(){this.hide()}hide(){var t;(t=this._elem)===null||t===void 0||t.remove(),this._elem=null}show(t){var e,n;this._elem||(this._elem=Re("div",{className:this._addonOptions.selectionCssClass}),Object.keys(this._addonOptions.selectionCss).forEach(s=>{this._elem.style[s]=this._addonOptions.selectionCss[s]}),this._elem.style.position="absolute",(e=this.grid.getActiveCanvasNode())===null||e===void 0||e.appendChild(this._elem));const r=this.grid.getCellNodeBox(t.fromRow,t.fromCell),o=this.grid.getCellNodeBox(t.toRow,t.toCell);return r&&o&&(!((n=this._addonOptions)===null||n===void 0)&&n.offset)&&(this._elem.style.top=`${r.top+this._addonOptions.offset.top}px`,this._elem.style.left=`${r.left+this._addonOptions.offset.left}px`,this._elem.style.height=`${o.bottom-r.top+this._addonOptions.offset.height}px`,this._elem.style.width=`${o.right-r.left+this._addonOptions.offset.width}px`),this._elem}}class dm{constructor(t){this._currentlySelectedRange=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.pluginName="CellRangeSelector",this.onBeforeCellRangeSelected=new Slick.Event,this.onCellRangeSelecting=new Slick.Event,this.onCellRangeSelected=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions=ml(this._defaults,t)}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridUid(){var t,e;return this._gridUid||((e=(t=this._grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(t){this._grid=t,this._decorator=this._addonOptions.cellDecorator||new $_(t,this._addonOptions),this._canvas=t.getCanvasNode(),this._gridOptions=t.getOptions(),this._gridUid=t.getUID(),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){var t,e;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),on(this._activeCanvas),on(this._canvas),(e=this._decorator)===null||e===void 0||e.dispose(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(t,e){var n,r,o,s;const l=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,u=this._activeViewport.scrollLeft,h=this._activeViewport.scrollTop,c=u+this._viewportWidth,p=h+this._viewportHeight,m=Wn(this._activeViewport),v=(o=m==null?void 0:m.left)!==null&&o!==void 0?o:0,_=(s=m==null?void 0:m.top)!==null&&s!==void 0?s:0,C=v+this._viewportWidth,x=_+this._viewportHeight,S={e:t,dd:e,viewport:{left:u,top:h,right:c,bottom:p,offset:{left:v,top:_,right:C,bottom:x}},offset:{x:0,y:0},isOutsideViewport:!1};return l.pageX<v?S.offset.x=l.pageX-v:l.pageX>C&&(S.offset.x=l.pageX-C),l.pageY<_?S.offset.y=_-l.pageY:l.pageY>x&&(S.offset.y=x-l.pageY),S.isOutsideViewport=!!S.offset.x||!!S.offset.y,S}stopIntervalTimer(){this._autoScrollTimerId&&(clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(t,e){if(!(!this._dragging&&!this._gridOptions.enableRowMoveManager)){if(this._gridOptions.enableRowMoveManager||t.stopImmediatePropagation(),this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(t,e),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(t,e)}}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let t=0,e=0;this._autoScrollTimerId=setInterval(()=>{let n=!1,r=!1;this._draggingMouseOffset.offset.x?(t+=this.addonOptions.minIntervalToShowNextCell,n=t>=this._xDelayForNextCell):t=0,this._draggingMouseOffset.offset.y?(e+=this.addonOptions.minIntervalToShowNextCell,r=e>=this._yDelayForNextCell):e=0,(n||r)&&(n&&(t=0),r&&(e=0),this.handleDragToNewPosition(n,r))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(t,e){let n=this._draggingMouseOffset.e.pageX,r=this._draggingMouseOffset.e.pageY;const o=this._draggingMouseOffset.offset.x,s=this._draggingMouseOffset.offset.y,l=this._draggingMouseOffset.viewport.offset;t&&o&&(o>0?n=l.right+this._moveDistanceForOneCell.x:n=l.left-this._moveDistanceForOneCell.x),e&&s&&(s>0?r=l.top-this._moveDistanceForOneCell.y:r=l.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:n,pageY:r},this._draggingMouseOffset.dd)}handleDragTo(t,e){var n,r,o,s,l,u;const h=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,c=this._grid.getCellFromPoint(h.pageX-((s=(o=Wn(this._activeCanvas))===null||o===void 0?void 0:o.left)!==null&&s!==void 0?s:0)+this._columnOffset,h.pageY-((u=(l=Wn(this._activeCanvas))===null||l===void 0?void 0:l.top)!==null&&u!==void 0?u:0)+this._rowOffset);if(c!==void 0){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&c.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&c.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&c.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&c.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const p=this._grid.getCellNodeBox(c.row,c.cell);if(p){const m=this._draggingMouseOffset.viewport;(p.left<m.left||p.right>m.right||p.top<m.top||p.bottom>m.bottom)&&this._grid.scrollCellIntoView(c.row,c.cell)}}if(!this._grid.canCellBeSelected(c.row,c.cell))return;if(e!=null&&e.range){e.range.end=c;const p=new Slick.Range(e.range.start.row,e.range.start.cell,c.row,c.cell);this._decorator.show(p),this.onCellRangeSelecting.notify({range:p})}}}handleDragEnd(t,e){this._decorator.hide(),this._dragging&&(this._dragging=!1,t.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new Slick.Range(e.range.start.row,e.range.start.cell,e.range.end.row,e.range.end.cell)}))}handleDragInit(t){var e,n,r,o;this._activeCanvas=this._grid.getActiveCanvasNode(t),this._activeViewport=this._grid.getActiveViewportNode(t);const s=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-s.width,this._viewportHeight=this._activeViewport.offsetHeight-s.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const l=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=(n=(e=document.querySelector(l))===null||e===void 0?void 0:e.clientHeight)!==null&&n!==void 0?n:0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=(o=(r=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`))===null||r===void 0?void 0:r.clientWidth)!==null&&o!==void 0?o:0),this._grid.getEditorLock().isActive()||(t.stopImmediatePropagation(),t.preventDefault())}handleDragStart(t,e){var n,r,o,s;const l=this._grid.getCellFromEvent(t);if(l&&this.onBeforeCellRangeSelected.notify(l).getReturnValue()!==!1&&this._grid.canCellBeSelected(l.row,l.cell)&&(this._dragging=!0,t.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();let u=e.startX-((r=(n=Wn(this._canvas))===null||n===void 0?void 0:n.left)!==null&&r!==void 0?r:0);this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(u+=this._scrollLeft);let h=e.startY-((s=(o=Wn(this._canvas))===null||o===void 0?void 0:o.top)!==null&&s!==void 0?s:0);this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(h+=this._scrollTop);const c=this._grid.getCellFromPoint(u,h);return e.range={start:c,end:{}},this._currentlySelectedRange=e.range,this._decorator.show(new Slick.Range(c.row,c.cell))}handleScroll(t,e){this._scrollTop=e.scrollTop,this._scrollLeft=e.scrollLeft}}class Y_{constructor(t){this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new Slick.Event,this.pluginName="CellSelectionModel",this._eventHandler=new Slick.EventHandler,t===void 0||t.cellRangeSelector===void 0?this._selector=new dm({selectionCss:{border:"2px solid black"}}):this._selector=t.cellRangeSelector,this._addonOptions=t}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(t){var e;this._grid=t,this.hasDataView()&&(this._dataView=(e=t==null?void 0:t.getData())!==null&&e!==void 0?e:{}),this._addonOptions={...this._defaults,...this._addonOptions},this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),t.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){var t,e;this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),(t=this._grid)===null||t===void 0||t.unregisterPlugin(this._selector),(e=this._selector)===null||e===void 0||e.dispose()}getSelectedRanges(){return this._ranges}getViewportRowCount(){var t,e,n;const r=this._grid.getViewportNode(),o=(t=r==null?void 0:r.clientHeight)!==null&&t!==void 0?t:0,s=(n=(e=this._grid.getScrollbarDimensions())===null||e===void 0?void 0:e.height)!==null&&n!==void 0?n:0;return Math.floor((o-s)/this._grid.getOptions().rowHeight)||1}hasDataView(){return!Array.isArray(this._grid.getData())}rangesAreEqual(t,e){let n=t.length!==e.length;if(!n){for(let r=0;r<t.length;r++)if(t[r].fromCell!==e[r].fromCell||t[r].fromRow!==e[r].fromRow||t[r].toCell!==e[r].toCell||t[r].toRow!==e[r].toRow){n=!0;break}}return!n}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];this._grid.canCellBeSelected(r.fromRow,r.fromCell)&&this._grid.canCellBeSelected(r.toRow,r.toCell)&&e.push(r)}return e}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(t,e="SlickCellSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!t||t.length===0))return;const n=!this.rangesAreEqual(this._ranges,t);if(this._ranges=this.removeInvalidRanges(t),n){const r=new Slick.EventData;Object.defineProperty(r,"detail",{writable:!0,configurable:!0,value:{caller:e}}),this.onSelectedRangesChanged.notify(this._ranges,r)}}handleActiveCellChange(t,e){var n,r;this._prevSelectedRow=void 0;const o=ah(e.cell),s=ah(e.row);!((n=this._addonOptions)===null||n===void 0)&&n.selectActiveCell&&s&&o?this.setSelectedRanges([new Slick.Range(e.row,e.cell)]):(!(!((r=this._addonOptions)===null||r===void 0)&&r.selectActiveCell)||!s&&!o)&&this.setSelectedRanges([])}handleBeforeCellRangeSelected(t){if(this._grid.getEditorLock().isActive())return t.stopPropagation(),!1}handleCellRangeSelected(t,e){this._grid.setActiveCell(e.range.fromRow,e.range.fromCell,!1,!1,!0),this.setSelectedRanges([e.range])}isKeyAllowed(t){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].some(e=>e===t)}handleKeyDown(t){var e;let n,r;const o=this._grid.getColumns().length,s=this._grid.getActiveCell();let l=0;if(this._dataView?l=((e=this._dataView)===null||e===void 0?void 0:e.getPagingInfo().pageSize)||this._dataView.getLength():l=this._grid.getDataLength(),s&&(t.shiftKey||t.ctrlKey)&&!t.altKey&&this.isKeyAllowed(t.key)&&(n=this.getSelectedRanges().slice(),n.length||n.push(new Slick.Range(s.row,s.cell)),r=n.pop(),typeof(r==null?void 0:r.contains)=="function")){r.contains(s.row,s.cell)||(r=new Slick.Range(s.row,s.cell));let u=r.toRow-r.fromRow,h=r.toCell-r.fromCell;const c=s.row===r.fromRow?1:-1,p=s.cell===r.fromCell?1:-1,m=t.key.startsWith("Arrow");let v,_=0;m&&!t.ctrlKey?(t.key==="ArrowLeft"?h-=p:t.key==="ArrowRight"?h+=p:t.key==="ArrowUp"?u-=c:t.key==="ArrowDown"&&(u+=c),_=s.row+c*u):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this.getViewportRowCount()),this._prevSelectedRow===void 0&&(this._prevSelectedRow=s.row),t.shiftKey&&!t.ctrlKey&&t.key==="Home"?(v=0,_=s.row):t.shiftKey&&!t.ctrlKey&&t.key==="End"?(v=o-1,_=s.row):t.ctrlKey&&t.shiftKey&&t.key==="Home"?(v=0,_=0):t.ctrlKey&&t.shiftKey&&t.key==="End"?(v=o-1,_=l-1):t.key==="PageUp"?(this._prevSelectedRow>=0&&(_=this._prevSelectedRow-this._cachedPageRowCount),_<0&&(_=0)):t.key==="PageDown"&&(this._prevSelectedRow<=l-1&&(_=this._prevSelectedRow+this._cachedPageRowCount),_>l-1&&(_=l-1)),this._prevSelectedRow=_),v??(v=s.cell+p*h);const C=new Slick.Range(s.row,s.cell,_,v);if(this.removeInvalidRanges([C]).length){n.push(C);const x=c>0?C.toRow:C.fromRow,S=p>0?C.toCell:C.fromCell;m?(this._grid.scrollRowIntoView(x),this._grid.scrollCellIntoView(x,S,!1)):(this._grid.scrollRowIntoView(_),this._grid.scrollCellIntoView(_,S,!1))}else n.push(r);this.setSelectedRanges(n),t.preventDefault(),t.stopPropagation(),this._prevKeyDown=t.key}}}class yh{constructor(t){this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.pluginName="RowSelectionModel",this.onSelectedRangesChanged=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions={...this._defaults,...t}}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid.getOptions()}init(t){this._grid=t,this._addonOptions={...this._defaults,...this._addonOptions},this._selector=this.addonOptions.cellRangeSelector,!this._selector&&this._addonOptions.dragToSelect&&(this._selector=new dm({selectionCss:{border:"none"},autoScroll:this._addonOptions.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){var t,e;this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),(t=this._selector)===null||t===void 0||t.destroy(),(e=this._selector)===null||e===void 0||e.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(t){this.setSelectedRanges(this.rowsToRanges(t),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(t,e="SlickRowSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!t||t.length===0))return;this._ranges=t;const n=new Slick.EventData;Object.defineProperty(n,"detail",{writable:!0,configurable:!0,value:{caller:e}}),this.onSelectedRangesChanged.notify(this._ranges,n)}getRowsRange(t,e){let n;const r=[];for(n=t;n<=e;n++)r.push(n);for(n=e;n<t;n++)r.push(n);return r}handleBeforeCellRangeSelected(t,e){var n;let r=!1;if(this.gridOptions.enableRowMoveManager&&(r=(n=this.isHandlerColumn(e.cell))!==null&&n!==void 0?n:!1),this._grid.getEditorLock().isActive()||r)return t.stopPropagation(),!1;this._grid.setActiveCell(e.row,e.cell)}handleCellRangeSelected(t,e){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new Slick.Range(e.range.fromRow,0,e.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(t,e){this._addonOptions.selectActiveRow&&e.row!==null&&this.setSelectedRanges([new Slick.Range(e.row,0,e.row,this._grid.getColumns().length-1)])}handleClick(t){const e=this._grid.getCellFromEvent(t);if(!e||!this._grid.canCellBeActive(e.row,e.cell)||!this.gridOptions.multiSelect||!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;let n=this.rangesToRows(this._ranges);const r=n.indexOf(e.row);if(r===-1&&(t.ctrlKey||t.metaKey))n.push(e.row),this._grid.setActiveCell(e.row,e.cell);else if(r!==-1&&(t.ctrlKey||t.metaKey))n=n.filter(s=>s!==e.row),this._grid.setActiveCell(e.row,e.cell);else if(n.length&&t.shiftKey){const s=n.pop(),l=Math.min(e.row,s),u=Math.max(e.row,s);n=[];for(let h=l;h<=u;h++)h!==s&&n.push(h);n.push(s),this._grid.setActiveCell(e.row,e.cell)}const o=this.rowsToRanges(n);return this.setSelectedRanges(o),t.stopImmediatePropagation(),!0}handleKeyDown(t){const e=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&e&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(t.which===xi.UP||t.key==="ArrowUp"||t.which===xi.DOWN||t.key==="ArrowDown")){let n=this.getSelectedRows();n.sort((l,u)=>l-u),n.length||(n=[e.row]);let r,o=n[0],s=n[n.length-1];if(t.which===xi.DOWN||t.key==="ArrowDown"?r=e.row<s||o===s?++s:++o:r=e.row<s?--s:--o,r>=0&&r<this._grid.getDataLength()){this._grid.scrollRowIntoView(r);const l=this.rowsToRanges(this.getRowsRange(o,s));this.setSelectedRanges(l)}t.preventDefault(),t.stopPropagation()}}isHandlerColumn(t){const n=this._grid.getColumns()[t].behavior||"";return/move|selectAndMove/.test(n)}rangesToRows(t){const e=[];for(let n=0;n<t.length;n++)for(let r=t[n].fromRow;r<=t[n].toRow;r++)e.push(r);return e}rowsToRanges(t){const e=[],n=this._grid.getColumns().length-1;for(const r of t)e.push(new Slick.Range(r,0,r,n));return e}}class um{constructor(t,e){this.pubSubService=t,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new Nn,this._eventHandler=new Slick.EventHandler,this._addonOptions={...this._defaults,...e}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(t){this._selectedRowsLookup=t}init(t){this._grid=t,this._isUsingDataView=!Array.isArray(t.getData()),this._isUsingDataView&&(this._dataView=t.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(t.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(t.onClick,this.handleClick.bind(this)).subscribe(t.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(t),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new yh(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),typeof this._addonOptions.selectableOverride=="function"&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(t,e){var n,r;if(this._addonOptions={...this._defaults,...e.checkboxSelector},Array.isArray(t)&&e){const o=this.getColumnDefinition();if(!t.some(s=>s.id===o.id)){const s=(r=(n=e==null?void 0:e.checkboxSelector)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:0;s>0?t.splice(s,0,o):t.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:t,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(t){var e;if(this._addonOptions={...this._addonOptions,...t},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?this.hideSelectAllFromColumnHeaderTitleRow():(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const n=(e=this.headerRowNode)===null||e===void 0?void 0:e.querySelector("#filter-checkbox-selectall-container");if(n){n.style.display="flex",n.ariaChecked=String(this._isSelectAllChecked);const r=n.querySelector('input[type="checkbox"]');r&&(r.ariaChecked=String(this._isSelectAllChecked),r.checked=this._isSelectAllChecked)}}}deSelectRows(t){const e=[];for(const n of t)this._selectedRowsLookup[n]&&(e[e.length]=n);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(n=>e.indexOf(n)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(t){var e;const n=[];for(const o of t)this._selectedRowsLookup[o]&&(n[n.length]=o);const r=(e=this._grid.getSelectedRows())===null||e===void 0?void 0:e.concat(n);this._grid.setSelectedRows(r)}getColumnDefinition(){var t,e;const n=String((e=(t=this._addonOptions)===null||t===void 0?void 0:t.columnId)!==null&&e!==void 0?e:this._defaults.columnId);return{id:n,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":`<input id="header-selector${this._selectAll_UID}" type="checkbox"><label for="header-selector${this._selectAll_UID}"></label>`,toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:n,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,sortable:!1,width:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"","","")}hideSelectAllFromColumnHeaderFilterRow(){var t;const e=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(t){this.toggleRowSelectionWithEvent(null,t)}toggleRowSelectionWithEvent(t,e){const n=this._grid.getDataItem(e);if(!this.checkSelectableOverride(e,n,this._grid))return;const r=this._grid.getSelectedRows();this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(t,{row:e,previousSelectedRows:r});const o=this._selectedRowsLookup[e]?this._grid.getSelectedRows().filter(s=>s!==e):this._grid.getSelectedRows().concat(e);this._grid.setSelectedRows(o,"click.toggle"),this._grid.setActiveCell(e,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(t,{row:e,previousSelectedRows:r})}selectableOverride(t){this._selectableOverride=t}addCheckboxToFilterHeaderRow(t){this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{if(n.column.field===(this._addonOptions.field||"_checkbox_selector")){on(n.node);const r=Re("span",{id:"filter-checkbox-selectall-container",ariaChecked:"false"});r.appendChild(Re("input",{type:"checkbox",id:`header-filter-selector${this._selectAll_UID}`})),r.appendChild(Re("label",{htmlFor:`header-filter-selector${this._selectAll_UID}`})),n.node.appendChild(r),this._headerRowNode=n.node,this._bindEventService.bind(r,"click",o=>this.handleHeaderClick(o,n))}})}checkboxSelectionFormatter(t,e,n,r,o,s){if(o&&this.checkSelectableOverride(t,o,s)){const l=this.createUID()+t;return`<input id="selector${l}" type="checkbox" ${this._selectedRowsLookup[t]?'checked="checked" aria-checked="true"':'aria-checked="false"'}><label for="selector${l}"></label>`}return null}checkSelectableOverride(t,e,n){return typeof this._selectableOverride=="function"?this._selectableOverride(t,e,n):!0}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(this._checkboxColumnCellIndex===null){this._checkboxColumnCellIndex=0;const t=this._grid.getColumns();for(let e=0;e<t.length;e++)t[e].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=e)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){var t;const e=this._dataView.getAllSelectedFilteredIds(),n=this._dataView.getFilteredItems();let r=0;if(typeof this._selectableOverride=="function"&&e.length>0)for(let o=0;o<this._dataView.getItemCount();o++){const s=this._dataView.getItemByIdx(o),l=this._dataView.getIdPropertyName(),u=s[l];n.findIndex(c=>c[l]===u)>=0&&!this.checkSelectableOverride(o,s,this._grid)&&r++}if(this._isSelectAllChecked=e.length+r>=n.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const o=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector(`#header-filter-selector${this._selectAll_UID}`);o&&(o.ariaChecked=String(this._isSelectAllChecked),o.checked=this._isSelectAllChecked)}}handleClick(t,e){if(this._grid.getColumns()[e.cell].id===this._addonOptions.columnId&&t.target.type==="checkbox"){if(t.target.ariaChecked=String(t.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}this.toggleRowSelectionWithEvent(t,e.row),t.stopPropagation(),t.stopImmediatePropagation()}}handleHeaderClick(t,e){if(e.column.id===this._addonOptions.columnId&&t.target.type==="checkbox"){if(t.target.ariaChecked=String(t.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}let n=t.target.checked;const r=n?"click.selectAll":"click.unselectAll",o=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(t,{previousSelectedRows:o,caller:r});let s=[];if(n){const l=[];for(let u=0;u<this._grid.getDataLength();u++){const h=this._grid.getDataItem(u);!h.__group&&!h.__groupTotals&&this.checkSelectableOverride(u,h,this._grid)&&l.push(u)}s=l,n=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const l=[],u=this._dataView.getFilteredItems();for(let h=0;h<u.length;h++){const c=u[h];this.checkSelectableOverride(h,c,this._grid)&&l.push(c[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(l,{isRowBeingAdded:n})}this._grid.setSelectedRows(s,r),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(t,{rows:s,previousSelectedRows:o,caller:r}),t.stopPropagation(),t.stopImmediatePropagation()}}handleKeyDown(t,e){(t.which===xi.SPACE||t.key===" ")&&this._grid.getColumns()[e.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(t,e.row),t.preventDefault(),t.stopImmediatePropagation())}handleSelectedRowsChanged(){var t,e;const n=this._grid.getSelectedRows(),r={};let o=0,s=0,l=0,u=0;if(typeof this._selectableOverride=="function")for(l=0;l<this._grid.getDataLength();l++){const c=this._grid.getDataItem(l);this.checkSelectableOverride(s,c,this._grid)||u++}const h=[];for(s=0;s<n.length;s++){o=n[s];const c=this._grid.getDataItem(o);this.checkSelectableOverride(s,c,this._grid)?(r[o]=!0,r[o]!==this._selectedRowsLookup[o]&&(this._grid.invalidateRow(o),delete this._selectedRowsLookup[o])):h.push(o)}for(const c in this._selectedRowsLookup)c!==void 0&&this._grid.invalidateRow(+c);if(this._selectedRowsLookup=r,this._grid.render(),this._isSelectAllChecked=((t=n==null?void 0:n.length)!==null&&t!==void 0?t:0)+u>=this._grid.getDataLength(),(!this._isUsingDataView||!this._addonOptions.applySelectOnAllPages)&&(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow)){const c=(e=this.headerRowNode)===null||e===void 0?void 0:e.querySelector(`#header-filter-selector${this._selectAll_UID}`);c&&(c.ariaChecked=String(this._isSelectAllChecked),c.checked=this._isSelectAllChecked)}if(h.length>0){for(const c of h){const p=n.indexOf(c);n.splice(p,1)}this._grid.setSelectedRows(n,"click.toggle")}}renderSelectAllCheckbox(t){const e=t?' checked="checked" aria-checked="true"':' aria-checked="false"';this._grid.updateColumnHeader(this._addonOptions.columnId||"",`<input id="header-selector${this._selectAll_UID}" type="checkbox"${e}><label for="header-selector${this._selectAll_UID}"></label>`,this._addonOptions.toolTip)}}class cm extends lu{constructor(t,e,n,r,o){var s,l,u,h;super(t,n,r),this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:c=>c.name},this.onAfterMenuShow=new Slick.Event,this.onBeforeMenuShow=new Slick.Event,this.onMenuClose=new Slick.Event,this.onCommand=new Slick.Event,this.onColumnsChanged=new Slick.Event,this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=(s=this.sharedService.allColumns)!==null&&s!==void 0?s:[],this._gridUid=(h=(u=(l=this.grid)===null||l===void 0?void 0:l.getUID)===null||u===void 0?void 0:u.call(l))!==null&&h!==void 0?h:"",this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(t){this._columns=t}get gridOptions(){return this.grid.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,au.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(t,e)=>{if(e&&e.optionsBefore&&e.optionsAfter){const n=e.optionsBefore.frozenColumn>=0&&e.optionsAfter.frozenColumn===-1,r=e.optionsBefore.frozenColumn===-1&&e.optionsAfter.frozenColumn>=0;(n||r)&&this.recreateGridMenu()}})}init(){var t;this._gridUid=(t=this.grid.getUID())!==null&&t!==void 0?t:"",this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,n=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...n,...this.addGridMenuCustomCommands(n)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this._addonOptions.commandItems=this._addonOptions.commandItems,this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){var t,e;this._bindEventService.unbindAll(),(t=this._menuElm)===null||t===void 0||t.remove(),this._menuElm=null,(e=this._gridMenuButtonElm)===null||e===void 0||e.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(fm.call(this,this._menuElm),this._listElm=Re("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",pm.bind(this),void 0,"parent-menu"))}createGridMenu(){var t,e,n,r;const o=this._gridUid?`.${this._gridUid}`:"",s=((t=this._addonOptions)===null||t===void 0?void 0:t.menuWidth)||this._defaults.menuWidth,l=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",u=this.grid.getContainerNode();if(this._headerElm=u.querySelector(`.slick-header-${l}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${s}px)`,((e=this._addonOptions.resizeOnShowHeaderRow)!==null&&e!==void 0?e:this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const p=u.querySelector(`${o} .slick-headerrow`);p&&(p.style.width=`calc(100% - ${s}px)`)}((n=this._addonOptions.showButton)!==null&&n!==void 0?n:this._defaults.showButton)&&(this._gridMenuButtonElm=Re("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),!((r=this._addonOptions)===null||r===void 0)&&r.iconCssClass&&this._gridMenuButtonElm.classList.add(...this._addonOptions.iconCssClass.split(" ")),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement.firstChild),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(t,e=0,n){const r=n==null?void 0:n.command;let o=e===1&&r?r.replace(/\s/g,""):"";o&&(this._subMenuParentId=o),e>1&&(o=this._subMenuParentId);const s=`${this.menuCssClass} slick-menu-level-${e} ${this._gridUid}`,l=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${e}${this.gridUidSelector}`);if(l){if(l.dataset.subMenuParent===o)return l;this.disposeSubMenus()}const u=Re("div",{role:"menu",className:s,ariaLabel:e>1?"SubMenu":"Grid Menu"});e>0&&(u.classList.add("slick-submenu"),o&&(u.dataset.subMenuParent=o));const h={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:e};return this._commandMenuElm=this.recreateCommandList(t,u,h,n),e++,u}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(t){var e,n,r;const o={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",o),!(typeof((e=this._addonOptions)===null||e===void 0?void 0:e.onMenuClose)=="function"&&this._addonOptions.onMenuClose(t,o)===!1||this.onMenuClose.notify(o,null,this).getReturnValue()===!1)){if(this._isMenuOpen=!1,typeof((n=this.grid)===null||n===void 0?void 0:n.autosizeColumns)=="function"){const s=this.grid.getUID()||"";this._areVisibleColumnDifferent&&s&&document.querySelector(`.${s}`)!==null&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),(r=this._menuElm)===null||r===void 0||r.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(t,e,n,r){var o,s,l,u,h,c,p,m,v,_,C;const x=(s=(o=t==null?void 0:t.touches)===null||o===void 0?void 0:o[0])!==null&&s!==void 0?s:t,S=e.classList.contains("slick-submenu"),E=S?t.target.closest(".slick-menu-item"):x.target;if(E){const D=n||this._gridMenuButtonElm,A=Wn(n),P=Wn(E),M=r??this._addonOptions,B=getComputedStyle(D),Z=parseInt((l=B==null?void 0:B.width)!==null&&l!==void 0?l:(u=this._defaults)===null||u===void 0?void 0:u.menuWidth,10),L=(h=e==null?void 0:e.offsetWidth)!==null&&h!==void 0?h:0,de=(p=(c=M==null?void 0:M.contentMinWidth)!==null&&c!==void 0?c:this._defaults.contentMinWidth)!==null&&p!==void 0?p:0,be=(de>L?de:L)||0,J=(m=A==null?void 0:A.top)!==null&&m!==void 0?m:0,U=(v=A==null?void 0:A.right)!==null&&v!==void 0?v:0;let F,ae;if(S?(ae=(_=P==null?void 0:P.top)!==null&&_!==void 0?_:0,F=(C=P==null?void 0:P.left)!==null&&C!==void 0?C:0):(ae=J+D.offsetHeight,F=(M==null?void 0:M.dropSide)==="right"?U-Z:U-be),S){const De=(e==null?void 0:e.clientHeight)||0,{bottom:ne,top:pe}=ou(E);(ne<De&&pe>ne?"top":"bottom")==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),ae-=De-E.clientHeight):(e.classList.remove("dropup"),e.classList.add("dropdown"))}const Ke=this.grid.getGridPosition();let Ie=F+Number(L);S&&(Ie+=E.clientWidth);const xe=document.documentElement.clientWidth;(Ie>=Ke.width||Ie>=xe?"left":"right")==="left"||!S&&(M==null?void 0:M.dropSide)==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),S&&(F-=Number(L))):(e.classList.remove("dropleft"),e.classList.add("dropright"),S&&(F+=E.offsetWidth)),e.style.top=`${ae}px`,e.style.left=`${F}px`,de>0&&(e.style.minWidth=`${de}px`),e.style.opacity="1",e.style.display="block"}}openGridMenu(){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(t,"target",{writable:!0,configurable:!0,value:Re("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(t)}showGridMenu(t,e){var n,r,o,s,l;const u=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t;if(t.preventDefault(),on(this._menuElm),(o=this._menuElm)===null||o===void 0||o.remove(),this._addonOptions){const h={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},c={...this._addonOptions,...e};if(c&&!this.extensionUtility.runOverrideFunctionWhenExists(c.menuUsabilityOverride,h)||typeof t.stopPropagation=="function"&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",h),typeof(c==null?void 0:c.onBeforeMenuShow)=="function"&&c.onBeforeMenuShow(t,h)===!1||this.onBeforeMenuShow.notify(h,null,this).getReturnValue()===!1))return;this._menuElm=this.createCommandMenu((l=(s=this._addonOptions)===null||s===void 0?void 0:s.commandItems)!==null&&l!==void 0?l:[]),this.createColumnPickerContainer(),au.call(this),this._columnCheckboxes=[],mm.call(this,c),document.body.appendChild(this._menuElm),this._menuElm.style.opacity="0";const p=((c==null?void 0:c.marginBottom)!==void 0?c.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=Gs(c==null?void 0:c.minHeight,""),(c==null?void 0:c.height)!==void 0?this._menuElm.style.height=Gs(c.height,""):this._menuElm.style.maxHeight=Gs(c==null?void 0:c.maxHeight,`${window.innerHeight-u.clientY-p}px`);let m=t.target.nodeName==="BUTTON"?t.target:t.target.querySelector("button");m||(m=t.target.parentElement),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm),this.repositionMenu(t,this._menuElm,m,c),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",h),typeof(c==null?void 0:c.onAfterMenuShow)=="function"&&c.onAfterMenuShow(t,h),this.onAfterMenuShow.notify(h,null,this)}}translateGridMenu(){var t;if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(((t=this._addonOptions)===null||t===void 0?void 0:t.commandItems)||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(t){t&&(t.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),t.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),t.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),t.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(t){var e,n,r,o,s,l,u,h,c,p,m,v,_;const C=this.gridOptions.backendServiceApi||null,x=[],S=this.gridOptions,E=ho(S),D=(e=this._addonOptions)===null||e===void 0?void 0:e.commandLabels;if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearFrozenColumnsCommand){const P="clear-pinning";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"fa fa-times",titleKey:`${E}${(n=D==null?void 0:D.clearFrozenColumnsCommandKey)!==null&&n!==void 0?n:"CLEAR_PINNING"}`,disabled:!1,command:P,positionOrder:52})}if(this.gridOptions&&this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllFiltersCommand){const P="clear-filter";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"fa fa-filter text-danger",titleKey:`${E}${(r=D==null?void 0:D.clearAllFiltersCommandKey)!==null&&r!==void 0?r:"CLEAR_ALL_FILTERS"}`,disabled:!1,command:P,positionOrder:50})}if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideToggleFilterCommand){const P="toggle-filter";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"fa fa-random",titleKey:`${E}${(o=D==null?void 0:D.toggleFilterCommandKey)!==null&&o!==void 0?o:"TOGGLE_FILTER_ROW"}`,disabled:!1,command:P,positionOrder:53})}if(C&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideRefreshDatasetCommand){const P="refresh-dataset";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"fa fa-refresh",titleKey:`${E}${(s=D==null?void 0:D.refreshDatasetCommandKey)!==null&&s!==void 0?s:"REFRESH_DATASET"}`,disabled:!1,command:P,positionOrder:57})}}if(this.gridOptions.showPreHeaderPanel&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideTogglePreHeaderCommand){const P="toggle-preheader";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"fa fa-random",titleKey:`${E}${(l=D==null?void 0:D.togglePreHeaderCommandKey)!==null&&l!==void 0?l:"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:P,positionOrder:53})}if(this.gridOptions.enableSorting&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllSortingCommand){const P="clear-sorting";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"fa fa-unsorted text-danger",titleKey:`${E}${(u=D==null?void 0:D.clearAllSortingCommandKey)!==null&&u!==void 0?u:"CLEAR_ALL_SORTING"}`,disabled:!1,command:P,positionOrder:51})}if(!((h=this.gridOptions)===null||h===void 0)&&h.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportCsvCommand){const P="export-csv";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"fa fa-download",titleKey:`${E}${(c=D==null?void 0:D.exportCsvCommandKey)!==null&&c!==void 0?c:"EXPORT_TO_CSV"}`,disabled:!1,command:P,positionOrder:54})}if(this.gridOptions&&this.gridOptions.enableExcelExport&&this._addonOptions&&!this._addonOptions.hideExportExcelCommand){const P="export-excel";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${E}${(p=D==null?void 0:D.exportExcelCommandKey)!==null&&p!==void 0?p:"EXPORT_TO_EXCEL"}`,disabled:!1,command:P,positionOrder:55})}if(!((m=this.gridOptions)===null||m===void 0)&&m.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportTextDelimitedCommand){const P="export-text-delimited";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${E}${(v=D==null?void 0:D.exportTextDelimitedCommandKey)!==null&&v!==void 0?v:"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:P,positionOrder:56})}const A=((_=this._addonOptions)===null||_===void 0?void 0:_.commandItems)||[];return this.gridOptions&&this._addonOptions&&(Array.isArray(x)&&x.length>0||Array.isArray(A)&&A.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu")),x}executeGridMenuInternalCustomCommands(t,e){var n,r,o,s,l;const u=((n=this.sharedService)===null||n===void 0?void 0:n.externalRegisteredResources)||[];if(e!=null&&e.command)switch(e.command){case"clear-pinning":const h=[...this.sharedService.visibleColumns],c={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(c),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.frozenRow=c.frozenRow,this.sharedService.gridOptions.frozenBottom=c.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,Array.isArray(h)&&this.grid.setColumns(h),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const m=u.find(S=>S.className==="TextExportService");m!=null&&m.exportToFile?m.exportToFile({delimiter:fs.comma,format:dn.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":const v=u.find(S=>S.className==="ExcelExportService");v!=null&&v.exportToExcel?v.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const _=u.find(S=>S.className==="TextExportService");_!=null&&_.exportToFile?_.exportToFile({delimiter:fs.tab,format:dn.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-filter":let C=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.showHeaderRow)!==null&&o!==void 0?o:!1;C=!C,this.grid.setHeaderRowVisibility(C),C===!0&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":const x=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.showPreHeaderPanel)!==null&&l!==void 0?l:!1;this.grid.setPreHeaderPanelVisibility(!x);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset();break}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"fa fa-bars",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this._isMenuOpen&&this.menuElement!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.hideMenu(t)}}handleMenuItemCommandClick(t,e,n,r=0){var o,s;if(n!=="divider"&&!n.disabled&&!n.divider)if((n.command||"")&&!n.commandItems){const u={grid:this.grid,command:n.command,item:n,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(t,u),this.pubSubService.publish("onGridMenuCommand",u),typeof((o=this._addonOptions)===null||o===void 0?void 0:o.onCommand)=="function"&&this._addonOptions.onCommand(t,u),this.onCommand.notify(u,null,this),typeof n.action=="function"&&n.action.call(this,t,u),!(!((s=this._addonOptions)===null||s===void 0)&&s.leaveOpen)&&!t.defaultPrevented&&this.hideMenu(t),t.preventDefault(),t.stopPropagation()}else n.commandItems&&this.repositionSubMenu(t,n,r)}handleMenuItemMouseOver(t,e,n,r=0){n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems?this.repositionSubMenu(t,n,r):r===0&&this.disposeSubMenus())}recreateCommandList(t,e,n,r){var o;const s=n.level||0;if(t.length>0){const l=Re("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},e);if(s===0){this.populateCommandOrOptionTitle("command",this.addonOptions,l,s);const u=(o=e.querySelector(".slick-command-header"))!==null&&o!==void 0?o:Re("div",{className:"slick-command-header"});u.classList.add("with-close"),hm.call(this,u),l.appendChild(u)}return r&&s>0&&this.addSubMenuTitleWhenExists(r,l),this.populateCommandOrOptionItems("command",this._addonOptions,l,t,n,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),l}return null}repositionSubMenu(t,e,n){const r=(e==null?void 0:e.commandItems)||[],o=this.createCommandMenu(r,n+1,e);o.style.display="block",document.body.appendChild(o),this.repositionMenu(t,o)}}function hm(a){const e=Re("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"×",dataset:{dismiss:this instanceof Eh?"slick-column-picker":"slick-grid-menu"}});a.appendChild(e)}function fm(a){var t,e,n;const r=this;!((t=r.addonOptions)===null||t===void 0)&&t.columnTitle&&(r._columnTitleElm=Re("div",{className:"slick-menu-title",textContent:(n=(e=r.addonOptions)===null||e===void 0?void 0:e.columnTitle)!==null&&n!==void 0?n:r._defaults.columnTitle},a))}function pm(a){var t,e;const n=this,r=n instanceof Eh?"columnPicker":"gridMenu";if(a.target.dataset.option==="autoresize"){const o=n.getVisibleColumns();a.target.ariaChecked=String(a.target.checked);const s=a.target.checked;n.grid.setOptions({forceFitColumns:s}),n.grid.setColumns(o);return}if(a.target.dataset.option==="syncresize"){a.target.ariaChecked=String(a.target.checked),n.grid.setOptions({syncColumnCellResize:!!a.target.checked});return}if(a.target.type==="checkbox"){n._areVisibleColumnDifferent=!0,a.target.ariaChecked=String(a.target.checked);const o=a.target.checked,s=a.target.dataset.columnid||"",l=[];if(n._columnCheckboxes.forEach((c,p)=>{c.checked&&l.push(n.columns[p])}),!l.length){a.target.checked=!0;return}if(n.grid.setColumns(l),(!n.sharedService.visibleColumns||Array.isArray(l)&&l.length!==n.sharedService.visibleColumns.length)&&(n.sharedService.visibleColumns=l),n.gridOptions.enableRowSelection&&o){const c=n.grid.getSelectedRows();n.grid.setSelectedRows(c)}const u=(t=n.gridOptions.frozenColumn)!==null&&t!==void 0?t:-1;u>=0&&n.extensionUtility.readjustFrozenColumnIndexWhenNeeded(u,n.columns,l);const h={columnId:s,showing:o,allColumns:n.columns,visibleColumns:l,columns:l,grid:n.grid};n.pubSubService.publish(`on${vl(r)}ColumnsChanged`,h),typeof((e=n.addonOptions)===null||e===void 0?void 0:e.onColumnsChanged)=="function"&&n.addonOptions.onColumnsChanged(a,h),n.onColumnsChanged.notify(h,null,n)}}function mm(a){var t,e;const n=this,r=n instanceof cm?"gridmenu-":"";for(const o of n.columns){const s=o.id,l=document.createElement("li");o.excludeFromColumnPicker&&(l.className="hidden");const u=Re("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-${s}`,dataset:{columnid:`${s}`}});n.grid.getColumnIndex(s)>=0&&(u.ariaChecked="true",u.checked=!0),l.appendChild(u),n._columnCheckboxes.push(u);const p=(typeof(a==null?void 0:a.headerColumnValueExtractor)=="function"?a.headerColumnValueExtractor:n._defaults.headerColumnValueExtractor)(o,n.gridOptions),m=document.createElement("label");m.htmlFor=`${n._gridUid}-${r}colpicker-${s}`,m.innerHTML=Ln(n.gridOptions,p),l.appendChild(m),n._listElm.appendChild(l)}if((!a.hideForceFitButton||!a.hideSyncResizeButton)&&n._listElm.appendChild(document.createElement("hr")),!(a!=null&&a.hideForceFitButton)){const o=document.createElement("li");o.appendChild(Re("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-forcefit`,ariaChecked:String(n.gridOptions.forceFitColumns),checked:n.gridOptions.forceFitColumns,dataset:{option:"autoresize"}})),o.appendChild(Re("label",{htmlFor:`${n._gridUid}-${r}colpicker-forcefit`,textContent:(t=a==null?void 0:a.forceFitTitle)!==null&&t!==void 0?t:""})),n._listElm.appendChild(o)}if(!(a!=null&&a.hideSyncResizeButton)){const o=document.createElement("li");o.appendChild(Re("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-syncresize`,ariaChecked:String(n.gridOptions.syncColumnCellResize),checked:n.gridOptions.syncColumnCellResize,dataset:{option:"syncresize"}})),o.appendChild(Re("label",{htmlFor:`${n._gridUid}-${r}colpicker-syncresize`,textContent:(e=a==null?void 0:a.syncResizeTitle)!==null&&e!==void 0?e:""})),n._listElm.appendChild(o)}}function au(){const a=this,t=a.grid.getColumns().slice(0),e=new Array(a.columns.length);for(let n=0;n<e.length;n++)a.grid.getColumnIndex(a.columns[n].id)===void 0?e[n]=a.columns[n]:e[n]=t.shift();a._columns=e}class Eh{constructor(t,e,n){var r,o,s,l;this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this.onColumnsChanged=new Slick.Event,this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:u=>u.name},this._bindEventService=new Nn,this._eventHandler=new Slick.EventHandler,this._columns=(r=this.sharedService.allColumns)!==null&&r!==void 0?r:[],this._gridUid=(l=(s=(o=this.grid)===null||o===void 0?void 0:o.getUID)===null||s===void 0?void 0:s.call(o))!==null&&l!==void 0?l:"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(t){this._columns=t}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){var t;this._gridUid=(t=this.grid.getUID())!==null&&t!==void 0?t:"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,au.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){var t,e;this._bindEventService.unbindAll("parent-menu"),(t=this._listElm)===null||t===void 0||t.remove(),(e=this._menuElm)===null||e===void 0||e.remove(),this._menuElm=null}createPickerMenu(){const t=Re("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return au.call(this),fm.call(this,t),hm.call(this,t),this._listElm=Re("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(t,"click",pm.bind(this),void 0,"parent-menu"),document.body.appendChild(t),t}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(t){var e;(this._menuElm!==t.target&&!(!((e=this._menuElm)===null||e===void 0)&&e.contains(t.target))||t.target.className==="close"&&t.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(t){t.preventDefault(),on(this._listElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),mm.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(t)}repositionMenu(t){var e,n;const r=(n=(e=t==null?void 0:t.touches)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:t;this._menuElm&&(this._menuElm.style.top=`${r.pageY-10}px`,this._menuElm.style.left=`${r.pageX-10}px`,this._menuElm.style.minHeight=Gs(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=Gs(this.addonOptions.maxHeight,`${window.innerHeight-r.clientY}px`),this._menuElm.style.display="block",this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm))}translateTitleLabels(t){t&&(t.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const du=(a,t,e,n,r,o)=>{const s=n.params||{};if(!s.formatters||!Array.isArray(s.formatters))throw new Error(`[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.
    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);const l=s.formatters;let u=e;return l.forEach((h,c)=>{if(typeof h!="function")throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${c}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);u=h.call(void 0,a,t,u,n,r,o)}),u},Sh=Us||hs;function vm(a,t){if(Array.isArray(a)){for(const e of a)if(e.editor)if(e.formatter&&e.formatter!==du&&e.formatter!==t){const n=e.formatter;e.formatter=du,e.params={...e.params,formatters:[n,t]}}else e.formatter&&e.formatter===du&&e.params?e.params.formatters.findIndex(n=>n===t)===-1&&(e.params.formatters=[...e.params.formatters,t]):e.formatter=t}}function un(a,t,e,n){let r,o,s="",l="";switch(e){case"currency":r=je.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":r=je.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":r=je.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL;break}const u=t&&typeof t.getOptions=="function"?t.getOptions():{},h=Ko("minDecimal",a,u,r),c=Ko("maxDecimal",a,u,o),p=Ko("decimalSeparator",a,u,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR),m=Ko("thousandSeparator",a,u,je.DEFAULT_NUMBER_THOUSAND_SEPARATOR),v=Ko("displayNegativeNumberWithParentheses",a,u,je.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),_=Ko("currencyPrefix",a,u,""),C=Ko("currencySuffix",a,u,"");return n==="cell"&&(s=Ko("numberPrefix",a,u,""),l=Ko("numberSuffix",a,u,"")),{minDecimal:h,maxDecimal:c,decimalSeparator:p,thousandSeparator:m,wrapNegativeNumber:v,currencyPrefix:_,currencySuffix:C,numberPrefix:s,numberSuffix:l}}function Ko(a,t,e,n){var r;const o=t&&t.params;return o&&o.hasOwnProperty(a)?o[a]:!((r=e==null?void 0:e.formatterOptions)===null||r===void 0)&&r.hasOwnProperty(a)?e.formatterOptions[a]:n}function cn(a,t){const e=Fr(a);return(n,r,o,s,l,u)=>{var h,c,p,m,v;const _=u&&typeof u.getOptions=="function"?u.getOptions():{},C=(c=(h=_==null?void 0:_.formatterOptions)===null||h===void 0?void 0:h.dateSeparator)!==null&&c!==void 0?c:t,x=(p=s==null?void 0:s.type)!==null&&p!==void 0?p:ie.date,S=Fr(x),E=(v=(m=s==null?void 0:s.params)===null||m===void 0?void 0:m.parseDateAsUtc)!==null&&v!==void 0?v:!1,D=Sh(o,S,!1).isValid();let A=o;if(o&&D&&(A=E?Sh.utc(o).format(e):Sh(o).format(e)),A&&C!==t){const P=new RegExp(t,"ig");A=A.replace(P,C)}return A}}function wh(a,t,e,n,r,o){let s=!1;e!=null&&e.hasOwnProperty("exportWithFormatter")?s=!!e.exportWithFormatter:o!=null&&o.hasOwnProperty("exportWithFormatter")&&(s=!!o.exportWithFormatter);let l;n&&e.exportCustomFormatter?l=e.exportCustomFormatter:s&&e.formatter&&(l=e.formatter);const u=uu(l,a,t,e,n,r);return o!=null&&o.sanitizeDataExport&&typeof u=="string"?or(u):u}function uu(a,t,e,n,r,o){let s="",u=n.field||n.id||"";if(typeof n.field=="string"&&n.field.indexOf(".")>0){const c=n.field.split(".");u=c.length>0?c[0]:n.field}const h=r!=null&&r.hasOwnProperty(u)?r[u]:null;if(typeof a=="function"){const c=a(t,e,h,n,r,o);s=c,c&&typeof c=="object"&&c.hasOwnProperty("text")&&(s=c.text),s==null&&(s="")}else s=r!=null&&r.hasOwnProperty(u)?h:"",s==null&&(s="");return typeof s=="object"&&!(s instanceof Date)&&Object.entries(s).length===0&&(s=""),s}class j_ extends am{constructor(t,e,n,r){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this.treeDataService=r,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(n.gridOptions.contextMenu)}init(t){this._addonOptions={...this._defaults,...t};const e=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...e,...this.addMenuCustomCommands(e)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){var t,e;const n=(e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)!==null&&e!==void 0?e:{},r=this.sharedService.gridOptions.contextMenu;if(r&&(n!=null&&n.enableTranslate)){const o=r.commandItems||[],s=r.optionItems||[];r.commandTitleKey&&(r.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.commandTitleKey,"TEXT_COMMANDS")||r.commandTitle),r.optionTitleKey&&(r.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.optionTitleKey,"TEXT_COMMANDS")||r.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(o,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(s,"optionItems")}}handleOnContextMenu(t,e){this.disposeAllMenus();const n=this.grid.getCellFromEvent(t);if(n){const r=this.grid.getDataItem(n.row),o=this.grid.getColumns()[n.cell];if(e=e||{},e.cell=n.cell,e.row=n.row,e.column=o,e.dataContext=r,e.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,e))return;this._menuElm=this.createParentMenu(t),this._menuElm&&t.preventDefault(),this._menuElm&&(this.repositionMenu(t,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(t){var e;const n=[],r=this.sharedService&&this.sharedService.gridOptions||{},o=r==null?void 0:r.contextMenu,s=(e=this.sharedService)===null||e===void 0?void 0:e.dataView,l=ho(r);if(o&&!o.hideCopyCellValueCommand){const u="copy";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconCopyCellValueCommand||"fa fa-clone",titleKey:`${l}COPY`,disabled:!1,command:u,positionOrder:50,action:(h,c)=>{this.copyToClipboard(c)},itemUsabilityOverride:h=>{const c=h==null?void 0:h.column,p=h==null?void 0:h.dataContext;if(typeof c.queryFieldNameGetterFn=="function"){const m=Va(c,p,"");if(m!==""&&m!==void 0)return!0}else if(c&&p.hasOwnProperty(c.field))return p[c.field]!==""&&p[c.field]!==null&&p[c.field]!==void 0;return!1}})}if(r!=null&&r.enableTextExport&&o&&!o.hideExportCsvCommand){const u="export-csv";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportCsvCommand||"fa fa-download",titleKey:`${l}EXPORT_TO_CSV`,disabled:!1,command:u,positionOrder:51,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(p!=null&&p.exportToFile)p.exportToFile({delimiter:fs.comma,format:dn.csv});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(r&&r.enableExcelExport&&o&&!o.hideExportExcelCommand){const u="export-excel";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${l}EXPORT_TO_EXCEL`,disabled:!1,command:u,positionOrder:52,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="ExcelExportService");if(p!=null&&p.exportToExcel)p.exportToExcel();else throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };")}})}if(r!=null&&r.enableTextExport&&o&&!o.hideExportTextDelimitedCommand){const u="export-text-delimited";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${l}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:u,positionOrder:53,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(p!=null&&p.exportToFile)p.exportToFile({delimiter:fs.tab,format:dn.txt});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(r&&(r.enableGrouping||r.enableDraggableGrouping||r.enableTreeData)){if(o&&!o.hideCopyCellValueCommand&&n.push({divider:!0,command:"",positionOrder:54}),r&&!r.enableTreeData&&o&&!o.hideClearAllGrouping){const u="clear-grouping";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconClearGroupingCommand||"fa fa-times",titleKey:`${l}CLEAR_ALL_GROUPING`,disabled:!1,command:u,positionOrder:55,action:()=>{s.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}if(r&&o&&!o.hideCollapseAllGroups){const u="collapse-all-groups";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconCollapseAllGroupsCommand||"fa fa-compress",titleKey:`${l}COLLAPSE_ALL_GROUPS`,disabled:!1,command:u,positionOrder:56,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):s.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}if(r&&o&&!o.hideExpandAllGroups){const u="expand-all-groups";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExpandAllGroupsCommand||"fa fa-expand",titleKey:`${l}EXPAND_ALL_GROUPS`,disabled:!1,command:u,positionOrder:57,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):s.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(n),n}copyToClipboard(t){var e,n,r,o,s;try{if(t&&t.grid&&t.command){const l=(n=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)!==null&&n!==void 0?n:{},u=(r=t==null?void 0:t.cell)!==null&&r!==void 0?r:0,h=(o=t==null?void 0:t.row)!==null&&o!==void 0?o:0,c=t==null?void 0:t.column,p=t==null?void 0:t.dataContext,m=(s=this.sharedService)===null||s===void 0?void 0:s.slickGrid,v=l&&(l.excelExportOptions||l.textExportOptions);let _=wh(h,u,c,p,m,v);typeof c.queryFieldNameGetterFn=="function"&&(_=Va(c,p,""));let C=_;typeof _=="string"&&(C=_.replace(/^([·|⮞|⮟]\s*)|([·|⮞|⮟])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const x=document.createElement("textarea");x&&document.body&&(x.style.position="absolute",x.style.opacity="0",x.value=C,document.body.appendChild(x),x.select(),document.execCommand("copy",!1,C)&&x.remove())}}catch{}}sortMenuItems(){var t,e;const n=(e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)===null||e===void 0?void 0:e.contextMenu;n&&(this.extensionUtility.sortItems(n.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(n.optionItems||[],"positionOrder"))}}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function gm(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),e.push.apply(e,n)}return e}function qo(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(e),!0).forEach(function(n){X_(a,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):gm(Object(e)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))})}return a}function cu(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cu=function(t){return typeof t}:cu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(a)}function X_(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function mo(){return mo=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},mo.apply(this,arguments)}function K_(a,t){if(a==null)return{};var e={},n=Object.keys(a),r,o;for(o=0;o<n.length;o++)r=n[o],!(t.indexOf(r)>=0)&&(e[r]=a[r]);return e}function q_(a,t){if(a==null)return{};var e=K_(a,t),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(e[n]=a[n])}return e}function Z_(a){return Q_(a)||J_(a)||e0(a)||t0()}function Q_(a){if(Array.isArray(a))return xh(a)}function J_(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function e0(a,t){if(a){if(typeof a=="string")return xh(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xh(a,t)}}function xh(a,t){(t==null||t>a.length)&&(t=a.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=a[e];return n}function t0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i0="1.15.1";function gs(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var _s=gs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xa=gs(/Edge/i),_m=gs(/firefox/i),Ka=gs(/safari/i)&&!gs(/chrome/i)&&!gs(/android/i),bm=gs(/iP(ad|od|hone)/i),Cm=gs(/chrome/i)&&gs(/android/i),ym={capture:!1,passive:!1};function _i(a,t,e){a.addEventListener(t,e,!_s&&ym)}function mi(a,t,e){a.removeEventListener(t,e,!_s&&ym)}function hu(a,t){if(t){if(t[0]===">"&&(t=t.substring(1)),a)try{if(a.matches)return a.matches(t);if(a.msMatchesSelector)return a.msMatchesSelector(t);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(t)}catch{return!1}return!1}}function n0(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function Fo(a,t,e,n){if(a){e=e||document;do{if(t!=null&&(t[0]===">"?a.parentNode===e&&hu(a,t):hu(a,t))||n&&a===e)return a;if(a===e)break}while(a=n0(a))}return null}var Em=/\s+/g;function bn(a,t,e){if(a&&t)if(a.classList)a.classList[e?"add":"remove"](t);else{var n=(" "+a.className+" ").replace(Em," ").replace(" "+t+" "," ");a.className=(n+(e?" "+t:"")).replace(Em," ")}}function Dt(a,t,e){var n=a&&a.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function _l(a,t){var e="";if(typeof a=="string")e=a;else do{var n=Dt(a,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(a=a.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function Sm(a,t,e){if(a){var n=a.getElementsByTagName(t),r=0,o=n.length;if(e)for(;r<o;r++)e(n[r],r);return n}return[]}function Zo(){var a=document.scrollingElement;return a||document.documentElement}function sn(a,t,e,n,r){if(!(!a.getBoundingClientRect&&a!==window)){var o,s,l,u,h,c,p;if(a!==window&&a.parentNode&&a!==Zo()?(o=a.getBoundingClientRect(),s=o.top,l=o.left,u=o.bottom,h=o.right,c=o.height,p=o.width):(s=0,l=0,u=window.innerHeight,h=window.innerWidth,c=window.innerHeight,p=window.innerWidth),(t||e)&&a!==window&&(r=r||a.parentNode,!_s))do if(r&&r.getBoundingClientRect&&(Dt(r,"transform")!=="none"||e&&Dt(r,"position")!=="static")){var m=r.getBoundingClientRect();s-=m.top+parseInt(Dt(r,"border-top-width")),l-=m.left+parseInt(Dt(r,"border-left-width")),u=s+o.height,h=l+o.width;break}while(r=r.parentNode);if(n&&a!==window){var v=_l(r||a),_=v&&v.a,C=v&&v.d;v&&(s/=C,l/=_,p/=_,c/=C,u=s+c,h=l+p)}return{top:s,left:l,bottom:u,right:h,width:p,height:c}}}function wm(a){var t=sn(a),e=parseInt(Dt(a,"padding-left")),n=parseInt(Dt(a,"padding-top")),r=parseInt(Dt(a,"padding-right")),o=parseInt(Dt(a,"padding-bottom"));return t.top+=n+parseInt(Dt(a,"border-top-width")),t.left+=e+parseInt(Dt(a,"border-left-width")),t.width=a.clientWidth-e-r,t.height=a.clientHeight-n-o,t.bottom=t.top+t.height,t.right=t.left+t.width,t}function xm(a,t,e){for(var n=$s(a,!0),r=sn(a)[t];n;){var o=sn(n)[e],s=void 0;if(e==="top"||e==="left"?s=r>=o:s=r<=o,!s)return n;if(n===Zo())break;n=$s(n,!1)}return!1}function $l(a,t,e,n){for(var r=0,o=0,s=a.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Ut.ghost&&(n||s[o]!==Ut.dragged)&&Fo(s[o],e.draggable,a,!1)){if(r===t)return s[o];r++}o++}return null}function Th(a,t){for(var e=a.lastElementChild;e&&(e===Ut.ghost||Dt(e,"display")==="none"||t&&!hu(e,t));)e=e.previousElementSibling;return e||null}function xn(a,t){var e=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Ut.clone&&(!t||hu(a,t))&&e++;return e}function Tm(a){var t=0,e=0,n=Zo();if(a)do{var r=_l(a),o=r.a,s=r.d;t+=a.scrollLeft*o,e+=a.scrollTop*s}while(a!==n&&(a=a.parentNode));return[t,e]}function r0(a,t){for(var e in a)if(a.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===a[e][n])return Number(e)}return-1}function $s(a,t){if(!a||!a.getBoundingClientRect)return Zo();var e=a,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=Dt(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Zo();if(n||t)return e;n=!0}}while(e=e.parentNode);return Zo()}function o0(a,t){if(a&&t)for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);return a}function Oh(a,t){return Math.round(a.top)===Math.round(t.top)&&Math.round(a.left)===Math.round(t.left)&&Math.round(a.height)===Math.round(t.height)&&Math.round(a.width)===Math.round(t.width)}var qa;function Om(a,t){return function(){if(!qa){var e=arguments,n=this;e.length===1?a.call(n,e[0]):a.apply(n,e),qa=setTimeout(function(){qa=void 0},t)}}}function s0(){clearTimeout(qa),qa=void 0}function Am(a,t,e){a.scrollLeft+=t,a.scrollTop+=e}function Ah(a){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function km(a,t){Dt(a,"position","absolute"),Dt(a,"top",t.top),Dt(a,"left",t.left),Dt(a,"width",t.width),Dt(a,"height",t.height)}function kh(a){Dt(a,"position",""),Dt(a,"top",""),Dt(a,"left",""),Dt(a,"width",""),Dt(a,"height","")}var hr="Sortable"+new Date().getTime();function l0(){var a=[],t;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Dt(r,"display")==="none"||r===Ut.ghost)){a.push({target:r,rect:sn(r)});var o=qo({},a[a.length-1].rect);if(r.thisAnimationDuration){var s=_l(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(n){a.push(n)},removeAnimationState:function(n){a.splice(r0(a,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,s=0;a.forEach(function(l){var u=0,h=l.target,c=h.fromRect,p=sn(h),m=h.prevFromRect,v=h.prevToRect,_=l.rect,C=_l(h,!0);C&&(p.top-=C.f,p.left-=C.e),h.toRect=p,h.thisAnimationDuration&&Oh(m,p)&&!Oh(c,p)&&(_.top-p.top)/(_.left-p.left)===(c.top-p.top)/(c.left-p.left)&&(u=d0(_,m,v,r.options)),Oh(p,c)||(h.prevFromRect=c,h.prevToRect=p,u||(u=r.options.animation),r.animate(h,_,p,u)),u&&(o=!0,s=Math.max(s,u),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},u),h.thisAnimationDuration=u)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),a=[]},animate:function(n,r,o,s){if(s){Dt(n,"transition",""),Dt(n,"transform","");var l=_l(this.el),u=l&&l.a,h=l&&l.d,c=(r.left-o.left)/(u||1),p=(r.top-o.top)/(h||1);n.animatingX=!!c,n.animatingY=!!p,Dt(n,"transform","translate3d("+c+"px,"+p+"px,0)"),this.forRepaintDummy=a0(n),Dt(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Dt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Dt(n,"transition",""),Dt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function a0(a){return a.offsetWidth}function d0(a,t,e,n){return Math.sqrt(Math.pow(t.top-a.top,2)+Math.pow(t.left-a.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var Yl=[],Ih={initializeByDefault:!0},Za={mount:function(t){for(var e in Ih)Ih.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ih[e]);Yl.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Yl.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";Yl.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](qo({sortable:e},n)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](qo({sortable:e},n)))})},initializePlugins:function(t,e,n,r){Yl.forEach(function(l){var u=l.pluginName;if(!(!t.options[u]&&!l.initializeByDefault)){var h=new l(t,e,t.options);h.sortable=t,h.options=t.options,t[u]=h,mo(n,h.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var n={};return Yl.forEach(function(r){typeof r.eventProperties=="function"&&mo(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return Yl.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function Qa(a){var t=a.sortable,e=a.rootEl,n=a.name,r=a.targetEl,o=a.cloneEl,s=a.toEl,l=a.fromEl,u=a.oldIndex,h=a.newIndex,c=a.oldDraggableIndex,p=a.newDraggableIndex,m=a.originalEvent,v=a.putSortable,_=a.extraEventProperties;if(t=t||e&&e[hr],!!t){var C,x=t.options,S="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!_s&&!Xa?C=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(C=document.createEvent("Event"),C.initEvent(n,!0,!0)),C.to=s||e,C.from=l||e,C.item=r||e,C.clone=o,C.oldIndex=u,C.newIndex=h,C.oldDraggableIndex=c,C.newDraggableIndex=p,C.originalEvent=m,C.pullMode=v?v.lastPutMode:void 0;var E=qo(qo({},_),Za.getEventProperties(n,t));for(var D in E)C[D]=E[D];e&&e.dispatchEvent(C),x[S]&&x[S].call(t,C)}}var u0=["evt"],Mr=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=q_(n,u0);Za.pluginEvent.bind(Ut)(t,e,qo({dragEl:bt,parentEl:Tn,ghostEl:oi,rootEl:hn,nextEl:bl,lastDownEl:fu,cloneEl:Cn,cloneHidden:Ys,dragStarted:ed,putSortable:sr,activeSortable:Ut.active,originalEvent:r,oldIndex:jl,oldDraggableIndex:Ja,newIndex:Zr,newDraggableIndex:js,hideGhostForTarget:Nm,unhideGhostForTarget:Lm,cloneNowHidden:function(){Ys=!0},cloneNowShown:function(){Ys=!1},dispatchSortableEvent:function(l){yr({sortable:e,name:l,originalEvent:r})}},o))};function yr(a){Qa(qo({putSortable:sr,cloneEl:Cn,targetEl:bt,rootEl:hn,oldIndex:jl,oldDraggableIndex:Ja,newIndex:Zr,newDraggableIndex:js},a))}var bt,Tn,oi,hn,bl,fu,Cn,Ys,jl,Zr,Ja,js,pu,sr,Xl=!1,mu=!1,vu=[],Cl,Mo,Dh,Rh,Im,Dm,ed,Kl,td,id=!1,gu=!1,_u,fr,Ph=[],Fh=!1,bu=[],Cu=typeof document<"u",yu=bm,Rm=Xa||_s?"cssFloat":"float",c0=Cu&&!Cm&&!bm&&"draggable"in document.createElement("div"),Pm=function(){if(Cu){if(_s)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),Fm=function(t,e){var n=Dt(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=$l(t,0,e),s=$l(t,1,e),l=o&&Dt(o),u=s&&Dt(s),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+sn(o).width,c=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+sn(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return s&&(u.clear==="both"||u.clear===p)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||h>=r&&n[Rm]==="none"||s&&n[Rm]==="none"&&h+c>r)?"vertical":"horizontal"},h0=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,s=n?t.width:t.height,l=n?e.left:e.top,u=n?e.right:e.bottom,h=n?e.width:e.height;return r===l||o===u||r+s/2===l+h/2},f0=function(t,e){var n;return vu.some(function(r){var o=r[hr].options.emptyInsertThreshold;if(!(!o||Th(r))){var s=sn(r),l=t>=s.left-o&&t<=s.right+o,u=e>=s.top-o&&e<=s.bottom+o;if(l&&u)return n=r}}),n},Mm=function(t){function e(o,s){return function(l,u,h,c){var p=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(o==null&&(s||p))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(l,u,h,c),s)(l,u,h,c);var m=(s?l:u).options.group.name;return o===!0||typeof o=="string"&&o===m||o.join&&o.indexOf(m)>-1}}var n={},r=t.group;(!r||cu(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},Nm=function(){!Pm&&oi&&Dt(oi,"display","none")},Lm=function(){!Pm&&oi&&Dt(oi,"display","")};Cu&&!Cm&&document.addEventListener("click",function(a){if(mu)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),mu=!1,!1},!0);var yl=function(t){if(bt){t=t.touches?t.touches[0]:t;var e=f0(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[hr]._onDragOver(n)}}},p0=function(t){bt&&bt.parentNode[hr]._isOutsideThisEl(t.target)};function Ut(a,t){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=t=mo({},t),a[hr]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Fm(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,l){s.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ut.supportPointer!==!1&&"PointerEvent"in window&&!Ka,emptyInsertThreshold:5};Za.initializePlugins(this,a,e);for(var n in e)!(n in t)&&(t[n]=e[n]);Mm(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:c0,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_i(a,"pointerdown",this._onTapStart):(_i(a,"mousedown",this._onTapStart),_i(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(_i(a,"dragover",this),_i(a,"dragenter",this)),vu.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),mo(this,l0())}Ut.prototype={constructor:Ut,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Kl=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,bt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,s=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,u=(l||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,c=r.filter;if(E0(n),!bt&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Ka&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Fo(u,r.draggable,n,!1),!(u&&u.animated)&&fu!==u)){if(jl=xn(u),Ja=xn(u,r.draggable),typeof c=="function"){if(c.call(this,t,u,this)){yr({sortable:e,rootEl:h,name:"filter",targetEl:u,toEl:n,fromEl:n}),Mr("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(p){if(p=Fo(h,p.trim(),n,!1),p)return yr({sortable:e,rootEl:p,name:"filter",targetEl:u,fromEl:n,toEl:n}),Mr("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!Fo(h,r.handle,n,!1)||this._prepareDragStart(t,l,u)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,s=r.options,l=o.ownerDocument,u;if(n&&!bt&&n.parentNode===o){var h=sn(n);if(hn=o,bt=n,Tn=bt.parentNode,bl=bt.nextSibling,fu=n,pu=s.group,Ut.dragged=bt,Cl={target:bt,clientX:(e||t).clientX,clientY:(e||t).clientY},Im=Cl.clientX-h.left,Dm=Cl.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,bt.style["will-change"]="all",u=function(){if(Mr("delayEnded",r,{evt:t}),Ut.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!_m&&r.nativeDraggable&&(bt.draggable=!0),r._triggerDragStart(t,e),yr({sortable:r,name:"choose",originalEvent:t}),bn(bt,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){Sm(bt,c.trim(),Mh)}),_i(l,"dragover",yl),_i(l,"mousemove",yl),_i(l,"touchmove",yl),_i(l,"mouseup",r._onDrop),_i(l,"touchend",r._onDrop),_i(l,"touchcancel",r._onDrop),_m&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bt.draggable=!0),Mr("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Xa||_s))){if(Ut.eventCanceled){this._onDrop();return}_i(l,"mouseup",r._disableDelayedDrag),_i(l,"touchend",r._disableDelayedDrag),_i(l,"touchcancel",r._disableDelayedDrag),_i(l,"mousemove",r._delayedDragTouchMoveHandler),_i(l,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&_i(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(u,s.delay)}else u()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bt&&Mh(bt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;mi(t,"mouseup",this._disableDelayedDrag),mi(t,"touchend",this._disableDelayedDrag),mi(t,"touchcancel",this._disableDelayedDrag),mi(t,"mousemove",this._delayedDragTouchMoveHandler),mi(t,"touchmove",this._delayedDragTouchMoveHandler),mi(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?_i(document,"pointermove",this._onTouchMove):e?_i(document,"touchmove",this._onTouchMove):_i(document,"mousemove",this._onTouchMove):(_i(bt,"dragend",this),_i(hn,"dragstart",this._onDragStart));try{document.selection?Su(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Xl=!1,hn&&bt){Mr("dragStarted",this,{evt:e}),this.nativeDraggable&&_i(document,"dragover",p0);var n=this.options;!t&&bn(bt,n.dragClass,!1),bn(bt,n.ghostClass,!0),Ut.active=this,t&&this._appendGhost(),yr({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Mo){this._lastX=Mo.clientX,this._lastY=Mo.clientY,Nm();for(var t=document.elementFromPoint(Mo.clientX,Mo.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Mo.clientX,Mo.clientY),t!==e);)e=t;if(bt.parentNode[hr]._isOutsideThisEl(t),e)do{if(e[hr]){var n=void 0;if(n=e[hr]._onDragOver({clientX:Mo.clientX,clientY:Mo.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Lm()}},_onTouchMove:function(t){if(Cl){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=oi&&_l(oi,!0),l=oi&&s&&s.a,u=oi&&s&&s.d,h=yu&&fr&&Tm(fr),c=(o.clientX-Cl.clientX+r.x)/(l||1)+(h?h[0]-Ph[0]:0)/(l||1),p=(o.clientY-Cl.clientY+r.y)/(u||1)+(h?h[1]-Ph[1]:0)/(u||1);if(!Ut.active&&!Xl){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(oi){s?(s.e+=c-(Dh||0),s.f+=p-(Rh||0)):s={a:1,b:0,c:0,d:1,e:c,f:p};var m="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Dt(oi,"webkitTransform",m),Dt(oi,"mozTransform",m),Dt(oi,"msTransform",m),Dt(oi,"transform",m),Dh=c,Rh=p,Mo=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!oi){var t=this.options.fallbackOnBody?document.body:hn,e=sn(bt,!0,yu,!0,t),n=this.options;if(yu){for(fr=t;Dt(fr,"position")==="static"&&Dt(fr,"transform")==="none"&&fr!==document;)fr=fr.parentNode;fr!==document.body&&fr!==document.documentElement?(fr===document&&(fr=Zo()),e.top+=fr.scrollTop,e.left+=fr.scrollLeft):fr=Zo(),Ph=Tm(fr)}oi=bt.cloneNode(!0),bn(oi,n.ghostClass,!1),bn(oi,n.fallbackClass,!0),bn(oi,n.dragClass,!0),Dt(oi,"transition",""),Dt(oi,"transform",""),Dt(oi,"box-sizing","border-box"),Dt(oi,"margin",0),Dt(oi,"top",e.top),Dt(oi,"left",e.left),Dt(oi,"width",e.width),Dt(oi,"height",e.height),Dt(oi,"opacity","0.8"),Dt(oi,"position",yu?"absolute":"fixed"),Dt(oi,"zIndex","100000"),Dt(oi,"pointerEvents","none"),Ut.ghost=oi,t.appendChild(oi),Dt(oi,"transform-origin",Im/parseInt(oi.style.width)*100+"% "+Dm/parseInt(oi.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if(Mr("dragStart",this,{evt:t}),Ut.eventCanceled){this._onDrop();return}Mr("setupClone",this),Ut.eventCanceled||(Cn=Ah(bt),Cn.removeAttribute("id"),Cn.draggable=!1,Cn.style["will-change"]="",this._hideClone(),bn(Cn,this.options.chosenClass,!1),Ut.clone=Cn),n.cloneId=Su(function(){Mr("clone",n),!Ut.eventCanceled&&(n.options.removeCloneOnHide||hn.insertBefore(Cn,bt),n._hideClone(),yr({sortable:n,name:"clone"}))}),!e&&bn(bt,o.dragClass,!0),e?(mu=!0,n._loopId=setInterval(n._emulateDragOver,50)):(mi(document,"mouseup",n._onDrop),mi(document,"touchend",n._onDrop),mi(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,bt)),_i(document,"drop",n),Dt(bt,"transform","translateZ(0)")),Xl=!0,n._dragStartId=Su(n._dragStarted.bind(n,e,t)),_i(document,"selectstart",n),ed=!0,Ka&&Dt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,s,l=this.options,u=l.group,h=Ut.active,c=pu===u,p=l.sort,m=sr||h,v,_=this,C=!1;if(Fh)return;function x(xe,Oe){Mr(xe,_,qo({evt:t,isOwner:c,axis:v?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:p,fromSortable:m,target:n,completed:E,onMove:function(ne,pe){return Eu(hn,e,bt,r,ne,sn(ne),t,pe)},changed:D},Oe))}function S(){x("dragOverAnimationCapture"),_.captureAnimationState(),_!==m&&m.captureAnimationState()}function E(xe){return x("dragOverCompleted",{insertion:xe}),xe&&(c?h._hideClone():h._showClone(_),_!==m&&(bn(bt,sr?sr.options.ghostClass:h.options.ghostClass,!1),bn(bt,l.ghostClass,!0)),sr!==_&&_!==Ut.active?sr=_:_===Ut.active&&sr&&(sr=null),m===_&&(_._ignoreWhileAnimating=n),_.animateAll(function(){x("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(n===bt&&!bt.animated||n===e&&!n.animated)&&(Kl=null),!l.dragoverBubble&&!t.rootEl&&n!==document&&(bt.parentNode[hr]._isOutsideThisEl(t.target),!xe&&yl(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),C=!0}function D(){Zr=xn(bt),js=xn(bt,l.draggable),yr({sortable:_,name:"change",toEl:e,newIndex:Zr,newDraggableIndex:js,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=Fo(n,l.draggable,e,!0),x("dragOver"),Ut.eventCanceled)return C;if(bt.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||_._ignoreWhileAnimating===n)return E(!1);if(mu=!1,h&&!l.disabled&&(c?p||(s=Tn!==hn):sr===this||(this.lastPutMode=pu.checkPull(this,h,bt,t))&&u.checkPut(this,h,bt,t))){if(v=this._getDirection(t,n)==="vertical",r=sn(bt),x("dragOverValid"),Ut.eventCanceled)return C;if(s)return Tn=hn,S(),this._hideClone(),x("revert"),Ut.eventCanceled||(bl?hn.insertBefore(bt,bl):hn.appendChild(bt)),E(!0);var A=Th(e,l.draggable);if(!A||_0(t,v,this)&&!A.animated){if(A===bt)return E(!1);if(A&&e===t.target&&(n=A),n&&(o=sn(n)),Eu(hn,e,bt,r,n,o,t,!!n)!==!1)return S(),A&&A.nextSibling?e.insertBefore(bt,A.nextSibling):e.appendChild(bt),Tn=e,D(),E(!0)}else if(A&&g0(t,v,this)){var P=$l(e,0,l,!0);if(P===bt)return E(!1);if(n=P,o=sn(n),Eu(hn,e,bt,r,n,o,t,!1)!==!1)return S(),e.insertBefore(bt,P),Tn=e,D(),E(!0)}else if(n.parentNode===e){o=sn(n);var M=0,B,Z=bt.parentNode!==e,L=!h0(bt.animated&&bt.toRect||r,n.animated&&n.toRect||o,v),de=v?"top":"left",be=xm(n,"top","top")||xm(bt,"top","top"),J=be?be.scrollTop:void 0;Kl!==n&&(B=o[de],id=!1,gu=!L&&l.invertSwap||Z),M=b0(t,n,o,v,L?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,gu,Kl===n);var U;if(M!==0){var F=xn(bt);do F-=M,U=Tn.children[F];while(U&&(Dt(U,"display")==="none"||U===oi))}if(M===0||U===n)return E(!1);Kl=n,td=M;var ae=n.nextElementSibling,Ke=!1;Ke=M===1;var Ie=Eu(hn,e,bt,r,n,o,t,Ke);if(Ie!==!1)return(Ie===1||Ie===-1)&&(Ke=Ie===1),Fh=!0,setTimeout(v0,30),S(),Ke&&!ae?e.appendChild(bt):n.parentNode.insertBefore(bt,Ke?ae:n),be&&Am(be,0,J-be.scrollTop),Tn=bt.parentNode,B!==void 0&&!gu&&(_u=Math.abs(B-sn(n)[de])),D(),E(!0)}if(e.contains(bt))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){mi(document,"mousemove",this._onTouchMove),mi(document,"touchmove",this._onTouchMove),mi(document,"pointermove",this._onTouchMove),mi(document,"dragover",yl),mi(document,"mousemove",yl),mi(document,"touchmove",yl)},_offUpEvents:function(){var t=this.el.ownerDocument;mi(t,"mouseup",this._onDrop),mi(t,"touchend",this._onDrop),mi(t,"pointerup",this._onDrop),mi(t,"touchcancel",this._onDrop),mi(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Zr=xn(bt),js=xn(bt,n.draggable),Mr("drop",this,{evt:t}),Tn=bt&&bt.parentNode,Zr=xn(bt),js=xn(bt,n.draggable),Ut.eventCanceled){this._nulling();return}Xl=!1,gu=!1,id=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nh(this.cloneId),Nh(this._dragStartId),this.nativeDraggable&&(mi(document,"drop",this),mi(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ka&&Dt(document.body,"user-select",""),Dt(bt,"transform",""),t&&(ed&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),oi&&oi.parentNode&&oi.parentNode.removeChild(oi),(hn===Tn||sr&&sr.lastPutMode!=="clone")&&Cn&&Cn.parentNode&&Cn.parentNode.removeChild(Cn),bt&&(this.nativeDraggable&&mi(bt,"dragend",this),Mh(bt),bt.style["will-change"]="",ed&&!Xl&&bn(bt,sr?sr.options.ghostClass:this.options.ghostClass,!1),bn(bt,this.options.chosenClass,!1),yr({sortable:this,name:"unchoose",toEl:Tn,newIndex:null,newDraggableIndex:null,originalEvent:t}),hn!==Tn?(Zr>=0&&(yr({rootEl:Tn,name:"add",toEl:Tn,fromEl:hn,originalEvent:t}),yr({sortable:this,name:"remove",toEl:Tn,originalEvent:t}),yr({rootEl:Tn,name:"sort",toEl:Tn,fromEl:hn,originalEvent:t}),yr({sortable:this,name:"sort",toEl:Tn,originalEvent:t})),sr&&sr.save()):Zr!==jl&&Zr>=0&&(yr({sortable:this,name:"update",toEl:Tn,originalEvent:t}),yr({sortable:this,name:"sort",toEl:Tn,originalEvent:t})),Ut.active&&((Zr==null||Zr===-1)&&(Zr=jl,js=Ja),yr({sortable:this,name:"end",toEl:Tn,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Mr("nulling",this),hn=bt=Tn=oi=bl=Cn=fu=Ys=Cl=Mo=ed=Zr=js=jl=Ja=Kl=td=sr=pu=Ut.dragged=Ut.ghost=Ut.clone=Ut.active=null,bu.forEach(function(t){t.checked=!0}),bu.length=Dh=Rh=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":bt&&(this._onDragOver(t),m0(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,s=this.options;r<o;r++)e=n[r],Fo(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||y0(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,s){var l=r.children[s];Fo(l,this.options.draggable,r,!1)&&(n[o]=l)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Fo(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=Za.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&Mm(n)},destroy:function(){Mr("destroy",this);var t=this.el;t[hr]=null,mi(t,"mousedown",this._onTapStart),mi(t,"touchstart",this._onTapStart),mi(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(mi(t,"dragover",this),mi(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),vu.splice(vu.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ys){if(Mr("hideClone",this),Ut.eventCanceled)return;Dt(Cn,"display","none"),this.options.removeCloneOnHide&&Cn.parentNode&&Cn.parentNode.removeChild(Cn),Ys=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Ys){if(Mr("showClone",this),Ut.eventCanceled)return;bt.parentNode==hn&&!this.options.group.revertClone?hn.insertBefore(Cn,bt):bl?hn.insertBefore(Cn,bl):hn.appendChild(Cn),this.options.group.revertClone&&this.animate(bt,Cn),Dt(Cn,"display",""),Ys=!1}}};function m0(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function Eu(a,t,e,n,r,o,s,l){var u,h=a[hr],c=h.options.onMove,p;return window.CustomEvent&&!_s&&!Xa?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=t,u.from=a,u.dragged=e,u.draggedRect=n,u.related=r||t,u.relatedRect=o||sn(t),u.willInsertAfter=l,u.originalEvent=s,a.dispatchEvent(u),c&&(p=c.call(h,u,s)),p}function Mh(a){a.draggable=!1}function v0(){Fh=!1}function g0(a,t,e){var n=sn($l(e.el,0,e.options,!0)),r=wm(e.el),o=10;return t?a.clientX<r.left-o||a.clientY<n.top&&a.clientX<n.right:a.clientY<r.top-o||a.clientY<n.bottom&&a.clientX<n.left}function _0(a,t,e){var n=sn(Th(e.el,e.options.draggable)),r=wm(e.el),o=10;return t?a.clientX>r.right+o||a.clientY>n.bottom&&a.clientX>n.left:a.clientY>r.bottom+o||a.clientX>n.right&&a.clientY>n.top}function b0(a,t,e,n,r,o,s,l){var u=n?a.clientY:a.clientX,h=n?e.height:e.width,c=n?e.top:e.left,p=n?e.bottom:e.right,m=!1;if(!s){if(l&&_u<h*r){if(!id&&(td===1?u>c+h*o/2:u<p-h*o/2)&&(id=!0),id)m=!0;else if(td===1?u<c+_u:u>p-_u)return-td}else if(u>c+h*(1-r)/2&&u<p-h*(1-r)/2)return C0(t)}return m=m||s,m&&(u<c+h*o/2||u>p-h*o/2)?u>c+h/2?1:-1:0}function C0(a){return xn(bt)<xn(a)?1:-1}function y0(a){for(var t=a.tagName+a.className+a.src+a.href+a.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function E0(a){bu.length=0;for(var t=a.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&bu.push(n)}}function Su(a){return setTimeout(a,0)}function Nh(a){return clearTimeout(a)}Cu&&_i(document,"touchmove",function(a){(Ut.active||Xl)&&a.cancelable&&a.preventDefault()}),Ut.utils={on:_i,off:mi,css:Dt,find:Sm,is:function(t,e){return!!Fo(t,e,t,!1)},extend:o0,throttle:Om,closest:Fo,toggleClass:bn,clone:Ah,index:xn,nextTick:Su,cancelNextTick:Nh,detectDirection:Fm,getChild:$l},Ut.get=function(a){return a[hr]},Ut.mount=function(){for(var a=arguments.length,t=new Array(a),e=0;e<a;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(Ut.utils=qo(qo({},Ut.utils),n.utils)),Za.mount(n)})},Ut.create=function(a,t){return new Ut(a,t)},Ut.version=i0;var Hn=[],nd,Lh,Hh=!1,Bh,Vh,wu,rd;function S0(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return a.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?_i(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_i(document,"pointermove",this._handleFallbackAutoScroll):n.touches?_i(document,"touchmove",this._handleFallbackAutoScroll):_i(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?mi(document,"dragover",this._handleAutoScroll):(mi(document,"pointermove",this._handleFallbackAutoScroll),mi(document,"touchmove",this._handleFallbackAutoScroll),mi(document,"mousemove",this._handleFallbackAutoScroll)),Hm(),xu(),s0()},nulling:function(){wu=Lh=nd=Hh=rd=Bh=Vh=null,Hn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,l=document.elementFromPoint(o,s);if(wu=e,n||this.options.forceAutoScrollFallback||Xa||_s||Ka){zh(e,this.options,l,n);var u=$s(l,!0);Hh&&(!rd||o!==Bh||s!==Vh)&&(rd&&Hm(),rd=setInterval(function(){var h=$s(document.elementFromPoint(o,s),!0);h!==u&&(u=h,xu()),zh(e,r.options,h,n)},10),Bh=o,Vh=s)}else{if(!this.options.bubbleScroll||$s(l,!0)===Zo()){xu();return}zh(e,this.options,$s(l,!1),!1)}}},mo(a,{pluginName:"scroll",initializeByDefault:!0})}function xu(){Hn.forEach(function(a){clearInterval(a.pid)}),Hn=[]}function Hm(){clearInterval(rd)}var zh=Om(function(a,t,e,n){if(t.scroll){var r=(a.touches?a.touches[0]:a).clientX,o=(a.touches?a.touches[0]:a).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=Zo(),h=!1,c;Lh!==e&&(Lh=e,xu(),nd=t.scroll,c=t.scrollFn,nd===!0&&(nd=$s(e,!0)));var p=0,m=nd;do{var v=m,_=sn(v),C=_.top,x=_.bottom,S=_.left,E=_.right,D=_.width,A=_.height,P=void 0,M=void 0,B=v.scrollWidth,Z=v.scrollHeight,L=Dt(v),de=v.scrollLeft,be=v.scrollTop;v===u?(P=D<B&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),M=A<Z&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(P=D<B&&(L.overflowX==="auto"||L.overflowX==="scroll"),M=A<Z&&(L.overflowY==="auto"||L.overflowY==="scroll"));var J=P&&(Math.abs(E-r)<=s&&de+D<B)-(Math.abs(S-r)<=s&&!!de),U=M&&(Math.abs(x-o)<=s&&be+A<Z)-(Math.abs(C-o)<=s&&!!be);if(!Hn[p])for(var F=0;F<=p;F++)Hn[F]||(Hn[F]={});(Hn[p].vx!=J||Hn[p].vy!=U||Hn[p].el!==v)&&(Hn[p].el=v,Hn[p].vx=J,Hn[p].vy=U,clearInterval(Hn[p].pid),(J!=0||U!=0)&&(h=!0,Hn[p].pid=setInterval((function(){n&&this.layer===0&&Ut.active._onTouchMove(wu);var ae=Hn[this.layer].vy?Hn[this.layer].vy*l:0,Ke=Hn[this.layer].vx?Hn[this.layer].vx*l:0;typeof c=="function"&&c.call(Ut.dragged.parentNode[hr],Ke,ae,a,wu,Hn[this.layer].el)!=="continue"||Am(Hn[this.layer].el,Ke,ae)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&m!==u&&(m=$s(m,!1)));Hh=h}},30),Bm=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,l=t.hideGhostForTarget,u=t.unhideGhostForTarget;if(e){var h=n||o;l();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(c.clientX,c.clientY);u(),h&&!h.el.contains(p)&&(s("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Uh(){}Uh.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=$l(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Bm},mo(Uh,{pluginName:"revertOnSpill"});function Wh(){}Wh.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:Bm},mo(Wh,{pluginName:"removeOnSpill"});var vo;function w0(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}return a.prototype={dragStart:function(e){var n=e.dragEl;vo=n},dragOverValid:function(e){var n=e.completed,r=e.target,o=e.onMove,s=e.activeSortable,l=e.changed,u=e.cancel;if(s.options.swap){var h=this.sortable.el,c=this.options;if(r&&r!==h){var p=vo;o(r)!==!1?(bn(r,c.swapClass,!0),vo=r):vo=null,p&&p!==vo&&bn(p,c.swapClass,!1)}l(),n(!0),u()}},drop:function(e){var n=e.activeSortable,r=e.putSortable,o=e.dragEl,s=r||this.sortable,l=this.options;vo&&bn(vo,l.swapClass,!1),vo&&(l.swap||r&&r.options.swap)&&o!==vo&&(s.captureAnimationState(),s!==n&&n.captureAnimationState(),x0(o,vo),s.animateAll(),s!==n&&n.animateAll())},nulling:function(){vo=null}},mo(a,{pluginName:"swap",eventProperties:function(){return{swapItem:vo}}})}function x0(a,t){var e=a.parentNode,n=t.parentNode,r,o;!e||!n||e.isEqualNode(t)||n.isEqualNode(a)||(r=xn(a),o=xn(t),e.isEqualNode(n)&&r<o&&o++,e.insertBefore(t,e.children[r]),n.insertBefore(a,n.children[o]))}var Jt=[],Qr=[],od,No,sd=!1,Nr=!1,ql=!1,tn,ld,Tu;function T0(){function a(t){for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?_i(document,"pointerup",this._deselectMultiDrag):(_i(document,"mouseup",this._deselectMultiDrag),_i(document,"touchend",this._deselectMultiDrag))),_i(document,"keydown",this._checkKeyDown),_i(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(r,o){var s="";Jt.length&&No===t?Jt.forEach(function(l,u){s+=(u?", ":"")+l.textContent}):s=o.textContent,r.setData("Text",s)}}}return a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var n=e.dragEl;tn=n},delayEnded:function(){this.isMultiDrag=~Jt.indexOf(tn)},setupClone:function(e){var n=e.sortable,r=e.cancel;if(this.isMultiDrag){for(var o=0;o<Jt.length;o++)Qr.push(Ah(Jt[o])),Qr[o].sortableIndex=Jt[o].sortableIndex,Qr[o].draggable=!1,Qr[o].style["will-change"]="",bn(Qr[o],this.options.selectedClass,!1),Jt[o]===tn&&bn(Qr[o],this.options.chosenClass,!1);n._hideClone(),r()}},clone:function(e){var n=e.sortable,r=e.rootEl,o=e.dispatchSortableEvent,s=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Jt.length&&No===n&&(Vm(!0,r),o("clone"),s()))},showClone:function(e){var n=e.cloneNowShown,r=e.rootEl,o=e.cancel;this.isMultiDrag&&(Vm(!1,r),Qr.forEach(function(s){Dt(s,"display","")}),n(),Tu=!1,o())},hideClone:function(e){var n=this;e.sortable;var r=e.cloneNowHidden,o=e.cancel;this.isMultiDrag&&(Qr.forEach(function(s){Dt(s,"display","none"),n.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),r(),Tu=!0,o())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&No&&No.multiDrag._deselectMultiDrag(),Jt.forEach(function(n){n.sortableIndex=xn(n)}),Jt=Jt.sort(function(n,r){return n.sortableIndex-r.sortableIndex}),ql=!0},dragStarted:function(e){var n=this,r=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){Jt.forEach(function(s){s!==tn&&Dt(s,"position","absolute")});var o=sn(tn,!1,!0,!0);Jt.forEach(function(s){s!==tn&&km(s,o)}),Nr=!0,sd=!0}r.animateAll(function(){Nr=!1,sd=!1,n.options.animation&&Jt.forEach(function(s){kh(s)}),n.options.sort&&Ou()})}},dragOver:function(e){var n=e.target,r=e.completed,o=e.cancel;Nr&&~Jt.indexOf(n)&&(r(!1),o())},revert:function(e){var n=e.fromSortable,r=e.rootEl,o=e.sortable,s=e.dragRect;Jt.length>1&&(Jt.forEach(function(l){o.addAnimationState({target:l,rect:Nr?sn(l):s}),kh(l),l.fromRect=s,n.removeAnimationState(l)}),Nr=!1,O0(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(e){var n=e.sortable,r=e.isOwner,o=e.insertion,s=e.activeSortable,l=e.parentEl,u=e.putSortable,h=this.options;if(o){if(r&&s._hideClone(),sd=!1,h.animation&&Jt.length>1&&(Nr||!r&&!s.options.sort&&!u)){var c=sn(tn,!1,!0,!0);Jt.forEach(function(m){m!==tn&&(km(m,c),l.appendChild(m))}),Nr=!0}if(!r)if(Nr||Ou(),Jt.length>1){var p=Tu;s._showClone(n),s.options.animation&&!Tu&&p&&Qr.forEach(function(m){s.addAnimationState({target:m,rect:ld}),m.fromRect=ld,m.thisAnimationDuration=null})}else s._showClone(n)}},dragOverAnimationCapture:function(e){var n=e.dragRect,r=e.isOwner,o=e.activeSortable;if(Jt.forEach(function(l){l.thisAnimationDuration=null}),o.options.animation&&!r&&o.multiDrag.isMultiDrag){ld=mo({},n);var s=_l(tn,!0);ld.top-=s.f,ld.left-=s.e}},dragOverAnimationComplete:function(){Nr&&(Nr=!1,Ou())},drop:function(e){var n=e.originalEvent,r=e.rootEl,o=e.parentEl,s=e.sortable,l=e.dispatchSortableEvent,u=e.oldIndex,h=e.putSortable,c=h||this.sortable;if(n){var p=this.options,m=o.children;if(!ql)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),bn(tn,p.selectedClass,!~Jt.indexOf(tn)),~Jt.indexOf(tn))Jt.splice(Jt.indexOf(tn),1),od=null,Qa({sortable:s,rootEl:r,name:"deselect",targetEl:tn,originalEvent:n});else{if(Jt.push(tn),Qa({sortable:s,rootEl:r,name:"select",targetEl:tn,originalEvent:n}),n.shiftKey&&od&&s.el.contains(od)){var v=xn(od),_=xn(tn);if(~v&&~_&&v!==_){var C,x;for(_>v?(x=v,C=_):(x=_,C=v+1);x<C;x++)~Jt.indexOf(m[x])||(bn(m[x],p.selectedClass,!0),Jt.push(m[x]),Qa({sortable:s,rootEl:r,name:"select",targetEl:m[x],originalEvent:n}))}}else od=tn;No=c}if(ql&&this.isMultiDrag){if(Nr=!1,(o[hr].options.sort||o!==r)&&Jt.length>1){var S=sn(tn),E=xn(tn,":not(."+this.options.selectedClass+")");if(!sd&&p.animation&&(tn.thisAnimationDuration=null),c.captureAnimationState(),!sd&&(p.animation&&(tn.fromRect=S,Jt.forEach(function(A){if(A.thisAnimationDuration=null,A!==tn){var P=Nr?sn(A):S;A.fromRect=P,c.addAnimationState({target:A,rect:P})}})),Ou(),Jt.forEach(function(A){m[E]?o.insertBefore(A,m[E]):o.appendChild(A),E++}),u===xn(tn))){var D=!1;Jt.forEach(function(A){if(A.sortableIndex!==xn(A)){D=!0;return}}),D&&(l("update"),l("sort"))}Jt.forEach(function(A){kh(A)}),c.animateAll()}No=c}(r===o||h&&h.lastPutMode!=="clone")&&Qr.forEach(function(A){A.parentNode&&A.parentNode.removeChild(A)})}},nullingGlobal:function(){this.isMultiDrag=ql=!1,Qr.length=0},destroyGlobal:function(){this._deselectMultiDrag(),mi(document,"pointerup",this._deselectMultiDrag),mi(document,"mouseup",this._deselectMultiDrag),mi(document,"touchend",this._deselectMultiDrag),mi(document,"keydown",this._checkKeyDown),mi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(typeof ql<"u"&&ql)&&No===this.sortable&&!(e&&Fo(e.target,this.options.draggable,this.sortable.el,!1))&&!(e&&e.button!==0))for(;Jt.length;){var n=Jt[0];bn(n,this.options.selectedClass,!1),Jt.shift(),Qa({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},mo(a,{pluginName:"multiDrag",utils:{select:function(e){var n=e.parentNode[hr];!n||!n.options.multiDrag||~Jt.indexOf(e)||(No&&No!==n&&(No.multiDrag._deselectMultiDrag(),No=n),bn(e,n.options.selectedClass,!0),Jt.push(e))},deselect:function(e){var n=e.parentNode[hr],r=Jt.indexOf(e);!n||!n.options.multiDrag||!~r||(bn(e,n.options.selectedClass,!1),Jt.splice(r,1))}},eventProperties:function(){var e=this,n=[],r=[];return Jt.forEach(function(o){n.push({multiDragElement:o,index:o.sortableIndex});var s;Nr&&o!==tn?s=-1:Nr?s=xn(o,":not(."+e.options.selectedClass+")"):s=xn(o),r.push({multiDragElement:o,index:s})}),{items:Z_(Jt),clones:[].concat(Qr),oldIndicies:n,newIndicies:r}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),e==="ctrl"?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function O0(a,t){Jt.forEach(function(e,n){var r=t.children[e.sortableIndex+(a?Number(n):0)];r?t.insertBefore(e,r):t.appendChild(e)})}function Vm(a,t){Qr.forEach(function(e,n){var r=t.children[e.sortableIndex+(a?Number(n):0)];r?t.insertBefore(e,r):t.appendChild(e)})}function Ou(){Jt.forEach(function(a){a!==tn&&a.parentNode&&a.parentNode.removeChild(a)})}Ut.mount(new S0),Ut.mount(Wh,Uh);const Zl=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:T0,Sortable:Ut,Swap:w0,default:Ut},Symbol.toStringTag,{value:"Module"}));var Gh;const Au=(Gh=Zl==null?void 0:Ut)!==null&&Gh!==void 0?Gh:Zl;class A0{constructor(t,e,n){this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._gridColumns=[],this._gridUid="",this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._bindingEventService=new Nn,this._eventHandler=new Slick.EventHandler,this.onGroupChanged=new Slick.Event}get addonOptions(){return this._addonOptions}get dataView(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){var t,e;return(e=(t=this._grid)!==null&&t!==void 0?t:this.sharedService.slickGrid)!==null&&e!==void 0?e:{}}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get gridUid(){var t,e;return this._gridUid||((e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}get gridContainer(){return this.grid.getContainerNode()}init(t,e){var n,r,o,s,l,u;if(this._addonOptions={...this._defaults,...e},this._grid=t,t){if(this._gridUid=t.getUID(),this._gridColumns=t.getColumns(),this._dropzoneElm=t.getPreHeaderPanel(),this._dropzoneElm.classList.add("slick-dropzone"),!this._addonOptions.hideToggleAllButton){this._groupToggler=Re("div",{className:"slick-group-toggle-all",title:(n=this._addonOptions.toggleAllPlaceholderText)!==null&&n!==void 0?n:"",style:{display:"none"}});const h=Re("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=(r=this._addonOptions.toggleAllPlaceholderText)!==null&&r!==void 0?r:"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(Re("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(h,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(h,!1,!1)))}this._dropzonePlaceholderElm=Re("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&(!((o=this._addonOptions)===null||o===void 0)&&o.dropPlaceHolderTextKey)&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=(u=(l=(s=this._addonOptions)===null||s===void 0?void 0:s.dropPlaceHolderText)!==null&&l!==void 0?l:this._defaults.dropPlaceHolderText)!==null&&u!==void 0?u:"",this.setupColumnDropbox(),this._eventHandler.subscribe(t.onHeaderCellRendered,(h,c)=>{var p;const m=c.node;if(!lh((p=c.column)===null||p===void 0?void 0:p.grouping)&&m&&(m.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const v=Re("span",{className:"slick-column-groupable"},m);this._addonOptions.groupIconCssClass&&v.classList.add(...this._addonOptions.groupIconCssClass.split(" "))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(const h of this._gridColumns){const c=h.field;t.updateColumnHeader(c)}}return this}dispose(){var t,e;this.destroySortableInstances(),!((t=this._droppableInstance)===null||t===void 0)&&t.el&&((e=this._droppableInstance)===null||e===void 0||e.destroy()),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),on(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const t=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const e of Array.from(t)){const n=this._dropzoneElm.querySelector(".slick-groupby-remove");n==null||n.remove(),e==null||e.remove()}this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){var t,e,n,r;!((t=this._sortableLeftInstance)===null||t===void 0)&&t.el&&((e=this._sortableLeftInstance)===null||e===void 0||e.destroy()),!((n=this._sortableRightInstance)===null||n===void 0)&&n.el&&((r=this._sortableRightInstance)===null||r===void 0||r.destroy())}setAddonOptions(t){this._addonOptions={...this._addonOptions,...t}}setColumns(t){this._gridColumns=t}setDroppedGroups(t){this._dropzonePlaceholderElm.style.display="none";const e=Array.isArray(t)?t:[t];for(const n of e){const r=this.grid.getHeaderColumn(n);this.handleGroupByDrop(this._dropzoneElm,r)}}setupColumnReorder(t,e,n,r,o,s,l,u,h){this.destroySortableInstances();const c=t.getPreHeaderPanel(),p=c.querySelector(".slick-draggable-dropzone-placeholder"),m=c.querySelector(".slick-group-toggle-all"),v={animation:50,chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:()=>{p&&(p.style.display="inline-block"),c.querySelectorAll(".slick-dropped-grouping").forEach(C=>C.style.display="none"),m&&(m.style.display="none")},onEnd:_=>{var C,x,S,E,D;c==null||c.classList.remove("slick-dropzone-hover"),(C=p==null?void 0:p.parentElement)===null||C===void 0||C.classList.remove("slick-dropzone-placeholder-hover");const A=c.querySelectorAll(".slick-dropped-grouping");if(A.forEach(Z=>Z.style.display="flex"),A.length&&(p&&(p.style.display="none"),m&&(m.style.display="inline-block")),!t.getEditorLock().commitCurrentEdit())return;const P=(S=(x=this.sortableLeftInstance)===null||x===void 0?void 0:x.toArray())!==null&&S!==void 0?S:[];if(e.length>1){const Z=(D=(E=this._sortableRightInstance)===null||E===void 0?void 0:E.toArray())!==null&&D!==void 0?D:[];for(const L of Z)P.push(L)}const M=[],B=t.getColumns();for(const Z of P)M.push(B[l(Z)]);r(M),h(t.onColumnsReordered,{grid:t}),_.stopPropagation(),o()}};return this._sortableLeftInstance=Au.create(this.gridContainer.querySelector(`.${t.getUID()} .slick-header-columns.slick-header-columns-left`),v),this._sortableRightInstance=Au.create(this.gridContainer.querySelector(`.${t.getUID()} .slick-header-columns.slick-header-columns-right`),v),{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(t){this.columnsGroupBy.push(t),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(t,e,n,r){this._bindingEventService.bind(e,"click",()=>{const o=this._bindingEventService.boundedEvents.filter(s=>s.element===e);for(const s of o)this._bindingEventService.unbind(s.element,"click",s.listener);this.removeGroupBy(t,n,r)})}addGroupSortClickHandler(t,e){const{grouping:n,type:r}=t;this._bindingEventService.bind(e,"click",()=>{if(this.toggleGroupAll(t,!1),n){const o=n.sortAsc?ji.desc:ji.asc;n.comparer=(s,l)=>Wl(r||"text",s.value,l.value,o,t,this.gridOptions),this.getGroupBySortIcon(e,!n.sortAsc),this.updateGroupBy("sort-group"),n.sortAsc=!n.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(t,e=!0){var n,r,o,s;e?this._addonOptions.sortAscIconCssClass?(t.classList.remove(...(r=(n=this._addonOptions.sortDescIconCssClass)===null||n===void 0?void 0:n.split(" "))!==null&&r!==void 0?r:""),t.classList.add(...this._addonOptions.sortAscIconCssClass.split(" "))):(t.classList.add("slick-groupby-sort-asc-icon"),t.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(t.classList.remove(...(s=(o=this._addonOptions.sortAscIconCssClass)===null||o===void 0?void 0:o.split(" "))!==null&&s!==void 0?s:""),t.classList.add(...this._addonOptions.sortDescIconCssClass.split(" "))):this._addonOptions.sortDescIconCssClass||(t.classList.add("slick-groupby-sort-desc-icon"),t.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(t,e){var n,r,o;const s=(n=e.getAttribute("data-id"))===null||n===void 0?void 0:n.replace(this._gridUid,"");let l=!0;for(const u of this.columnsGroupBy)u.id===s&&(l=!1);if(l){for(const u of this._gridColumns)if(u.id===s&&u.grouping&&!lh(u.grouping)){const h=e.querySelector(".slick-column-name"),c=Re("div",{id:`${this._gridUid}_${u.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${u.id}`}});Re("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:h?h.textContent:e.textContent},c);const p=Re("div",{className:"slick-groupby-remove"});this._addonOptions.deleteIconCssClass&&p.classList.add(...this._addonOptions.deleteIconCssClass.split(" ")),this._addonOptions.deleteIconCssClass||p.classList.add("slick-groupby-remove-icon");let m;((r=this._addonOptions)===null||r===void 0?void 0:r.hideGroupSortIcons)!==!0&&u.sortable&&(((o=u.grouping)===null||o===void 0?void 0:o.sortAsc)===void 0&&(u.grouping.sortAsc=!0),m=Re("div",{className:"slick-groupby-sort"},c),this.getGroupBySortIcon(m,u.grouping.sortAsc)),c.appendChild(p),c.appendChild(document.createElement("div")),t.appendChild(c),this._groupToggler&&this.columnsGroupBy.length===0&&this.toggleGroupAll(u),this.addColumnGroupBy(u),this.addGroupByRemoveClickHandler(u.id,p,e,c),m&&this.addGroupSortClickHandler(u,m)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-block")}}toggleGroupAll({grouping:t},e){var n;const r=(n=this._groupToggler)===null||n===void 0?void 0:n.querySelector(".slick-group-toggle-all-icon");e===!0||t!=null&&t.collapsed?(r==null||r.classList.add("collapsed"),r==null||r.classList.remove("expanded")):(r==null||r.classList.add("expanded"),r==null||r.classList.remove("collapsed"))}removeFromArray(t,e){if(Array.isArray(t)){const n=t.findIndex(r=>r.id===e.id);n>=0&&t.splice(n,1)}return t}removeGroupBy(t,e,n){n.remove();const r=[];this._gridColumns.forEach(o=>r[o.id]=o),this.removeFromArray(this.columnsGroupBy,r[t]),this.columnsGroupBy.length===0&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const t=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");t&&this._dropzoneElm&&(this._bindingEventService.bind(t,"dragover",e=>e.preventDefault()),this._bindingEventService.bind(t,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(t,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){const t=this._dropzoneElm;this._droppableInstance=Au.create(t,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:e=>{var n,r;const o=e.item;!((n=o.getAttribute("id"))===null||n===void 0)&&n.replace(this._gridUid,"")&&this.handleGroupByDrop(t,Au.utils.clone(e.item)),(r=o.parentNode)===null||r===void 0||r.removeChild(o)},onUpdate:()=>{var e,n;const r=(n=(e=this._droppableInstance)===null||e===void 0?void 0:e.toArray())!==null&&n!==void 0?n:[],o=[];for(const s of r)for(const l of this.columnsGroupBy)if(l.id===s){o.push(l);break}this.columnsGroupBy=o,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",e=>{const n=e.target.classList.contains("slick-group-toggle-all-icon")?e.target:e.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(n,n==null?void 0:n.classList.contains("expanded"))})}toggleGroupToggler(t,e=!0,n=!0){t&&(e===!0?(t.classList.add("collapsed"),t.classList.remove("expanded"),n&&this.dataView.collapseAllGroups()):(t.classList.remove("collapsed"),t.classList.add("expanded"),n&&this.dataView.expandAllGroups()))}updateGroupBy(t){if(this.columnsGroupBy.length===0){this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",this.triggerOnGroupChangedEvent({caller:t,groupColumns:[]});return}const e=[];this.columnsGroupBy.forEach(n=>e.push(n.grouping)),this.dataView.setGrouping(e),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:t,groupColumns:e})}triggerOnGroupChangedEvent(t){this._addonOptions&&typeof this._addonOptions.onGroupChanged=="function"&&this._addonOptions.onGroupChanged(new Slick.EventData,t),this.onGroupChanged.notify(t)}}class zm{constructor(){this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new Slick.EventHandler,this._options=this._defaults}get eventHandler(){return this._eventHandler}get dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get grid(){return this._grid}init(t,e){this._grid=t,this._options={...this._defaults,...e},this._eventHandler.subscribe(t.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(t.onKeyDown,this.handleGridKeyDown.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}getOptions(){return this._options}setOptions(t){this._options={...this._options,...t}}getGroupRowMetadata(t){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${(t==null?void 0:t.level)||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editor:null}}}}getTotalsRowMetadata(t){var e;return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${((e=t==null?void 0:t.group)===null||e===void 0?void 0:e.level)||0}`,formatter:this._options.totalsFormatter,editor:null}}defaultGroupCellFormatter(t,e,n,r,o){var s,l;if(!this._options.enableExpandCollapse)return o.title;const u=o.level||0,h=(l=(s=this._options)===null||s===void 0?void 0:s.indentation)!==null&&l!==void 0?l:15,c=`${u*h}px`,p=o.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass;return`<span class="${this._options.toggleCssClass} ${p}" aria-expanded="${!o.collapsed}" style="margin-left: ${c}"></span><span class="${this._options.groupTitleCssClass}" level="${u}">${o.title||""}</span>`}defaultTotalsCellFormatter(t,e,n,r,o,s){var l,u;return(u=(l=r==null?void 0:r.groupTotalsFormatter)===null||l===void 0?void 0:l.call(r,o,r,s))!==null&&u!==void 0?u:""}handleGridClick(t,e){const n=t.target,r=this.grid.getDataItem(e.row);r instanceof Slick.Group&&n.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(r),t.stopImmediatePropagation(),t.preventDefault())}handleGridKeyDown(t){if(this._options.enableExpandCollapse&&t.keyCode===xi.SPACE){const e=this.grid.getActiveCell();if(e){const n=this.grid.getDataItem(e.row);n instanceof Slick.Group&&(this.handleDataViewExpandOrCollapse(n),t.stopImmediatePropagation(),t.preventDefault())}}}handleDataViewExpandOrCollapse(t){const e=this.grid.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:e.top,ignoreDiffsAfter:e.bottom+1}),t.collapsed?this.dataView.expandGroup(t.groupingKey):this.dataView.collapseGroup(t.groupingKey)}}class k0 extends lu{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new Nn,this._eventHandler=new Slick.EventHandler,this.init(n.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(t){this._addonOptions=t}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(t){this._addonOptions={...this._defaults,...t},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(t=>t.remove())}handleHeaderCellRendered(t,e){var n;const r=e.column;if(!((n=r.header)===null||n===void 0)&&n.buttons&&Array.isArray(r.header.buttons)){let o=r.header.buttons.length;for(;o--;){const s=r.header.buttons[o],l=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,s,e,this.handleButtonClick.bind(this));l&&s.handler&&!s.disabled&&this._bindEventService.bind(l,"click",u=>s.handler.call(this,u)),l&&(this._buttonElms.push(l),e.node.appendChild(l))}}}handleBeforeHeaderCellDestroy(t,e){var n,r,o;if(!((n=e.column.header)===null||n===void 0)&&n.buttons&&(!((r=this._addonOptions)===null||r===void 0)&&r.buttonCssClass)){const l=(((o=this._addonOptions)===null||o===void 0?void 0:o.buttonCssClass)||"").replace(/(\s+)/g,".");l&&e.node.querySelectorAll(`.${l}`).forEach(u=>u.remove())}}handleButtonClick(t,e,n,r,o){var s;if(n.command&&!n.disabled){const l=n.command||"",u={grid:this.grid,column:o,button:n};l&&(u.command=l),typeof n.action=="function"&&!n.disabled&&n.action.call(this,t,u),l!==null&&!n.disabled&&(!((s=this._addonOptions)===null||s===void 0)&&s.onCommand)&&(this.pubSubService.publish("onHeaderButtonCommand",u),this._addonOptions.onCommand(t,u),o!=null&&o.id&&this.grid.updateColumnHeader(o.id))}t.preventDefault(),t.stopPropagation()}}class I0 extends lu{constructor(t,e,n,r,o){super(t,n,r),this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(r.gridOptions.headerMenu)}init(t){this._addonOptions={...this._defaults,...t},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(e,n)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(n.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){var t;super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),(t=this._menuElm)===null||t===void 0||t.remove(),this._activeHeaderColumnElm=void 0}hideColumn(t){var e,n,r;if(!((n=(e=this.sharedService)===null||e===void 0?void 0:e.slickGrid)===null||n===void 0)&&n.getColumnIndex){const o=this.sharedService.slickGrid.getColumnIndex(t.id),s=this.sharedService.slickGrid.getColumns(),l=(r=this.sharedService.gridOptions.frozenColumn)!==null&&r!==void 0?r:-1;l>=0&&l>=o&&(this.sharedService.gridOptions.frozenColumn=l-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const u=oh(s,o);this.sharedService.visibleColumns=u,this.sharedService.slickGrid.setColumns(u),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:u,hiddenColumn:t})}}hideMenu(){var t,e;this.disposeSubMenus(),(t=this._menuElm)===null||t===void 0||t.remove(),this._menuElm=void 0,(e=this._activeHeaderColumnElm)===null||e===void 0||e.classList.remove("slick-header-column-active")}repositionSubMenu(t,e,n,r){const o=this.createCommandMenu(e.commandItems||e.items||[],r,n+1,e);document.body.appendChild(o),this.repositionMenu(t,o)}repositionMenu(t,e){var n,r,o,s,l,u,h,c,p;const m=t.target,v=e.classList.contains("slick-submenu"),_=v?t.target.closest(".slick-menu-item"):m,C=R_(this.sharedService.gridContainerElement,m),x=this.grid.getGridPosition(),S=e.offsetWidth,E=Wn(_);let D=v?(n=E==null?void 0:E.left)!==null&&n!==void 0?n:0:(r=C==null?void 0:C.left)!==null&&r!==void 0?r:0,A=v?(o=E==null?void 0:E.top)!==null&&o!==void 0?o:0:((s=C==null?void 0:C.top)!==null&&s!==void 0?s:0)+((u=(l=this.addonOptions)===null||l===void 0?void 0:l.menuOffsetTop)!==null&&u!==void 0?u:0)+m.clientHeight;if(v){const P=(e==null?void 0:e.clientHeight)||0,{bottom:M,top:B}=ou(_);(M<P&&B>M?"top":"bottom")==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),A-=P-_.clientHeight):(e.classList.remove("dropup"),e.classList.add("dropdown"))}if(v&&_){const P=D+Number(S)+_.clientWidth,M=document.documentElement.clientWidth;(P>=x.width||P>=M?"left":"right")==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),D-=S):(e.classList.remove("dropleft"),e.classList.add("dropright"),D+=_.offsetWidth)}else D=(h=C==null?void 0:C.left)!==null&&h!==void 0?h:0,this.addonOptions.autoAlign&&(x!=null&&x.width)&&D+((c=e.clientWidth)!==null&&c!==void 0?c:0)>=x.width&&(D=D+m.clientWidth-e.clientWidth+(((p=this.addonOptions)===null||p===void 0?void 0:p.autoAlignOffset)||0));e.style.top=`${A}px`,e.style.left=`${D}px`,this._activeHeaderColumnElm=this.grid.getContainerNode().querySelector(":not(.slick-preheader-panel) >.slick-header-columns"),this._activeHeaderColumnElm&&this._activeHeaderColumnElm.classList.add("slick-header-column-active")}translateHeaderMenu(){var t;!((t=this.sharedService.gridOptions)===null||t===void 0)&&t.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(t,e){var n;const o=(n=e.column.header)===null||n===void 0?void 0:n.menu;if(o!=null&&o.items&&console.warn('[Slickgrid-Universal] Header Menu "items" property was deprecated in favor of "commandItems" to align with all other Menu plugins.'),o&&e.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,e))return;const s=Re("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},e.node);this.addonOptions.buttonCssClass&&s.classList.add(...this.addonOptions.buttonCssClass.split(" ")),this.addonOptions.tooltip&&(s.title=this.addonOptions.tooltip),this._bindEventService.bind(s,"click",l=>{this.disposeAllMenus(),this.createParentMenu(l,e.column,o)})}}handleBeforeHeaderCellDestroy(t,e){var n;!((n=e.column.header)===null||n===void 0)&&n.menu&&e.node.querySelectorAll(".slick-header-menu-button").forEach(o=>o.remove())}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this._menuElm!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.hideMenu()}}handleMenuItemCommandClick(t,e,n,r=0,o){var s;if(n!=="divider"&&!n.disabled&&!n.divider)if((n.command||"")&&!n.commandItems&&!n.items){const u={grid:this.grid,command:n.command,column:o,item:n};this.executeHeaderMenuInternalCommands(t,u),this.pubSubService.publish("onHeaderMenuCommand",u),typeof((s=this.addonOptions)===null||s===void 0?void 0:s.onCommand)=="function"&&this.addonOptions.onCommand(t,u),typeof n.action=="function"&&n.action.call(this,t,u),t.defaultPrevented||this.hideMenu(),t.preventDefault(),t.stopPropagation()}else(n.commandItems||n.items)&&this.repositionSubMenu(t,n,r,o)}handleMenuItemMouseOver(t,e,n,r=0,o){n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems||n.items?this.repositionSubMenu(t,n,r,o):r===0&&this.disposeSubMenus())}addHeaderMenuCustomCommands(t){const e=this.sharedService.gridOptions,n=e.headerMenu||{},r=ho(e);return Array.isArray(t)&&e.enableHeaderMenu&&t.forEach(o=>{var s,l,u,h,c,p;if(o&&!o.excludeFromHeaderMenu){o.header?o.header.menu||(o.header.menu={commandItems:[]}):o.header={menu:{commandItems:[]}};const m=(p=(u=(l=(s=o==null?void 0:o.header)===null||s===void 0?void 0:s.menu)===null||l===void 0?void 0:l.commandItems)!==null&&u!==void 0?u:(c=(h=o==null?void 0:o.header)===null||h===void 0?void 0:h.menu)===null||c===void 0?void 0:c.items)!==null&&p!==void 0?p:[];let v=!1;n&&!n.hideFreezeColumnsCommand&&(v=!0,m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="freeze-columns")||m.push({iconCssClass:n.iconFreezeColumns||"fa fa-thumb-tack",titleKey:`${r}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:47})),n&&!n.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(v=!0,m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="column-resize-by-content")||m.push({iconCssClass:n.iconColumnResizeByContentCommand||"fa fa-arrows-h",titleKey:`${r}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:48})),v&&!m.some(_=>_!=="divider"&&_.positionOrder===49)&&m.push({divider:!0,command:"",positionOrder:49}),e.enableSorting&&o.sortable&&n&&!n.hideSortCommands&&(m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="sort-asc")||m.push({iconCssClass:n.iconSortAscCommand||"fa fa-sort-asc",titleKey:`${r}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="sort-desc")||m.push({iconCssClass:n.iconSortDescCommand||"fa fa-sort-desc",titleKey:`${r}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),m.some(_=>_!=="divider"&&_.positionOrder===52)||m.push({divider:!0,command:"",positionOrder:52}),!n.hideClearSortCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="clear-sort")&&m.push({iconCssClass:n.iconClearSortCommand||"fa fa-unsorted",titleKey:`${r}REMOVE_SORT`,command:"clear-sort",positionOrder:54})),e.enableFiltering&&o.filterable&&n&&!n.hideFilterCommand&&!n.hideClearFilterCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="clear-filter")&&m.push({iconCssClass:n.iconClearFilterCommand||"fa fa-filter",titleKey:`${r}REMOVE_FILTER`,command:"clear-filter",positionOrder:53}),n&&!n.hideColumnHideCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="hide-column")&&m.push({iconCssClass:n.iconColumnHideCommand||"fa fa-times",titleKey:`${r}HIDE_COLUMN`,command:"hide-column",positionOrder:55}),this.extensionUtility.translateMenuItemsFromTitleKey(m),this.extensionUtility.sortItems(m,"positionOrder")}}),n}clearColumnFilter(t,e){e!=null&&e.column&&this.filterService.clearFilterByColumnId(t,e.column.id)}clearColumnSort(t,e){e!=null&&e.column&&this.sharedService&&this.sortService.clearSortByColumnId(t,e.column.id)}executeHeaderMenuInternalCommands(t,e){var n;if(e!=null&&e.command)switch(e.command){case"hide-column":this.hideColumn(e.column),!((n=this.sharedService.gridOptions)===null||n===void 0)&&n.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(t,e);break;case"clear-sort":this.clearColumnSort(t,e);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:e.column.id});break;case"freeze-columns":const r=[...this.sharedService.visibleColumns],s={frozenColumn:r.findIndex(c=>c.id===e.column.id),enableMouseWheelScrollHandler:!0},l=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(s,!1,!0),this.sharedService.gridOptions.frozenColumn=s.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=s.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=e.column.id,this.sharedService.hasColumnsReordered||Array.isArray(r)&&Array.isArray(this.sharedService.allColumns)&&r.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(r):this.sharedService.slickGrid.setColumns(l),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":const h=e.command==="sort-asc";this.sortColumn(t,e,h);break}}createParentMenu(t,e,n){var r,o,s,l,u;const h={grid:this.grid,column:e,menu:n};typeof t.stopPropagation=="function"&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",h),typeof((r=this.addonOptions)===null||r===void 0?void 0:r.onBeforeMenuShow)=="function"&&((o=this.addonOptions)===null||o===void 0?void 0:o.onBeforeMenuShow(t,h))===!1)||(this._menuElm=this.createCommandMenu(n.commandItems||n.items,e),(s=this.grid.getContainerNode())===null||s===void 0||s.appendChild(this._menuElm),this.repositionMenu(t,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",h),!(typeof((l=this.addonOptions)===null||l===void 0?void 0:l.onAfterMenuShow)=="function"&&((u=this.addonOptions)===null||u===void 0?void 0:u.onAfterMenuShow(t,h))===!1)&&(t.preventDefault(),t.stopPropagation()))}createCommandMenu(t,e,n=0,r){const o=r==null?void 0:r.command;let s=n===1&&o?o.replace(/\s/g,""):"";s&&(this._subMenuParentId=s),n>1&&(s=this._subMenuParentId);const l=`${this.menuCssClass} slick-menu-level-${n} ${this.gridUid}`,u=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${n}${this.gridUidSelector}`);if(u){if(u.dataset.subMenuParent===s)return u;this.disposeSubMenus()}const h=Re("div",{ariaExpanded:"true",ariaLabel:n>1?"SubMenu":"Header Menu",role:"menu",className:l,style:{minWidth:`${this.addonOptions.minWidth}px`}});n>0&&(h.classList.add("slick-submenu"),s&&(h.dataset.subMenuParent=s));const c=Re("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},h),p={grid:this.grid,column:e,level:n,menu:{commandItems:t}};return r&&n>0&&this.addSubMenuTitleWhenExists(r,c),this.populateCommandOrOptionItems("command",this.addonOptions,c,t,p,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),n++,h}resetHeaderMenuTranslations(t){t.forEach(e=>{var n,r,o,s,l;if(((o=(r=(n=e==null?void 0:e.header)===null||n===void 0?void 0:n.menu)===null||r===void 0?void 0:r.commandItems)!==null&&o!==void 0?o:!((l=(s=e==null?void 0:e.header)===null||s===void 0?void 0:s.menu)===null||l===void 0)&&l.items)&&!e.excludeFromHeaderMenu){const u=e.header.menu.commandItems||e.header.menu.items||[];this.extensionUtility.translateMenuItemsFromTitleKey(u)}})}sortColumn(t,e,n=!0){if(e!=null&&e.column){const r=e.column,o=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(r.id+""):[];let s=Ji.local;o.push({columnId:r.id,sortCol:r,sortAsc:n}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(t,{multiColumnSort:!0,sortCols:o,grid:this.sharedService.slickGrid}),s=Ji.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,o),s=Ji.local):e.grid.onSort.notify(o);const l=o.map(u=>{var h,c,p;return{columnId:(c=(h=u==null?void 0:u.sortCol)===null||h===void 0?void 0:h.id)!==null&&c!==void 0?c:"",sortAsc:(p=u==null?void 0:u.sortAsc)!==null&&p!==void 0?p:!0}});if(this.sharedService.slickGrid.setSortColumns(l),s){const u=[];l.forEach(h=>{u.push({columnId:`${h.columnId}`,direction:h.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(s,u)}}}}class Um{constructor(t){this.pubSubService=t,this._dragging=!1,this._handler=new Slick.EventHandler,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new Slick.Event,this.onMoveRows=new Slick.Event,this.pluginName="RowMoveManager",this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}init(t,e){var n;this._addonOptions={...this._defaults,...e},this._grid=t,this._canvas=this._grid.getCanvasNode(),typeof((n=this._addonOptions)===null||n===void 0?void 0:n.usabilityOverride)=="function"&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}create(t,e){var n,r;if(this._addonOptions={...this._defaults,...e.rowMoveManager},Array.isArray(t)&&e){const o=this.getColumnDefinition();if(!t.some(s=>s.id===o.id)){const s=Array.isArray(t)&&t.find(h=>(h==null?void 0:h.behavior)==="selectAndMove"),l=s||o,u=(r=(n=e==null?void 0:e.rowMoveManager)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:0;u>0?t.splice(u,0,l):t.unshift(l),this.pubSubService.publish("onPluginColumnsChanged",{columns:t,pluginName:this.pluginName})}}return this}getColumnDefinition(){var t,e;const n=String((e=(t=this._addonOptions)===null||t===void 0?void 0:t.columnId)!==null&&e!==void 0?e:this._defaults.columnId);return{id:n,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:n,resizable:!1,selectable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(t){this._usabilityOverride=t}setOptions(t){this._addonOptions={...this._addonOptions,...t}}handleDragInit(t){t.stopImmediatePropagation()}handleDragEnd(t,e){var n,r,o;if(this._dragging&&(this._dragging=!1,t.stopImmediatePropagation(),(n=e.guide)===null||n===void 0||n.remove(),(r=e.selectionProxy)===null||r===void 0||r.remove(),(o=e.clonedSlickRow)===null||o===void 0||o.remove(),e.canMove)){const s={grid:this._grid,rows:e.selectedRows,insertBefore:e.insertBefore};typeof this._addonOptions.onMoveRows=="function"&&this._addonOptions.onMoveRows(t,s),this.onMoveRows.notify(s)}}handleDrag(t,e){var n,r,o,s,l,u;if(this._dragging){t.stopImmediatePropagation();const c=((r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t).pageY-((s=(o=Wn(this._canvas))===null||o===void 0?void 0:o.top)!==null&&s!==void 0?s:0);e.selectionProxy.style.top=`${c-5}px`,e.selectionProxy.style.display="block",e.clonedSlickRow&&(e.clonedSlickRow.style.top=`${c-6}px`,e.clonedSlickRow.style.display="block");const p=Math.max(0,Math.min(Math.round(c/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(p!==e.insertBefore){const m={grid:this._grid,rows:e.selectedRows,insertBefore:p};if(((u=(l=this._addonOptions)===null||l===void 0?void 0:l.onBeforeMoveRows)===null||u===void 0?void 0:u.call(l,t,m))===!1||this.onBeforeMoveRows.notify(m).getReturnValue()===!1?e.canMove=!1:e.canMove=!0,this._usabilityOverride&&e.canMove){const v=this._grid.getDataItem(p);e.canMove=this.checkUsabilityOverride(p,v,this._grid)}e.canMove?e.guide.style.top=`${p*(this.gridOptions.rowHeight||0)}px`:e.guide.style.top="-1000px",e.insertBefore=p}}}handleDragStart(t,e){var n,r,o,s,l,u,h;const c=this._grid.getCellFromEvent(t)||{cell:-1,row:-1},p=c.row,m=this._grid.getDataItem(p);if(this.checkUsabilityOverride(p,m,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[c.cell].behavior||""))return!1;if(this._dragging=!0,t.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const C=(n=this._grid.getCellNode(c.row,c.cell))===null||n===void 0?void 0:n.closest(".slick-row");C&&(e.clonedSlickRow=C.cloneNode(!0),e.clonedSlickRow.classList.add("slick-reorder-shadow-row"),e.clonedSlickRow.style.display="none",e.clonedSlickRow.style.marginLeft=Gs((r=this._addonOptions)===null||r===void 0?void 0:r.rowMoveShadowMarginLeft,"0px"),e.clonedSlickRow.style.marginTop=Gs((o=this._addonOptions)===null||o===void 0?void 0:o.rowMoveShadowMarginTop,"0px"),e.clonedSlickRow.style.opacity=`${(l=(s=this._addonOptions)===null||s===void 0?void 0:s.rowMoveShadowOpacity)!==null&&l!==void 0?l:.95}`,e.clonedSlickRow.style.transform=`scale(${(h=(u=this.addonOptions)===null||u===void 0?void 0:u.rowMoveShadowScale)!==null&&h!==void 0?h:.75})`,this._canvas.appendChild(e.clonedSlickRow))}let v=this._addonOptions.singleRowMove?[c.row]:this._grid.getSelectedRows();(v.length===0||!v.some(C=>C===c.row))&&(v=[c.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(v));const _=this.gridOptions.rowHeight;e.selectedRows=v,e.selectionProxy=Re("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:`${_*v.length}px`}},this._canvas),e.guide=Re("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),e.insertBefore=-1}}checkUsabilityOverride(t,e,n){return typeof this._usabilityOverride=="function"?this._usabilityOverride(t,e,n):!0}moveIconFormatter(t,e,n,r,o,s){return this.checkUsabilityOverride(t,o,s)?{addClasses:`cell-reorder dnd ${this._addonOptions.cssClass||""}`,text:""}:""}}class D0{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(t,e,n,r,o,s,l){this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this.treeDataService=s,this.translaterService=l,this._extensionCreatedList={},this._extensionList={}}dispose(){var t;this.sharedService.visibleColumns=[];for(const e of Object.keys(this._extensionList))if(this._extensionList.hasOwnProperty(e)){const n=this._extensionList[e];!((t=n==null?void 0:n.instance)===null||t===void 0)&&t.dispose&&n.instance.dispose()}for(const e of Object.keys(this._extensionList))delete this._extensionList[e];this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList=null}addExtensionToList(t,e){this._extensionList[t]=e}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(t){var e;if(!((e=this._extensionCreatedList)===null||e===void 0)&&e.hasOwnProperty(t))return this._extensionCreatedList[t]}getExtensionByName(t){var e;return(e=this._extensionList)===null||e===void 0?void 0:e[t]}getExtensionInstanceByName(t){var e;return(e=this.getExtensionByName(t))===null||e===void 0?void 0:e.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){var t,e,n,r,o,s,l,u,h,c,p;if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableAutoTooltip){const m=new V_((t=this.gridOptions)===null||t===void 0?void 0:t.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(m),this._extensionList[ii.autoTooltip]={name:ii.autoTooltip,instance:m}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new z_,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),!((e=this.gridOptions.excelCopyBufferOptions)===null||e===void 0)&&e.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[ii.cellExternalCopyManager]={name:ii.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new G_(this.extensionUtility,this.pubSubService,this.sharedService),!((n=this.gridOptions.cellMenu)===null||n===void 0)&&n.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[ii.cellMenu]={name:ii.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const m=(r=this.gridOptions.rowSelectionOptions)!==null&&r!==void 0?r:{};this.gridOptions.enableRowMoveManager&&((o=this.gridOptions.rowMoveManager)===null||o===void 0?void 0:o.dragToSelect)!==!1&&(m.dragToSelect=!0),this._rowSelectionModel=new yh(m),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[ii.rowSelection]={name:ii.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new um(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const m=this.getCreatedExtensionByName(ii.checkboxSelector);m&&m.instance&&(this._extensionList[ii.checkboxSelector]={name:ii.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new Eh(this.extensionUtility,this.pubSubService,this.sharedService),!((s=this.gridOptions.columnPicker)===null||s===void 0)&&s.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[ii.columnPicker]={name:ii.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new j_(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),!((l=this.gridOptions.contextMenu)===null||l===void 0)&&l.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[ii.contextMenu]={name:ii.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),!((u=this.gridOptions.draggableGrouping)===null||u===void 0)&&u.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[ii.contextMenu]={name:ii.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[ii.draggableGrouping]={name:ii.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new cm(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((h=this.gridOptions.gridMenu)===null||h===void 0)&&h.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[ii.gridMenu]={name:ii.gridMenu,instance:this._gridMenuControl}),(this.gridOptions.enableDraggableGrouping||this.gridOptions.enableGrouping)&&(this._groupItemMetadataProviderService=this._groupItemMetadataProviderService?this._groupItemMetadataProviderService:new zm,this._groupItemMetadataProviderService.init(this.sharedService.slickGrid),this._extensionList[ii.groupItemMetaProvider]={name:ii.groupItemMetaProvider,instance:this._groupItemMetadataProviderService}),this.gridOptions.enableHeaderButton){const m=new k0(this.extensionUtility,this.pubSubService,this.sharedService);!((c=this.gridOptions.headerButton)===null||c===void 0)&&c.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(m),this._extensionList[ii.headerButton]={name:ii.headerButton,instance:m}}if(this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new I0(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((p=this.gridOptions.headerMenu)===null||p===void 0)&&p.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[ii.headerMenu]={name:ii.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager){this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new Um(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager);const m=this.getCreatedExtensionByName(ii.rowMoveManager);(m==null?void 0:m.instance)&&(this._extensionList[ii.rowMoveManager]={name:ii.rowMoveManager,instance:this._rowMoveManagerPlugin})}}}createExtensionsBeforeGridCreation(t,e){var n,r,o,s;const l=[];e.enableCheckboxSelector&&(this.getCreatedExtensionByName(ii.checkboxSelector)||(this._checkboxSelectColumn=new um(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),l.push({name:ii.checkboxSelector,extension:this._checkboxSelectColumn,columnIndexPosition:(r=(n=e==null?void 0:e.checkboxSelector)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:l.length}))),e.enableRowMoveManager&&(this.getCreatedExtensionByName(ii.rowMoveManager)||(this._rowMoveManagerPlugin=new Um(this.pubSubService),l.push({name:ii.rowMoveManager,extension:this._rowMoveManagerPlugin,columnIndexPosition:(s=(o=e==null?void 0:e.rowMoveManager)===null||o===void 0?void 0:o.columnIndexPosition)!==null&&s!==void 0?s:l.length}))),this.createExtensionByTheirColumnIndex(l,t,e),e.enableDraggableGrouping&&(this.getCreatedExtensionByName(ii.draggableGrouping)||(this._draggleGroupingPlugin=new A0(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(e.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[ii.draggableGrouping]={name:ii.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(t){var e,n;if(typeof((n=(e=this.sharedService)===null||e===void 0?void 0:e.slickGrid)===null||n===void 0?void 0:n.getColumns)=="function"){const r=this.sharedService.slickGrid.getColumnIndex(t.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),r),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(t){this.extensionUtility.refreshBackendDataset(t)}removeColumnByIndex(t,e){return Array.isArray(t)?t.filter((n,r)=>e!==r):t}translateAllExtensions(){this.translateCellMenu(),this.translateColumnHeaders(),this.translateColumnPicker(),this.translateContextMenu(),this.translateGridMenu(),this.translateHeaderMenu()}translateCellMenu(){var t,e;(e=(t=this._cellMenuPlugin)===null||t===void 0?void 0:t.translateCellMenu)===null||e===void 0||e.call(t)}translateColumnPicker(){var t;!((t=this._columnPickerControl)===null||t===void 0)&&t.translateColumnPicker&&this._columnPickerControl.translateColumnPicker()}translateContextMenu(){var t,e;(e=(t=this._contextMenuPlugin)===null||t===void 0?void 0:t.translateContextMenu)===null||e===void 0||e.call(t)}translateGridMenu(){var t,e;(e=(t=this._gridMenuControl)===null||t===void 0?void 0:t.translateGridMenu)===null||e===void 0||e.call(t)}translateHeaderMenu(){var t,e;(e=(t=this._headerMenuPlugin)===null||t===void 0?void 0:t.translateHeaderMenu)===null||e===void 0||e.call(t)}translateColumnHeaders(t,e){var n,r,o;if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');t&&(!((n=this.translaterService)===null||n===void 0)&&n.use)&&this.translaterService.use(t);let s=e;s||(s=this.sharedService.columnDefinitions),this.translateItems(s,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.renderColumnHeaders(s,Array.isArray(e)),(o=(r=this._gridMenuControl)===null||r===void 0?void 0:r.translateGridMenu)===null||o===void 0||o.call(r)}renderColumnHeaders(t,e=!1){var n;let r=t;r||(r=this.sharedService.columnDefinitions),Array.isArray(r)&&this.sharedService.slickGrid&&this.sharedService.slickGrid.setColumns&&((r.length>this.sharedService.allColumns.length||e)&&(this.sharedService.allColumns=r),this.sharedService.slickGrid.setColumns(r)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=(n=this.sharedService.allColumns)!==null&&n!==void 0?n:[],this._gridMenuControl.recreateGridMenu())}createExtensionByTheirColumnIndex(t,e,n){t.sort((r,o)=>r.columnIndexPosition-o.columnIndexPosition),t.forEach(r=>{const o=r.extension.create(e,n);o&&(this._extensionCreatedList[r.name]={name:r.name,instance:o})})}translateItems(t,e,n){var r,o,s;if(!((r=this.gridOptions)===null||r===void 0)&&r.enableTranslate&&!(!((o=this.translaterService)===null||o===void 0)&&o.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(Array.isArray(t))for(const l of t)l[e]&&(l[n]=(s=this.translaterService)===null||s===void 0?void 0:s.translate(l[e]))}}var Wm=Object.prototype.hasOwnProperty;function Qo(a,t){var e,n;if(a===t)return!0;if(a&&t&&(e=a.constructor)===t.constructor){if(e===Date)return a.getTime()===t.getTime();if(e===RegExp)return a.toString()===t.toString();if(e===Array){if((n=a.length)===t.length)for(;n--&&Qo(a[n],t[n]););return n===-1}if(!e||typeof a=="object"){n=0;for(e in a)if(Wm.call(a,e)&&++n&&!Wm.call(t,e)||!(e in t)||!Qo(a[e],t[e]))return!1;return Object.keys(t).length===n}}return a!==a&&t!==t}function Gm(a,t,e){if(e&&(a!=null&&a.hasOwnProperty(e)||t!=null&&t.hasOwnProperty(e)))return a[e]===t||a===t[e]||a[e]===t[e];for(const n in a)if(a.hasOwnProperty(n)&&a[n]!==t[n])return!1;return!0}function R0(a){switch(a&&a.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}const bs=(a,t,e)=>{switch(a.toUpperCase()){case"<":case"LT":return t<e;case"<=":case"LE":return t<=e;case">":case"GT":return t>e;case">=":case"GE":return t>=e;case"!=":case"<>":case"NE":return t!==e;case"=":case"==":case"EQ":return t===e;case"IN":return e&&Array.isArray(e)?e.includes(t):!1;case"NIN":case"NOT_IN":return e&&Array.isArray(e)?!e.includes(t):!1;case"IN_CONTAINS":return e&&Array.isArray(e)&&typeof t=="string"?e.some(n=>t.split(/[,]+/).map(r=>r.trim()).includes(n)):!1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return e&&Array.isArray(e)&&typeof t=="string"?!e.some(n=>t.split(/[,]+/).map(r=>r.trim()).includes(n)):!1;case"IN_COLLECTION":return t&&e&&Array.isArray(t)&&Array.isArray(e)?e.some(n=>t.includes(n)):!1;case"NOT_IN_COLLECTION":return t&&e&&Array.isArray(t)&&Array.isArray(e)?!e.some(n=>t.includes(n)):!1}return!0},$m=(a,t)=>{var e;let[n,r]=t;if(n===void 0&&!a.operator)return!0;a.cellValue=a.cellValue===void 0||a.cellValue===null?"":a.cellValue.toString();const o=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ul(a.cellValue,!0):a.cellValue.toLowerCase();if(typeof n=="string"&&(n=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ul(n,!0):n.toLowerCase()),typeof r=="string"&&(r=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ul(r,!0):r.toLowerCase()),n!==void 0&&r!==void 0){let l=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;l!==Nt.rangeInclusive&&l!==Nt.rangeExclusive&&(l=a.defaultFilterRangeOperator);const u=l===Nt.rangeInclusive,h=$h(u?">=":">",o,n,a.searchInputLastChar),c=$h(u?"<=":"<",o,r,a.searchInputLastChar);return h&&c}return $h(a.operator,o,n,a.searchInputLastChar)};function P0(a){const t="",e=Array.isArray(a)&&a||[t],n=[];let r,o;if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split("..");r=`${Array.isArray(s)?s[0]:""}`,o=`${Array.isArray(s)?s[1]:""}`}else{const s=Array.isArray(a)&&a.length>0?a[0]:"";r=s==null?"":`${s}`}return r!==void 0&&o!==void 0?n.push(r,o):r!==void 0&&n.push(r),n}function $h(a,t,e,n){return a==="*"||a===Nt.endsWith||a==="*z"?t.endsWith(e):a===""&&n==="*"||a===Nt.startsWith||a==="a*"?t.startsWith(e):a===""||a===Nt.contains?t.indexOf(e)>-1:a==="<>"||a===Nt.notContains?t.indexOf(e)===-1:bs(a||"==",t,e)}const F0=(a,t)=>{if(t===void 0&&!a.operator)return!0;switch((a.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Gm(a.cellValue,t,a.dataKey);case"=":case"==":case"EQ":default:return Gm(a.cellValue,t,a.dataKey)}};function M0(a){return(Array.isArray(a)&&a.length>0?a[0]:"")||""}const Ym=(a,t)=>{var e;const n=parseFloat(a.cellValue),[r,o]=t;if(r===void 0&&!a.operator)return!0;if(r!==void 0&&o!==void 0){let s=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;s!==Nt.rangeInclusive&&s!==Nt.rangeExclusive&&(s=a.defaultFilterRangeOperator);const l=s===Nt.rangeInclusive,u=bs(l?">=":">",n,+r),h=bs(l?"<=":"<",n,+o);return u&&h}return bs(a.operator||"==",n,+r)};function N0(a){const e=Array.isArray(a)&&a||[0],n=[];let r,o;if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split("..");r=parseFloat(Array.isArray(s)?s[0]:""),o=parseFloat(Array.isArray(s)?s[1]:"")}else r=parseFloat(e[0]);return en(r,!0)&&en(o,!0)?n.push(r,o):en(r,!0)&&n.push(r),n}const jm=(a,t)=>Zd(a.cellValue)===Zd(t);function L0(a){const t=Array.isArray(a)&&a[0]||!1;return Zd(t)}const Xm=a=>{const t=a.operator;let e;return Array.isArray(a.cellValue)&&(t==="IN_COLLECTION"||t==="NOT_IN_COLLECTION")?e=a.cellValue.length?a.cellValue.map(n=>`${n}`):[]:e=a.cellValue===void 0||a.cellValue===null?"":`${a.cellValue}`,bs(t||"IN",e,a.searchTerms||[])},ku=Us||hs;function H0(a,t){var e;const n=a&&(a.filterSearchType||a.fieldType)||ie.dateIso,r=Fr(n),[o,s]=t,l=ku(a.cellValue,r,!0);if(!o&&!s||!l.isValid())return!1;const u=r.toLowerCase().includes("h")?l.valueOf():l.clone().startOf("day").valueOf();if(o&&s){let c=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;c!==Nt.rangeInclusive&&c!==Nt.rangeExclusive&&(c=a.defaultFilterRangeOperator);const p=c===Nt.rangeInclusive,m=bs(p?">=":">",u,o.valueOf()),v=bs(p?"<=":"<",u,s.valueOf());return m&&v}const h=r.toLowerCase().includes("h")?o.valueOf():o.clone().startOf("day").valueOf();return bs(a.operator||"==",u,h)}function B0(a,t){const e=Array.isArray(a)&&a||[],n=t||ie.dateIso,r=Fr(n),o=[];if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split(".."),l=Array.isArray(s)&&s[0]||"",u=Array.isArray(s)&&s[1]||"",h=ku(l,r,!0),c=ku(u,r,!0);if(!h.isValid()||!c.isValid())return[];o.push(h,c)}else{const s=ku(e[0],r,!0);if(!s.isValid())return[];o.push(s)}return o}const V0=(a,t)=>{if(R0(a.operator))return Xm(a);switch(Km(a.filterSearchType||a.fieldType)){case"boolean":return jm(a,t);case"date":return H0(a,t||[]);case"number":return Ym(a,t||[]);case"object":return F0(a,t);case"string":default:return $m(a,t||[])}};function Iu(a,t){const e=Km(t);let n;switch(e){case"boolean":n=L0(a);break;case"date":n=B0(a,t);break;case"number":n=N0(a);break;case"object":n=M0(a);break;case"string":n=P0(a);break}return n}function Km(a){switch(a){case ie.boolean:return"boolean";case ie.date:case ie.dateIso:case ie.dateUtc:case ie.dateTime:case ie.dateTimeIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateTimeShortIso:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeShortEuro:case ie.dateTimeEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeShortUs:case ie.dateTimeUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:return"date";case ie.integer:case ie.float:case ie.number:return"number";case ie.object:return"object";case ie.string:case ie.text:case ie.password:case ie.readonly:default:return"string"}}const qm={executeFilterConditionTest:V0,booleanFilter:jm,collectionSearchFilter:Xm,numberFilter:Ym,stringFilter:$m,testFilter:bs};class z0{constructor(t,e,n,r,o){this.filterFactory=t,this.pubSubService=e,this.sharedService=n,this.backendUtilities=r,this.rxjs=o,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new Slick.Event,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get _columnDefinitions(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getColumns())!==null&&e!==void 0?e:[]}get _dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}addRxJsResource(t){this.rxjs=t}init(t){this._grid=t,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){var t;this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((t=this.rxjs)===null||t===void 0)&&t.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let t=this._filtersMetadata.pop();for(;t;)typeof(t==null?void 0:t.destroy)=="function"&&t.destroy(),t=this._filtersMetadata.pop()}}bindBackendOnFilter(t){this._filtersMetadata=[],this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{n.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(n,this._isFilterFirstRender),this._firstColumnIdRendered===""&&(this._firstColumnIdRendered=n.column.id)}),this.subscribeToOnHeaderRowCellRendered(t),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(t){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,async(e,n)=>{var r;const o=(r=n==null?void 0:n.clearFilterTriggered)!==null&&r!==void 0?r:!1;o||await this.emitFilterChanged(Ji.local,!0),this._gridOptions.enableTreeData===!0&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),n.columnId!==null&&this._dataView.refresh(),o||await this.emitFilterChanged(Ji.local),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)}),this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{this.addFilterTemplateToHeaderRow(n)}),this.subscribeToOnHeaderRowCellRendered(t)}async clearFilterByColumnId(t,e){var n;await this.pubSubService.publish("onBeforeFilterClear",{columnId:e},0);const r=(n=this._gridOptions.backendServiceApi)!==null&&n!==void 0?n:!1,o=r?Ji.remote:Ji.local,s=Object.keys(this._columnFilters);let l;Array.isArray(s)&&(l=s.find(h=>h===`${e}`));const u=this._filtersMetadata.find(h=>h.columnDef.id===e);return u!=null&&u.clear&&u.clear(!0),r&&l!==void 0&&this.onBackendFilterChange(t,{grid:this._grid,columnFilters:this._columnFilters}),await this.emitFilterChanged(o),!0}async clearFilters(t=!0){var e,n,r;t&&await this.pubSubService.publish("onBeforeFilterClear",!0,0),this._filtersMetadata.forEach(s=>{s!=null&&s.clear&&s.clear(!1)}),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach(s=>{var l;!((l=s.filter)===null||l===void 0)&&l.searchTerms&&delete s.filter.searchTerms}),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());const o=this._gridOptions.backendServiceApi;if(o&&t){const s={clearFilterTriggered:!0,shouldTriggerQuery:t,grid:this._grid,columnFilters:this._columnFilters},u=o.service.processOnFilterChanged(void 0,s),h=(n=(e=this._gridOptions.pagination)===null||e===void 0?void 0:e.totalItems)!==null&&n!==void 0?n:0;(r=this.backendUtilities)===null||r===void 0||r.executeBackendCallback(o,u,s,new Date,h,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:c=>this._previousFilters=this.extractBasicFilterDetails(c.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);t&&this.pubSubService.publish("onFilterCleared",!0)}customLocalFilter(t,e){var n,r,o,s,l,u,h;const c=e==null?void 0:e.grid,p=(n=e==null?void 0:e.columnFilters)!==null&&n!==void 0?n:{},m=(r=this._gridOptions.enableTreeData)!==null&&r!==void 0?r:!1,v=this._gridOptions.treeDataOptions;if(m&&v){const _=(o=v.collapsedPropName)!==null&&o!==void 0?o:je.treeDataProperties.COLLAPSED_PROP,C=(s=v.parentPropName)!==null&&s!==void 0?s:je.treeDataProperties.PARENT_PROP,x=(l=v==null?void 0:v.childrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.CHILDREN_PROP,S=(u=this._gridOptions.datasetIdPropertyName)!==null&&u!==void 0?u:"id",E=(h=v.autoRecalcTotalsOnFilterChange)!==null&&h!==void 0?h:!1;let D=!1;if(t[C]!==null){let A=this._dataView.getItemById(t[C]);for(;A;){if(A[_])if(E)D=!0;else return!1;A=this._dataView.getItemById(A[C])}}if(this._tmpPreFilteredData instanceof Set){const A=this._tmpPreFilteredData.has(t[S]);if(E){const P=Ba(this.sharedService.hierarchicalDataset,M=>M[S]===t[S],x);if(P&&(P.__filteredOut=!A),D)return!1}return A}}else if(typeof p=="object")for(const _ of Object.keys(p)){const C=p[_],x=this.preProcessFilterConditionOnDataContext(t,C,c);if(typeof x=="boolean")return x;let S=C==null?void 0:C.parsedSearchTerms;if(S===void 0&&(S=Iu(C.searchTerms,C.columnDef.type||ie.string),S!==void 0&&(C.parsedSearchTerms=S)),!qm.executeFilterConditionTest(x,S))return!1}return!0}parseFormInputFilterConditions(t,e){var n,r,o,s;const l=fo(t)||[];let u=Array.isArray(l)&&l.length===1?l[0]:"";const h=e.columnDef,c=(o=(r=(n=h.filter)===null||n===void 0?void 0:n.type)!==null&&r!==void 0?r:h.type)!==null&&o!==void 0?o:ie.string;let p=null;c!==ie.object&&(u=u==null?"":`${u}`,p=((s=h.autoParseInputFilterOperator)!==null&&s!==void 0?s:this._gridOptions.autoParseInputFilterOperator)!==!1?u.match(/^([<>!=\*]{0,2})(.*[^<>!=\*])?([\*]?)$/):[u,"",u,""]);let m=(p==null?void 0:p[1])||e.operator;const v=(p==null?void 0:p[2])||"",_=(p==null?void 0:p[3])||(m==="*z"?"*":"");return typeof u=="string"&&(u=u.replace("'","''"),m==="*"||m==="*z"?m=Nt.endsWith:(m==="a*"||_==="*")&&(m=Nt.startsWith)),Array.isArray(p)&&p.length>=1&&Array.isArray(l)&&l.length===1&&(l[0]=v),{dataKey:h.dataKey,fieldType:c,searchTerms:l||[],operator:m,searchInputLastChar:_,filterSearchType:h.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(t,e,n){var r,o,s,l,u,h;const c=e.columnDef,p=e.columnId;let m=n.getColumnIndex(p);if(!c&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(m=this.sharedService.allColumns.findIndex(E=>E.field===p)),!c)return!0;if(this._gridOptions.enableRowDetailView){const E=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";t[`${E}isPadding`]&&t[`${E}parent`]&&(t=t[`${E}parent`])}let v=((r=c.filter)===null||r===void 0?void 0:r.queryField)||c.queryFieldFilter||c.queryField||c.field||"";typeof c.queryFieldNameGetterFn=="function"&&(v=c.queryFieldNameGetterFn(t));const _=(l=(s=(o=c.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:c.type)!==null&&l!==void 0?l:ie.string;let C=t[v];(v==null?void 0:v.indexOf("."))>=0&&(C=_n(t,v));const x=e.operator,S=e.searchTerms||[];if(!S||Array.isArray(S)&&(S.length===0||S.length===1&&x===S[0]))return!0;if(S&&Array.isArray(S)&&_!==ie.object)for(let E=0,D=S.length;E<D;E++)S[E]=(S[E]===void 0||S[E]===null?"":S[E])+"";if(((u=c==null?void 0:c.params)===null||u===void 0?void 0:u.useFormatterOuputToFilter)===!0){const E=n.getData(),D=this._gridOptions.datasetIdPropertyName||"id",A=E&&typeof E.getIdxById=="function"?E.getIdxById(t[D]):0,P=c&&typeof c.formatter=="function"?c.formatter(A||0,m,C,c,t,this._grid):"";C=or(P)}return typeof C=="number"&&(C=C.toString()),{dataKey:c.dataKey,fieldType:_,searchTerms:S,cellValue:C,operator:x,searchInputLastChar:e.searchInputLastChar,filterSearchType:c.filterSearchType,ignoreAccentOnStringFilterAndSort:(h=this._gridOptions.ignoreAccentOnStringFilterAndSort)!==null&&h!==void 0?h:!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D;const A=this._gridOptions.treeDataOptions,P=(n=A==null?void 0:A.collapsedPropName)!==null&&n!==void 0?n:je.treeDataProperties.COLLAPSED_PROP,M=(r=A==null?void 0:A.parentPropName)!==null&&r!==void 0?r:je.treeDataProperties.PARENT_PROP,B=(o=A==null?void 0:A.hasChildrenPropName)!==null&&o!==void 0?o:je.treeDataProperties.HAS_CHILDREN_PROP,Z=(s=this._gridOptions.datasetIdPropertyName)!==null&&s!==void 0?s:"id",L=(u=(l=this._gridOptions.presets)===null||l===void 0?void 0:l.treeData)===null||u===void 0?void 0:u.toggledItems,de=(c=(h=this._gridOptions.treeDataOptions)===null||h===void 0?void 0:h.initiallyCollapsed)!==null&&c!==void 0?c:!1,be=(p=this._gridOptions.treeDataOptions)===null||p===void 0?void 0:p.columnId,J=(m=this._gridOptions.treeDataOptions)===null||m===void 0?void 0:m.excludeChildrenWhenFilteringTree,U=!J&&((v=this._gridOptions.treeDataOptions)===null||v===void 0?void 0:v.autoApproveParentItemWhenTreeColumnIsValid)===!0,F={},ae=new Set,Ke=new Map;if(Array.isArray(t)){for(const Ie of t)F[Ie[Z]]=Ie,delete F[Ie[Z]].__used;for(const Ie of Object.keys(e)){const xe=e[Ie],Oe=xe!=null&&xe.searchTerms?fo(xe.searchTerms):[],De=this.parseFormInputFilterConditions(Oe,xe),ne=xe.columnDef,pe=(x=(C=(_=ne==null?void 0:ne.filter)===null||_===void 0?void 0:_.type)!==null&&C!==void 0?C:ne==null?void 0:ne.type)!==null&&x!==void 0?x:ie.string,Ve=Iu(De.searchTerms,pe);Ve!==void 0&&(xe.parsedSearchTerms=Ve)}for(const Ie of t){const xe=Ie[B];let Oe=!0;for(const De of Object.keys(e)){const ne=e[De],pe=this.preProcessFilterConditionOnDataContext(Ie,ne,this._grid);if(pe){const Ve=ne==null?void 0:ne.parsedSearchTerms,Ye=typeof pe=="boolean"?pe:qm.executeFilterConditionTest(pe,Ve);if(Ye&&U&&xe&&ne.columnId===be){Ke.set(Ie[Z],!0);break}if(Ye||!J&&Ke.get(Ie[M])===!0){if(xe&&ne.columnId===be&&Ke.set(Ie[Z],!0),Ye||!J&&ne.columnId===be)continue}else xe&&Ke.get(Ie[M])!==!0&&ne.columnId!==be&&Ke.set(Ie[Z],!1)}Oe=!1}if(Oe){ae.add(Ie[Z]);let De=(S=F[Ie[M]])!==null&&S!==void 0?S:!1;const ne=!de;for(!this._isTreePresetExecuted&&Array.isArray(L)&&L.some(pe=>pe.itemId===De.id&&pe.isCollapsed===ne)&&(De[P]=ne);De;)(E=De.__used)!==null&&E!==void 0||ae.add(De[Z]),F[De[Z]].__used=!0,De=(D=F[De[M]])!==null&&D!==void 0?D:!1}}}return this._isTreePresetExecuted=!0,ae}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){var t,e;const n=[];if(this._columnFilters)for(const r of Object.keys(this._columnFilters)){const o=this._columnFilters[r],s={columnId:r||""},l=this.sharedService.allColumns.find(h=>h.id===s.columnId),u=(e=(t=l==null?void 0:l.filter)===null||t===void 0?void 0:t.emptySearchTermReturnAllValues)!==null&&e!==void 0?e:!0;o!=null&&o.searchTerms&&(s.searchTerms=o.searchTerms),o.operator&&(s.operator=o.operator),o.targetSelector&&(s.targetSelector=o.targetSelector),Array.isArray(s.searchTerms)&&s.searchTerms.length>0&&(!u||s.searchTerms[0]!=="")&&n.push(s)}return n}emitFilterChanged(t,e=!1){const n=e?"onBeforeFilterChange":"onFilterChanged";if(t===Ji.remote&&this._gridOptions.backendServiceApi){let r=[];const o=this._gridOptions.backendServiceApi.service;return o!=null&&o.getCurrentFilters&&(r=o.getCurrentFilters()),this.pubSubService.publish(n,r)}else if(t===Ji.local)return this.pubSubService.publish(n,this.getCurrentLocalFilters())}async onBackendFilterChange(t,e){var n,r,o;const s=e==null?void 0:e.shouldTriggerQuery;if(s&&await this.emitFilterChanged(Ji.remote,!0),!e||!e.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const l=this._gridOptions.backendServiceApi;if(!l||!l.process||!l.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const u=new Date;if(l.preProcess&&l.preProcess(),s){const h=await l.service.processOnFilterChanged(t,e),c=(r=(n=this._gridOptions.pagination)===null||n===void 0?void 0:n.totalItems)!==null&&r!==void 0?r:0;(o=this.backendUtilities)===null||o===void 0||o.executeBackendCallback(l,h,e,u,c,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:p=>this._previousFilters=this.extractBasicFilterDetails(p.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}}populateColumnFilterSearchTermPresets(t){return Array.isArray(t)&&(this._columnDefinitions.forEach(e=>{var n;!((n=e.filter)===null||n===void 0)&&n.searchTerms&&delete e.filter.searchTerms;const r=t.find(o=>o.columnId===e.id);r&&Array.isArray(r==null?void 0:r.searchTerms)&&(e.filter=e.filter||{},e.filter.operator=r.operator||e.filter.operator||"",e.filter.searchTerms=r.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(t){var e,n,r;const o=(r=t??((n=(e=this._dataView)===null||e===void 0?void 0:e.getItems)===null||n===void 0?void 0:n.call(e)))!==null&&r!==void 0?r:[];this._dataView&&this._gridOptions.enableTreeData&&o.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(o,this._columnFilters),this._dataView.refresh()):o.length===0&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&setTimeout(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(t=!0,e=!0){const r=!this._gridOptions.enableFiltering;r!==t&&(e&&t&&this.clearFilters(),this.disableAllFilteringCommands(t),this._grid.setOptions({enableFiltering:r},!1,!0),this._grid.setHeaderRowVisibility(r),this._gridOptions.enableFiltering=!t,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(t=!0){const e=this._gridOptions.enableFiltering;this.disableFilterFunctionality(e,t)}toggleHeaderFilterRow(){var t;let e=(t=this._gridOptions.showHeaderRow)!==null&&t!==void 0?t:!1;e=!e,this._grid.setHeaderRowVisibility(e),e===!0&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(t){this._grid&&Array.isArray(t)&&this._grid.setSortColumns(t)}async updateFilters(t,e=!0,n=!0,r=!1){var o;if(!this._filtersMetadata||this._filtersMetadata.length===0||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(t)){this.clearFilters(!1),t.forEach(u=>{const h=this._filtersMetadata.find(c=>u.columnId===c.columnDef.id);if(u&&h){const c=u.operator||h.defaultOperator;this.updateColumnFilters(u.searchTerms,h.columnDef,c),h.setValues(u.searchTerms||[],c),(r||this._gridOptions.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:h.columnDef,operator:c,searchTerms:u.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});const s=this._gridOptions.backendServiceApi,l=s?Ji.remote:Ji.local;if(e&&await this.emitFilterChanged(l,!0),this._dataView.refresh(),s){const u=s==null?void 0:s.service;u!=null&&u.updateFilters&&(u.updateFilters(t,!0),n&&((o=this.backendUtilities)===null||o===void 0||o.refreshBackendDataset(this._gridOptions)))}e&&await this.emitFilterChanged(l)}return!0}async updateSingleFilter(t,e=!0,n=!0){var r,o,s,l;const u=this.sharedService.allColumns.find(h=>h.id===t.columnId);if(u&&t.columnId){this._columnFilters={};const h=(o=(r=u.filter)===null||r===void 0?void 0:r.emptySearchTermReturnAllValues)!==null&&o!==void 0?o:!0;Array.isArray(t.searchTerms)&&(t.searchTerms.length>1||t.searchTerms.length===1&&(!h||t.searchTerms[0]!==""))&&(this._columnFilters[t.columnId]={columnId:t.columnId,operator:t.operator,searchTerms:t.searchTerms,columnDef:u,type:(s=u.type)!==null&&s!==void 0?s:ie.string});const c=this._gridOptions.backendServiceApi,p=c?Ji.remote:Ji.local;if(e&&await this.emitFilterChanged(p,!0),c){const m=c==null?void 0:c.service;m!=null&&m.updateFilters&&(m.updateFilters(this._columnFilters,!0),n&&((l=this.backendUtilities)===null||l===void 0||l.refreshBackendDataset(this._gridOptions)))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();e&&await this.emitFilterChanged(p)}return!0}drawFilterTemplate(t,e){var n;let r;if(typeof e=="string"){if(r=document.querySelector(e),r===null)return null}else r=e;const o=typeof t=="string"?this.sharedService.allColumns.find(l=>l.id===t):t;if(((n=o==null?void 0:o.id)!==null&&n!==void 0?n:"")!=="selector"&&(o!=null&&o.filterable)){let l,u;const h=this.filterFactory.createFilter(o.filter);u=o&&o.filter&&o.filter.operator||h&&h.operator,this._columnFilters[o.id]?(l=this._columnFilters[o.id].searchTerms||void 0,u=this._columnFilters[o.id].operator||void 0):o.filter&&(l=o.filter.searchTerms||void 0,this.updateColumnFilters(l,o,u));const c={grid:this._grid,operator:u,searchTerms:l,columnDef:o,filterContainerElm:r,callback:this.callbackSearchEvent.bind(this)};return h&&(h.init(c),l&&h.setValues&&h.setValues(l,u)),h}return null}addFilterTemplateToHeaderRow(t,e=!0){var n;const r=t.column,o=(n=r==null?void 0:r.id)!==null&&n!==void 0?n:"";if(o!=="selector"&&(r!=null&&r.filterable)){let s,l;const u=this.filterFactory.createFilter(r.filter);l=r&&r.filter&&r.filter.operator||u&&u.operator,this._columnFilters[r.id]?(s=this._columnFilters[r.id].searchTerms||void 0,l=this._columnFilters[r.id].operator||void 0):r.filter&&(s=r.filter.searchTerms||void 0,this.updateColumnFilters(s,r,l));const h={grid:this._grid,operator:l,searchTerms:s,columnDef:r,filterContainerElm:this._grid.getHeaderRowColumn(o),callback:this.callbackSearchEvent.bind(this)};if(u){u.init(h,e);const c=this._filtersMetadata.findIndex(p=>u.columnDef.id===p.columnDef.id);c===-1?this._filtersMetadata.push(u):this._filtersMetadata[c]=u,s&&u.setValues&&u.setValues(s,l)}}}callbackSearchEvent(t,e){var n,r,o,s,l,u;if(e){const h=t!=null&&t.target?t.target.value:void 0,c=e.searchTerms&&Array.isArray(e.searchTerms)?e.searchTerms:h?[h]:void 0,p=e.columnDef||null,m=(n=p==null?void 0:p.id)!==null&&n!==void 0?n:"",v=(s=(o=(r=p==null?void 0:p.filter)===null||r===void 0?void 0:r.type)!==null&&o!==void 0?o:p==null?void 0:p.type)!==null&&s!==void 0?s:ie.string,_=e.operator||void 0,C=c&&Array.isArray(c),x=C&&c&&c.length,S={...this._columnFilters},E=(u=(l=p.filter)===null||l===void 0?void 0:l.emptySearchTermReturnAllValues)!==null&&u!==void 0?u:!0;let D;if(p&&m)if(!C||x===0||x===1&&Array.isArray(c)&&E&&c[0]==="")delete this._columnFilters[m];else{const B=`${m}`,Z={columnId:B,columnDef:p,parsedSearchTerms:[],type:v,targetSelector:F_(t==null?void 0:t.target)},L=this.parseFormInputFilterConditions(c,Z);Z.operator=_||L.operator||rh(v),D=Iu(L.searchTerms,v),D!==void 0&&(Z.parsedSearchTerms=D),Z.searchTerms=L.searchTerms||[],this._columnFilters[B]=Z}const A=t&&typeof t.isPropagationStopped!="function"?Slick.Utils.extend({},new Slick.EventData,t):t,P=t==null?void 0:t.key,M=t==null?void 0:t.keyCode;if(this._onSearchChange&&(e.forceOnSearchChangeEvent||P==="Enter"||M===xi.ENTER||!Qo(S,this._columnFilters))){const B={clearFilterTriggered:e.clearFilterTriggered,shouldTriggerQuery:e.shouldTriggerQuery,columnId:m,columnDef:p,columnFilters:this._columnFilters,operator:_||rh(v),searchTerms:c,parsedSearchTerms:D,grid:this._grid,target:t==null?void 0:t.target};this.pubSubService.publish("onBeforeSearchChange",B)===!1?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(B,A)}}}disableAllFilteringCommands(t=!0){var e;const n=this._grid.getColumns();n.forEach(o=>{var s,l;!((s=o==null?void 0:o.header)===null||s===void 0)&&s.menu&&((l=o.header.menu.commandItems||o.header.menu.items)===null||l===void 0||l.forEach(u=>{u&&typeof u!="string"&&u.command==="clear-filter"&&(u.hidden=t)}))});const r=(e=this._gridOptions.gridMenu)===null||e===void 0?void 0:e.commandItems;return r&&r.forEach(o=>{if(o&&typeof o!="string"){const s=o.command;(s==="clear-filter"||s==="toggle-filter")&&(o.hidden=t)}}),n}extractBasicFilterDetails(t){const e=[];if(t&&typeof t=="object")for(const n of Object.keys(t)){const{operator:r,searchTerms:o}=t[`${n}`];e.push({columnId:n,operator:r,searchTerms:o})}return e}removeAllColumnFiltersProperties(){if(typeof this._columnFilters=="object")for(const t in this._columnFilters)t&&this._columnFilters[t]&&delete this._columnFilters[t]}subscribeToOnHeaderRowCellRendered(t){this._eventHandler.subscribe(t.onBeforeHeaderRowCellDestroy,(e,n)=>{var r;const o=this._filtersMetadata.find(s=>s.columnDef.id===n.column.id);(r=o==null?void 0:o.destroy)===null||r===void 0||r.call(o)})}updateColumnFilters(t,e,n){var r,o,s;const l=(s=(o=(r=e.filter)===null||r===void 0?void 0:r.type)!==null&&o!==void 0?o:e.type)!==null&&s!==void 0?s:ie.string,u=Iu(t,l);t&&e&&(this._columnFilters[e.id]={columnId:e.id,columnDef:e,searchTerms:t,operator:n,parsedSearchTerms:u,type:l})}}const Du={skipError:!1,triggerEvent:!0},ad={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},Yh={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},Zm={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1};class U0{constructor(t,e,n,r,o,s,l){this.gridStateService=t,this.filterService=e,this.pubSubService=n,this.paginationService=r,this.sharedService=o,this.sortService=s,this.treeDataService=l}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}dispose(){var t;this.clearHighlightTimer(),(t=this._rowSelectionPlugin)===null||t===void 0||t.dispose()}init(t){this._grid=t}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearHighlightTimer(){clearTimeout(this._highlightTimer),clearTimeout(this._highlightTimerEnd)}clearPinning(t=!0){const e=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),t&&Array.isArray(e)&&this.sharedService.slickGrid.setColumns(e)}setPinning(t,e=!0,n=!1,r=!0){Np(t)?this.clearPinning():(this.sharedService.slickGrid.setOptions(t,n,r),this.sharedService.gridOptions={...this.sharedService.gridOptions,...t}),e&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(t){if(!t||!t.grid||!t.grid.getColumns||!t.grid.getDataItem)throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:t.row,cell:t.cell,columnDef:t.grid.getColumns()[t.cell],dataContext:t.grid.getDataItem(t.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error(`[Slickgrid-Universal] We could not find SlickGrid Grid object or it's "getDataItem" method`);return this._grid.getDataItem(t)}getItemRowMetadataToHighlight(t){return e=>{const n=this._dataView.getItem(e);let r={cssClasses:""};return typeof t=="function"&&(r=t(e)),r||(r={cssClasses:""}),n&&n._dirty&&(r.cssClasses=(r&&r.cssClasses||"")+" dirty"),n&&n.rowClass&&r&&(r.cssClasses+=` ${n.rowClass}`,r.cssClasses+=` row${e}`),r}}getDataItemByRowIndex(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(t)}getDataItemByRowIndexes(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const e=[];return Array.isArray(t)&&t.forEach(n=>{e.push(this._grid.getDataItem(n))}),e}getSelectedRows(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const t=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(t)}hideColumnById(t,e){if(e={...Zm,...e},this._grid&&this._grid.getColumns&&this._grid.setColumns){const n=this._grid.getColumns(),r=n.findIndex(o=>o.id===t);if(r>=0){const o=oh(n,r);this.sharedService.visibleColumns=o,this._grid.setColumns(o);const s=this.sharedService.allColumns.findIndex(l=>l.id===t);return s&&(e!=null&&e.hideFromColumnPicker&&(this.sharedService.allColumns[s].excludeFromColumnPicker=!0),e!=null&&e.hideFromGridMenu&&(this.sharedService.allColumns[s].excludeFromGridMenu=!0)),e!=null&&e.autoResizeColumns&&this._grid.autosizeColumns(),e!=null&&e.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:o}),r}}return-1}hideColumnByIds(t,e){if(e={...Zm,...e},Array.isArray(t)){for(const n of t)this.hideColumnById(n,{...e,triggerEvent:!1,autoResizeColumns:!1});e!=null&&e.autoResizeColumns&&this._grid.autosizeColumns(),e!=null&&e.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(t,e=1500,n=300){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new yh(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),Array.isArray(t)?t.forEach(r=>this.highlightRowByMetadata(r,e,n)):this.highlightRowByMetadata(t,e,n)}highlightRowByMetadata(t,e=1500,n=300){this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);const r=this._dataView.getItem(t),o=this._gridOptions.datasetIdPropertyName||"id";(r==null?void 0:r[o])!==void 0&&(r.rowClass="highlight",this._dataView.updateItem(r[o],r),this.renderGrid(),this.clearHighlightTimer(),this._highlightTimerEnd=setTimeout(()=>{r.rowClass="highlight-end",this._dataView.updateItem(r[o],r),this.renderGrid()},n),this._highlightTimer=setTimeout(()=>{(r==null?void 0:r[o])!==void 0&&(delete r.rowClass,this._dataView.getIdxById(r[o])!==void 0&&(this._dataView.updateItem(r[o],r),this.renderGrid()))},e+n))}setSelectedRow(t){var e;!((e=this._grid)===null||e===void 0)&&e.setSelectedRows&&this._grid.setSelectedRows([t])}setSelectedRows(t){var e;!((e=this._grid)===null||e===void 0)&&e.setSelectedRows&&this._grid.setSelectedRows(t)}renderGrid(){this._grid&&typeof this._grid.invalidate=="function"&&(this._grid.invalidate(),this._grid.render())}resetGrid(t){var e,n,r;if(this.clearPinning(!1),this._grid){const o=this.sharedService.allColumns||[];Array.isArray(o)&&o.length>0&&(this._grid.setColumns(o),!((e=this._gridOptions)===null||e===void 0)&&e.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(t))}typeof((n=this.filterService)===null||n===void 0?void 0:n.clearFilters)=="function"&&this.filterService.clearFilters(),typeof((r=this.sortService)===null||r===void 0?void 0:r.clearSorting)=="function"&&this.sortService.clearSorting()}addItem(t,e){var n,r,o,s,l;const u={...ad,...e};if(!(u!=null&&u.skipError)&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const h=this._gridOptions.datasetIdPropertyName||"id";if(!(u!=null&&u.skipError)&&(!t||!t.hasOwnProperty(h)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${h}" property`);if(!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData&&(e==null?void 0:e.position)==="top")throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const c=u==null?void 0:u.position;c==="bottom"||!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData?this._dataView.addItem(t):this._dataView.insertItem(0,t);let p=0;const m=(o=t==null?void 0:t[h])!==null&&o!==void 0?o:"";return!((s=this._gridOptions)===null||s===void 0)&&s.enableTreeData?(this.invalidateHierarchicalDataset(),p=this._dataView.getRowById(m),u.scrollRowIntoView&&this._grid.scrollRowIntoView(p??0,!1)):u.resortGrid?(this._dataView.reSort(),p=this._dataView.getRowById(m)):(p=c==="bottom"?this._dataView.getRowById(m):0,u.scrollRowIntoView&&this._grid.scrollRowIntoView(p??0)),u.highlightRow&&p!==void 0&&this.highlightRow(p),p!==void 0&&u.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(p),u.triggerEvent&&this.pubSubService.publish("onItemAdded",t),!(!((l=this._gridOptions)===null||l===void 0)&&l.backendServiceApi)&&this._gridOptions.enablePagination&&(c==="bottom"?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),p}addItems(t,e){var n,r,o,s,l;const u={...ad,...e},h=this._gridOptions.datasetIdPropertyName||"id",c=u==null?void 0:u.position,p=[];if(Array.isArray(t))this._dataView.beginUpdate(!0),c==="bottom"||!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData?this._dataView.addItems(t):this._dataView.insertItems(0,t),this._dataView.endUpdate();else return[this.addItem(t,u)||0];if(!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData){this.invalidateHierarchicalDataset();const m=(s=(o=t[0])===null||o===void 0?void 0:o[h])!==null&&s!==void 0?s:"",v=this._dataView.getRowById(m);u.scrollRowIntoView&&this._grid.scrollRowIntoView(v??0,!1)}else u.resortGrid&&this._dataView.reSort();return c&&u.scrollRowIntoView&&!(!((l=this._gridOptions)===null||l===void 0)&&l.enableTreeData)&&(c==="bottom"?this._grid.navigateBottom():this._grid.navigateTop()),t.forEach(m=>p.push(this._dataView.getRowById(m[h]))),u.highlightRow&&this.highlightRow(p),u.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(p),u.triggerEvent&&this.pubSubService.publish("onItemAdded",t),p}deleteItem(t,e){e={...Du,...e};const n=this._gridOptions.datasetIdPropertyName||"id";if(!(e!=null&&e.skipError)&&(!t||!t.hasOwnProperty(n)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${n}" property`);return this.deleteItemById(t[n],e)}deleteItems(t,e){e={...Du,...e};const n=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(t))return this.deleteItem(t,e),[t[n]];this._dataView.beginUpdate(!0);const r=[];return t.forEach(o=>{(o==null?void 0:o[n])!==void 0&&r.push(o[n])}),this._dataView.deleteItems(r),this._dataView.endUpdate(),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),r}deleteItemById(t,e){if(e={...Du,...e},!(e!=null&&e.skipError)&&t==null)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(t),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),t}deleteItemByIds(t,e){if(e={...Du,...e},Array.isArray(t)){this._dataView.beginUpdate(!0);for(let n=0;n<t.length;n++)t[n]!==null&&this.deleteItemById(t[n],{triggerEvent:!1});return this._dataView.endUpdate(),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),t}return[]}updateItem(t,e){e={...Yh,...e};const n=this._gridOptions.datasetIdPropertyName||"id",r=!t||!t.hasOwnProperty(n)?void 0:t[n];if(!(e!=null&&e.skipError)&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${n}" property`);return this.updateItemById(r,t,e)}updateItems(t,e){var n;e={...Yh,...e};const r=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(t))return[this.updateItem(t,e)];this._dataView.beginUpdate(!0);const o=[],s=[];return t.forEach(l=>{const u=!l||!l.hasOwnProperty(r)?void 0:l[r];if(s.push(u),this._dataView.getIdxById(u)!==void 0){const h=this._dataView.getRowById(u);h!==void 0&&(o.push(h),this._grid.updateRow(h))}}),this._dataView.updateItems(s,t),this._dataView.endUpdate(),!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData&&this.invalidateHierarchicalDataset(),e.highlightRow&&this.highlightRow(o),e.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(o),e.triggerEvent&&this.pubSubService.publish("onItemUpdated",t),o}updateItemById(t,e,n){var r;if(n={...Yh,...n},!(n!=null&&n.skipError)&&t===void 0)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const o=this._dataView.getRowById(t);if(!(n!=null&&n.skipError)&&!e&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${t}`);return this._dataView.getIdxById(t)!==void 0&&(this._dataView.updateItem(t,e),o!==void 0&&this._grid.updateRow(o),!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData&&this.invalidateHierarchicalDataset(),n.scrollRowIntoView&&o!==void 0&&this._grid.scrollRowIntoView(o),n.highlightRow&&o!==void 0&&this.highlightRow(o),o!==void 0&&n.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(o),n.triggerEvent&&this.pubSubService.publish("onItemUpdated",e)),o}upsertItem(t,e){e={...ad,...e};const n=this._gridOptions.datasetIdPropertyName||"id",r=!t||!t.hasOwnProperty(n)?void 0:t[n];if(!(e!=null&&e.skipError)&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${n}" property`);return this.upsertItemById(r,t,e)}upsertItems(t,e){if(e={...ad,...e},!Array.isArray(t))return[this.upsertItem(t,e)];this._dataView.beginUpdate(!0);const n=[];t.forEach(o=>{n.push(this.upsertItem(o,{...e,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))}),this._dataView.endUpdate();const r=n.map(o=>o.added!==void 0?o.added:o.updated);if(e.highlightRow&&this.highlightRow(r),e.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),e.triggerEvent){this.pubSubService.publish("onItemUpserted",t);const o=n.filter(l=>l.added!==void 0);Array.isArray(o)&&o.length>0&&this.pubSubService.publish("onItemAdded",o);const s=n.filter(l=>l.updated!==void 0);Array.isArray(s)&&s.length>0&&this.pubSubService.publish("onItemUpdated",s)}return n}upsertItemById(t,e,n){let r=!1;if(n={...ad,...n},!(n!=null&&n.skipError)&&t===void 0&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');let o,s;return this._dataView.getRowById(t)===void 0?(o=this.addItem(e,n),r=!0):(s=this.updateItem(e,{highlightRow:n.highlightRow,selectRow:n.selectRow,triggerEvent:n.triggerEvent}),r=!1),n.triggerEvent&&(this.pubSubService.publish("onItemUpserted",e),r?this.pubSubService.publish("onItemAdded",e):this.pubSubService.publish("onItemUpdated",e)),{added:o,updated:s}}invalidateHierarchicalDataset(t){var e;if(!((e=this._gridOptions)===null||e===void 0)&&e.enableTreeData&&this.treeDataService){const n=t??this._dataView.getItems(),r=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(n||[],this.sharedService.allColumns,this._gridOptions);this.sharedService.hierarchicalDataset=r.hierarchical,this.filterService.refreshTreeDataFilters(t),this._dataView.setItems(r.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const t=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&t}}class W0{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new Slick.EventHandler}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onBeforeEditCell,(r,o)=>{if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const s=t.getColumns()[o.cell];if(typeof s.onBeforeEditCell=="function"){const l={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:s,dataContext:t.getDataItem(o.row)};s.onBeforeEditCell(r,l)}})}bindOnCellChange(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onCellChange,(r,o)=>{if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const s=t.getColumns()[o.cell];if(typeof s.onCellChange=="function"){const l={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:s,dataContext:t.getDataItem(o.row)};s.onCellChange(r,l)}})}bindOnClick(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onClick,(r,o)=>{var s;if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const l=(s=t.getColumns)===null||s===void 0?void 0:s.call(t)[o.cell];if(typeof l.onCellClick=="function"){const u={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:l,dataContext:t.getDataItem(o.row)};l.onCellClick(r,u)}})}}class G0{constructor(t,e,n,r,o,s){this.extensionService=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this.treeDataService=s,this._eventHandler=new Slick.EventHandler,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0}get _dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get _gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(t){this._selectedRowDataContextIds=t}init(t){this._grid=t,this.subscribeToAllGridChanges(t)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(t,e=!0,n=!1){var r,o,s,l,u,h,c,p,m;if(Array.isArray(t)&&t.length>0){const v=this.getAssociatedGridColumns(this._grid,t);if(v&&Array.isArray(v)&&v.length>0){if(Array.isArray(this.sharedService.allColumns)){const _=[];if(this._gridOptions.enableCheckboxSelector){const C=(s=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.checkboxSelector)===null||o===void 0?void 0:o.columnIndexPosition)!==null&&s!==void 0?s:0;_.push({columnId:"_checkbox_selector",columnIndexPosition:C})}if(this._gridOptions.enableRowDetailView){const C=(h=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.rowDetailView)===null||u===void 0?void 0:u.columnIndexPosition)!==null&&h!==void 0?h:0;_.push({columnId:"_detail_selector",columnIndexPosition:C})}if(this._gridOptions.enableRowMoveManager){const C=(m=(p=(c=this._gridOptions)===null||c===void 0?void 0:c.rowMoveManager)===null||p===void 0?void 0:p.columnIndexPosition)!==null&&m!==void 0?m:0;_.push({columnId:"_move",columnIndexPosition:C})}this.addColumnDynamicWhenFeatureEnabled(_,this.sharedService.allColumns,v)}v.forEach(_=>_.originalWidth=_.width||_.originalWidth),this._grid.setColumns(v),this.sharedService.visibleColumns=v,e?this._grid.autosizeColumns():(n||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){var t;const{frozenColumn:e,frozenRow:n,frozenBottom:r}=this.sharedService.gridOptions,o={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:n,frozenBottom:r}},s=this.getCurrentPagination();if(s&&(o.pagination=s),this.hasRowSelectionEnabled()){const l=this.getCurrentRowSelections();l&&(o.rowSelection=l)}if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData){const l=this.getCurrentTreeDataToggleState();l&&(o.treeData=l)}return o}getColumns(){return this._columns}getAssociatedCurrentColumns(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{n!=null&&n.id&&e.push({columnId:n.id,cssClass:n.cssClass||"",headerCssClass:n.headerCssClass||"",width:n.width||0})}),e}getAssociatedGridColumns(t,e){const n=[],r=this.sharedService.allColumns||t.getColumns();return e&&Array.isArray(e)&&e.forEach(o=>{const s=r.find(l=>l.id===o.columnId);s!=null&&s.id&&n.push({...s,cssClass:o.cssClass||s.cssClass,headerCssClass:o.headerCssClass||s.headerCssClass,width:o.width})}),this._columns=n,n}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){var t,e;if(!((t=this._gridOptions)===null||t===void 0)&&t.backendServiceApi){const n=this._gridOptions.backendServiceApi.service;if(n!=null&&n.getCurrentFilters)return n.getCurrentFilters()}else if(!((e=this.filterService)===null||e===void 0)&&e.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){var t;if(!((t=this._gridOptions)===null||t===void 0)&&t.enablePagination)if(this._gridOptions.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e!=null&&e.getCurrentPagination)return e.getCurrentPagination()}else return this.sharedService.currentPagination;return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){var t,e;if(!((t=this._gridOptions)===null||t===void 0)&&t.backendServiceApi){const n=this._gridOptions.backendServiceApi.service;if(n!=null&&n.getCurrentSorters)return n.getCurrentSorters()}else if(!((e=this.sortService)===null||e===void 0)&&e.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){var t;return!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){var t;let e=!1;if(!((t=this._gridOptions)===null||t===void 0)&&t.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const n=this._gridOptions.dataView.syncGridSelection;typeof n=="boolean"?e=this._gridOptions.dataView.syncGridSelection:typeof n=="object"&&(e=n.preserveHidden||n.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(t){const e=t||this._columns,n=this.getAssociatedCurrentColumns(e);this.pubSubService.publish("onGridStateChanged",{change:{newValues:n,type:ur.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(t=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,t&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){var t,e;if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){const n=(e=(t=this.extensionService)===null||t===void 0?void 0:t.getExtensionByName)===null||e===void 0?void 0:e.call(t,ii.rowSelection);n!=null&&n.instance&&this._grid.setSelectedRows([])}}subscribeToAllGridChanges(t){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:ur.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:ur.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:ur.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:ur.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(ii.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(ii.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",t),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",t),this.bindSlickGridOnSetOptionsEventToGridStateChange(t),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(e,n)=>{const r=(this._selectedRowIndexes||[]).slice(),o=(this.selectedRowDataContextIds||[]).slice();if(this.selectedRowDataContextIds=n.filteredIds,this._selectedRowIndexes=n.rows,!Qo(this.selectedRowDataContextIds,o)||!Qo(this._selectedRowIndexes,r)){const s={gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:n.selectedRowIds,filteredDataContextIds:n.filteredIds};this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:ur.rowSelection},gridState:this.getCurrentGridState()})}}),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",e=>{const n=this.getAssociatedCurrentColumns(e);this.pubSubService.publish("onGridStateChanged",{change:{newValues:n,type:ur.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:ur.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:ur.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(t,e,n){t.sort((r,o)=>r.columnIndexPosition-o.columnIndexPosition),t.forEach(r=>{const o=e.findIndex(l=>l.id===r.columnId),s=n.findIndex(l=>l.id===r.columnId);if(o>=0&&s===-1){const l=e[o];o===0?n.unshift(l):n.splice(o,0,l)}})}bindExtensionAddonEventToGridStateChange(t,e){var n,r,o;const s=(r=(n=this.extensionService)===null||n===void 0?void 0:n.getExtensionByName)===null||r===void 0?void 0:r.call(n,t),l=(o=s==null?void 0:s.instance)===null||o===void 0?void 0:o[e];l&&typeof l.subscribe=="function"&&this._eventHandler.subscribe(l,(u,h)=>{const c=h==null?void 0:h.columns,p=this.getAssociatedCurrentColumns(c);this.pubSubService.publish("onGridStateChanged",{change:{newValues:p,type:ur.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(t,e){const n=e==null?void 0:e[t];n&&typeof n.subscribe=="function"&&this._eventHandler.subscribe(n,()=>{const r=e.getColumns(),o=this.getAssociatedCurrentColumns(r);this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:ur.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(t){const e=t.onSetOptions;this._eventHandler.subscribe(e,(n,r)=>{const{frozenBottom:o,frozenColumn:s,frozenRow:l}=r.optionsBefore,{frozenBottom:u,frozenColumn:h,frozenRow:c}=r.optionsAfter;if(o!==u||s!==h||l!==c){const p={frozenBottom:u,frozenColumn:h,frozenRow:c},m=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:p,type:ur.pinning},gridState:m})}})}hasRowSelectionEnabled(){const t=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&t}}class $0{constructor(t,e){this.extensionUtility=t,this.pubSubService=e,this._subscriptions=[],this._eventHandler=new Slick.EventHandler}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get eventHandler(){return this._eventHandler}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}init(t){if(this._grid=t,t&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(t.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));const e=t.getPluginByName("Resizer");e!=null&&e.onGridAfterResize&&this._eventHandler.subscribe(e.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onSetOptions,(n,r)=>{var o,s;((o=r==null?void 0:r.optionsBefore)===null||o===void 0?void 0:o.frozenColumn)!==((s=r==null?void 0:r.optionsAfter)===null||s===void 0?void 0:s.frozenColumn)&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(t=0){setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),t)}renderPreHeaderRowGroupingTitles(){var t;if(this._gridOptions&&this._gridOptions.frozenColumn!==void 0&&this._gridOptions.frozenColumn>=0){let e=this._grid.getPreHeaderPanelLeft();this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=this._grid.getPreHeaderPanelRight(),this.renderHeaderGroups(e,((t=this._gridOptions)===null||t===void 0?void 0:t.frozenColumn)+1,this._columnDefinitions.length)}else{const e=this._grid.getPreHeaderPanel();this.renderHeaderGroups(e,0,this._columnDefinitions.length)}}renderHeaderGroups(t,e,n){var r,o,s;on(t),t.className="slick-header-columns",t.style.left="-1000px",t.style.width=`${this._grid.getHeadersWidth()}px`,t.parentElement&&t.parentElement.classList.add("slick-header");const l=this._grid.getHeaderColumnWidthDiff();let u,h=null,c="",p=0;const m=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.frozenHeaderWidthCalcDifferential)!==null&&o!==void 0?o:0,v=((s=this._gridOptions)===null||s===void 0?void 0:s.frozenColumn)!==void 0&&this._gridOptions.frozenColumn>=0;for(let _=e;_<n;_++)u=this._columnDefinitions[_],u&&(c===u.columnGroup&&_>0?(p+=u.width||0,h!=null&&h.style&&(h.style.width=`${p-l-m}px`)):(p=u.width||0,h=Re("div",{className:`ui-state-default slick-header-column ${v?"frozen":""}`,style:{width:`${p-l}px`}}),Re("span",{className:"slick-column-name",textContent:u.columnGroup||""},h),t.appendChild(h)),c=u.columnGroup||"")}translateGroupingAndColSpan(){const t=this._grid.getColumns();this.extensionUtility.translateItems(t,"columnGroupKey","columnGroup"),this._grid.setColumns(t),this.renderPreHeaderRowGroupingTitles()}}class Y0{constructor(t,e,n,r){this.pubSubService=t,this.sharedService=e,this.backendUtilities=n,this.rxjs=r,this._eventHandler=new Slick.EventHandler,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1}get dataView(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}set paginationOptions(t){this._paginationOptions=t}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(t){this._totalItems=t,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(t){this.rxjs=t}init(t,e,n){var r;this._availablePageSizes=e.pageSizes,this.grid=t,this._backendServiceApi=n,this._paginationOptions=e,this._isLocalGrid=!n,this._pageNumber=e.pageNumber||1;const o=(r=n==null?void 0:n.options)!==null&&r!==void 0?r:{};if(this._isCursorBased=o.useCursor||o.isWithCursor,n&&(!n.service||!n.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(l,u)=>{this._totalItems!==u.totalRows&&(this.updateTotalItems(u.totalRows),this._previousPagination={pageNumber:u.pageNum,pageSize:u.pageSize,pageSizes:this.availablePageSizes,totalItems:u.totalRows})}),setTimeout(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",l=>this.processOnItemAddedOrRemoved(l,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",l=>this.processOnItemAddedOrRemoved(l,!1)))),this.refreshPagination(!1,!1,!0);const s=this.getFullPagination();this._previousPagination={pageNumber:s.pageNumber,pageSize:s.pageSize,pageSizes:s.pageSizes,totalItems:this.totalItems},this._initialized=!0}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(t,e,n=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/t),this._itemsPerPage=t,n?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToFirstPage(t,e=!0){return this._pageNumber=1,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToLastPage(t,e=!0){return this._pageNumber=this._pageCount||1,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToNextPage(t,e=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(t,e,n=!0){if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);const r=this._pageNumber;return t<1?this._pageNumber=1:t>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=t,this._pageNumber!==r?n?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(t,e=!0){return this._pageNumber>1?(this._pageNumber--,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(t=!1,e=!0,n=!1){var r,o,s;const l={...this.getFullPagination()};if(this._paginationOptions){const h=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=h.pageSize:this._itemsPerPage=+(!((s=(o=(r=this._backendServiceApi)===null||r===void 0?void 0:r.options)===null||o===void 0?void 0:o.paginationOptions)===null||s===void 0)&&s.first?this._backendServiceApi.options.paginationOptions.first:h.pageSize)),(t||this._totalItems!==h.totalItems)&&(t?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&h.pageNumber&&h.pageNumber>1&&(this._pageNumber=h.pageNumber||1),this._pageNumber===1&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=h.pageSizes,!this._totalItems&&h.totalItems&&(this._totalItems=h.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),e&&!Qo(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),n&&!Qo(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const u=this.getFullPagination();this._previousPagination={pageNumber:u.pageNumber,pageSize:u.pageSize,pageSizes:u.pageSizes,totalItems:this.totalItems}}resetPagination(t=!0){var e,n;this._isLocalGrid&&this.dataView&&(!((n=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)===null||n===void 0)&&n.enablePagination)&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,t)}togglePaginationVisibility(t){var e;if(this.grid&&(!((e=this.sharedService)===null||e===void 0)&&e.gridOptions)){const n=t!==void 0?t:!this.sharedService.gridOptions.enablePagination;if(n&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){const r=t?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:r,pageNum:0})}this.sharedService.gridOptions.enablePagination=n,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:n})}}processOnPageChanged(t,e,n){return console.assert(!this.isCursorBased||n,"Configured for cursor based pagination - cursorArgs expected"),this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())===!1?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((r,o)=>{var s,l,u;if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:t-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),r(this.getFullPagination());else{const h=+this._itemsPerPage,c=new Date;if(!((s=this._backendServiceApi)===null||s===void 0)&&s.preProcess&&this._backendServiceApi.preProcess(),!((l=this._backendServiceApi)===null||l===void 0)&&l.process){const p=this.isCursorBased&&n?this._backendServiceApi.service.processOnPaginationChanged(e,n):this._backendServiceApi.service.processOnPaginationChanged(e,{newPage:t,pageSize:h}),m=this._backendServiceApi.process(p);m instanceof Promise?m.then(v=>{var _;(_=this.backendUtilities)===null||_===void 0||_.executeBackendProcessesCallback(c,v,this._backendServiceApi,this._totalItems);const C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},r(this.getFullPagination())}).catch(v=>{var _,C,x;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(v,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((x=this.backendUtilities)===null||x===void 0)&&x.onBackendError))&&o(m)}):!((u=this.rxjs)===null||u===void 0)&&u.isObservable(m)&&this._subscriptions.push(m.subscribe(v=>{var _;const C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},r((_=this.backendUtilities)===null||_===void 0?void 0:_.executeBackendProcessesCallback(c,v,this._backendServiceApi,this._totalItems))},v=>{var _,C,x;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(v,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((x=this.backendUtilities)===null||x===void 0)&&x.onBackendError))&&o(m)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){this._totalItems===0?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._pageNumber=this._totalItems>0&&this._pageNumber===0?1:this._pageNumber,this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){var t,e,n,r,o,s,l,u,h,c,p,m,v;const _=((t=this._previousPagination)===null||t===void 0?void 0:t.pageNumber)!==this.getFullPagination().pageNumber,C=((e=this._previousPagination)===null||e===void 0?void 0:e.pageSize)!==this.getFullPagination().pageSize;C&&this.changeItemPerPage((r=(n=this._previousPagination)===null||n===void 0?void 0:n.pageSize)!==null&&r!==void 0?r:0,null,!1),_&&this.goToPageNumber((s=(o=this._previousPagination)===null||o===void 0?void 0:o.pageNumber)!==null&&s!==void 0?s:0,null,!1),(_||C)&&(this.refreshPagination(),(h=(u=(l=this._backendServiceApi)===null||l===void 0?void 0:l.service)===null||u===void 0?void 0:u.updatePagination)===null||h===void 0||h.call(u,(p=(c=this._previousPagination)===null||c===void 0?void 0:c.pageNumber)!==null&&p!==void 0?p:0,(v=(m=this._previousPagination)===null||m===void 0?void 0:m.pageSize)!==null&&v!==void 0?v:0))}setCursorBased(t){this._isCursorBased=t,t&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:t})}setCursorPageInfo(t){this._cursorPageInfo=t}updateTotalItems(t,e=!1){this._totalItems=t,this._paginationOptions&&(this._paginationOptions.totalItems=t,this.refreshPagination(!1,e))}processOnItemAddedOrRemoved(t,e=!0){if(t!==null){const n=this._dataTo,r=Array.isArray(t)?t.length:1,o=e?+r:-r;this._totalItems+=o,this.recalculateFromToIndexes(),this._dataTo=n+o,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}const j0=20,X0=25,K0=35,q0=180,Z0=300,Q0=200;class J0{get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get dataView(){var t;return(t=this._grid)===null||t===void 0?void 0:t.getData()}get gridUid(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(t){this._intervalRetryDelay=t}get resizeByContentOptions(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.resizeByContentOptions)!==null&&e!==void 0?e:{}}constructor(t){this.pubSubService=t,this._intervalRetryDelay=Q0,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new Slick.EventHandler,this._bindingEventService=new Nn}dispose(){var t,e;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._intervalId&&clearInterval(this._intervalId),clearTimeout(this._timer),((e=this.gridOptions.autoResize)===null||e===void 0?void 0:e.resizeDetection)==="container"&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(t,e){var n,r,o,s,l,u,h,c;if(!t||!this.gridOptions||!e)throw new Error(`
      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.
      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.`);this._grid=t,this._gridContainerElm=e;const p=!((n=this.gridOptions)===null||n===void 0)&&n.gridHeight||!((r=this.gridOptions)===null||r===void 0)&&r.gridWidth?{height:(o=this.gridOptions)===null||o===void 0?void 0:o.gridHeight,width:(s=this.gridOptions)===null||s===void 0?void 0:s.gridWidth}:void 0;this._autoResizeOptions=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.autoResize)!==null&&u!==void 0?u:{container:"grid1",bottomPadding:0},p!=null&&p.width&&(e!=null&&e.style)&&(e.style.width=typeof p.width=="string"?p.width:`${p.width}px`),this._gridDomElm=(h=t==null?void 0:t.getContainerNode)===null||h===void 0?void 0:h.call(t),typeof this._autoResizeOptions.container=="string"?this._pageContainerElm=typeof this._autoResizeOptions.container=="string"?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container:this._pageContainerElm=this._autoResizeOptions.container,p&&(this._fixedHeight=p.height,this._fixedWidth=p.width),this.gridOptions&&this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),!((c=this.gridOptions)===null||c===void 0)&&c.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",m=>{this.handleSingleColumnResizeByContent(m.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(m,v)=>{this.handleSingleColumnResizeByContent(v.triggeredByColumn)}))}bindAutoResizeDataGrid(t){var e;if(((e=this.gridOptions.autoResize)===null||e===void 0?void 0:e.resizeDetection)==="container"){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error(`
          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"
          You can fix this by setting your gridOption.autoResize.container`);this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(this._gridDomElm===void 0||Wn(this._gridDomElm)===void 0)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(n=>console.log("Error:",n)),this.resizeGrid(10,t),this._bindingEventService.bind(window,"resize",this.handleResizeGrid.bind(this,t))}}handleResizeGrid(t){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,t),this.resizeGrid(0,t))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(t){var e,n,r,o,s,l,u;const h=(e=t==null?void 0:t.autoResize)!==null&&e!==void 0?e:{},c=Wn(this._gridDomElm);if(!window||c===void 0)return null;let p=(h==null?void 0:h.bottomPadding)!==void 0?h.bottomPadding:j0;if(p&&t.enablePagination&&(p+=K0),p&&t.showCustomFooter){const M=(o=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.customFooterOptions)===null||r===void 0?void 0:r.footerHeight)!==null&&o!==void 0?o:X0;p+=parseInt(`${M}`,10)}let m=0,v=0;h.calculateAvailableSizeBy==="container"?m=sm(this._pageContainerElm,"height")||0:(m=window.innerHeight||0,v=(s=c==null?void 0:c.top)!==null&&s!==void 0?s:0);const _=m-v-p,C=sm(this._pageContainerElm,"width")||window.innerWidth||0,x=h==null?void 0:h.maxHeight,S=(l=h==null?void 0:h.minHeight)!==null&&l!==void 0?l:q0,E=h==null?void 0:h.maxWidth,D=(u=h==null?void 0:h.minWidth)!==null&&u!==void 0?u:Z0;let A=_,P=h!=null&&h.rightPadding?C-h.rightPadding:C;return A<S&&(A=S),x&&A>x&&(A=x),P<D&&(P=D),E&&P>E&&(P=E),{height:this._fixedHeight||A,width:this._fixedWidth||P}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(t){this._resizePaused=t}resizeGrid(t,e){return new Promise(n=>{t=t||0,t>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>n(this.resizeGridCallback(e)),t)):n(this.resizeGridCallback(e))})}resizeGridCallback(t){var e,n;const r=this.resizeGridWithDimensions(t);return this.pubSubService.publish("onGridAfterResize",r),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((e=this._lastDimensions)===null||e===void 0)&&e.width)||(r==null?void 0:r.width)!==((n=this._lastDimensions)===null||n===void 0?void 0:n.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions=r,r}resizeGridWithDimensions(t){var e,n,r,o;const s=this.calculateGridNewDimensions(this.gridOptions);if((t||s)&&this._gridDomElm){const l=t!=null&&t.height?t.height:s==null?void 0:s.height,u=t!=null&&t.width?t.width:s==null?void 0:s.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${l}px`),this._gridDomElm.style.width=`${u}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${u}px`),!((e=this._grid)===null||e===void 0)&&e.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),!((n=this.gridOptions)===null||n===void 0)&&n.enableAutoSizeColumns&&this._grid.autosizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((r=this._lastDimensions)===null||r===void 0)&&r.width)||u!==((o=this._lastDimensions)===null||o===void 0?void 0:o.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:l||0,width:u||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(t=!0){this._isStopResizeIntervalRequested=t}resizeColumnsByCellContent(t=!1){var e,n,r,o,s,l,u;const h=this._grid.getColumns(),c=this.dataView.getItems(),p={};let m=!1,v=0;const _=(n=(e=this._gridContainerElm)===null||e===void 0?void 0:e.offsetWidth)!==null&&n!==void 0?n:0;if(!Array.isArray(c)||c.length===0||!t&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<_){this._grid.autosizeColumns();return}if(this._hasResizedByContentAtLeastOnce&&(!((r=this.gridOptions)===null||r===void 0)&&r.resizeByContentOnlyOnFirstLoad)&&!t)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),this._totalColumnsWidthByContent===0||t){for(const S of h)p[S.id]=(s=(o=S.originalWidth)!==null&&o!==void 0?o:S.minWidth)!==null&&s!==void 0?s:0;v=this.calculateCellWidthByReadingDataset(h,p,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let x=0;for(const S of h){const E=(u=(l=S.resizeAlwaysRecalculateWidth)!==null&&l!==void 0?l:this.resizeByContentOptions.alwaysRecalculateColumnWidth)!==null&&u!==void 0?u:!1;S.originalWidth&&!E?S.width=S.originalWidth:p[S.id]!==void 0&&(S.rerenderOnResize&&(m=!0),this.applyNewCalculatedColumnWidthByReference(S,p[S.id])),x+=S.width||0,this._totalColumnsWidthByContent=x}}this._grid.setColumns(h),this._hasResizedByContentAtLeastOnce=!0;const C={};for(const x of h)C[x.id]=x.width;this._totalColumnsWidthByContent>_?this._grid.reRenderColumns(m):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:v,calculateColumnWidths:C})}calculateCellWidthByReadingDataset(t,e,n=1e3,r){const o=Array.isArray(t)?t:[t],s=this.dataView.getItems();let l=0;for(const[u,h]of s.entries()){if(u>n)break;Array.isArray(o)&&typeof e=="object"&&o.forEach((c,p)=>{const m=this.calculateCellWidthByContent(h,c,u,r??p,e[c.id]);m!==void 0&&(e[c.id]=m)}),l=u+1}return l}calculateCellWidthByContent(t,e,n,r,o){var s,l;const u=(s=this.resizeByContentOptions.cellCharWidthInPx)!==null&&s!==void 0?s:7;if(!e.originalWidth){const h=(l=e==null?void 0:e.resizeCharWidthInPx)!==null&&l!==void 0?l:u,c=uu(e==null?void 0:e.formatter,n,r,e,t,this._grid),p=or(c),m=Math.ceil(p.length*h),v=e.resizeMaxWidthThreshold;e&&(o===void 0||m>o)&&(o=v!==void 0&&m>v?v:e.maxWidth!==void 0&&m>e.maxWidth?e.maxWidth:m)}return o}applyNewCalculatedColumnWidthByReference(t,e){var n,r,o,s,l,u,h;const c=(n=this.resizeByContentOptions.cellPaddingWidthInPx)!==null&&n!==void 0?n:6,p=(r=this.resizeByContentOptions.formatterPaddingWidthInPx)!==null&&r!==void 0?r:6,m=(l=(s=(o=t==null?void 0:t.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:t==null?void 0:t.type)!==null&&l!==void 0?l:ie.string;let v=e;const _=(h=(u=t==null?void 0:t.resizeCalcWidthRatio)!==null&&u!==void 0?u:this.resizeByContentOptions.defaultRatioForStringType)!==null&&h!==void 0?h:.9;v*=m==="string"?_:1,v+=c,t.resizeExtraWidthPadding&&(v+=t.resizeExtraWidthPadding),t.editor&&this.gridOptions.editable&&(v+=p),t.maxWidth!==void 0&&v>t.maxWidth&&(v=t.maxWidth),t.resizeMaxWidthThreshold!==void 0&&v>t.resizeMaxWidthThreshold&&(v=t.resizeMaxWidthThreshold),v=Math.ceil(v),(t.originalWidth===void 0||t.resizeAlwaysRecalculateWidth===!0||this.resizeByContentOptions.alwaysRecalculateColumnWidth===!0)&&(t.width=this.readjustNewColumnWidthWhenOverLimit(t,v))}handleSingleColumnResizeByContent(t){var e,n,r;const o=this._grid.getColumns(),s=o.findIndex(l=>l.id===t);if(s>=0){const l=o[s],u={[t]:(n=(e=l.originalWidth)!==null&&e!==void 0?e:l.minWidth)!==null&&n!==void 0?n:0};l.originalWidth=void 0,this.calculateCellWidthByReadingDataset(l,u,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,s),this.applyNewCalculatedColumnWidthByReference(l,u[t]),this._grid.reRenderColumns((r=l==null?void 0:l.rerenderOnResize)!==null&&r!==void 0?r:!1)}}readjustNewColumnWidthWhenOverLimit(t,e){var n,r,o,s,l,u,h,c;const p=(n=this.gridOptions.frozenColumn)!==null&&n!==void 0?n:-1,m=(r=this._grid.getColumns().findIndex(_=>_.id===t.id))!==null&&r!==void 0?r:0;let v=e;if(p>=0&&m<=p){const _=Array.from(this._grid.getViewports());if(_){const C=(s=(o=_.find(A=>A.classList.contains("slick-viewport-left")))===null||o===void 0?void 0:o.clientWidth)!==null&&s!==void 0?s:0,x=(u=(l=_.find(A=>A.classList.contains("slick-viewport-right")))===null||l===void 0?void 0:l.clientWidth)!==null&&u!==void 0?u:0,S=C+x,E=C-((h=t.width)!==null&&h!==void 0?h:0);if(E+e>S){const A=(c=this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment)!==null&&c!==void 0?c:50;v=C-E+x-A}}}return Math.ceil(v)}checkIsGridShown(){var t,e;return!!((e=(t=document.querySelector(`${this.gridUidSelector}`))===null||t===void 0?void 0:t.offsetParent)!==null&&e!==void 0&&e)}resizeGridWhenStylingIsBrokenUntilCorrected(){var t,e,n,r;const o=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.autoFixResizeTimeout)!==null&&e!==void 0?e:18e3,s=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.autoFixResizeRequiredGoodCount)!==null&&r!==void 0?r:5,l=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),u=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let h=0,c=0;if(l&&u&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const p=this.dataView.getItemCount(),m=this._grid.getColumns()||[];this._intervalId=setInterval(async()=>{var v,_,C,x,S,E;const A=Wn(l);let P=(v=A==null?void 0:A.top)!==null&&v!==void 0?v:0;this.gridOptions&&this.gridOptions.enableFiltering&&this.gridOptions.headerRowHeight&&(P+=this.gridOptions.headerRowHeight),this.gridOptions&&this.gridOptions.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(P+=this.gridOptions.preHeaderPanelHeight),P+=44;const M=Wn(u),B=(_=M==null?void 0:M.top)!==null&&_!==void 0?_:0,Z=Wn(this._gridContainerElm);let L=(A==null?void 0:A.top)===0||P-B>2||(Z==null?void 0:Z.left)===0&&(Z==null?void 0:Z.top)===0;const de=(E=(S=(x=(C=this._grid).getRenderedRange)===null||x===void 0?void 0:x.call(C))===null||S===void 0?void 0:S.rightPx)!==null&&E!==void 0?E:0;!L&&p>0&&de===0&&m.length>1&&(L=!0),this._isStopResizeIntervalRequested&&(L=!1,h=o),this.checkIsGridShown()&&(L||(Z==null?void 0:Z.left)===0||(Z==null?void 0:Z.top)===0)&&(await this.resizeGrid(),this.checkIsGridShown()&&(L=!1)),this.checkIsGridShown()&&c++,this.checkIsGridShown()&&!L&&(c>=s||h++>=o)&&clearInterval(this._intervalId)},this.intervalRetryDelay)}}}class eb{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(t){this._allColumns=t}get columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}get currentPagination(){return this._currentPagination}set currentPagination(t){this._currentPagination=t}get dataView(){return this._dataView}set dataView(t){this._dataView=t}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(t){this._frozenVisibleColumnId=t}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(t){this._hasColumnsReordered=t}get slickGrid(){return this._grid}set slickGrid(t){this._grid=t}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(t){this._gridContainerElm=t}get gridOptions(){var t;return this._gridOptions||((t=this._grid)===null||t===void 0?void 0:t.getOptions())||{}}set gridOptions(t){this._gridOptions=t}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(t){this._groupItemMetadataProvider=t}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(t){this._hideHeaderRowAfterPageLoad=t}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(t){this._externalRegisteredResources=t}get visibleColumns(){return this._visibleColumns}set visibleColumns(t){this._visibleColumns=t}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(t){this._hierarchicalDataset=t}}class tb{constructor(t,e,n,r){this.sharedService=t,this.pubSubService=e,this.backendUtilities=n,this.rxjs=r,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}dispose(){var t,e;!((t=this._eventHandler)===null||t===void 0)&&t.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((e=this.rxjs)===null||e===void 0)&&e.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(t){this.rxjs=t}bindBackendOnSort(t){var e,n;this._isBackendGrid=!0,this._grid=t,this._dataView=(n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{},this._eventHandler.subscribe(t.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(t){this._isBackendGrid=!1,this._grid=t,this._dataView=t.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(t.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(t,e){var n,r;const o=e.multiColumnSort?e.sortCols:new Array({columnId:(r=(n=e.sortCol)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"",sortAsc:e.sortAsc,sortCol:e.sortCol});this._currentLocalSorters=[],Array.isArray(o)&&o.forEach(s=>{s.sortCol&&this._currentLocalSorters.push({columnId:s.sortCol.id,direction:s.sortAsc?Do.ASC:Do.DESC})}),this.onLocalSortChanged(this._grid,o),this.emitSortChanged(Ji.local)}clearSortByColumnId(t,e){var n,r;const o=this.getCurrentColumnSorts(),s=this.getCurrentColumnSorts(`${e}`);if(Array.isArray(o)&&Array.isArray(s)&&o.length!==s.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(t,{multiColumnSort:!0,sortCols:s,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,s,!0,!0);else{const h=((r=(n=this._gridOptions)===null||n===void 0?void 0:n.multiColumnSort)!==null&&r!==void 0?r:!1)?s:s[0];this._grid.onSort.notify(h)}const l=s.map(u=>({columnId:u&&u.sortCol&&u.sortCol.id,sortAsc:u&&u.sortAsc,sortCol:u&&u.sortCol}));this._grid.setSortColumns(l)}Array.isArray(s)&&s.length===0&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(t=!0){var e,n;if(this._grid&&this._gridOptions&&this._dataView){if(this._grid.setSortColumns([]),t)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const r=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.backendServiceApi)===null||n===void 0?void 0:n.service;r!=null&&r.clearSorters&&r.clearSorters()}}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(t=!0,e=!0){const r=!this._gridOptions.enableSorting;this._gridOptions.enableSorting=r;let o;t?(e&&this.clearSorting(),this._eventHandler.unsubscribeAll(),o=this.disableAllSortingCommands(!0)):(o=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(s,l)=>this.handleLocalOnSort(s,l))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(o)}toggleSortFunctionality(t=!0){const e=this._gridOptions.enableSorting;this.disableSortFunctionality(e,t)}emitSortChanged(t,e){var n;if(t===Ji.remote&&(!((n=this._gridOptions)===null||n===void 0)&&n.backendServiceApi)){let r=[];const o=this._gridOptions.backendServiceApi.service;o!=null&&o.getCurrentSorters&&(r=o.getCurrentSorters()),this.pubSubService.publish("onSortChanged",r)}else t===Ji.local&&(e&&(this._currentLocalSorters=e),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(t){if(this._grid){const e=this._grid.getSortColumns();if(Array.isArray(e))return e.reduce((r,o)=>(o&&(!t||o.columnId!==t)&&r.push({columnId:o.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(o.columnId||"")],sortAsc:o.sortAsc}),r),[])}return[]}loadGridSorters(t){this._currentLocalSorters=[];const e=[];return Array.isArray(t)&&((this._gridOptions.multiColumnSort?t:t.slice(0,1)).forEach(r=>{const o=this._columnDefinitions.find(s=>s.id===r.columnId);if(o){if(!o.sortable){let s="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(s+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(s)}e.push({columnId:o.id,sortAsc:r.direction.toUpperCase()===Do.ASC,sortCol:o}),this._currentLocalSorters.push({columnId:String(o.id),direction:r.direction.toUpperCase()})}}),this.onLocalSortChanged(this._grid,e),this._grid.setSortColumns(e.map(r=>({columnId:r.columnId,sortAsc:r.sortAsc})))),e}processTreeDataInitialSort(){var t,e,n;if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this._gridOptions.treeDataOptions){const r=this._gridOptions.treeDataOptions,o=this._columnDefinitions.find(s=>s.id===r.columnId);if(o){let s=Do.ASC,l={columnId:r.columnId,sortCol:o,sortAsc:!0};if(!((e=r==null?void 0:r.initialSort)===null||e===void 0)&&e.columnId){const u=r.initialSort.columnId,h=this._columnDefinitions.find(c=>c.id===u);s=(r.initialSort.direction||Do.ASC).toUpperCase(),l={columnId:u,sortCol:h,sortAsc:s===Do.ASC}}l!=null&&l.columnId&&(!((n=this.sharedService)===null||n===void 0)&&n.hierarchicalDataset)&&this.updateSorting([{columnId:l.columnId||"",direction:s}])}}}onBackendSortChanged(t,e){var n,r;if(!e||!e.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const o=e.grid&&e.grid.getOptions?e.grid.getOptions():{},s=o.backendServiceApi;if(!s||!s.process||!s.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const l=new Date;s.preProcess&&s.preProcess();const u=s.service.processOnSortChanged(t,e),h=((n=o==null?void 0:o.pagination)===null||n===void 0?void 0:n.totalItems)||0;(r=this.backendUtilities)===null||r===void 0||r.executeBackendCallback(s,u,e,l,h,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{var c,p,m;this._grid.setSortColumns(e.previousSortColumns||[]);const v=(c=e.previousSortColumns)===null||c===void 0?void 0:c.map(_=>({columnId:_.columnId,sortAsc:_.sortAsc,sortCol:this._columnDefinitions.find(C=>C.id===_.columnId)}));(m=(p=s==null?void 0:s.service)===null||p===void 0?void 0:p.updateSorters)===null||m===void 0||m.call(p,v||[])},httpCancelRequestSubject:this.httpCancelRequests$})}async onLocalSortChanged(t,e,n=!1,r=!1){var o,s,l,u,h;const c=(s=(o=this._gridOptions)===null||o===void 0?void 0:o.datasetIdPropertyName)!==null&&s!==void 0?s:"id",p=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.enableTreeData)!==null&&u!==void 0?u:!1,m=(h=t.getData)===null||h===void 0?void 0:h.call(t);if(await this.pubSubService.publish("onBeforeSortChange",{sortColumns:e},0),t&&m){if(n&&!p&&m.reSort(),p&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){const v=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,e);this._dataView.setItems(v.flat,c),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else m.sort(this.sortComparers.bind(this,e));t.invalidate(),r&&this.emitSortChanged(Ji.local,e.map(v=>{var _,C;return{columnId:(C=(_=v.sortCol)===null||_===void 0?void 0:_.id)!==null&&C!==void 0?C:"id",direction:v.sortAsc?Do.ASC:Do.DESC}}))}}sortHierarchicalDataset(t,e,n=!1){var r,o,s,l,u,h;this.sortTreeData(t,e);const c=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.datasetIdPropertyName)!==null&&o!==void 0?o:"id",p=(l=(s=this._gridOptions)===null||s===void 0?void 0:s.treeDataOptions)!==null&&l!==void 0?l:{columnId:""},m={...p,identifierPropName:(u=p.identifierPropName)!==null&&u!==void 0?u:c,shouldAddTreeLevelNumber:!0},v=Rp(t,m);if(n){this._currentLocalSorters=[];for(const C of e)this._currentLocalSorters.push({columnId:C.columnId,direction:C.sortAsc?"ASC":"DESC"});const _=!((h=this._gridOptions)===null||h===void 0)&&h.backendServiceApi?Ji.remote:Ji.local;this.emitSortChanged(_)}return{hierarchical:t,flat:v}}sortLocalGridByDefaultSortFieldId(){const t=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",e={id:t,field:t};this.onLocalSortChanged(this._grid,new Array({columnId:e.id,sortAsc:!0,sortCol:e,clearSortTriggered:!0}),!1,!0)}sortComparers(t,e,n){if(Array.isArray(t))for(const r of t){const o=this.sortComparer(r,e,n);if(o!==void 0)return o}return ji.neutral}sortComparer(t,e,n,r){if(t!=null&&t.sortCol){const o=t.sortCol,s=t.sortAsc?ji.asc:ji.desc;let l=r||o.queryFieldSorter||o.queryField||o.field,u=l;const h=o.type||ie.string;typeof o.queryFieldNameGetterFn=="function"&&(l=o.queryFieldNameGetterFn(e),u=o.queryFieldNameGetterFn(n));let c=e[l],p=n[u];if(l&&l.indexOf(".")>=0&&(c=_n(e,l)),u&&u.indexOf(".")>=0&&(p=_n(n,u)),o.sortComparer){const m=o.sortComparer(c,p,s,o,this._gridOptions);if(m!==ji.neutral)return m}else{const m=Wl(h,c,p,s,o,this._gridOptions);if(m!==ji.neutral)return m}}}sortTreeData(t,e){if(Array.isArray(e))for(const n of e)this.sortTreeChildren(t,n,0)}sortTreeChildren(t,e,n){var r,o;const s=(r=this._gridOptions)===null||r===void 0?void 0:r.treeDataOptions,l=(o=s==null?void 0:s.childrenPropName)!==null&&o!==void 0?o:"children";t.sort((u,h)=>{var c;return(c=this.sortComparer(e,u,h))!==null&&c!==void 0?c:ji.neutral});for(const u of t)u&&u.hasOwnProperty(l)&&Array.isArray(u[l])&&(n++,this.sortTreeChildren(u[l],e,n),n--)}updateSorting(t,e=!0,n=!0){var r,o;if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(t)){const s=(r=this._gridOptions)===null||r===void 0?void 0:r.backendServiceApi;if(s){const l=s==null?void 0:s.service;l!=null&&l.updateSorters&&(l.updateSorters(void 0,t),n&&((o=this.backendUtilities)===null||o===void 0||o.refreshBackendDataset(this._gridOptions)))}else this.loadGridSorters(t);if(e){const l=s?Ji.remote:Ji.local;this.emitSortChanged(l)}}}disableAllSortingCommands(t=!0){var e,n;const r=this._grid.getColumns();r.forEach(s=>{var l,u;typeof s.sortable!==void 0&&(s.sortable=!t),!((l=s==null?void 0:s.header)===null||l===void 0)&&l.menu&&((u=s.header.menu.commandItems||s.header.menu.items)===null||u===void 0||u.forEach(h=>{if(h&&typeof h!="string"){const c=h.command;(c==="sort-asc"||c==="sort-desc"||c==="clear-sort")&&(h.hidden=t)}}))});const o=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.gridMenu)===null||n===void 0?void 0:n.commandItems;return o&&o.forEach(s=>{s&&typeof s!="string"&&s.command==="clear-sorting"&&(s.hidden=t)}),r}}class ib{constructor(t,e,n){this.pubSubService=t,this.sharedService=e,this.sortService=n,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new Slick.EventHandler,setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(t){this._currentToggledItems=t}get dataset(){var t;return(t=this.dataView)===null||t===void 0?void 0:t.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(t){var e,n,r,o,s,l,u,h,c,p,m;if(this._grid=t,this._isTreeDataEnabled=(n=(e=this.gridOptions)===null||e===void 0?void 0:e.enableTreeData)!==null&&n!==void 0?n:!1,this._isLastFullToggleCollapsed=(o=(r=this.treeDataOptions)===null||r===void 0?void 0:r.initiallyCollapsed)!==null&&o!==void 0?o:!1,this._currentToggledItems=(u=(l=(s=this.gridOptions.presets)===null||s===void 0?void 0:s.treeData)===null||l===void 0?void 0:l.toggledItems)!==null&&u!==void 0?u:[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(!((h=this.gridOptions)===null||h===void 0)&&h.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!(!((c=this.gridOptions)===null||c===void 0)&&c.enableFiltering))throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(!((p=this.gridOptions)===null||p===void 0)&&p.backendServiceApi||!((m=this.gridOptions)===null||m===void 0)&&m.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(t.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{var v,_;typeof this._treeDataRecalcHandler=="function"&&this._isOneCpuCyclePassed&&(clearTimeout(this._timer),this._timer=setTimeout(()=>{var C;return(C=this._treeDataRecalcHandler)===null||C===void 0?void 0:C.call(this)},(_=(v=this.treeDataOptions)===null||v===void 0?void 0:v.autoRecalcTotalsDebounce)!==null&&_!==void 0?_:0))})}applyToggledItemStateChanges(t,e,n=!0,r=!1){if(Array.isArray(t)){const o=this.getTreeDataOptionPropName("collapsedPropName"),s=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);const u=(e??this._lastToggleStateChange.previousFullToggleType)==="full-collapse";e&&(this._lastToggleStateChange.previousFullToggleType=e),n&&(this.dataView.getItems()||[]).forEach(h=>{h[s]&&(h[o]=u)}),this.dynamicallyToggleItemState(t,r)}}dynamicallyToggleItemState(t,e=!0){if(Array.isArray(t)){this.dataView.beginUpdate(!0);for(const n of t){const r=this.dataView.getItemById(n.itemId);if(this.updateToggledItem(r,n.isCollapsed),e){const o=this._currentToggledItems.findIndex(s=>s.itemId===n.itemId);o>=0?this._currentToggledItems[o].isCollapsed=n.isCollapsed:this._currentToggledItems.push({itemId:n.itemId,isCollapsed:n.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:n.itemId,toggledItems:this._currentToggledItems,type:n.isCollapsed?ps.toggleCollapse:ps.toggleExpand})}}this.dataView.endUpdate(),this.dataView.refresh()}}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(t,e){var n,r,o;const s=e==null?void 0:e.treeDataOptions,l=(n=s==null?void 0:s.initialSort)!==null&&n!==void 0?n:{columnId:(r=s==null?void 0:s.columnId)!==null&&r!==void 0?r:"",direction:"ASC"},u=t.find(h=>h.id===l.columnId);return{columnId:l.columnId,sortAsc:((o=l==null?void 0:l.direction)===null||o===void 0?void 0:o.toUpperCase())!=="DESC",sortCol:u}}getItemCount(t){if(t!==void 0){const e=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(n=>n[e]===t).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C;let x="";switch(t){case"childrenPropName":x=(n=(e=this.treeDataOptions)===null||e===void 0?void 0:e.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":x=(o=(r=this.treeDataOptions)===null||r===void 0?void 0:r.collapsedPropName)!==null&&o!==void 0?o:je.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":x=(l=(s=this.treeDataOptions)===null||s===void 0?void 0:s.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":x=(p=(h=(u=this.treeDataOptions)===null||u===void 0?void 0:u.identifierPropName)!==null&&h!==void 0?h:(c=this.gridOptions)===null||c===void 0?void 0:c.datasetIdPropertyName)!==null&&p!==void 0?p:"id";break;case"levelPropName":x=(v=(m=this.treeDataOptions)===null||m===void 0?void 0:m.levelPropName)!==null&&v!==void 0?v:je.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":x=(C=(_=this.treeDataOptions)===null||_===void 0?void 0:_.parentPropName)!==null&&C!==void 0?C:je.treeDataProperties.PARENT_PROP;break}return x}clearSorting(){const t=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:t.columnId,direction:t.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(t,e,n){var r;const o=this.convertFlatParentChildToTreeDataset(t,n),s=this.getInitialSort(e,n),l=this.sortService.sortHierarchicalDataset(o,[s],!0);return(r=this._grid)===null||r===void 0||r.setSortColumns([s]),l}convertFlatParentChildToTreeDataset(t,e){var n,r,o;const s=(n=e==null?void 0:e.datasetIdPropertyName)!==null&&n!==void 0?n:"id",l=(r=e==null?void 0:e.treeDataOptions)!==null&&r!==void 0?r:{columnId:"id"},u={...l,identifierPropName:(o=l.identifierPropName)!==null&&o!==void 0?o:s,initiallyCollapsed:this._isLastFullToggleCollapsed};return Pp(t,u)}enableAutoRecalcTotalsFeature(t=!0){t&&this._isTreeDataEnabled?this._treeDataRecalcHandler=this.recalculateTreeTotals.bind(this,this.gridOptions):this._treeDataRecalcHandler=null}recalculateTreeTotals(t){var e,n;const r=t.treeDataOptions,o=(e=r==null?void 0:r.childrenPropName)!==null&&e!==void 0?e:je.treeDataProperties.CHILDREN_PROP,s=(n=r==null?void 0:r.levelPropName)!==null&&n!==void 0?n:je.treeDataProperties.TREE_LEVEL_PROP;r!=null&&r.aggregators&&(r.aggregators.forEach(l=>{Ha(this.sharedService.hierarchicalDataset||[],{childrenPropName:o,levelPropName:s,aggregator:l})}),this._grid.invalidate())}sortHierarchicalDataset(t,e){const n=e??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),r=Array.isArray(n)?n:[n];return this.sortService.sortHierarchicalDataset(t,r)}async toggleTreeDataCollapse(t,e=!0){var n;if(!((n=this.gridOptions)===null||n===void 0)&&n.enableTreeData){const o=this.getTreeDataOptionPropName("hasChildrenPropName");e&&await this.pubSubService.publish("onTreeFullToggleStart",{collapsing:t}),this.dataView.beginUpdate(!0),(this.dataView.getItems()||[]).forEach(s=>{s[o]&&this.updateToggledItem(s,t)}),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=t}const r=t?ps.fullCollapse:ps.fullExpand;this._lastToggleStateChange={type:r,previousFullToggleType:r,toggledItems:null},e&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)}handleOnCellClick(t,e){var n;if(t&&e){const r=t.target||{},o=(n=this.gridOptions.datasetIdPropertyName)!==null&&n!==void 0?n:"id",s=this.getTreeDataOptionPropName("collapsedPropName"),l=this.getTreeDataOptionPropName("childrenPropName");if(typeof(r==null?void 0:r.className)=="string"&&(r.className.indexOf("toggle")>=0||!1)){const h=this.dataView.getItem(e.row);if(h){h[s]=!h[s];const c=h[s],p=h[o],m=this._currentToggledItems.findIndex(C=>C.itemId===p);m>=0?this._currentToggledItems[m].isCollapsed=c:this._currentToggledItems.push({itemId:p,isCollapsed:c}),this.dataView.updateItem(p,h);const v=C=>C[o]===p,_=Ba(this.sharedService.hierarchicalDataset||[],v,l);_&&(_[s]=c),this._grid.invalidate(),this._lastToggleStateChange={type:c?ps.toggleCollapse:ps.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:p})}t.stopImmediatePropagation()}}}updateToggledItem(t,e){var n,r;const o=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.datasetIdPropertyName)!==null&&r!==void 0?r:"id",s=this.getTreeDataOptionPropName("childrenPropName"),l=this.getTreeDataOptionPropName("collapsedPropName");if(t){t[l]=e,this.dataView.updateItem(t[o],t);const u=c=>c[o]===t[o],h=Ba(this.sharedService.hierarchicalDataset||[],u,s);h&&(h[l]=e)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(t){var e,n;return t!=null&&t.enableTreeData&&(!((e=t==null?void 0:t.treeDataOptions)===null||e===void 0)&&e.autoRecalcTotalsOnFilterChange)&&(!((n=t==null?void 0:t.treeDataOptions)===null||n===void 0)&&n.aggregators)?this.recalculateTreeTotals.bind(this,t):null}}function jh(a,t){const e=Re("select",{className:"form-control"});for(const n of a){const r=document.createElement("option");r.value=n.operator,r.innerHTML=Ln(t,`${L_(n.operatorAlt||n.operator,3)}${n.descAlt||n.desc}`),e.appendChild(r)}return e}function Jn(a,t,e,n="Slider"){var r,o,s;let l;return((r=a.filterOptions)===null||r===void 0?void 0:r[t])!==void 0?l=a.filterOptions[t]:((o=a==null?void 0:a.params)===null||o===void 0?void 0:o[t])!==void 0&&(console.warn(`[Slickgrid-Universal] All filter.params from ${n} Filter are moving to "filterOptions" for better typing support and "params" will be deprecated in future release.`),l=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s[t]),l??e}function nb(a,t,e){var n,r;const o=(n=t==null?void 0:t.filter)!==null&&n!==void 0?n:{},s=(r=o==null?void 0:o.collectionOptions)!==null&&r!==void 0?r:{};if(s&&s.collectionInsideObjectProperty){const l=s.collectionInsideObjectProperty;a=_n(a,l)}if(!Array.isArray(a))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');o.collection=a,e(a)}async function Qm(a,t,e,n,r){var o,s,l;const u=(o=t==null?void 0:t.filter)!==null&&o!==void 0?o:{},h=(s=u==null?void 0:u.collectionOptions)!==null&&s!==void 0?s:{};let c=null;if(a){const p=(l=n==null?void 0:n.isObservable(a))!==null&&l!==void 0?l:!1;p&&n&&(c=await Dp(n,a));const m=await a;if(Array.isArray(m)?c=m:(m==null?void 0:m.status)>=200&&m.status<300&&typeof m.json=="function"?c=await m.json():m&&m.content&&(c=m.content),!Array.isArray(c)&&(h!=null&&h.collectionInsideObjectProperty)){const v=c||m,_=h.collectionInsideObjectProperty;c=_n(v,_||"")}if(!Array.isArray(c))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');u.collection=c,e(c),p&&rb(t,e,n,r)}return c}function rb(a,t,e,n){var r;const o=(r=a==null?void 0:a.filter)!==null&&r!==void 0?r:{},s=e==null?void 0:e.createSubject();o.collectionAsync=s,n&&s&&n.push(s.subscribe(l=>nb(l,a,t)))}function go(a,t,e,n,r){var o;if(n!=null&&n.enableTranslate&&(r!=null&&r.translate)){const l=ho(n);return r.translate(`${l}${a}`)}const s=n.locales||je.locales;return(o=s==null?void 0:s[t])!==null&&o!==void 0?o:e}function ob(a,t){const e=[{operator:"",desc:go("CONTAINS","TEXT_CONTAINS","Contains",a,t)},{operator:"<>",desc:go("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",a,t)},{operator:"=",desc:go("EQUALS","TEXT_EQUALS","Equals",a,t)},{operator:"!=",desc:go("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",a,t)},{operator:"a*",desc:go("STARTS_WITH","TEXT_STARTS_WITH","Starts with",a,t)},{operator:"*z",desc:go("ENDS_WITH","TEXT_ENDS_WITH","Ends with",a,t)}];return Jm(a,e,"text"),e}function Xh(a,t){const e=[{operator:"",desc:""},{operator:"=",desc:go("EQUAL_TO","TEXT_EQUAL_TO","Equal to",a,t)},{operator:"<",desc:go("LESS_THAN","TEXT_LESS_THAN","Less than",a,t)},{operator:"<=",desc:go("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",a,t)},{operator:">",desc:go("GREATER_THAN","TEXT_GREATER_THAN","Greater than",a,t)},{operator:">=",desc:go("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",a,t)},{operator:"<>",desc:go("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",a,t)}];return Jm(a,e,"numeric"),e}function Jm(a,t,e){if(a.compoundOperatorAltTexts){for(const n of t)if(a.compoundOperatorAltTexts.hasOwnProperty(e)){const r=a.compoundOperatorAltTexts[e][n.operator];n.operatorAlt=(r==null?void 0:r.operatorAlt)||"",n.descAlt=(r==null?void 0:r.descAlt)||""}}}const ev=Jd&&uh||Jd;class sb{constructor(t,e,n){this.translaterService=t,this.collectionService=e,this.rxjs=n,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new Nn}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){var t,e,n;return(n=(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.collectionOptions)!==null&&n!==void 0?n:{}}get collection(){return this._collection}get columnFilter(){var t;return((t=this.columnDef)===null||t===void 0?void 0:t.filter)||{}}get filterDomElement(){return this._filterElm}get filterOptions(){var t;return((t=this.columnFilter)===null||t===void 0?void 0:t.filterOptions)||{}}get customStructure(){var t,e,n,r,o,s;let l=(t=this.columnFilter)===null||t===void 0?void 0:t.customStructure;const u=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.type)!==null&&n!==void 0?n:(r=this.columnDef)===null||r===void 0?void 0:r.type;return!l&&u===ie.object&&(!((o=this.columnDef)===null||o===void 0)&&o.dataKey)&&(!((s=this.columnDef)===null||s===void 0)&&s.labelKey)&&(l={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),l}get defaultOperator(){return Nt.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get instance(){return this._instance}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e,n,r,o,s,l,u,h,c,p,m,v;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);this.enableTranslateLabel=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableTranslateLabel)!==null&&n!==void 0?n:!1,this.labelName=(o=(r=this.customStructure)===null||r===void 0?void 0:r.label)!==null&&o!==void 0?o:"label",this.valueName=(l=(s=this.customStructure)===null||s===void 0?void 0:s.value)!==null&&l!==void 0?l:"value",this.labelPrefixName=(h=(u=this.customStructure)===null||u===void 0?void 0:u.labelPrefix)!==null&&h!==void 0?h:"labelPrefix",this.labelSuffixName=(p=(c=this.customStructure)===null||c===void 0?void 0:c.labelSuffix)!==null&&p!==void 0?p:"labelSuffix",this._locales=(v=(m=this.gridOptions)===null||m===void 0?void 0:m.locales)!==null&&v!==void 0?v:je.locales;const _=this.columnFilter.collection;return this._collection=_,this.renderDomElement(_),new Promise(async(C,x)=>{try{const S=this.columnFilter.collectionAsync;let E;S&&!this.columnFilter.collection?(E=Qm(S,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),C(E)):(E=_,C(_)),(S||this.columnFilter.enableCollectionWatch)&&(await(E??S),this.watchCollectionChanges())}catch(S){x(S)}})}clear(t=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this._filterElm.classList.remove("filled"))}destroy(){var t,e,n;typeof((t=this._instance)===null||t===void 0?void 0:t.destroy)=="function"&&this._instance.destroy(),this._filterElm,(n=(e=this._filterElm)===null||e===void 0?void 0:e.remove)===null||n===void 0||n.call(e),this._collection=void 0,this._bindEventService.unbindAll(),Xd(this.subscriptions)}getValues(){var t;return(t=this._filterElm)===null||t===void 0?void 0:t.value}setValues(t,e){var n;t&&this._filterElm&&(this._filterElm.value=t);const r=this.getValues()!==""?"add":"remove";(n=this._filterElm)===null||n===void 0||n.classList[r]("filled"),this.operator=e||this.defaultOperator}filterCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const n=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;e=this.collectionService.filterCollection(e,n,r)}return e}sortCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionSortBy){const n=this.columnFilter.collectionSortBy;e=this.collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}watchCollectionChanges(){var t;!((t=this.columnFilter)===null||t===void 0)&&t.collection&&(Ma(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),Jc(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&Ma(this.columnFilter.collection,n=>{this.renderDomElement(this.columnFilter.collection||n||[])})}))}renderDomElement(t){var e;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const o=this.collectionOptions.collectionInsideObjectProperty;t=_n(t,o||"")}let n=t;n&&(n=this.filterCollection(n),n=this.sortCollection(n));const r=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=n,this._filterElm=this.createFilterElement(n,r),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E;this._collection=t;const D=(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";on(this.filterContainerElm);let A=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.defaultFilterPlaceholder)!==null&&s!==void 0?s:"";!((l=this.columnFilter)===null||l===void 0)&&l.placeholder&&(A=this.columnFilter.placeholder),this._filterElm=Re("input",{type:"text",ariaLabel:(h=(u=this.columnFilter)===null||u===void 0?void 0:u.ariaLabel)!==null&&h!==void 0?h:`${Kr(D+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:A,className:`form-control search-filter filter-${D} slick-autocomplete-container`,value:e??"",dataset:{columnid:`${D}`}});const P=e;Array.isArray(t)&&(t.every(B=>Kd(B))?t=t.map(B=>({label:B,value:B})):t=t.map(B=>{var Z,L;return{label:B==null?void 0:B[this.labelName],value:B==null?void 0:B[this.valueName],labelPrefix:(Z=B==null?void 0:B[this.labelPrefixName])!==null&&Z!==void 0?Z:"",labelSuffix:(L=B==null?void 0:B[this.labelSuffixName])!==null&&L!==void 0?L:""}})),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${(p=(c=this.filterOptions)===null||c===void 0?void 0:c.className)!==null&&p!==void 0?p:""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&(!((m=this.translaterService)===null||m===void 0)&&m.translate)?this.translaterService.translate("NO_ELEMENTS_FOUND"):(_=(v=this._locales)===null||v===void 0?void 0:v.TEXT_NO_ELEMENTS_FOUND)!==null&&_!==void 0?_:"No elements found",customize:(B,Z,L)=>{L.style.width=""},onSelect:B=>{this.isItemSelected=!0,this.handleSelect(B)},...this.filterOptions},!((C=this._autocompleterOptions.renderItem)===null||C===void 0)&&C.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Ga(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(t)?this._autocompleterOptions.render=(S=(x=this._autocompleterOptions.render)===null||x===void 0?void 0:x.bind(this))!==null&&S!==void 0?S:this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),!((E=this.filterOptions)===null||E===void 0)&&E.fetch?(Wp(this._filterElm,this._autocompleterOptions),this._instance=ev(this._autocompleterOptions)):this._instance=ev({...this._autocompleterOptions,fetch:(B,Z)=>{t&&Z(t.filter(L=>((typeof L=="string"?L:L==null?void 0:L.label)||"").toLowerCase().includes(B.toLowerCase())))}}),this._filterElm.value=P??"";const M=Re("div",{className:"autocomplete-filter-container"});return M.appendChild(this._filterElm),M.appendChild(Re("span")),e&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(M),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(t){var e,n,r,o;if(t!==void 0){const l=(r=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.filterOptions)===null||n===void 0?void 0:n.renderItem)!==null&&r!==void 0?r:!1,u=typeof t=="string"?t:l?t[this.labelName]:t.label;let h=typeof t=="string"?t:l?t[this.valueName]:t.value;h=this.trimWhitespaceWhenEnabled(h);const c=h===""?"remove":"add";(o=this._filterElm)===null||o===void 0||o.classList[c]("filled"),this.setValues(u),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[h],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(t){var e,n,r,o,s;let l=(n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"";const u=(r=this.filterOptions.triggerOnEveryKeyStroke)!==null&&r!==void 0?r:!1;if(l=this.trimWhitespaceWhenEnabled(l),this._clearFilterTriggered||l===""||u){const h={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?h.clearFilterTriggered=this._clearFilterTriggered:(h.operator=this.operator,h.searchTerms=[l]),l!==""?(this.isItemSelected=!0,(o=this._filterElm)===null||o===void 0||o.classList.add("filled")):(this.isItemSelected=!1,(s=this._filterElm)===null||s===void 0||s.classList.remove("filled")),this.callback(t,h)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(t){var e;const n=typeof t=="string"?t:(e=t==null?void 0:t.label)!==null&&e!==void 0?e:"";return Re("div",{textContent:n||""})}renderCustomItem(t){var e,n,r;const o=(r=(n=(e=this._autocompleterOptions)===null||e===void 0?void 0:e.renderItem)===null||n===void 0?void 0:n.templateCallback(t))!==null&&r!==void 0?r:"",s=Ln(this.gridOptions,o)||"",l=document.createElement("div");return l.innerHTML=s,l}renderCollectionItem(t){var e,n;const r=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableRenderHtml)!==null&&n!==void 0?n:!1,o=t.labelPrefix||"",s=t.label||"",l=t.labelSuffix||"",u=o+s+l,h=Ln(this.gridOptions,u)||"",c=document.createElement("div");return c[r?"innerHTML":"textContent"]=h,c}trimWhitespaceWhenEnabled(t){let e=t;const n=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;return typeof t=="string"&&n&&(e=t.trim()),e}}var Kh=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ql={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(a){return typeof console<"u"&&console.warn(a)},getWeek:function(a){var t=new Date(a.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},dd={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(a){var t=a%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Lr=function(a,t){return t===void 0&&(t=2),("000"+a).slice(t*-1)},_o=function(a){return a===!0?1:0};function tv(a,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return a.apply(n,r)},t)}}var qh=function(a){return a instanceof Array?a:[a]};function Er(a,t,e){if(e===!0)return a.classList.add(t);a.classList.remove(t)}function Ii(a,t,e){var n=window.document.createElement(a);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function Ru(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function iv(a,t){if(t(a))return a;if(a.parentNode)return iv(a.parentNode,t)}function Pu(a,t){var e=Ii("div","numInputWrapper"),n=Ii("input","numInput "+a),r=Ii("span","arrowUp"),o=Ii("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var s in t)n.setAttribute(s,t[s]);return e.appendChild(n),e.appendChild(r),e.appendChild(o),e}function Jr(a){try{if(typeof a.composedPath=="function"){var t=a.composedPath();return t[0]}return a.target}catch{return a.target}}var Zh=function(){},Fu=function(a,t,e){return e.months[t?"shorthand":"longhand"][a]},lb={D:Zh,F:function(a,t,e){a.setMonth(e.months.longhand.indexOf(t))},G:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},H:function(a,t){a.setHours(parseFloat(t))},J:function(a,t){a.setDate(parseFloat(t))},K:function(a,t,e){a.setHours(a.getHours()%12+12*_o(new RegExp(e.amPM[1],"i").test(t)))},M:function(a,t,e){a.setMonth(e.months.shorthand.indexOf(t))},S:function(a,t){a.setSeconds(parseFloat(t))},U:function(a,t){return new Date(parseFloat(t)*1e3)},W:function(a,t,e){var n=parseInt(t),r=new Date(a.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(a,t){a.setFullYear(parseFloat(t))},Z:function(a,t){return new Date(t)},d:function(a,t){a.setDate(parseFloat(t))},h:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},i:function(a,t){a.setMinutes(parseFloat(t))},j:function(a,t){a.setDate(parseFloat(t))},l:Zh,m:function(a,t){a.setMonth(parseFloat(t)-1)},n:function(a,t){a.setMonth(parseFloat(t)-1)},s:function(a,t){a.setSeconds(parseFloat(t))},u:function(a,t){return new Date(parseFloat(t))},w:Zh,y:function(a,t){a.setFullYear(2e3+parseFloat(t))}},El={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ud={Z:function(a){return a.toISOString()},D:function(a,t,e){return t.weekdays.shorthand[ud.w(a,t,e)]},F:function(a,t,e){return Fu(ud.n(a,t,e)-1,!1,t)},G:function(a,t,e){return Lr(ud.h(a,t,e))},H:function(a){return Lr(a.getHours())},J:function(a,t){return t.ordinal!==void 0?a.getDate()+t.ordinal(a.getDate()):a.getDate()},K:function(a,t){return t.amPM[_o(a.getHours()>11)]},M:function(a,t){return Fu(a.getMonth(),!0,t)},S:function(a){return Lr(a.getSeconds())},U:function(a){return a.getTime()/1e3},W:function(a,t,e){return e.getWeek(a)},Y:function(a){return Lr(a.getFullYear(),4)},d:function(a){return Lr(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return Lr(a.getMinutes())},j:function(a){return a.getDate()},l:function(a,t){return t.weekdays.longhand[a.getDay()]},m:function(a){return Lr(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return String(a.getFullYear()).substring(2)}},nv=function(a){var t=a.config,e=t===void 0?Ql:t,n=a.l10n,r=n===void 0?dd:n,o=a.isMobile,s=o===void 0?!1:o;return function(l,u,h){var c=h||r;return e.formatDate!==void 0&&!s?e.formatDate(l,u,c):u.split("").map(function(p,m,v){return ud[p]&&v[m-1]!=="\\"?ud[p](l,c,e):p!=="\\"?p:""}).join("")}},Qh=function(a){var t=a.config,e=t===void 0?Ql:t,n=a.l10n,r=n===void 0?dd:n;return function(o,s,l,u){if(!(o!==0&&!o)){var h=u||r,c,p=o;if(o instanceof Date)c=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)c=new Date(o);else if(typeof o=="string"){var m=s||(e||Ql).dateFormat,v=String(o).trim();if(v==="today")c=new Date,l=!0;else if(e&&e.parseDate)c=e.parseDate(o,m);else if(/Z$/.test(v)||/GMT$/.test(v))c=new Date(o);else{for(var _=void 0,C=[],x=0,S=0,E="";x<m.length;x++){var D=m[x],A=D==="\\",P=m[x-1]==="\\"||A;if(El[D]&&!P){E+=El[D];var M=new RegExp(E).exec(o);M&&(_=!0)&&C[D!=="Y"?"push":"unshift"]({fn:lb[D],val:M[++S]})}else A||(E+=".")}c=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),C.forEach(function(B){var Z=B.fn,L=B.val;return c=Z(c,L,h)||c}),c=_?c:void 0}}if(!(c instanceof Date&&!isNaN(c.getTime()))){e.errorHandler(new Error("Invalid date provided: "+p));return}return l===!0&&c.setHours(0,0,0,0),c}}};function eo(a,t,e){return e===void 0&&(e=!0),e!==!1?new Date(a.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):a.getTime()-t.getTime()}var ab=function(a,t,e){return a>Math.min(t,e)&&a<Math.max(t,e)},Jh=function(a,t,e){return a*3600+t*60+e},db=function(a){var t=Math.floor(a/3600),e=(a-t*3600)/60;return[t,e,a-t*3600-e*60]},ub={DAY:864e5};function ef(a){var t=a.defaultHour,e=a.defaultMinute,n=a.defaultSeconds;if(a.minDate!==void 0){var r=a.minDate.getHours(),o=a.minDate.getMinutes(),s=a.minDate.getSeconds();t<r&&(t=r),t===r&&e<o&&(e=o),t===r&&e===o&&n<s&&(n=a.minDate.getSeconds())}if(a.maxDate!==void 0){var l=a.maxDate.getHours(),u=a.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(u,e)),t===l&&e===u&&(n=a.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!a)throw TypeError("Cannot convert undefined or null to object");for(var n=function(l){l&&Object.keys(l).forEach(function(u){return a[u]=l[u]})},r=0,o=t;r<o.length;r++){var s=o[r];n(s)}return a});var pr=function(){return pr=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},pr.apply(this,arguments)},rv=function(){for(var a=0,t=0,e=arguments.length;t<e;t++)a+=arguments[t].length;for(var n=Array(a),r=0,t=0;t<e;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)n[r]=o[s];return n},cb=300;function hb(a,t){var e={config:pr(pr({},Ql),On.defaultConfig),l10n:dd};e.parseDate=Qh({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=C,e._setHoursFromDate=m,e._positionCalendar=re,e.changeMonth=ne,e.changeYear=Ce,e.clear=pe,e.close=Ve,e.onMouseOver=St,e._createElement=Ii,e.createDay=M,e.destroy=Ye,e.isEnabled=_e,e.jumpToDate=E,e.updateValue=qt,e.open=k,e.redraw=me,e.set=Le,e.setDate=It,e.toggle=at;function n(){e.utils={getDaysInMonth:function(z,Q){return z===void 0&&(z=e.currentMonth),Q===void 0&&(Q=e.currentYear),z===1&&(Q%4===0&&Q%100!==0||Q%400===0)?29:e.l10n.daysInMonth[z]}}}function r(){e.element=e.input=a,e.isOpen=!1,ge(),X(),G(),K(),n(),e.isMobile||P(),S(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),qt(!1)),l();var z=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&z&&re(),st("onReady")}function o(){var z;return((z=e.calendarContainer)===null||z===void 0?void 0:z.getRootNode()).activeElement||document.activeElement}function s(z){return z.bind(e)}function l(){var z=e.config;z.weekNumbers===!1&&z.showMonths===1||z.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var Q=(e.days.offsetWidth+1)*z.showMonths;e.daysContainer.style.width=Q+"px",e.calendarContainer.style.width=Q+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function u(z){if(e.selectedDates.length===0){var Q=e.config.minDate===void 0||eo(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),he=ef(e.config);Q.setHours(he.hours,he.minutes,he.seconds,Q.getMilliseconds()),e.selectedDates=[Q],e.latestSelectedDateObj=Q}z!==void 0&&z.type!=="blur"&&Mi(z);var Ee=e._input.value;p(),qt(),e._input.value!==Ee&&e._debouncedChange()}function h(z,Q){return z%12+12*_o(Q===e.l10n.amPM[1])}function c(z){switch(z%24){case 0:case 12:return 12;default:return z%12}}function p(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var z=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Q=(parseInt(e.minuteElement.value,10)||0)%60,he=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(z=h(z,e.amPM.textContent));var Ee=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&eo(e.latestSelectedDateObj,e.config.minDate,!0)===0,lt=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&eo(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var vt=Jh(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),it=Jh(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),wt=Jh(z,Q,he);if(wt>it&&wt<vt){var Ht=db(vt);z=Ht[0],Q=Ht[1],he=Ht[2]}}else{if(lt){var Et=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;z=Math.min(z,Et.getHours()),z===Et.getHours()&&(Q=Math.min(Q,Et.getMinutes())),Q===Et.getMinutes()&&(he=Math.min(he,Et.getSeconds()))}if(Ee){var gt=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;z=Math.max(z,gt.getHours()),z===gt.getHours()&&Q<gt.getMinutes()&&(Q=gt.getMinutes()),Q===gt.getMinutes()&&(he=Math.max(he,gt.getSeconds()))}}v(z,Q,he)}}function m(z){var Q=z||e.latestSelectedDateObj;Q&&Q instanceof Date&&v(Q.getHours(),Q.getMinutes(),Q.getSeconds())}function v(z,Q,he){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(z%24,Q,he||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Lr(e.config.time_24hr?z:(12+z)%12+12*_o(z%12===0)),e.minuteElement.value=Lr(Q),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[_o(z>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Lr(he)))}function _(z){var Q=Jr(z),he=parseInt(Q.value)+(z.delta||0);(he/1e3>1||z.key==="Enter"&&!/[^\d]/.test(he.toString()))&&Ce(he)}function C(z,Q,he,Ee){if(Q instanceof Array)return Q.forEach(function(lt){return C(z,lt,he,Ee)});if(z instanceof Array)return z.forEach(function(lt){return C(lt,Q,he,Ee)});z.addEventListener(Q,he,Ee),e._handlers.push({remove:function(){return z.removeEventListener(Q,he,Ee)}})}function x(){st("onChange")}function S(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(he){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+he+"]"),function(Ee){return C(Ee,"click",e[he])})}),e.isMobile){ke();return}var z=tv(ct,50);if(e._debouncedChange=tv(x,cb),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&C(e.daysContainer,"mouseover",function(he){e.config.mode==="range"&&St(Jr(he))}),C(e._input,"keydown",ze),e.calendarContainer!==void 0&&C(e.calendarContainer,"keydown",ze),!e.config.inline&&!e.config.static&&C(window,"resize",z),window.ontouchstart!==void 0?C(window.document,"touchstart",ce):C(window.document,"mousedown",ce),C(window.document,"focus",ce,{capture:!0}),e.config.clickOpens===!0&&(C(e._input,"focus",e.open),C(e._input,"click",e.open)),e.daysContainer!==void 0&&(C(e.monthNav,"click",Fi),C(e.monthNav,["keyup","increment"],_),C(e.daysContainer,"click",mt)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var Q=function(he){return Jr(he).select()};C(e.timeContainer,["increment"],u),C(e.timeContainer,"blur",u,{capture:!0}),C(e.timeContainer,"click",D),C([e.hourElement,e.minuteElement],["focus","click"],Q),e.secondElement!==void 0&&C(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&C(e.amPM,"click",function(he){u(he)})}e.config.allowInput&&C(e._input,"blur",ot)}function E(z,Q){var he=z!==void 0?e.parseDate(z):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Ee=e.currentYear,lt=e.currentMonth;try{he!==void 0&&(e.currentYear=he.getFullYear(),e.currentMonth=he.getMonth())}catch(vt){vt.message="Invalid date supplied: "+he,e.config.errorHandler(vt)}Q&&e.currentYear!==Ee&&(st("onYearChange"),U()),Q&&(e.currentYear!==Ee||e.currentMonth!==lt)&&st("onMonthChange"),e.redraw()}function D(z){var Q=Jr(z);~Q.className.indexOf("arrow")&&A(z,Q.classList.contains("arrowUp")?1:-1)}function A(z,Q,he){var Ee=z&&Jr(z),lt=he||Ee&&Ee.parentNode&&Ee.parentNode.firstChild,vt=ht("increment");vt.delta=Q,lt&&lt.dispatchEvent(vt)}function P(){var z=window.document.createDocumentFragment();if(e.calendarContainer=Ii("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(z.appendChild(Ke()),e.innerContainer=Ii("div","flatpickr-innerContainer"),e.config.weekNumbers){var Q=De(),he=Q.weekWrapper,Ee=Q.weekNumbers;e.innerContainer.appendChild(he),e.weekNumbers=Ee,e.weekWrapper=he}e.rContainer=Ii("div","flatpickr-rContainer"),e.rContainer.appendChild(xe()),e.daysContainer||(e.daysContainer=Ii("div","flatpickr-days"),e.daysContainer.tabIndex=-1),J(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),z.appendChild(e.innerContainer)}e.config.enableTime&&z.appendChild(Ie()),Er(e.calendarContainer,"rangeMode",e.config.mode==="range"),Er(e.calendarContainer,"animate",e.config.animate===!0),Er(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(z);var lt=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!lt&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var vt=Ii("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(vt,e.element),vt.appendChild(e.element),e.altInput&&vt.appendChild(e.altInput),vt.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function M(z,Q,he,Ee){var lt=_e(Q,!0),vt=Ii("span",z,Q.getDate().toString());return vt.dateObj=Q,vt.$i=Ee,vt.setAttribute("aria-label",e.formatDate(Q,e.config.ariaDateFormat)),z.indexOf("hidden")===-1&&eo(Q,e.now)===0&&(e.todayDateElem=vt,vt.classList.add("today"),vt.setAttribute("aria-current","date")),lt?(vt.tabIndex=-1,Rt(Q)&&(vt.classList.add("selected"),e.selectedDateElem=vt,e.config.mode==="range"&&(Er(vt,"startRange",e.selectedDates[0]&&eo(Q,e.selectedDates[0],!0)===0),Er(vt,"endRange",e.selectedDates[1]&&eo(Q,e.selectedDates[1],!0)===0),z==="nextMonthDay"&&vt.classList.add("inRange")))):vt.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Lt(Q)&&!Rt(Q)&&vt.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&z!=="prevMonthDay"&&Ee%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Q)+"</span>"),st("onDayCreate",vt),vt}function B(z){z.focus(),e.config.mode==="range"&&St(z)}function Z(z){for(var Q=z>0?0:e.config.showMonths-1,he=z>0?e.config.showMonths:-1,Ee=Q;Ee!=he;Ee+=z)for(var lt=e.daysContainer.children[Ee],vt=z>0?0:lt.children.length-1,it=z>0?lt.children.length:-1,wt=vt;wt!=it;wt+=z){var Ht=lt.children[wt];if(Ht.className.indexOf("hidden")===-1&&_e(Ht.dateObj))return Ht}}function L(z,Q){for(var he=z.className.indexOf("Month")===-1?z.dateObj.getMonth():e.currentMonth,Ee=Q>0?e.config.showMonths:-1,lt=Q>0?1:-1,vt=he-e.currentMonth;vt!=Ee;vt+=lt)for(var it=e.daysContainer.children[vt],wt=he-e.currentMonth===vt?z.$i+Q:Q<0?it.children.length-1:0,Ht=it.children.length,Et=wt;Et>=0&&Et<Ht&&Et!=(Q>0?Ht:-1);Et+=lt){var gt=it.children[Et];if(gt.className.indexOf("hidden")===-1&&_e(gt.dateObj)&&Math.abs(z.$i-Et)>=Math.abs(Q))return B(gt)}e.changeMonth(lt),de(Z(lt),0)}function de(z,Q){var he=o(),Ee=He(he||document.body),lt=z!==void 0?z:Ee?he:e.selectedDateElem!==void 0&&He(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&He(e.todayDateElem)?e.todayDateElem:Z(Q>0?1:-1);lt===void 0?e._input.focus():Ee?L(lt,Q):B(lt)}function be(z,Q){for(var he=(new Date(z,Q,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Ee=e.utils.getDaysInMonth((Q-1+12)%12,z),lt=e.utils.getDaysInMonth(Q,z),vt=window.document.createDocumentFragment(),it=e.config.showMonths>1,wt=it?"prevMonthDay hidden":"prevMonthDay",Ht=it?"nextMonthDay hidden":"nextMonthDay",Et=Ee+1-he,gt=0;Et<=Ee;Et++,gt++)vt.appendChild(M("flatpickr-day "+wt,new Date(z,Q-1,Et),Et,gt));for(Et=1;Et<=lt;Et++,gt++)vt.appendChild(M("flatpickr-day",new Date(z,Q,Et),Et,gt));for(var ei=lt+1;ei<=42-he&&(e.config.showMonths===1||gt%7!==0);ei++,gt++)vt.appendChild(M("flatpickr-day "+Ht,new Date(z,Q+1,ei%lt),ei,gt));var Ai=Ii("div","dayContainer");return Ai.appendChild(vt),Ai}function J(){if(e.daysContainer!==void 0){Ru(e.daysContainer),e.weekNumbers&&Ru(e.weekNumbers);for(var z=document.createDocumentFragment(),Q=0;Q<e.config.showMonths;Q++){var he=new Date(e.currentYear,e.currentMonth,1);he.setMonth(e.currentMonth+Q),z.appendChild(be(he.getFullYear(),he.getMonth()))}e.daysContainer.appendChild(z),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&St()}}function U(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var z=function(Ee){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&Ee<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&Ee>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Q=0;Q<12;Q++)if(z(Q)){var he=Ii("option","flatpickr-monthDropdown-month");he.value=new Date(e.currentYear,Q).getMonth().toString(),he.textContent=Fu(Q,e.config.shorthandCurrentMonth,e.l10n),he.tabIndex=-1,e.currentMonth===Q&&(he.selected=!0),e.monthsDropdownContainer.appendChild(he)}}}function F(){var z=Ii("div","flatpickr-month"),Q=window.document.createDocumentFragment(),he;e.config.showMonths>1||e.config.monthSelectorType==="static"?he=Ii("span","cur-month"):(e.monthsDropdownContainer=Ii("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),C(e.monthsDropdownContainer,"change",function(it){var wt=Jr(it),Ht=parseInt(wt.value,10);e.changeMonth(Ht-e.currentMonth),st("onMonthChange")}),U(),he=e.monthsDropdownContainer);var Ee=Pu("cur-year",{tabindex:"-1"}),lt=Ee.getElementsByTagName("input")[0];lt.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&lt.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(lt.setAttribute("max",e.config.maxDate.getFullYear().toString()),lt.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var vt=Ii("div","flatpickr-current-month");return vt.appendChild(he),vt.appendChild(Ee),Q.appendChild(vt),z.appendChild(Q),{container:z,yearElement:lt,monthElement:he}}function ae(){Ru(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var z=e.config.showMonths;z--;){var Q=F();e.yearElements.push(Q.yearElement),e.monthElements.push(Q.monthElement),e.monthNav.appendChild(Q.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ke(){return e.monthNav=Ii("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Ii("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Ii("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,ae(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(z){e.__hidePrevMonthArrow!==z&&(Er(e.prevMonthNav,"flatpickr-disabled",z),e.__hidePrevMonthArrow=z)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(z){e.__hideNextMonthArrow!==z&&(Er(e.nextMonthNav,"flatpickr-disabled",z),e.__hideNextMonthArrow=z)}}),e.currentYearElement=e.yearElements[0],Ot(),e.monthNav}function Ie(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var z=ef(e.config);e.timeContainer=Ii("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Q=Ii("span","flatpickr-time-separator",":"),he=Pu("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=he.getElementsByTagName("input")[0];var Ee=Pu("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Ee.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?z.hours:c(z.hours)),e.minuteElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():z.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(he),e.timeContainer.appendChild(Q),e.timeContainer.appendChild(Ee),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var lt=Pu("flatpickr-second");e.secondElement=lt.getElementsByTagName("input")[0],e.secondElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():z.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Ii("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(lt)}return e.config.time_24hr||(e.amPM=Ii("span","flatpickr-am-pm",e.l10n.amPM[_o((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function xe(){e.weekdayContainer?Ru(e.weekdayContainer):e.weekdayContainer=Ii("div","flatpickr-weekdays");for(var z=e.config.showMonths;z--;){var Q=Ii("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Q)}return Oe(),e.weekdayContainer}function Oe(){if(e.weekdayContainer){var z=e.l10n.firstDayOfWeek,Q=rv(e.l10n.weekdays.shorthand);z>0&&z<Q.length&&(Q=rv(Q.splice(z,Q.length),Q.splice(0,z)));for(var he=e.config.showMonths;he--;)e.weekdayContainer.children[he].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Q.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function De(){e.calendarContainer.classList.add("hasWeeks");var z=Ii("div","flatpickr-weekwrapper");z.appendChild(Ii("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Q=Ii("div","flatpickr-weeks");return z.appendChild(Q),{weekWrapper:z,weekNumbers:Q}}function ne(z,Q){Q===void 0&&(Q=!0);var he=Q?z:z-e.currentMonth;he<0&&e._hidePrevMonthArrow===!0||he>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=he,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,st("onYearChange"),U()),J(),st("onMonthChange"),Ot())}function pe(z,Q){if(z===void 0&&(z=!0),Q===void 0&&(Q=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,Q===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var he=ef(e.config),Ee=he.hours,lt=he.minutes,vt=he.seconds;v(Ee,lt,vt)}e.redraw(),z&&st("onChange")}function Ve(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),st("onClose")}function Ye(){e.config!==void 0&&st("onDestroy");for(var z=e._handlers.length;z--;)e._handlers[z].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Q=e.calendarContainer.parentNode;if(Q.lastChild&&Q.removeChild(Q.lastChild),Q.parentNode){for(;Q.firstChild;)Q.parentNode.insertBefore(Q.firstChild,Q);Q.parentNode.removeChild(Q)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(he){try{delete e[he]}catch{}})}function Ue(z){return e.calendarContainer.contains(z)}function ce(z){if(e.isOpen&&!e.config.inline){var Q=Jr(z),he=Ue(Q),Ee=Q===e.input||Q===e.altInput||e.element.contains(Q)||z.path&&z.path.indexOf&&(~z.path.indexOf(e.input)||~z.path.indexOf(e.altInput)),lt=!Ee&&!he&&!Ue(z.relatedTarget),vt=!e.config.ignoredFocusElements.some(function(it){return it.contains(Q)});lt&&vt&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&u(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Ce(z){if(!(!z||e.config.minDate&&z<e.config.minDate.getFullYear()||e.config.maxDate&&z>e.config.maxDate.getFullYear())){var Q=z,he=e.currentYear!==Q;e.currentYear=Q||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),he&&(e.redraw(),st("onYearChange"),U())}}function _e(z,Q){var he;Q===void 0&&(Q=!0);var Ee=e.parseDate(z,void 0,Q);if(e.config.minDate&&Ee&&eo(Ee,e.config.minDate,Q!==void 0?Q:!e.minDateHasTime)<0||e.config.maxDate&&Ee&&eo(Ee,e.config.maxDate,Q!==void 0?Q:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(Ee===void 0)return!1;for(var lt=!!e.config.enable,vt=(he=e.config.enable)!==null&&he!==void 0?he:e.config.disable,it=0,wt=void 0;it<vt.length;it++){if(wt=vt[it],typeof wt=="function"&&wt(Ee))return lt;if(wt instanceof Date&&Ee!==void 0&&wt.getTime()===Ee.getTime())return lt;if(typeof wt=="string"){var Ht=e.parseDate(wt,void 0,!0);return Ht&&Ht.getTime()===Ee.getTime()?lt:!lt}else if(typeof wt=="object"&&Ee!==void 0&&wt.from&&wt.to&&Ee.getTime()>=wt.from.getTime()&&Ee.getTime()<=wt.to.getTime())return lt}return!lt}function He(z){return e.daysContainer!==void 0?z.className.indexOf("hidden")===-1&&z.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(z):!1}function ot(z){var Q=z.target===e._input,he=e._input.value.trimEnd()!==zt();Q&&he&&!(z.relatedTarget&&Ue(z.relatedTarget))&&e.setDate(e._input.value,!0,z.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function ze(z){var Q=Jr(z),he=e.config.wrap?a.contains(Q):Q===e._input,Ee=e.config.allowInput,lt=e.isOpen&&(!Ee||!he),vt=e.config.inline&&he&&!Ee;if(z.keyCode===13&&he){if(Ee)return e.setDate(e._input.value,!0,Q===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Q.blur();e.open()}else if(Ue(Q)||lt||vt){var it=!!e.timeContainer&&e.timeContainer.contains(Q);switch(z.keyCode){case 13:it?(z.preventDefault(),u(),Ge()):mt(z);break;case 27:z.preventDefault(),Ge();break;case 8:case 46:he&&!e.config.allowInput&&(z.preventDefault(),e.clear());break;case 37:case 39:if(!it&&!he){z.preventDefault();var wt=o();if(e.daysContainer!==void 0&&(Ee===!1||wt&&He(wt))){var Ht=z.keyCode===39?1:-1;z.ctrlKey?(z.stopPropagation(),ne(Ht),de(Z(1),0)):de(void 0,Ht)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:z.preventDefault();var Et=z.keyCode===40?1:-1;e.daysContainer&&Q.$i!==void 0||Q===e.input||Q===e.altInput?z.ctrlKey?(z.stopPropagation(),Ce(e.currentYear-Et),de(Z(1),0)):it||de(void 0,Et*7):Q===e.currentYearElement?Ce(e.currentYear-Et):e.config.enableTime&&(!it&&e.hourElement&&e.hourElement.focus(),u(z),e._debouncedChange());break;case 9:if(it){var gt=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(zi){return zi}),ei=gt.indexOf(Q);if(ei!==-1){var Ai=gt[ei+(z.shiftKey?-1:1)];z.preventDefault(),(Ai||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Q)&&z.shiftKey&&(z.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&Q===e.amPM)switch(z.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],p(),qt();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],p(),qt();break}(he||Ue(Q))&&st("onKeyDown",z)}function St(z,Q){if(Q===void 0&&(Q="flatpickr-day"),!(e.selectedDates.length!==1||z&&(!z.classList.contains(Q)||z.classList.contains("flatpickr-disabled")))){for(var he=z?z.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Ee=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),lt=Math.min(he,e.selectedDates[0].getTime()),vt=Math.max(he,e.selectedDates[0].getTime()),it=!1,wt=0,Ht=0,Et=lt;Et<vt;Et+=ub.DAY)_e(new Date(Et),!0)||(it=it||Et>lt&&Et<vt,Et<Ee&&(!wt||Et>wt)?wt=Et:Et>Ee&&(!Ht||Et<Ht)&&(Ht=Et));var gt=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Q));gt.forEach(function(ei){var Ai=ei.dateObj,zi=Ai.getTime(),Zt=wt>0&&zi<wt||Ht>0&&zi>Ht;if(Zt){ei.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ni){ei.classList.remove(Ni)});return}else if(it&&!Zt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ni){ei.classList.remove(Ni)}),z!==void 0&&(z.classList.add(he<=e.selectedDates[0].getTime()?"startRange":"endRange"),Ee<he&&zi===Ee?ei.classList.add("startRange"):Ee>he&&zi===Ee&&ei.classList.add("endRange"),zi>=wt&&(Ht===0||zi<=Ht)&&ab(zi,Ee,he)&&ei.classList.add("inRange"))})}}function ct(){e.isOpen&&!e.config.static&&!e.config.inline&&re()}function k(z,Q){if(Q===void 0&&(Q=e._positionElement),e.isMobile===!0){if(z){z.preventDefault();var he=Jr(z);he&&he.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),st("onOpen");return}else if(e._input.disabled||e.config.inline)return;var Ee=e.isOpen;e.isOpen=!0,Ee||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),st("onOpen"),re(Q)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(z===void 0||!e.timeContainer.contains(z.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function ee(z){return function(Q){var he=e.config["_"+z+"Date"]=e.parseDate(Q,e.config.dateFormat),Ee=e.config["_"+(z==="min"?"max":"min")+"Date"];he!==void 0&&(e[z==="min"?"minDateHasTime":"maxDateHasTime"]=he.getHours()>0||he.getMinutes()>0||he.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(lt){return _e(lt)}),!e.selectedDates.length&&z==="min"&&m(he),qt()),e.daysContainer&&(me(),he!==void 0?e.currentYearElement[z]=he.getFullYear().toString():e.currentYearElement.removeAttribute(z),e.currentYearElement.disabled=!!Ee&&he!==void 0&&Ee.getFullYear()===he.getFullYear())}}function ge(){var z=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Q=pr(pr({},JSON.parse(JSON.stringify(a.dataset||{}))),t),he={};e.config.parseDate=Q.parseDate,e.config.formatDate=Q.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(gt){e.config._enable=bi(gt)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(gt){e.config._disable=bi(gt)}});var Ee=Q.mode==="time";if(!Q.dateFormat&&(Q.enableTime||Ee)){var lt=On.defaultConfig.dateFormat||Ql.dateFormat;he.dateFormat=Q.noCalendar||Ee?"H:i"+(Q.enableSeconds?":S":""):lt+" H:i"+(Q.enableSeconds?":S":"")}if(Q.altInput&&(Q.enableTime||Ee)&&!Q.altFormat){var vt=On.defaultConfig.altFormat||Ql.altFormat;he.altFormat=Q.noCalendar||Ee?"h:i"+(Q.enableSeconds?":S K":" K"):vt+(" h:i"+(Q.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:ee("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:ee("max")});var it=function(gt){return function(ei){e.config[gt==="min"?"_minTime":"_maxTime"]=e.parseDate(ei,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:it("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:it("max")}),Q.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,he,Q);for(var wt=0;wt<z.length;wt++)e.config[z[wt]]=e.config[z[wt]]===!0||e.config[z[wt]]==="true";Kh.filter(function(gt){return e.config[gt]!==void 0}).forEach(function(gt){e.config[gt]=qh(e.config[gt]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var wt=0;wt<e.config.plugins.length;wt++){var Ht=e.config.plugins[wt](e)||{};for(var Et in Ht)Kh.indexOf(Et)>-1?e.config[Et]=qh(Ht[Et]).map(s).concat(e.config[Et]):typeof Q[Et]>"u"&&(e.config[Et]=Ht[Et])}Q.altInputClass||(e.config.altInputClass=$().className+" "+e.config.altInputClass),st("onParseConfig")}function $(){return e.config.wrap?a.querySelector("[data-input]"):a}function X(){typeof e.config.locale!="object"&&typeof On.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=pr(pr({},On.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?On.l10ns[e.config.locale]:void 0),El.D="("+e.l10n.weekdays.shorthand.join("|")+")",El.l="("+e.l10n.weekdays.longhand.join("|")+")",El.M="("+e.l10n.months.shorthand.join("|")+")",El.F="("+e.l10n.months.longhand.join("|")+")",El.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var z=pr(pr({},t),JSON.parse(JSON.stringify(a.dataset||{})));z.time_24hr===void 0&&On.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=nv(e),e.parseDate=Qh({config:e.config,l10n:e.l10n})}function re(z){if(typeof e.config.position=="function")return void e.config.position(e,z);if(e.calendarContainer!==void 0){st("onPreCalendarPosition");var Q=z||e._positionElement,he=Array.prototype.reduce.call(e.calendarContainer.children,function(Wi,Li){return Wi+Li.offsetHeight},0),Ee=e.calendarContainer.offsetWidth,lt=e.config.position.split(" "),vt=lt[0],it=lt.length>1?lt[1]:null,wt=Q.getBoundingClientRect(),Ht=window.innerHeight-wt.bottom,Et=vt==="above"||vt!=="below"&&Ht<he&&wt.top>he,gt=window.pageYOffset+wt.top+(Et?-he-2:Q.offsetHeight+2);if(Er(e.calendarContainer,"arrowTop",!Et),Er(e.calendarContainer,"arrowBottom",Et),!e.config.inline){var ei=window.pageXOffset+wt.left,Ai=!1,zi=!1;it==="center"?(ei-=(Ee-wt.width)/2,Ai=!0):it==="right"&&(ei-=Ee-wt.width,zi=!0),Er(e.calendarContainer,"arrowLeft",!Ai&&!zi),Er(e.calendarContainer,"arrowCenter",Ai),Er(e.calendarContainer,"arrowRight",zi);var Zt=window.document.body.offsetWidth-(window.pageXOffset+wt.right),Ni=ei+Ee>window.document.body.offsetWidth,Bn=Zt+Ee>window.document.body.offsetWidth;if(Er(e.calendarContainer,"rightMost",Ni),!e.config.static)if(e.calendarContainer.style.top=gt+"px",!Ni)e.calendarContainer.style.left=ei+"px",e.calendarContainer.style.right="auto";else if(!Bn)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Zt+"px";else{var fn=Pe();if(fn===void 0)return;var Ct=window.document.body.offsetWidth,Se=Math.max(0,Ct/2-Ee/2),Xe=".flatpickr-calendar.centerMost:before",xt=".flatpickr-calendar.centerMost:after",ti=fn.cssRules.length,Ui="{left:"+wt.left+"px;right:auto;}";Er(e.calendarContainer,"rightMost",!1),Er(e.calendarContainer,"centerMost",!0),fn.insertRule(Xe+","+xt+Ui,ti),e.calendarContainer.style.left=Se+"px",e.calendarContainer.style.right="auto"}}}}function Pe(){for(var z=null,Q=0;Q<document.styleSheets.length;Q++){var he=document.styleSheets[Q];if(he.cssRules){try{he.cssRules}catch{continue}z=he;break}}return z??Fe()}function Fe(){var z=document.createElement("style");return document.head.appendChild(z),z.sheet}function me(){e.config.noCalendar||e.isMobile||(U(),Ot(),J())}function Ge(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function mt(z){z.preventDefault(),z.stopPropagation();var Q=function(gt){return gt.classList&&gt.classList.contains("flatpickr-day")&&!gt.classList.contains("flatpickr-disabled")&&!gt.classList.contains("notAllowed")},he=iv(Jr(z),Q);if(he!==void 0){var Ee=he,lt=e.latestSelectedDateObj=new Date(Ee.dateObj.getTime()),vt=(lt.getMonth()<e.currentMonth||lt.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=Ee,e.config.mode==="single")e.selectedDates=[lt];else if(e.config.mode==="multiple"){var it=Rt(lt);it?e.selectedDates.splice(parseInt(it),1):e.selectedDates.push(lt)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=lt,e.selectedDates.push(lt),eo(lt,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(gt,ei){return gt.getTime()-ei.getTime()}));if(p(),vt){var wt=e.currentYear!==lt.getFullYear();e.currentYear=lt.getFullYear(),e.currentMonth=lt.getMonth(),wt&&(st("onYearChange"),U()),st("onMonthChange")}if(Ot(),J(),qt(),!vt&&e.config.mode!=="range"&&e.config.showMonths===1?B(Ee):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var Ht=e.config.mode==="single"&&!e.config.enableTime,Et=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(Ht||Et)&&Ge()}x()}}var We={locale:[X,Oe],showMonths:[ae,l,xe],minDate:[E],maxDate:[E],positionElement:[ve],clickOpens:[function(){e.config.clickOpens===!0?(C(e._input,"focus",e.open),C(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Le(z,Q){if(z!==null&&typeof z=="object"){Object.assign(e.config,z);for(var he in z)We[he]!==void 0&&We[he].forEach(function(Ee){return Ee()})}else e.config[z]=Q,We[z]!==void 0?We[z].forEach(function(Ee){return Ee()}):Kh.indexOf(z)>-1&&(e.config[z]=qh(Q));e.redraw(),qt(!0)}function jt(z,Q){var he=[];if(z instanceof Array)he=z.map(function(Ee){return e.parseDate(Ee,Q)});else if(z instanceof Date||typeof z=="number")he=[e.parseDate(z,Q)];else if(typeof z=="string")switch(e.config.mode){case"single":case"time":he=[e.parseDate(z,Q)];break;case"multiple":he=z.split(e.config.conjunction).map(function(Ee){return e.parseDate(Ee,Q)});break;case"range":he=z.split(e.l10n.rangeSeparator).map(function(Ee){return e.parseDate(Ee,Q)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(z)));e.selectedDates=e.config.allowInvalidPreload?he:he.filter(function(Ee){return Ee instanceof Date&&_e(Ee,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(Ee,lt){return Ee.getTime()-lt.getTime()})}function It(z,Q,he){if(Q===void 0&&(Q=!1),he===void 0&&(he=e.config.dateFormat),z!==0&&!z||z instanceof Array&&z.length===0)return e.clear(Q);jt(z,he),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),E(void 0,Q),m(),e.selectedDates.length===0&&e.clear(!1),qt(Q),Q&&st("onChange")}function bi(z){return z.slice().map(function(Q){return typeof Q=="string"||typeof Q=="number"||Q instanceof Date?e.parseDate(Q,void 0,!0):Q&&typeof Q=="object"&&Q.from&&Q.to?{from:e.parseDate(Q.from,void 0),to:e.parseDate(Q.to,void 0)}:Q}).filter(function(Q){return Q})}function K(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var z=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);z&&jt(z,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function G(){if(e.input=$(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Ii(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),ve()}function ve(){e._positionElement=e.config.positionElement||e._input}function ke(){var z=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Ii("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=z,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=z==="datetime-local"?"Y-m-d\\TH:i:S":z==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}C(e.mobileInput,"change",function(Q){e.setDate(Jr(Q).value,!1,e.mobileFormatStr),st("onChange"),st("onClose")})}function at(z){if(e.isOpen===!0)return e.close();e.open(z)}function st(z,Q){if(e.config!==void 0){var he=e.config[z];if(he!==void 0&&he.length>0)for(var Ee=0;he[Ee]&&Ee<he.length;Ee++)he[Ee](e.selectedDates,e.input.value,e,Q);z==="onChange"&&(e.input.dispatchEvent(ht("change")),e.input.dispatchEvent(ht("input")))}}function ht(z){var Q=document.createEvent("Event");return Q.initEvent(z,!0,!0),Q}function Rt(z){for(var Q=0;Q<e.selectedDates.length;Q++){var he=e.selectedDates[Q];if(he instanceof Date&&eo(he,z)===0)return""+Q}return!1}function Lt(z){return e.config.mode!=="range"||e.selectedDates.length<2?!1:eo(z,e.selectedDates[0])>=0&&eo(z,e.selectedDates[1])<=0}function Ot(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(z,Q){var he=new Date(e.currentYear,e.currentMonth,1);he.setMonth(e.currentMonth+Q),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[Q].textContent=Fu(he.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=he.getMonth().toString(),z.value=he.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function zt(z){var Q=z||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(he){return e.formatDate(he,Q)}).filter(function(he,Ee,lt){return e.config.mode!=="range"||e.config.enableTime||lt.indexOf(he)===Ee}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function qt(z){z===void 0&&(z=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=zt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=zt(e.config.altFormat)),z!==!1&&st("onValueUpdate")}function Fi(z){var Q=Jr(z),he=e.prevMonthNav.contains(Q),Ee=e.nextMonthNav.contains(Q);he||Ee?ne(he?-1:1):e.yearElements.indexOf(Q)>=0?Q.select():Q.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Q.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Mi(z){z.preventDefault();var Q=z.type==="keydown",he=Jr(z),Ee=he;e.amPM!==void 0&&he===e.amPM&&(e.amPM.textContent=e.l10n.amPM[_o(e.amPM.textContent===e.l10n.amPM[0])]);var lt=parseFloat(Ee.getAttribute("min")),vt=parseFloat(Ee.getAttribute("max")),it=parseFloat(Ee.getAttribute("step")),wt=parseInt(Ee.value,10),Ht=z.delta||(Q?z.which===38?1:-1:0),Et=wt+it*Ht;if(typeof Ee.value<"u"&&Ee.value.length===2){var gt=Ee===e.hourElement,ei=Ee===e.minuteElement;Et<lt?(Et=vt+Et+_o(!gt)+(_o(gt)&&_o(!e.amPM)),ei&&A(void 0,-1,e.hourElement)):Et>vt&&(Et=Ee===e.hourElement?Et-vt-_o(!e.amPM):lt,ei&&A(void 0,1,e.hourElement)),e.amPM&&gt&&(it===1?Et+wt===23:Math.abs(Et-wt)>it)&&(e.amPM.textContent=e.l10n.amPM[_o(e.amPM.textContent===e.l10n.amPM[0])]),Ee.value=Lr(Et)}}return r(),e}function Jl(a,t){for(var e=Array.prototype.slice.call(a).filter(function(s){return s instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var o=e[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=hb(o,t||{}),n.push(o._flatpickr)}catch(s){console.error(s)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return Jl(this,a)},HTMLElement.prototype.flatpickr=function(a){return Jl([this],a)});var On=function(a,t){return typeof a=="string"?Jl(window.document.querySelectorAll(a),t):a instanceof Node?Jl([a],t):Jl(a,t)};On.defaultConfig={},On.l10ns={en:pr({},dd),default:pr({},dd)},On.localize=function(a){On.l10ns.default=pr(pr({},On.l10ns.default),a)},On.setDefaults=function(a){On.defaultConfig=pr(pr({},On.defaultConfig),a)},On.parseDate=Qh({}),On.formatDate=nv({}),On.compareDates=eo,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(a){return Jl(this,a)}),Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof a=="string"?parseInt(a,10):a))},typeof window<"u"&&(window.flatpickr=On);const cd=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"}));var tf,nf;const fb=(tf=cd==null?void 0:On)!==null&&tf!==void 0?tf:cd,ov=(nf=hs==null?void 0:Us)!==null&&nf!==void 0?nf:hs;class sv{constructor(t){this.translaterService=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new Nn}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return this.inputFilterType==="compound"?Nt.empty:this.gridOptions.defaultFilterRangeOperator||Nt.rangeInclusive}get flatpickrOptions(){return this._flatpickrOptions||{}}get operator(){var t,e;return this.inputFilterType==="compound"?this._operator||this.columnFilter.operator||this.defaultOperator:(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.inputFilterType==="compound"?this._operator=t:this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.inputFilterType==="compound"&&(this.operator=t.operator||""),this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this.filterContainerElm=t.filterContainerElm;const n=this.inputFilterType==="compound"?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(n),this._bindEventService.bind(this._filterDivInputElm,"keyup",this.onTriggerEvent.bind(this)),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(t=!0){this.flatInstance&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.flatInstance.input&&this.flatInstance.clear()),this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")}destroy(){var t,e,n,r,o;this._bindEventService.unbindAll(),typeof((t=this.flatInstance)===null||t===void 0?void 0:t.destroy)=="function"&&(this.flatInstance.destroy(),this.flatInstance.element&&Ch(this.flatInstance)),on(this.filterContainerElm),on(this._filterDivInputElm),(e=this._filterDivInputElm)===null||e===void 0||e.remove(),(n=this.filterContainerElm)===null||n===void 0||n.remove(),(r=this._selectOperatorElm)===null||r===void 0||r.remove(),(o=this._filterElm)===null||o===void 0||o.remove()}hide(){var t;typeof((t=this.flatInstance)===null||t===void 0?void 0:t.close)=="function"&&this.flatInstance.close()}show(){var t;typeof((t=this.flatInstance)===null||t===void 0?void 0:t.open)=="function"&&this.flatInstance.open()}getValues(){return this._currentDateOrDates}setValues(t,e){let n;this.inputFilterType==="compound"?n=Array.isArray(t)?t[0]:t:typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"&&t[0].indexOf("..")>0?n=typeof t=="string"?[t]:t[0].split(".."):Array.isArray(t)&&(n=t),this.flatInstance&&(this._currentDateOrDates=t&&n?n:void 0,this.flatInstance.setDate(this._currentDateOrDates||""));const r=this.getValues()||[];if(this.getValues()||Array.isArray(r)&&r.length>0&&t?(this._filterElm.classList.add("filled"),this._filterDivInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")),this.operator=e||this.defaultOperator,e&&this._selectOperatorElm){const o=zl(this.operator);this._selectOperatorElm.value=o}}buildDatePickerInput(t){var e,n,r,o,s,l,u,h,c,p;const m=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",v=Ua(this.columnFilter.type||this.columnDef.type||ie.dateIso),_=Ua(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||ie.dateUtc),C=(o=(r=this.columnFilter)===null||r===void 0?void 0:r.filterOptions)!==null&&o!==void 0?o:{};let x=((s=C==null?void 0:C.locale)!==null&&s!==void 0?s:(u=(l=this.translaterService)===null||l===void 0?void 0:l.getCurrentLanguage)===null||u===void 0?void 0:u.call(l))||this.gridOptions.locale||"en";(x==null?void 0:x.length)>2&&(x=x.substring(0,2));let S;if(this.inputFilterType==="compound")t&&(S=t,this._currentDateOrDates=t);else if(typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"&&t[0].indexOf("..")>0?S=typeof t=="string"?[t]:t[0].split(".."):Array.isArray(t)&&(S=t),Array.isArray(S)){this._currentDateOrDates=S;const P=Fr(this.columnFilter.type||this.columnDef.type||ie.dateIso);this._currentDateStrings=S.map(M=>ov(M).format(P))}const E={defaultDate:S||"",altInput:!0,altFormat:_,dateFormat:v,mode:this.inputFilterType==="range"?"range":"single",wrap:!0,closeOnSelect:!0,locale:x,onChange:(P,M)=>{if(this.inputFilterType==="compound")this._currentValue=M,this._currentDateOrDates=Array.isArray(P)&&P[0]||void 0;else if(Array.isArray(P)){this._currentDateOrDates=P;const Z=Fr(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||ie.dateIso);this._currentDateStrings=P.map(L=>ov(L).format(Z)),this._currentValue=this._currentDateStrings.join("..")}const B=E.enableTime?new Event("keyup"):void 0;this.onTriggerEvent(B)},errorHandler:P=>{P.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${x}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};_&&(_==="Z"||_.toLowerCase().includes("h"))&&(E.enableTime=!0),this._flatpickrOptions={...E,...C};let D=(c=(h=this.gridOptions)===null||h===void 0?void 0:h.defaultFilterPlaceholder)!==null&&c!==void 0?c:"";!((p=this.columnFilter)===null||p===void 0)&&p.placeholder&&(D=this.columnFilter.placeholder);const A=Re("div",{className:"flatpickr"});return this.inputFilterType==="range"&&A.classList.add("search-filter",`filter-${m}`),A.appendChild(Re("input",{type:"text",className:"form-control",placeholder:D,dataset:{input:"",columnid:`${m}`}})),this.flatInstance=fb(A,this._flatpickrOptions),A}getOperatorOptionValues(){var t;return!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList?this.columnFilter.compoundOperatorList:Xh(this.gridOptions,this.translaterService)}createDomFilterElement(t){var e,n;const r=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";if(on(this.filterContainerElm),this._filterDivInputElm=this.buildDatePickerInput(t),this.inputFilterType==="range")return Array.isArray(t)&&t.length>0&&t[0]!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=t,this._currentValue=t[0]),this._filterDivInputElm&&this.filterContainerElm.appendChild(this._filterDivInputElm),this._filterDivInputElm;{this._selectOperatorElm=jh(this.getOperatorOptionValues(),this.gridOptions);const o=Re("div",{className:`form-group search-filter filter-${r}`}),s=Re("div",{className:"input-group flatpickr"},o);if(Re("div",{className:"input-group-addon input-group-prepend operator"},s).appendChild(this._selectOperatorElm),s.appendChild(this._filterDivInputElm),this.operator){const u=zl(this.operator);this._selectOperatorElm.value=u}return t!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=t,this._currentValue=t),o&&this.filterContainerElm.appendChild(o),o}}onTriggerEvent(t){var e,n;if(this._clearFilterTriggered)this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else if(this.inputFilterType==="range")this._currentDateStrings?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.callback(t,{columnDef:this.columnDef,searchTerms:this._currentDateStrings?this._currentDateStrings:[this._currentValue],operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery});else if(this.inputFilterType==="compound"&&this._selectOperatorElm){const r=this._selectOperatorElm.value;this._currentValue?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),(!((n=(e=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&e!==void 0?e:this.gridOptions.skipCompoundOperatorFilterWithNullInput)!==null&&n!==void 0?n:this.gridOptions.skipCompoundOperatorFilterWithNullInput===void 0)||this._currentDateOrDates!==void 0)&&this.callback(t,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:r||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}}class pb extends sv{constructor(t){super(t),this.translaterService=t,this.inputFilterType="compound"}}class Xs{constructor(t){this.translaterService=t,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new Nn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get defaultOperator(){return Nt.empty}get inputType(){return this._inputType}set inputType(t){this._inputType=t}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}init(t){var e,n,r,o,s,l;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.inputFilterType==="compound"&&(this.operator=t.operator||""),this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this._cellContainerElm=t.filterContainerElm;const u=(n=this.gridOptions)===null||n===void 0?void 0:n.backendServiceApi;this._debounceTypingDelay=(l=u?(r=u==null?void 0:u.filterTypingDebounce)!==null&&r!==void 0?r:(o=this.gridOptions)===null||o===void 0?void 0:o.defaultBackendServiceFilterTypingDebounce:(s=this.gridOptions)===null||s===void 0?void 0:s.filterTypingDebounce)!==null&&l!==void 0?l:0;const h=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(h),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),this.inputFilterType==="compound"&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(t=!0){this._filterInputElm&&(this._shouldTriggerQuery=t,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.inputFilterType==="compound"&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0,this._filterContainerElm.classList.remove("filled")),this._filterInputElm.classList.remove("filled"),this.onTriggerEvent(void 0,!0))}destroy(){var t,e,n,r;this._bindEventService.unbindAll(),(e=(t=this._selectOperatorElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t),(r=(n=this._filterInputElm)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n)}getValues(){return this._filterInputElm.value}setValues(t,e){const n=Array.isArray(t)?t:[t];let r="";for(const o of n)this.inputFilterType==="single"?r=e?this.addOptionalOperatorIntoSearchString(o,e):o:r=`${o}`,this._filterInputElm.value=`${r??""}`,this._currentValue=this._filterInputElm.value;if(this.getValues()!==""?(this._filterContainerElm.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm.classList.remove("filled"),this._filterInputElm.classList.remove("filled")),this.operator=e||this.defaultOperator,e&&this._selectOperatorElm){const o=zl(this.operator);this._selectOperatorElm.value=o}}addOptionalOperatorIntoSearchString(t,e){let n="",r="",o=t==null?"":`${t}`;if(e&&o){switch(e){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":n=e;break;case"EndsWith":case"*z":n="*";break;case"StartsWith":case"a*":r="*";break}o=`${n}${o}${r}`}return o}getCompoundOperatorOptionValues(){var t;const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:ie.string;let n=[];if(!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList)return this.columnFilter.compoundOperatorList;switch(e){case ie.string:case ie.text:case ie.readonly:case ie.password:n=ob(this.gridOptions,this.translaterService);break;default:n=Xh(this.gridOptions,this.translaterService);break}return n}createDomFilterElement(t){var e,n,r,o,s,l,u;const h=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";on(this._cellContainerElm);let c=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.defaultFilterPlaceholder)!==null&&o!==void 0?o:"";!((s=this.columnFilter)===null||s===void 0)&&s.placeholder&&(c=this.columnFilter.placeholder);const p=`${t??""}`;if(this._filterInputElm=Re("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:c,ariaLabel:(u=(l=this.columnFilter)===null||l===void 0?void 0:l.ariaLabel)!==null&&u!==void 0?u:`${Kr(h+"")} Search Filter`,className:`form-control filter-${h}`,value:p,dataset:{columnid:`${h}`}}),t&&this._filterInputElm.classList.add("filled"),t!==void 0&&(this._currentValue=p),this.inputFilterType==="single")this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=jh(this.getCompoundOperatorOptionValues(),this.gridOptions),this._filterContainerElm=Re("div",{className:`form-group search-filter filter-${h}`});const m=Re("div",{className:"input-group"},this._filterContainerElm);Re("div",{className:"input-group-addon input-group-prepend operator"},m).appendChild(this._selectOperatorElm),m.appendChild(this._filterInputElm),m.appendChild(Re("span")),this.operator&&(this._selectOperatorElm.value=zl(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(t,e=!1){var n,r,o,s,l;if(e)this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterContainerElm.classList.remove("filled");else{const u=(n=t==null?void 0:t.type)!==null&&n!==void 0?n:"",h=(o=(r=this._selectOperatorElm)===null||r===void 0?void 0:r.value)!==null&&o!==void 0?o:this.operator;let c=this._filterInputElm.value;const p=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof c=="string"&&p&&(c=c.trim()),((s=t==null?void 0:t.target)===null||s===void 0?void 0:s.tagName.toLowerCase())!=="select"&&(this._currentValue=c),c===""?this._filterContainerElm.classList.remove("filled"):this._filterContainerElm.classList.add("filled");const m={columnDef:this.columnDef,operator:h,searchTerms:c?[c]:null,shouldTriggerQuery:this._shouldTriggerQuery},v=u==="keyup"&&(t==null?void 0:t.key)!=="Enter"?this._debounceTypingDelay:0,_=(l=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&l!==void 0?l:this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.inputFilterType==="single"||!_||this._currentValue!==void 0)&&(v>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>this.callback(t,m),v)):this.callback(t,m))}this._shouldTriggerQuery=!0}}class lv extends Xs{constructor(t){super(t),this.translaterService=t,this.inputType="text",this.inputFilterType="compound"}}class mb extends Xs{constructor(t){super(t),this.translaterService=t,this.inputType="number",this.inputFilterType="compound"}}class vb extends Xs{constructor(t){super(t),this.translaterService=t,this.inputType="password",this.inputFilterType="compound"}}const rf="#86bff8",Mu=0,gb=20;class of{constructor(t){this.translaterService=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=rf,this.sliderType="double",this.searchTerms=[],this._bindEventService=new Nn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return this.sliderType==="compound"?Nt.empty:this.sliderType==="single"?Nt.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||Nt.rangeInclusive}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get sliderOptions(){return this._sliderOptions}get operator(){var t,e;return this._operator||((e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator)}set operator(t){this._operator=t}init(t){var e;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.operator=t.operator||"",this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this._argFilterContainerElm=t.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||rf,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(t=!0){var e,n,r,o,s,l;if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[];const u=+((e=Jn(this.columnFilter,"sliderStartValue"))!==null&&e!==void 0?e:je.SLIDER_DEFAULT_MIN_VALUE),h=+((n=Jn(this.columnFilter,"sliderEndValue"))!==null&&n!==void 0?n:je.SLIDER_DEFAULT_MAX_VALUE);this.sliderType==="double"?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${u}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${h}`),this._currentValues=[u,h],(r=this._sliderLeftInputElm)===null||r===void 0||r.dispatchEvent(new Event("change")),(o=this._sliderRightInputElm)===null||o===void 0||o.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${u}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=u,(s=this._sliderRightInputElm)===null||s===void 0||s.dispatchEvent(new Event("change"))),((l=Jn(this.columnFilter,"hideSliderNumber"))!==null&&l!==void 0?l:Jn(this.columnFilter,"hideSliderNumbers"))||(this.sliderType==="double"?this.renderSliderValues(u,h):this.renderSliderValues(void 0,u)),this._divContainerFilterElm.classList.remove("filled"),this._filterElm.classList.remove("filled"),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:t,searchTerms:[]})}}destroy(){var t,e,n;this._bindEventService.unbindAll(),(t=this._sliderTrackElm)===null||t===void 0||t.remove(),(e=this._sliderLeftInputElm)===null||e===void 0||e.remove(),(n=this._sliderRightInputElm)===null||n===void 0||n.remove()}renderSliderValues(t,e){var n,r;!((n=this._leftSliderNumberElm)===null||n===void 0)&&n.textContent&&t&&(this._leftSliderNumberElm.textContent=t.toString()),!((r=this._rightSliderNumberElm)===null||r===void 0)&&r.textContent&&e&&(this._rightSliderNumberElm.textContent=e.toString())}getValues(){return this.sliderType==="double"?this._currentValues:this._currentValue}setValues(t,e){var n;if(t){let s=[];const l=Array.isArray(t)?t==null?void 0:t[0]:t;if(Array.isArray(t)&&t.length===2?s=t:typeof l=="string"&&l.indexOf("..")>0?(s=l.split(".."),this._currentValue=+((n=s==null?void 0:s[0])!==null&&n!==void 0?n:0)):(qd(l)||l==="")&&(this._currentValue=l===null?void 0:+l,s=[l]),this.sliderType!=="double"&&this._sliderRightInputElm)this._sliderRightInputElm.value=typeof t=="string"?t:`${l}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(s)&&s.length===2&&!Jn(this.columnFilter,"hideSliderNumbers")){const[u,h]=s;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(u??je.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(h??je.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...s)}}else this._currentValue=void 0,this._currentValues=void 0;const r=this.getValues();if((r===void 0?[]:Array.isArray(r)?r:[r]).length>0?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),e!==void 0&&(this.operator=e),this.operator&&this._selectOperatorElm){const s=zl(this.operator);this._selectOperatorElm.value=s}}createDomFilterElement(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D;const A=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",P=+((o=(r=this.columnFilter)===null||r===void 0?void 0:r.minValue)!==null&&o!==void 0?o:je.SLIDER_DEFAULT_MIN_VALUE),M=+((l=(s=this.columnFilter)===null||s===void 0?void 0:s.maxValue)!==null&&l!==void 0?l:je.SLIDER_DEFAULT_MAX_VALUE),B=+((h=(u=this.columnFilter)===null||u===void 0?void 0:u.valueStep)!==null&&h!==void 0?h:je.SLIDER_DEFAULT_STEP);on(this._argFilterContainerElm);const Z=+((p=(c=Array.isArray(t)&&(t==null?void 0:t[0]))!==null&&c!==void 0?c:Jn(this.columnFilter,"sliderStartValue"))!==null&&p!==void 0?p:P),L=+((v=(m=Array.isArray(t)&&(t==null?void 0:t[1]))!==null&&m!==void 0?m:Jn(this.columnFilter,"sliderEndValue"))!==null&&v!==void 0?v:M);if(this._sliderRangeContainElm=Re("div",{className:`filter-input filter-${A} slider-input-container slider-values`,title:this.sliderType==="double"?`${Z} - ${L}`:`${Z}`}),this._sliderTrackElm=Re("div",{className:"slider-track"}),this.sliderType==="compound"){const U=Re("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=jh(this.getOperatorOptionValues(),this.gridOptions),U.appendChild(this._selectOperatorElm)}this.sliderType==="double"&&(this._sliderLeftInputElm=Re("input",{type:"range",className:"slider-filter-input",ariaLabel:(C=(_=this.columnFilter)===null||_===void 0?void 0:_.ariaLabel)!==null&&C!==void 0?C:`${Kr(A+"")} Search Filter`,defaultValue:`${Z}`,value:`${Z}`,min:`${P}`,max:`${M}`,step:`${B}`}));const de=this.sliderType==="double"?L:Z;this._sliderRightInputElm=Re("input",{type:"range",className:"slider-filter-input",ariaLabel:(S=(x=this.columnFilter)===null||x===void 0?void 0:x.ariaLabel)!==null&&S!==void 0?S:`${Kr(A+"")} Search Filter`,defaultValue:`${de}`,value:`${de}`,min:`${P}`,max:`${M}`,step:`${B}`});const be=(E=Jn(this.columnFilter,"hideSliderNumber"))!==null&&E!==void 0?E:Jn(this.columnFilter,"hideSliderNumbers"),J=be?"":"input-group";if(this._divContainerFilterElm=Re("div",{className:`${J} search-filter slider-container slider-values filter-${A}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),this.sliderType==="double"&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),be)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let U;this.sliderType==="compound"&&this._selectOperatorElm?(U=Re("span",{className:"input-group-addon input-group-prepend operator"}),U.appendChild(this._selectOperatorElm)):this.sliderType==="double"&&(U=Re("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=Re("span",{className:`input-group-text lowest-range-${A}`,textContent:`${Z}`}),U.appendChild(this._leftSliderNumberElm));const F=Re("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=Re("span",{className:`input-group-text highest-range-${A}`,textContent:`${de}`},F),U&&this._divContainerFilterElm.appendChild(U),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(F)}return this._sliderOptions={minValue:P,maxValue:M,step:B},this._currentValues=[Z,L],Array.isArray(t)&&t.length>0&&t[0]!==""&&(this._divContainerFilterElm.classList.add("filled"),this._currentValue=Z),(Jn(this.columnFilter,"sliderStartValue")!==void 0||((D=this.columnFilter)===null||D===void 0?void 0:D.minValue)!==void 0)&&(this._currentValue=Z),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),this.sliderType==="compound"&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):this.sliderType==="double"&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){var t;return!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList?this.columnFilter.compoundOperatorList:Xh(this.gridOptions,this.translaterService)}onValueChanged(t){var e,n,r,o,s,l,u,h,c;const p=parseInt((n=(e=this._sliderRightInputElm)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"",10);let m,v;if(this.sliderType==="compound"||this.sliderType==="single")((o=(r=t==null?void 0:t.target)===null||r===void 0?void 0:r.tagName)===null||o===void 0?void 0:o.toLowerCase())!=="select"&&(this._currentValue=+p),m=this._currentValue,v=[m||"0"];else if(this.sliderType==="double"){const C=[parseInt((l=(s=this._sliderLeftInputElm)===null||s===void 0?void 0:s.value)!==null&&l!==void 0?l:"",10),p];m=C.join(".."),v=C}if(this._clearFilterTriggered)this._filterElm.classList.remove("filled"),this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const _=(h=(u=this._selectOperatorElm)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:this.operator;m===""?this._filterElm.classList.remove("filled"):this._filterElm.classList.add("filled");const C=(c=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&c!==void 0?c:this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.sliderType!=="compound"||!C||this._currentValue!==void 0)&&this.callback(t,{columnDef:this.columnDef,operator:_||"",searchTerms:v,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},{...new Slick.EventData,target:this._argFilterContainerElm})}changeBothSliderFocuses(t){var e,n;const r=t?"add":"remove";(e=this._sliderLeftInputElm)===null||e===void 0||e.classList[r]("focus"),(n=this._sliderRightInputElm)===null||n===void 0||n.classList[r]("focus")}slideLeftInputChanged(){var t,e,n,r;const o=parseInt((e=(t=this._sliderLeftInputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"",10),s=parseInt((r=(n=this._sliderRightInputElm)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"",10);this._sliderLeftInputElm&&s-o<=Jn(this.columnFilter,"stopGapBetweenSliderHandles",Mu)&&(this._sliderLeftInputElm.value=String(o-Jn(this.columnFilter,"stopGapBetweenSliderHandles",Mu))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-gb?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(o,s)}slideRightInputChanged(){var t,e,n,r;const o=parseInt((e=(t=this._sliderLeftInputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"",10),s=parseInt((r=(n=this._sliderRightInputElm)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"",10);this.sliderType==="double"&&this._sliderRightInputElm&&s-o<=Jn(this.columnFilter,"stopGapBetweenSliderHandles",Mu)&&(this._sliderRightInputElm.value=String(o+Jn(this.columnFilter,"stopGapBetweenSliderHandles",Mu))),this.sliderLeftOrRightChanged(o,s)}sliderLeftOrRightChanged(t,e){var n,r,o,s,l,u,h;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title=this.sliderType==="double"?`${t} - ${e}`:`${e}`,((n=Jn(this.columnFilter,"hideSliderNumber"))!==null&&n!==void 0?n:Jn(this.columnFilter,"hideSliderNumbers"))||(!((r=this._leftSliderNumberElm)===null||r===void 0)&&r.textContent&&(this._leftSliderNumberElm.textContent=(s=(o=this._sliderLeftInputElm)===null||o===void 0?void 0:o.value)!==null&&s!==void 0?s:""),!((l=this._rightSliderNumberElm)===null||l===void 0)&&l.textContent&&(this._rightSliderNumberElm.textContent=(h=(u=this._sliderRightInputElm)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:"")),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},{...new Slick.EventData,target:this._argFilterContainerElm})}sliderTrackClicked(t){t.preventDefault();const e=t.offsetX,n=this._sliderTrackElm.offsetWidth,r=(e+0)*100/n;this._sliderRightInputElm&&this.sliderType!=="double"?(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(r<=50?(this._sliderLeftInputElm.value=`${r}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){var t,e,n,r;if(Jn(this.columnFilter,"enableSliderTrackColoring")&&this._sliderRightInputElm){let o=0;this._sliderLeftInputElm&&(o=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/((e=(t=this.sliderOptions)===null||t===void 0?void 0:t.maxValue)!==null&&e!==void 0?e:0-+this._sliderLeftInputElm.min)*100);const s=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/((r=(n=this.sliderOptions)===null||n===void 0?void 0:n.maxValue)!==null&&r!==void 0?r:0-+this._sliderRightInputElm.min)*100,l="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,Jn(this.columnFilter,"sliderTrackFilledColor")||this._sliderTrackFilledColor||rf).replace(/%p1/g,`${o}%`).replace(/%p2/g,`${s}%`);this._sliderTrackElm.style.background=l,this._sliderOptions.sliderTrackBackground=l}}}class _b extends of{constructor(t){super(t),this.translaterService=t,this.sliderType="compound"}}class bb extends sv{constructor(t){super(t),this.translaterService=t,this.inputFilterType="range"}}class Cb extends Xs{constructor(t){super(t),this.translaterService=t,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(t){var e,n,r,o;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this._cellContainerElm=t.filterContainerElm,!((n=(e=this.columnDef)===null||e===void 0?void 0:e.params)===null||n===void 0)&&n.mask?this._inputMask=this.columnDef.params.mask:!((o=(r=this.columnFilter)===null||r===void 0?void 0:r.params)===null||o===void 0)&&o.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error(`[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params
        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]`);const s=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(s),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(t,e=!1){var n,r,o;let s="";if(!((n=t==null?void 0:t.target)===null||n===void 0)&&n.value){let l=(o=(r=t==null?void 0:t.target)===null||r===void 0?void 0:r.value)!==null&&o!==void 0?o:"";const u=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof l=="string"&&u&&(l=l.trim());const h=this.unmaskValue(l),c=this.maskValue(h);s=h,(t==null?void 0:t.keyCode)>=48&&(this._filterInputElm.value=c,t.preventDefault())}e?(this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(t,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(t){let e=0,n="";return this._inputMask&&(n=this._inputMask.replace(/[09A]/gi,r=>((r==="0"||r==="9")&&/\d+/g.test(t[e])||r.toUpperCase()==="A"&&/[^\d]+/gi.test(t[e]))&&t[e++]||"")),n}unmaskValue(t){const e=t.replace(/[^0-9a-z]*/gi,""),n=this._inputMask.replace(/[^0-9a-z]*/gi,"");let r="";for(let o=0;o<n.length;o++)e[o]&&((n[o]==="0"||n[o]==="9")&&/\d+/g.test(e[o])||n[o].toUpperCase()==="A"&&/[^\d]+/gi.test(e[o]))&&(r+=e[o]);return r}}class yb extends Xs{constructor(t){super(t),this.translaterService=t,this.inputType="number"}}class Eb extends Xs{constructor(t){super(t),this.translaterService=t,this.inputType="password"}}var Sb=Object.defineProperty,wb=(a,t,e)=>t in a?Sb(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,Gt=(a,t,e)=>(wb(a,typeof t!="symbol"?t+"":t,e),e),xb=class{constructor(a){Gt(this,"_distinctEvent"),Gt(this,"_boundedEvents",[]),this._distinctEvent=(a==null?void 0:a.distinctEvent)??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(a,t,e,n){let r=Array.isArray(t)?t:[t];if(a!=null&&a.forEach)a==null||a.forEach(o=>{for(let s of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(o,s))&&(o.addEventListener(s,e,n),this._boundedEvents.push({element:o,eventName:s,listener:e}))});else for(let o of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(a,o))&&(a.addEventListener(o,e,n),this._boundedEvents.push({element:a,eventName:o,listener:e}))}hasBinding(a,t){return this._boundedEvents.some(e=>e.element===a&&(!t||e.eventName===t))}unbind(a,t,e){var n;if(a){let r=Array.isArray(a)?a:[a],o=Array.isArray(t)?t||"":[t||""];for(let s of r){e||(e=this._boundedEvents.find(l=>{if(l.element===s&&(!t||l.eventName===t))return l.listener}));for(let l of o)(n=s==null?void 0:s.removeEventListener)==null||n.call(s,l,e)}}}unbindAll(){for(;this._boundedEvents.length>0;){let a=this._boundedEvents.pop(),{element:t,eventName:e,listener:n}=a;this.unbind(t,e,n)}}},av=typeof window<"u"&&window.multipleSelect!==void 0?window.multipleSelect:{locales:{}};av.locales={"en-US":{formatSelectAll(){return"[Select all]"},formatAllSelected(){return"All selected"},formatCountSelected(a,t){return`${a} of ${t} selected`},formatNoMatchesFound(){return"No matches found"},formatOkButton(){return"OK"}}};var dv=av.locales,Tb=50,Ob=4,uv={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(a){let{text:t,label:e,search:n}=a;return(e||t||"").includes(n)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,cssStyler:()=>null,styler:()=>!1,textTemplate:a=>a.innerHTML.trim(),labelTemplate:a=>a.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1},Ab=["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"];Object.assign(uv,dv["en-US"]);var kb={BLOCK_ROWS:Tb,CLUSTER_BLOCKS:Ob,DEFAULTS:uv,METHODS:Ab},Lo=kb;function Ib(a,t,e=!1){let n=Object.keys(a),r=Object.keys(t);if(e&&n.length!==r.length)return!1;for(let o of n)if(r.includes(o)&&a[o]!==t[o])return!1;return!0}function sf(a){let t=()=>{let r={};for(let o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=sf(a[o]));return r},e=()=>a.map(r=>sf(r)),n=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();return n==="object"?t():n==="array"?e():a}function lf(a){return a!=null&&a!==""}function Db(a,t){return typeof a=="object"?Object.fromEntries(t?Object.entries(a).filter(([e,n])=>!lf(n)&&!t.includes(e)||lf(n)):Object.entries(a).filter(([e,n])=>lf(n))):a}function Rb(a){let t=0;return a.forEach((e,n)=>{e.type==="optgroup"?(e._key=`group_${n}`,e.visible=typeof e.visible>"u"?!0:e.visible,e.children.forEach((r,o)=>{r&&(r.visible=typeof(r==null?void 0:r.visible)>"u"?!0:r.visible,r.divider||(r._key=`option_${n}_${o}`,t+=1))})):(e.visible=typeof e.visible>"u"?!0:e.visible,e.divider||(e._key=`option_${n}`,t+=1))}),t}function Nu(a,t,e){if(Array.isArray(a))for(let n of a){if(n[t]===e||n[t]===`${+n[t]}`&&+n[t]===e)return n;if(n.type==="optgroup"){for(let r of n.children)if(r&&(r[t]===e||r[t]===`${+r[t]}`&&+r[t]===e))return r}}}function Pb(a){return a.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,"")}function af(a){return Object.keys(a).forEach(t=>a[t]===void 0?delete a[t]:""),a}function Fb(a){return a.replace(/[\W_]+(.)/g,(t,e)=>e.toUpperCase())}function ea(a){return typeof a!="string"?a:a.normalize?a.normalize("NFD").replace(/[\u0300-\u036F]/g,""):[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}].reduce((t,{letters:e,base:n})=>t.replace(e,n),a)}function cv(a){let t={};if(a){let e=a.replace(/\s/g,"").split(";");for(let n of e){let[r,o]=n.trim().split(":");r&&(t[Fb(r)]=o.trim())}console.warn("[multiple-select-vanilla] Please note that `styler` is deprecated, please migrate to `cssStyler` when possible.")}return t}function df(a){let t=0,e=0,n=0,r=0,o=window.innerHeight??0,s=window.innerWidth??0,l=Nb(),u=l.top,h=l.left,c=hf(a);if(c){let p=c.top??0,m=c.left??0;e=p-u,t=o-(p-u),n=m-h,r=s-(m-h)}return{top:e,bottom:t,left:n,right:r}}function Hr(a,t,e){let n=document.createElement(a);return t&&Object.keys(t).forEach(r=>{let o=t[r];typeof o=="object"?Object.assign(n[r],o):n[r]=t[r]}),e!=null&&e.appendChild&&e.appendChild(n),n}function hv(a,t,e){var o;let n="";(o=a.props)!=null&&o.innerHTML&&(n=a.props.innerHTML,delete a.props.innerHTML);let r=Hr(a.tagName,Db(a.props,["class","title","style"]),t);if(n&&(r.innerHTML=n),a.attrs)for(let s of Object.keys(a.attrs))r.setAttribute(s,a.attrs[s]);if(a.children)for(let s of a.children)hv(s,r);return t==null||t.appendChild(r),r}function uf(a){return a.hasOwnProperty("tagName")?hv(a):document.createElement("li")}function cf(a){for(;a!=null&&a.firstChild;)a.lastChild&&a.removeChild(a.lastChild);return a}function hf(a){var s;if(!a)return;let t=(s=a==null?void 0:a.getBoundingClientRect)==null?void 0:s.call(a),e=0,n=0,r=0,o=0;return(t==null?void 0:t.top)!==void 0&&t.left!==void 0&&(e=t.top+window.pageYOffset,n=t.left+window.pageXOffset,o=t.right,r=t.bottom),{top:e,left:n,bottom:r,right:o}}function Lu(a,t,e){let n=parseFloat(a.style[e]);if(!n||isNaN(n)){switch(t){case"outer":n=a[e==="width"?"offsetWidth":"offsetHeight"];break;case"scroll":n=a[e==="width"?"scrollWidth":"scrollHeight"];break;case"inner":default:n=a[e==="width"?"clientWidth":"clientHeight"];break}n=a.getBoundingClientRect()[e]}if(!n||isNaN(n)){let r=a.style.display,o=a.style.position;a.style.display="block",a.style.position="absolute";let s=window.getComputedStyle(a)[e];n=parseFloat(s),isNaN(n)&&(n=0),a.style.display=r,a.style.position=o}return n||0}function fv(a,t){let e=null,n=a==null?void 0:a.parentElement;for(;n;){let[r,o,s,l]=t.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(s&&l)for(let u of l.replace(s,"").split(" "))n.classList.contains(u)&&(o?(n==null?void 0:n.tagName.toLowerCase())===o&&(e=n):e=n);n=n.parentElement}return e}function Mb(a,t){var e;(e=a.parentNode)==null||e.insertBefore(t,a.nextSibling)}function pv(a,t){a!=null&&a.style&&(a.style.display=a.style.display==="none"&&t!==!1||t===!0?"block":"none")}function Nb(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}var Lb=class{constructor(a){var e;Gt(this,"cache"),Gt(this,"clusterRows"),Gt(this,"dataStart"),Gt(this,"dataEnd"),Gt(this,"rows"),Gt(this,"scrollEl"),Gt(this,"blockHeight"),Gt(this,"clusterHeight"),Gt(this,"contentEl"),Gt(this,"parentEl"),Gt(this,"itemHeight"),Gt(this,"lastCluster"),Gt(this,"scrollTop"),Gt(this,"destroy"),Gt(this,"callback"),Gt(this,"sanitizer"),this.rows=a.rows,this.scrollEl=a.scrollEl,this.contentEl=a.contentEl,this.parentEl=(e=a.contentEl)==null?void 0:e.parentElement,this.callback=a.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let t=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",t,!1),this.destroy=()=>{cf(this.contentEl),this.scrollEl.removeEventListener("scroll",t,!1)}}initDOM(a){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let o=uf(a[0]);this.contentEl.appendChild(o),this.contentEl.appendChild(o),this.contentEl.appendChild(o),this.cache.data=[a[0]],this.getRowsHeight()}let t=this.initData(a,this.getNum()),e=this.checkChanges("data",t.rows),n=this.checkChanges("top",t.topOffset),r=this.checkChanges("bottom",t.bottomOffset);cf(this.contentEl),e&&n?(t.topOffset&&this.contentEl.appendChild(this.getExtra("top",t.topOffset)),t.rows.forEach(o=>this.contentEl.appendChild(uf(o))),t.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",t.bottomOffset))):r&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${t.bottomOffset}px`)}getRowsHeight(){var a;if(typeof this.itemHeight>"u"){let t=((a=this.parentEl)==null?void 0:a.style.display)||"";this.parentEl&&(t===""||t==="none")&&(this.parentEl.style.display="block");let e=this.contentEl.children,n=e[Math.floor(e.length/2)];this.itemHeight=n.offsetHeight,this.parentEl&&(this.parentEl.style.display=t)}this.blockHeight=this.itemHeight*Lo.BLOCK_ROWS,this.clusterRows=Lo.BLOCK_ROWS*Lo.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*Lo.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let a=(this.clusterHeight||0)-(this.blockHeight||0);return a&&Math.floor(this.scrollTop/a)||0}initData(a,t){if(a.length<Lo.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:a};let e=Math.max((this.clusterRows-Lo.BLOCK_ROWS)*t,0),n=e+this.clusterRows,r=Math.max(e*this.itemHeight,0),o=Math.max((a.length-n)*this.itemHeight,0),s=[],l=e;r<1&&l++;for(let u=e;u<n;u++)a[u]&&s.push(a[u]);return this.dataStart=e,this.dataEnd=n,{topOffset:r,bottomOffset:o,rowsAbove:l,rows:s}}checkChanges(a,t){let e=t!==this.cache[a];return this.cache[a]=t,e}getExtra(a,t){let e=document.createElement("li");return e.className=`virtual-scroll-${a}`,t&&(e.style.height=`${t}px`),e}},Hb=class{constructor(a,t){this.elm=a,Gt(this,"_bindEventService"),Gt(this,"allSelected",!1),Gt(this,"fromHtml",!1),Gt(this,"choiceElm"),Gt(this,"closeElm"),Gt(this,"closeSearchElm"),Gt(this,"filterText",""),Gt(this,"updateData",[]),Gt(this,"data",[]),Gt(this,"dataTotal"),Gt(this,"dropElm"),Gt(this,"okButtonElm"),Gt(this,"filterParentElm"),Gt(this,"ulElm"),Gt(this,"parentElm"),Gt(this,"labelElm"),Gt(this,"selectAllParentElm"),Gt(this,"selectAllElm"),Gt(this,"searchInputElm"),Gt(this,"selectGroupElms"),Gt(this,"selectItemElms"),Gt(this,"disableItemElms"),Gt(this,"noResultsElm"),Gt(this,"options"),Gt(this,"selectAllName",""),Gt(this,"selectGroupName",""),Gt(this,"selectItemName",""),Gt(this,"tabIndex"),Gt(this,"updateDataStart"),Gt(this,"updateDataEnd"),Gt(this,"virtualScroll"),Gt(this,"locales",{}),this.options=Object.assign({},Lo.DEFAULTS,this.elm.dataset,t),this._bindEventService=new xb({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(a=!0){var t,e,n,r,o;this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:a}),a&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.tabIndex&&(this.elm.tabIndex=+this.tabIndex),(t=this.virtualScroll)==null||t.destroy(),(e=this.dropElm)==null||e.remove(),(n=this.parentElm.parentNode)==null||n.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:a}),a&&((o=(r=this.options).onAfterHardDestroy)==null||o.call(r),Object.keys(this.options).forEach(s=>delete this[s])))}initLocale(){if(this.options.locale){let a=window.multipleSelect.locales,t=this.options.locale.split(/-|_/);if(t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),a[this.options.locale])Object.assign(this.options,a[this.options.locale]);else if(a[t.join("-")])Object.assign(this.options,a[t.join("-")]);else if(a[t[0]])Object.assign(this.options,a[t[0]]);else throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`)}}initContainer(){var r;let a=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),(r=this.labelElm)!=null&&r.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=Hr("div",{className:`ms-parent ${this.elm.className||""} ${this.options.classes}`,dataset:{test:"sel"}});let t=this.elm.getAttribute("title")||"";t&&(this.parentElm.title=t),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.tabIndex=this.elm.getAttribute("tabindex");let e="";this.tabIndex!==null&&(this.elm.tabIndex=-1,e=this.tabIndex&&`tabindex="${this.tabIndex}"`),this.choiceElm=Hr("button",{className:"ms-choice",type:"button"},this.parentElm),isNaN(e)&&(this.choiceElm.tabIndex=+e),this.choiceElm.appendChild(Hr("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&this.choiceElm.appendChild(Hr("div",{className:"icon-close"})),this.choiceElm.appendChild(Hr("div",{className:"icon-caret"})),this.dropElm=Hr("div",{className:`ms-drop ${this.options.position}`},this.parentElm),a&&(this.dropElm.dataset.name=a);let n=this.elm.getAttribute("data-test")||this.options.dataTest;n&&(this.parentElm.dataset.test=n,this.dropElm.dataset.test=n),this.closeElm=this.choiceElm.querySelector(".icon-close"),this.options.dropWidth&&(this.dropElm.style.width=typeof this.options.dropWidth=="string"?this.options.dropWidth:`${this.options.dropWidth}px`),Mb(this.elm,this.parentElm),this.elm.disabled&&this.choiceElm.classList.add("disabled"),this.selectAllName=`selectAll${a}`,this.selectGroupName=`selectGroup${a}`,this.selectItemName=`selectItem${a}`,this.options.keepOpen||(this._bindEventService.unbind(document.body,"click"),this._bindEventService.bind(document.body,"click",o=>{o.target===this.choiceElm||fv(o.target,".ms-choice")===this.choiceElm||(o.target===this.dropElm||fv(o.target,".ms-drop")!==this.dropElm&&o.target!==this.elm)&&this.options.isOpen&&this.close()}))}initData(){let a=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(t=>typeof t=="string"||typeof t=="number"?{text:t,value:t}:t);else if(typeof this.options.data=="object"){for(let[t,e]of Object.entries(this.options.data))a.push({value:t,text:`${e}`});this.data=a}}else this.elm.childNodes.forEach(t=>{let e=this.initRow(t);e&&a.push(e)}),this.options.data=a,this.data=a,this.fromHtml=!0;this.dataTotal=Rb(this.data||[])}initRow(a,t){var n,r;let e={};return((n=a.tagName)==null?void 0:n.toLowerCase())==="option"?(e.type="option",e.text=this.options.textTemplate(a),e.value=a.value,e.visible=!0,e.selected=!!a.selected,e.disabled=t||a.disabled,e.classes=a.getAttribute("class")||"",e.title=a.getAttribute("title")||"",a.dataset.value&&(e._value=a.dataset.value),Object.keys(a.dataset).length&&(e._data=a.dataset,e._data.divider&&(e.divider=e._data.divider)),e):((r=a.tagName)==null?void 0:r.toLowerCase())==="optgroup"?(e.type="optgroup",e.label=this.options.labelTemplate(a),e.visible=!0,e.selected=!!a.selected,e.disabled=a.disabled,e.children=[],Object.keys(a.dataset).length&&(e._data=a.dataset),a.childNodes.forEach(o=>{e.children.push(this.initRow(o,e.disabled))}),e):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close()))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let a=0;for(let t of this.data||[])t.type==="optgroup"?a+=t.children.length:a+=1;this.options.filter=a>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=Hr("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(Hr("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"🔎︎"})),this.options.showSearchClear&&this.filterParentElm.appendChild(Hr("span",{className:"icon-close"}))),this.options.selectAll&&!this.options.single){let a=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=Hr("div",{className:"ms-select-all"});let t=document.createElement("label");Hr("input",{type:"checkbox",ariaChecked:String(this.allSelected),checked:this.allSelected,dataset:{name:`selectAll${a}`}},t),t.appendChild(Hr("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(t),this.dropElm.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.dropElm.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=Hr("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){var e;let a=0,t=this.getListRows();if(this.options.selectAll&&!this.options.single&&(a=-1),t.length>Lo.BLOCK_ROWS*Lo.CLUSTER_BLOCKS){(e=this.virtualScroll)==null||e.destroy();let n=this.dropElm.style.display!=="none";n||(this.dropElm.style.left="-10000",this.dropElm.style.display="block");let r=()=>{this.virtualScroll&&(this.updateDataStart=this.virtualScroll.dataStart+a,this.updateDataEnd=this.virtualScroll.dataEnd+a,this.updateDataStart<0&&(this.updateDataStart=0),this.updateDataEnd>this.getDataLength()&&(this.updateDataEnd=this.getDataLength()))};this.ulElm&&(this.virtualScroll=new Lb({rows:t,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{r(),this.events()}})),r(),n||(this.dropElm.style.left="0",this.dropElm.style.display="none")}else this.ulElm&&(cf(this.ulElm),t.forEach(n=>this.ulElm.appendChild(uf(n)))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length,this.virtualScroll=null;return this.events(),t}getListRows(){var t;let a=[];return this.updateData=[],(t=this.data)==null||t.forEach(e=>a.push(...this.initListItem(e))),a.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound()}}),a}initListItem(a,t=0){let e=(a==null?void 0:a.title)||"",n=this.options.multiple?"multiple":"",r=this.options.single?"radio":"checkbox",o="";if(!(a!=null&&a.visible))return[];if(this.updateData.push(a),this.options.single&&!this.options.singleRadio&&(o="hide-radio "),a.selected&&(o+="selected "),a.type==="optgroup"){let v=[],_=this.options.hideOptgroupCheckboxes||this.options.single?{tagName:"span",props:{dataset:{name:this.selectGroupName,key:a._key}}}:{tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:a._key},ariaChecked:String(a.selected||!1),checked:!!a.selected,disabled:a.disabled}};!o.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(o+="hide-radio ");let C={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(C.props,a.label);let x={tagName:"li",props:{className:`group ${o}`.trim()},children:[{tagName:"label",props:{className:`optgroup${this.options.single||a.disabled?" disabled":""}`},children:[_,C]}]},S=this.options.cssStyler(a),E=String(this.options.styler(a)||"");return E&&(x.props.style=cv(E)),S&&(x.props.style=S),v.push(x),a.children.forEach(D=>v.push(...this.initListItem(D,1))),v}if(o+=a.classes||"",t&&this.options.single&&(o+=`option-level-${t} `),a.divider)return[{tagName:"li",props:{className:"option-divider"}}];let s=n||o?(n+o).trim():"",l=`${a.disabled?"disabled":""}`,u={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(u.props,a.text);let h={tagName:"input",props:{type:r,value:encodeURI(a.value),dataset:{key:a._key,name:this.selectItemName},ariaChecked:String(a.selected||!1),checked:!!a.selected,disabled:!!a.disabled}};a.selected&&(h.attrs={checked:"checked"});let c={tagName:"li",props:{className:s,title:e},children:[{tagName:"label",props:{className:l},children:[h,u]}]},p=this.options.cssStyler(a),m=String(this.options.styler(a)||"");return m&&(c.props.style=cv(m)),p&&(c.props.style=p),[c]}initSelected(a=!1){var e,n;let t=0;for(let r of this.data||[])if(r.type==="optgroup"){let o=r.children.filter(s=>s&&s.selected&&!s.disabled&&s.visible).length;r.children.length&&(r.selected=!this.options.single&&o&&o===r.children.filter(s=>s&&!s.disabled&&s.visible&&!s.divider).length),t+=o}else t+=r.selected&&!r.disabled&&r.visible?1:0;this.allSelected=((e=this.data)==null?void 0:e.filter(r=>r.selected&&!r.disabled&&r.visible).length)===((n=this.data)==null?void 0:n.filter(r=>!r.disabled&&r.visible&&!r.divider).length),a||(this.allSelected?this.options.onCheckAll():t===0&&this.options.onUncheckAll())}initView(){let a;window.getComputedStyle?(a=window.getComputedStyle(this.elm).width,a==="auto"&&(a=Lu(this.dropElm,"outer","width")+20)):a=Lu(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||a}px`,this.elm.classList.add("ms-offscreen")}events(){var t;this._bindEventService.unbind(this.okButtonElm),this._bindEventService.unbind(this.searchInputElm),this._bindEventService.unbind(this.selectAllElm),this._bindEventService.unbind(this.selectGroupElms),this._bindEventService.unbind(this.selectItemElms),this._bindEventService.unbind(this.disableItemElms),this._bindEventService.unbind(this.noResultsElm),this.closeSearchElm=(t=this.filterParentElm)==null?void 0:t.querySelector(".icon-close"),this.searchInputElm=this.dropElm.querySelector(".ms-search input"),this.selectAllElm=this.dropElm.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=this.dropElm.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=this.dropElm.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.disableItemElms=this.dropElm.querySelectorAll(`input[data-name="${this.selectItemName}"]:disabled`),this.noResultsElm=this.dropElm.querySelector(".ms-no-results");let a=e=>{e.preventDefault(),!e.target.classList.contains("icon-close")&&this[this.options.isOpen?"close":"open"]()};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",e=>{e.target.nodeName.toLowerCase()==="label"&&(a(e),(!this.options.filter||!this.options.isOpen)&&this.focus(),e.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",a),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",e=>{e.code==="Escape"&&!this.options.keepOpen&&(this.close(),this.choiceElm.focus())}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",e=>{e.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.closeSearchElm&&this._bindEventService.bind(this.closeSearchElm,"click",e=>{e.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",e=>{e.code==="Tab"&&e.shiftKey&&this.close()}),this._bindEventService.bind(this.searchInputElm,"keyup",e=>{var n,r,o;if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(e.code)&&((n=this.searchInputElm)!=null&&n.value)){if(this.options.single){let s=[];(r=this.selectItemElms)==null||r.forEach(l=>{var u;((u=l.closest("li"))==null?void 0:u.style.display)!=="none"&&s.push(l)}),s.length&&s[0].hasAttribute("data-name")&&this.setSelects([s[0].value])}else(o=this.selectAllElm)==null||o.click();this.close(),this.focus();return}this.filter()})),this.selectAllElm&&(this._bindEventService.unbind(this.selectAllElm,"click"),this._bindEventService.bind(this.selectAllElm,"click",e=>{var n;this._checkAll((n=e.currentTarget)==null?void 0:n.checked)})),this.okButtonElm&&(this._bindEventService.unbind(this.okButtonElm,"click"),this._bindEventService.bind(this.okButtonElm,"click",e=>{a(e),e.stopPropagation()})),this._bindEventService.bind(this.selectGroupElms,"click",e=>{let n=e.currentTarget,r=n.checked,o=Nu(this.data,"_key",n.dataset.key);this._checkGroup(o,r),this.options.onOptgroupClick(af({label:o.label,selected:o.selected,data:o._data,children:o.children.map(s=>{if(s)return af({text:s.text,value:s.value,selected:s.selected,disabled:s.disabled,data:s._data})})}))}),this._bindEventService.bind(this.selectItemElms,"click",e=>{let n=e.currentTarget,r=n.checked,o=Nu(this.data,"_key",n.dataset.key),s=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close()};if(this.options.onBeforeClick(o)===!1){s();return}this._check(o,r),this.options.onClick(af({text:o.text,value:o.value,selected:o.selected,data:o._data})),s()})}open(a=0){if(a!==null&&a>=0){let t;clearTimeout(t),t=setTimeout(()=>this.openDrop(),a)}else this.openDrop()}openDrop(){var r,o,s,l,u;if((r=this.choiceElm)!=null&&r.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),(s=(o=this.choiceElm)==null?void 0:o.querySelector("div"))==null||s.classList.add("open"),this.dropElm.style.display="block",(l=this.selectAllElm)!=null&&l.parentElement&&(this.selectAllElm.parentElement.style.display="block"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||((u=this.selectAllElm)!=null&&u.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let h=hf(this.dropElm),c;this.options.container instanceof Node?c=this.options.container:typeof this.options.container=="string"&&(c=this.options.container==="body"?document.body:document.querySelector(this.options.container)),c.appendChild(this.dropElm),this.dropElm.style.top=`${(h==null?void 0:h.top)??0}px`,this.dropElm.style.left=`${(h==null?void 0:h.left)??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Lu(this.parentElm,"outer","width")}px`}let a=this.options.minHeight,t=this.options.maxHeight;this.options.maxHeightUnit==="row"&&(t=Lu(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight);let e=this.dropElm.querySelector("ul");e&&(a&&(e.style.minHeight=`${a}px`),e.style.maxHeight=`${t}px`),this.dropElm.querySelectorAll(".multiple").forEach(h=>h.style.width=`${this.options.multipleWidth}px`),this.getDataLength()&&this.options.filter&&(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let n=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:h,top:c}=df(this.dropElm),p=this.dropElm.getBoundingClientRect().height;n=h<p&&c>h?"top":"bottom"}this.adjustDropHeight(n)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}close(){var a,t;this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),(t=(a=this.choiceElm)==null?void 0:a.querySelector("div"))==null||t.classList.remove("open"),this.dropElm.style.display="none",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto"),this.options.onClose()}applyAsTextOrHtmlWhenEnabled(a,t){a||(a={}),this.isRenderAsHtml?a.innerHTML=typeof this.options.sanitizer=="function"?this.options.sanitizer(t):t:a.textContent=t}update(a=!1){var u;let t=this.getSelects(),e=this.getSelects("text");this.options.displayValues&&(e=t);let n=(u=this.choiceElm)==null?void 0:u.querySelector("span"),r=t.length,o=null,s=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let h=t.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?Pb(h):h}return e.join(this.options.displayDelimiter)};if(n){if(r===0){let h=this.options.placeholder||"";n.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(n,h)}else r<this.options.minimumCountSelected?o=s():this.formatAllSelected()&&r===this.dataTotal?o=this.formatAllSelected():this.options.ellipsis&&r>this.options.minimumCountSelected?o=`${e.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(r,this.dataTotal)&&r>this.options.minimumCountSelected?o=this.formatCountSelected(r,this.dataTotal):o=s();if(o!==null&&(n==null||n.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(n,o)),this.options.displayTitle||this.options.addTitle){this.options.addTitle&&console.warn("[Multiple-Select-Vanilla] Please note that the `addTitle` option was deprecated and replaced by `displayTitle`.");let h=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text";n.title=this.getSelects(h).join(this.options.displayDelimiter)}}let l=this.getSelects();this.options.single?this.elm.value=l.length?l[0]:"":Array.from(this.elm.options).forEach(h=>{h.selected=l.some(c=>c===h.value)}),a||this.elm.dispatchEvent(new Event("change"))}updateSelected(a){var e;for(let n=this.updateDataStart;n<this.updateDataEnd;n++){let r=this.updateData[n],o=this.dropElm.querySelector(`input[data-key=${r._key}]`);if(o){o.checked=r.selected;let s=o.closest("li");s&&(r.selected&&!s.classList.contains("selected")?s.classList.add("selected"):r.selected||s.classList.remove("selected"))}}let t=((e=this.data)==null?void 0:e.filter(n=>n.visible).length)===0;this.selectAllElm&&(this.selectAllElm.checked=this.allSelected,pv(this.selectAllElm.closest("li"),!t)),pv(this.noResultsElm,t),this.virtualScroll&&(this.virtualScroll.rows=a??this.getListRows())}getData(){return this.options.data}getDataLength(){var a;return((a=this.data)==null?void 0:a.length)??0}getOptions(a=!0){let t=Object.assign({},this.options);return delete t.data,a?sf(t):this.options}refreshOptions(a){Ib(this.options,a,!0)||(this.options=Object.assign(this.options,a),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(a="value"){let t=[];for(let e of this.data||[])if(e.type==="optgroup"){let n=e.children.filter(r=>r==null?void 0:r.selected);if(!n.length)continue;if(a==="value"||this.options.single)t.push(...n.map(r=>a==="value"&&r._value||r[a]));else{let r=[];r.push("["),r.push(e.label),r.push(`: ${n.map(o=>o[a]).join(", ")}`),r.push("]"),t.push(r.join(""))}}else e.selected&&t.push(a==="value"&&e._value||e[a]);return t}setSelects(a,t="value",e=!1){let n=!1,r=o=>{var s;for(let l of o){let u=!1;if(t==="text"){let h=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(h,l.text),u=a.includes(((s=h.textContent)==null?void 0:s.trim())??"")}else u=a.includes(l._value||l.value),!u&&l.value===`${+l.value}`&&(u=a.includes(+l.value));l.selected!==u&&(n=!0),l.selected=u}};for(let o of this.data||[])o.type==="optgroup"?r(o.children):r([o]);n&&(this.initSelected(e),this.updateSelected(),this.update(e))}enable(){var a;(a=this.choiceElm)==null||a.classList.remove("disabled")}disable(){var a;(a=this.choiceElm)==null||a.classList.add("disabled")}check(a){let t=Nu(this.data,"value",a);t&&this._check(t,!0)}uncheck(a){let t=Nu(this.data,"value",a);t&&this._check(t,!1)}_check(a,t){this.options.single&&this._checkAll(!1,!0),a.selected=t,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(a,t){for(let e of this.data||[])e.type==="optgroup"?this._checkGroup(e,a,!0):!e.disabled&&!e.divider&&(t||e.visible)&&(e.selected=a);t||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(a,t,e){a.selected=t,a.children.forEach(n=>{n&&!n.disabled&&!n.divider&&(e||n.visible)&&(n.selected=t)}),e||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let a of this.data||[])if(a.type==="optgroup")for(let t of a.children)t&&(t.divider||(t.selected=!t.selected));else a&&!a.divider&&(a.selected=!a.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){var a;(a=this.choiceElm)==null||a.focus(),this.options.onFocus()}blur(){var a;(a=this.choiceElm)==null||a.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(a){var r;let t=((r=this.searchInputElm)==null?void 0:r.value.trim())??"",e=t.toLowerCase();if(this.filterText===e)return;this.filterText=e;for(let o of this.data||[])if(o.type==="optgroup")if(this.options.filterGroup){let s=`${(o==null?void 0:o.label)??""}`;if(o!=null){let l=this.options.customFilter({label:ea(s.toLowerCase()),search:ea(e),originalLabel:s,originalSearch:t,row:o});o.visible=l;for(let u of o.children)u&&(u.visible=l)}}else{for(let s of o.children)if(s!=null){let l=`${(s==null?void 0:s.text)??""}`;s.visible=this.options.customFilter({text:ea(l.toLowerCase()),search:ea(e),originalText:l,originalSearch:t,row:s,parent:o})}o.visible=o.children.filter(s=>s==null?void 0:s.visible).length>0}else{let s=`${(o==null?void 0:o.text)??""}`;o.visible=this.options.customFilter({text:ea(s.toLowerCase()),search:ea(e),originalText:s,originalSearch:t,row:o})}let n=this.initListItems();this.initSelected(a),this.updateSelected(n),a||this.options.onFilter(t)}adjustDropHeight(a){var h,c,p,m;let t=a!=="top",e=((h=this.filterParentElm)==null?void 0:h.getBoundingClientRect().height)??0,n=((c=this.okButtonElm)==null?void 0:c.getBoundingClientRect().height)??0,r=this.options.single?0:((p=this.selectAllParentElm)==null?void 0:p.getBoundingClientRect().height)??0,o=e+n+r+5,{bottom:s,top:l}=df(this.parentElm),u=this.options.maxHeight;if(t?u=s-o-this.options.adjustedHeightPadding:u=l-o-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&u<this.options.maxHeight){let v=(m=this.dropElm)==null?void 0:m.querySelector("ul");return v&&(v.style.maxHeight=`${u}px`),!0}return!1}adjustDropPosition(a){let t="bottom";if(this.dropElm&&this.parentElm){let{bottom:e,top:n}=df(this.dropElm),{top:r,left:o}=hf(this.parentElm),s=this.dropElm.getBoundingClientRect().height,l=this.dropElm.getBoundingClientRect().width,u=document.body.offsetWidth||window.innerWidth,h=this.parentElm.getBoundingClientRect().width;if(e>s)t="bottom";else if(s>e&&n>e){if(this.options.container){let c=r-s;c<0&&(c=0),(c>0||a)&&(t="top",this.dropElm.style.top=`${c<0?0:c}px`)}else t="top",this.dropElm.classList.add(t);this.dropElm.classList.remove("bottom")}u-l<o&&(this.dropElm.style.left=`${o-(l-h)}px`)}return t}adjustDropWidthByText(){let a=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(a=this.options.dropWidth||this.options.width||0);let t=this.dropElm.querySelector(".ms-select-all span"),e=this.dropElm.querySelector("ul"),n=26,r=(t==null?void 0:t.clientWidth)??0+n,o=e.scrollHeight>e.clientHeight?this.getScrollbarWidth():0,s=0;this.dropElm.querySelectorAll("li label").forEach(l=>{l.scrollWidth>s&&(s=l.scrollWidth)}),s+=n+o,s<r&&(s=r),this.options.maxWidth&&s>this.options.maxWidth&&(s=this.options.maxWidth),this.options.minWidth&&s<this.options.minWidth&&(s=this.options.minWidth),(a==="100%"||+a<s)&&(this.dropElm.style.width=`${s}px`,this.dropElm.style.maxWidth=`${s}px`)}getScrollbarWidth(){var r;let a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a);let t=a.offsetWidth;a.style.overflow="scroll";let e=document.createElement("div");e.style.width="100%",a.appendChild(e);let n=e.offsetWidth;return(r=a.parentNode)==null||r.removeChild(a),t-n}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(a,t){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${a}`).replace("%",`${t}`):this.options.formatCountSelected(a,t)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},ta=function(a,t){return typeof a=="string"?ff(document.querySelectorAll(a),t):a instanceof Node?ff([a],t):ff(a,t)};function ff(a,t){let e=Array.from(a),n=[];for(let r=0;r<e.length;r++){let o=e[r];try{o._multipleSelect!==void 0&&(o._multipleSelect.destroy(),delete o._multipleSelect),o._multipleSelect=new Hb(o,t||{}),o._multipleSelect.init();let s=o._multipleSelect.getOptions(!1);s.onHardDestroy=()=>delete o._multipleSelect,s.onAfterHardDestroyed=()=>n[r]=null,n.push(o._multipleSelect)}catch(s){console.error(s)}}return n.length===1?n[0]:n}ta.defaults=Lo.DEFAULTS,ta.locales={...dv},ta.methods=Lo.METHODS,typeof window<"u"&&(window.multipleSelect=ta);class mv{constructor(t,e,n,r=!0){this.translaterService=t,this.collectionService=e,this.rxjs=n,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=r}get collectionOptions(){var t,e,n;return(n=(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.collectionOptions)!==null&&n!==void 0?n:{}}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get customStructure(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.customStructure}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get defaultOperator(){return this.isMultipleSelect?Nt.in:Nt.equal}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D,A;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);if(this.enableTranslateLabel=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableTranslateLabel)!==null&&n!==void 0?n:!1,this.labelName=(o=(r=this.customStructure)===null||r===void 0?void 0:r.label)!==null&&o!==void 0?o:"label",this.labelPrefixName=(l=(s=this.customStructure)===null||s===void 0?void 0:s.labelPrefix)!==null&&l!==void 0?l:"labelPrefix",this.labelSuffixName=(h=(u=this.customStructure)===null||u===void 0?void 0:u.labelSuffix)!==null&&h!==void 0?h:"labelSuffix",this.optionLabel=(p=(c=this.customStructure)===null||c===void 0?void 0:c.optionLabel)!==null&&p!==void 0?p:"value",this.valueName=(v=(m=this.customStructure)===null||m===void 0?void 0:m.value)!==null&&v!==void 0?v:"value",this.enableTranslateLabel&&(!this.translaterService||typeof this.translaterService.translate!="function"))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=(C=(_=this.gridOptions)===null||_===void 0?void 0:_.locales)!==null&&C!==void 0?C:je.locales,this.initMultipleSelectTemplate();let P=((x=this.gridOptions)===null||x===void 0?void 0:x.defaultFilterPlaceholder)||"";!((S=this.columnFilter)===null||S===void 0)&&S.placeholder&&(P=this.columnFilter.placeholder),this.defaultOptions.placeholder=P||"",this._isMultipleSelect&&(!((E=this.columnDef)===null||E===void 0)&&E.filter)&&(this.columnDef.filter.emptySearchTermReturnAllValues=(A=(D=this.columnDef.filter)===null||D===void 0?void 0:D.emptySearchTermReturnAllValues)!==null&&A!==void 0?A:!1);const M=this.columnFilter.collection||[];return new Promise(async(B,Z)=>{try{let L;this.columnFilter.collectionAsync&&!this.columnFilter.collection?(L=Qm(this.columnFilter.collectionAsync,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),B(L)):(L=M,this.renderDomElement(M),B(M)),(this.columnFilter.collectionAsync||this.columnFilter.enableCollectionWatch)&&(await(L??this.columnFilter.collectionAsync),this.watchCollectionChanges())}catch(L){Z(L)}})}clear(t=!0){var e,n,r;this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),(e=this.filterElm)===null||e===void 0||e.classList.remove("filled"),(r=(n=this._msInstance)===null||n===void 0?void 0:n.getParentElement())===null||r===void 0||r.classList.remove("filled"),this.searchTerms=[],this._shouldTriggerQuery=t,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){var t,e;typeof((t=this._msInstance)===null||t===void 0?void 0:t.destroy)=="function"&&this._msInstance.destroy(),(e=this.filterElm)===null||e===void 0||e.remove(),Xd(this.subscriptions)}getValues(){var t,e;return(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[]}setValues(t,e){t!==void 0&&this._msInstance&&(t=Array.isArray(t)?t.every(n=>Kd(n))?t.map(String):t:[t],this._msInstance.setSelects(t)),this.updateFilterStyle(this.getValues().length>0),this.operator=e||this.defaultOperator}filterCollection(t){var e;let n=t;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const r=this.columnFilter.collectionFilterBy,o=((e=this.columnFilter.collectionOptions)===null||e===void 0?void 0:e.filterResultAfterEachPass)||null;n=this.collectionService.filterCollection(n,r,o)}return n}sortCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionSortBy){const n=this.columnFilter.collectionSortBy;e=this.collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}watchCollectionChanges(){var t;!((t=this.columnFilter)===null||t===void 0)&&t.collection&&(Ma(this.columnFilter.collection,this.watchCallback.bind(this)),Jc(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(t){this.renderDomElement(t||[]),this.columnFilter.collection&&Ma(this.columnFilter.collection,this.watchCallback.bind(this))}watchCallback(t){this.renderDomElement(this.columnFilter.collection||t||[])}renderDomElement(t){var e,n,r,o;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const h=this.collectionOptions.collectionInsideObjectProperty;t=_n(t,h||"")}if(!Array.isArray(t))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let s=[];if(t.length>0&&(s=[...t]),!((n=this.collectionOptions)===null||n===void 0)&&n.addBlankEntry&&Array.isArray(s)&&s.length>0&&s[0][this.valueName]!==""&&s.unshift(this.createBlankEntry()),!((r=this.collectionOptions)===null||r===void 0)&&r.addCustomFirstEntry&&Array.isArray(s)&&s.length>0&&s[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&s.unshift(this.collectionOptions.addCustomFirstEntry),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomLastEntry&&Array.isArray(s)&&s.length>0){const h=s.length-1;s[h][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&s.push(this.collectionOptions.addCustomLastEntry)}let l=s;l=this.filterCollection(l),l=this.sortCollection(l);const u=om("filter",l,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=u.hasFoundSearchTerm,this.createFilterElement(u.selectElement,u.dataCollection),this._collectionLength=l.length}createBlankEntry(){const t={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t}createFilterElement(t,e){var n,r;const o=(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";this.elementName=`filter-${o}`,this.defaultOptions.name=this.elementName,on(this.filterContainerElm),this.filterElm=t,this.filterElm.dataset.columnId=`${o}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(t);const s=this.columnFilter?this.columnFilter.filterOptions:{};this.filterElmOptions={...this.defaultOptions,...s,data:e},this._msInstance=ta(t,this.filterElmOptions)}initMultipleSelectTemplate(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C,x;const S=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.enableTranslate)!==null&&e!==void 0?e:!1,D={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:""}`,container:"body",filter:!1,maxHeight:275,single:!0,renderOptionLabelAsHtml:(s=(o=this.columnFilter)===null||o===void 0?void 0:o.enableRenderHtml)!==null&&s!==void 0?s:!1,sanitizer:A=>Ln(this.gridOptions,A),onClose:()=>this.onTriggerEvent()};if(this._isMultipleSelect){D.single=!1,D.showOkButton=!0,D.displayTitle=!0;const A=ho(this.gridOptions);D.countSelectedText=S&&(!((l=this.translaterService)===null||l===void 0)&&l.translate)?this.translaterService.translate(`${A}X_OF_Y_SELECTED`):(u=this._locales)===null||u===void 0?void 0:u.TEXT_X_OF_Y_SELECTED,D.allSelectedText=S&&(!((h=this.translaterService)===null||h===void 0)&&h.translate)?this.translaterService.translate(`${A}ALL_SELECTED`):(c=this._locales)===null||c===void 0?void 0:c.TEXT_ALL_SELECTED,D.noMatchesFoundText=S&&(!((p=this.translaterService)===null||p===void 0)&&p.translate)?this.translaterService.translate(`${A}NO_MATCHES_FOUND`):(m=this._locales)===null||m===void 0?void 0:m.TEXT_NO_MATCHES_FOUND,D.okButtonText=S&&(!((v=this.translaterService)===null||v===void 0)&&v.translate)?this.translaterService.translate(`${A}OK`):(_=this._locales)===null||_===void 0?void 0:_.TEXT_OK,D.selectAllText=S&&(!((C=this.translaterService)===null||C===void 0)&&C.translate)?this.translaterService.translate(`${A}SELECT_ALL`):(x=this._locales)===null||x===void 0?void 0:x.TEXT_SELECT_ALL}this.defaultOptions=D}onTriggerEvent(){if(this._msInstance){const t=this.getValues();this.updateFilterStyle(Array.isArray(t)&&t.length>1||t.length===1&&t[0]!==""),this.searchTerms=t,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(t){var e,n,r,o,s,l;t?(this.isFilled=!0,(e=this.filterElm)===null||e===void 0||e.classList.add("filled"),(r=(n=this._msInstance)===null||n===void 0?void 0:n.getParentElement())===null||r===void 0||r.classList.add("filled")):(this.isFilled=!1,(o=this.filterElm)===null||o===void 0||o.classList.remove("filled"),(l=(s=this._msInstance)===null||s===void 0?void 0:s.getParentElement())===null||l===void 0||l.classList.remove("filled"))}}class Bb extends mv{constructor(t,e,n){super(t,e,n,!0),this.translaterService=t,this.collectionService=e,this.rxjs=n}}class Vb{constructor(t){this.translater=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._currentValues=[],this.searchTerms=[],this._bindEventService=new Nn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get defaultOperator(){return Nt.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection)throw new Error('[Slickgrid-Universal] You need to pass a "collection" for the Native Select Filter to work correctly.');if(this.columnFilter.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translater||typeof this.translater.translate!="function"))throw new Error('The I18N Service is required for the Native Select Filter to work correctly when "enableTranslateLabel" is set.');let e=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";(typeof e=="boolean"||typeof e=="number")&&(e=`${e??""}`),this.filterElm=this.createFilterElement(e),this._bindEventService.bind(this.filterElm,"change",this.handleOnChange.bind(this))}clear(t=!0){this.filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._currentValues=[],this.filterElm.value="",this.filterElm.classList.remove("filled"),this.filterElm.dispatchEvent(new Event("change")))}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this.filterElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}getValues(){return this._currentValues||[]}setValues(t,e){var n;Array.isArray(t)?(this.filterElm.value=`${(n=t[0])!==null&&n!==void 0?n:""}`,this._currentValues=t):t&&(this.filterElm.value=`${t??""}`,this._currentValues=[t]),this.getValues().length>0?this.filterElm.classList.add("filled"):this.filterElm.classList.remove("filled"),this.operator=e||this.defaultOperator}buildFilterSelectFromCollection(t){var e,n,r,o,s,l,u,h,c,p,m,v;const _=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",C=Re("select",{className:`form-control search-filter filter-${_}`,ariaLabel:(o=(r=this.columnFilter)===null||r===void 0?void 0:r.ariaLabel)!==null&&o!==void 0?o:`${Kr(_+"")} Search Filter`}),x=(l=(s=this.columnFilter.customStructure)===null||s===void 0?void 0:s.label)!==null&&l!==void 0?l:"label",S=(h=(u=this.columnFilter.customStructure)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:"value",E=(p=(c=this.columnFilter)===null||c===void 0?void 0:c.enableTranslateLabel)!==null&&p!==void 0?p:!1;if(t.every(D=>typeof D=="string"))for(const D of t)C.appendChild(Re("option",{value:D,label:D,textContent:D}));else for(const D of t){if(!D||D[x]===void 0&&D.labelKey===void 0)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Native Select Filter list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')");const A=D.labelKey||D[x],P=(D.labelKey||E)&&typeof this.translater!==void 0&&(!((v=(m=this.translater).getCurrentLanguage)===null||v===void 0)&&v.call(m))?this.translater.translate(A||" "):A;C.appendChild(Re("option",{value:D[S],textContent:P}))}return C}createFilterElement(t){var e,n,r,o;const s=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";on(this.filterContainerElm);const l=t||"",u=(o=(r=this.columnFilter)===null||r===void 0?void 0:r.collection)!==null&&o!==void 0?o:[];if(!Array.isArray(u))throw new Error('The "collection" passed to the Native Select Filter is not a valid array.');const h=this.buildFilterSelectFromCollection(u);return h.value=l,h.dataset.columnid=`${s||""}`,l&&(this._currentValues=[l]),this.filterContainerElm.appendChild(h),h}handleOnChange(t){const e=t&&t.target&&t.target.value||"";this._currentValues=[e],this._clearFilterTriggered?(this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.filterElm.classList.remove("filled")):(e===""?this.filterElm.classList.remove("filled"):this.filterElm.classList.add("filled"),this.callback(t,{columnDef:this.columnDef,operator:this.operator,searchTerms:[e],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}}class zb extends mv{constructor(t,e,n){super(t,e,n,!1),this.translaterService=t,this.collectionService=e,this.rxjs=n}}class Ub extends of{constructor(t){super(t),this.translaterService=t,this.sliderType="single"}}class Wb extends of{constructor(t){super(t),this.translaterService=t,this.sliderType="double"}}const Hu={autocompleter:sb,compoundDate:pb,compoundInput:lv,compoundInputNumber:mb,compoundInputPassword:vb,compoundInputText:lv,compoundSlider:_b,dateRange:bb,input:Xs,inputMask:Cb,inputNumber:yb,inputPassword:Eb,inputText:Xs,multipleSelect:Bb,select:Vb,singleSelect:zb,slider:Ub,sliderRange:Wb};class Gb{constructor(t,e,n,r){var o,s;this.config=t,this.translaterService=e,this.collectionService=n,this.rxjs=r,this._options=(s=(o=this.config)===null||o===void 0?void 0:o.options)!==null&&s!==void 0?s:{}}addRxJsResource(t){this.rxjs=t}createFilter(t){let e;return t!=null&&t.model&&(e=typeof t.model=="function"?new t.model(this.translaterService,this.collectionService,this.rxjs):t.model),!e&&this._options.defaultFilter&&(e=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),e}}const pf={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:5*60*5,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:vv},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"fa fa-compress mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"fa fa-expand mdi mdi-arrow-expand",iconClearGroupingCommand:"fa fa-times mdi mdi-close",iconCopyCellValueCommand:"fa fa-clone mdi mdi-content-copy",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Hu.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"🔎︎",defaultFilterRangeOperator:Nt.rangeInclusive,defaultColumnSortFieldId:"id",defaultComponentEventPrefix:"",defaultSlickgridEventPrefix:"",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:dn.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"⮞",groupExpandedSymbol:"⮟",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:fs.comma,exportWithFormatter:!1,filename:"export",format:dn.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},gridAutosizeColsMode:Yd.none,eventNamingStyle:Ro.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars mdi mdi-menu",iconClearAllFiltersCommand:"fa fa-filter mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconClearFrozenColumnsCommand:"fa fa-times mdi mdi-pin-off-outline",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",iconRefreshDatasetCommand:"fa fa-refresh mdi mdi-sync",iconToggleFilterCommand:"fa fa-random mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"fa fa-random mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:vv},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"fa fa-filter mdi mdi mdi-filter-remove-outline",iconClearSortCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconFreezeColumns:"fa fa-thumb-tack mdi mdi-pin-outline",iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-flip-v mdi-sort-ascending",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-flip-v mdi-sort-descending",iconColumnHideCommand:"fa fa-times mdi mdi-close",iconColumnResizeByContentCommand:"fa fa-arrows-h mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"͏͏͏͏͏͏͏͏͏·"}};function vv(a,t){var e,n;const r=(a==null?void 0:a.columnGroup)||"",o=(e=t==null?void 0:t.columnGroupSeparator)!==null&&e!==void 0?e:" - ";return r?r+o+a.name:(n=a==null?void 0:a.name)!==null&&n!==void 0?n:""}class $b{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._sum=0,this._itemCount=0,this._type="sum",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._isTreeAggregator=e,this._isInitialized=!0,this._sum=0,this._itemCount=0,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={},t.__treeTotals.count={}),t.__treeTotals.count[this._field]=0,t.__treeTotals[this._type][this._field]=0)}accumulate(t,e=!1){var n,r;const o=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator?e?(t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals),this._sum=parseFloat((n=t.__treeTotals[this._type][this._field])!==null&&n!==void 0?n:0),this._itemCount=(r=t.__treeTotals.count[this._field])!==null&&r!==void 0?r:0):en(o)&&(this._sum=parseFloat(o),this._itemCount=1):o!==null&&o!==""&&!isNaN(o)&&(this._sum+=parseFloat(o))}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),this.addGroupTotalPropertiesWhenNotExist(t);let e=this._sum,n=this._itemCount;this._isTreeAggregator&&(e+=t[this._type][this._field],n+=t.count[this._field],t.count[this._field]=n),t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={}),this._isTreeAggregator&&t.count===void 0&&(t.count={})}}class Yb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._max=null,this._type="max",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._max=null,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=null)}accumulate(t,e=!1){const n=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;if(!this._isTreeAggregator)this.keepMaxValueWhenFound(n);else if(e){t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals);const r=t.__treeTotals[this._type][this._field]!==null?parseFloat(t.__treeTotals[this._type][this._field]):null;r!==null&&en(r)&&(this._max===null||r>this._max)&&(this._max=r)}else en(n)&&this.keepMaxValueWhenFound(n)}storeResult(t){let e=this._max;if(this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&e!==null){const n=t[this._type][this._field];en(n)&&n>e&&(e=n)}t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={})}keepMaxValueWhenFound(t){t!==null&&t!==""&&!isNaN(t)&&(this._max===null||t>this._max)&&(this._max=parseFloat(t))}}class jb{constructor(t){this._isInitialized=!1,this._distinctValues=[],this._type="distinct",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){if(this._distinctValues=[],this._isInitialized=!0,e)throw new Error("[Slickgrid-Universal] CloneAggregator is not currently supported for use with Tree Data")}accumulate(t){const e=t&&t.hasOwnProperty(this._field)?t[this._field]:void 0;this._distinctValues.indexOf(e)===-1&&e!==void 0&&this._distinctValues.push(e)}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),t[this._type][this._field]=this._distinctValues}}class Xb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._min=null,this._type="min",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._min=null,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=null)}accumulate(t,e=!1){const n=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;if(!this._isTreeAggregator)this.keepMinValueWhenFound(n);else if(e){t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals);const r=t.__treeTotals[this._type][this._field]!==null?parseFloat(t.__treeTotals[this._type][this._field]):null;r!==null&&en(r)&&(this._min===null||r<this._min)&&(this._min=r)}else en(n)&&this.keepMinValueWhenFound(n)}storeResult(t){let e=this._min;if(this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&e!==null){const n=t[this._type][this._field];en(n)&&n<e&&(e=n)}t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={})}keepMinValueWhenFound(t){t!==null&&t!==""&&!isNaN(t)&&(this._min===null||t<this._min)&&(this._min=parseFloat(t))}}class Kb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._count=0,this._type="count",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._count=0,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=0)}accumulate(t,e=!1){var n;const r=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator&&(e?(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),this._count=(n=t.__treeTotals[this._type][this._field])!==null&&n!==void 0?n:0):en(r)&&(this._count=1))}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={});let e=this._count;this._isTreeAggregator?e+=t[this._type][this._field]:e=t.group.rows.length,t[this._type][this._field]=e}}class qb{constructor(t){this._isInitialized=!1,this._type="clone",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){if(this._data="",this._isInitialized=!0,e)throw new Error("[Slickgrid-Universal] CloneAggregator is not currently supported for use with Tree Data")}accumulate(t){const e=t&&t.hasOwnProperty(this._field)?t[this._field]:null;e!==null&&e!==""&&(this._data=e)}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),t[this._type][this._field]=this._data}}class Zb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._nonNullCount=0,this._sum=0,this._type="avg",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._sum=0,this._nonNullCount=0,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={},t.__treeTotals.sum={},t.__treeTotals.count={}),t.__treeTotals[this._type][this._field]=0,t.__treeTotals.count[this._field]=0,t.__treeTotals.sum[this._field]=0)}accumulate(t,e=!1){var n,r;const o=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator?e?(t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals),this._sum=parseFloat((n=t.__treeTotals.sum[this._field])!==null&&n!==void 0?n:0),this._nonNullCount=(r=t.__treeTotals.count[this._field])!==null&&r!==void 0?r:0):en(o)&&(this._sum=parseFloat(o),this._nonNullCount=1):o!==null&&o!==""&&!isNaN(o)&&(this._nonNullCount++,this._sum+=parseFloat(o))}storeResult(t){let e=this._sum,n=this._nonNullCount;this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&(e+=t.sum[this._field],n+=t.count[this._field],t.sum[this._field]=e,t.count[this._field]=n),n!==0&&(t[this._type][this._field]=n===0?e:e/n)}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={}),this._isTreeAggregator&&t.sum===void 0&&(t.sum={}),this._isTreeAggregator&&t.count===void 0&&(t.count={})}}const mf={Avg:Zb,Clone:qb,Count:Kb,Distinct:jb,Min:Xb,Max:Yb,Sum:$b};function Bu(a,t){var e;const n=t.errorMessage,r=t.required,o=t.minLength,s=t.maxLength,l=t.operatorConditionalType||"inclusive",u={"{{minLength}}":o,"{{maxLength}}":s};let h=!0,c="";const p=(e=a==null?void 0:a.length)!==null&&e!==void 0?e:0;if(t.validator)return t.validator(a,t.editorArgs);if(r&&a==="")h=!1,c=n||je.VALIDATION_REQUIRED_FIELD;else if(o!==void 0&&s!==void 0&&(l==="exclusive"&&(p<=o||p>=s)||l==="inclusive"&&(p<o||p>s)))h=!1,c=n||je.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN.replace(/{{minLength}}|{{maxLength}}/gi,m=>u[m]);else if(o!==void 0&&p!==null&&(l==="exclusive"&&p<=o||l==="inclusive"&&p!==null&&p<o)){h=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE:je.VALIDATION_EDITOR_TEXT_MIN_LENGTH;c=n||m.replace(/{{minLength}}/gi,v=>u[v])}else if(s!==void 0&&p!==null&&(l==="exclusive"&&p>=s||l==="inclusive"&&p!==null&&p>s)){h=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE:je.VALIDATION_EDITOR_TEXT_MAX_LENGTH;c=n||m.replace(/{{maxLength}}/gi,v=>u[v])}return{valid:h,msg:c}}function Sl(a,t,e,n="Slider"){var r,o,s;let l;return((r=a.editorOptions)===null||r===void 0?void 0:r[t])!==void 0?l=a.editorOptions[t]:((o=a==null?void 0:a.params)===null||o===void 0?void 0:o[t])!==void 0&&(console.warn(`[Slickgrid-Universal] All editor.params from ${n} Editor are moving to "editorOptions" for better typing support and "params" will be deprecated in future release.`),l=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s[t]),l??e}const gv=Jd&&uh||Jd,Qb=3;class Jb{constructor(t){var e;if(this.args=t,this._isValueTouched=!1,this._lastTriggeredByClearInput=!1,this.disabled=!1,this.forceUserInput=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this._bindEventService=new Nn,!((e=this.gridOptions)===null||e===void 0)&&e.translater&&(this._translater=this.gridOptions.translater),this._locales=this.gridOptions&&this.gridOptions.locales||je.locales,this.init()}get autocompleterOptions(){return this._autocompleterOptions||{}}get collection(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.collection)!==null&&e!==void 0?e:[]}get editorDomElement(){return this._inputElm}get elementCollection(){return this._elementCollection}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)||{}}get customStructure(){var t,e,n,r,o,s;let l=(t=this.columnEditor)===null||t===void 0?void 0:t.customStructure;const u=(n=(e=this.columnEditor)===null||e===void 0?void 0:e.type)!==null&&n!==void 0?n:(r=this.columnDef)===null||r===void 0?void 0:r.type;return!l&&u===ie.object&&(!((o=this.columnDef)===null||o===void 0)&&o.dataKey)&&(!((s=this.columnDef)===null||s===void 0)&&s.labelKey)&&(l={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),l}get dataContext(){return this.args.item}get editorOptions(){var t;return((t=this.columnEditor)===null||t===void 0?void 0:t.editorOptions)||{}}get gridOptions(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get instance(){return this._instance}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c;this.labelName=(e=(t=this.customStructure)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:"label",this.valueName=(r=(n=this.customStructure)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"value",this.labelPrefixName=(s=(o=this.customStructure)===null||o===void 0?void 0:o.labelPrefix)!==null&&s!==void 0?s:"labelPrefix",this.labelSuffixName=(u=(l=this.customStructure)===null||l===void 0?void 0:l.labelSuffix)!==null&&u!==void 0?u:"labelSuffix";let p=this.columnEditor.collection;!((h=this.columnEditor)===null||h===void 0)&&h.collectionAsync&&!p&&(p=[]),this.renderDomElement(p),(this.disabled||!((c=this.columnEditor)===null||c===void 0)&&c.collectionAsync&&Array.isArray(p)&&p.length===0)&&this.disable(!0)}destroy(){var t,e,n;this._bindEventService.unbindAll(),typeof((t=this._instance)===null||t===void 0?void 0:t.destroy)=="function"&&this._instance.destroy(),(n=(e=this._inputElm)===null||e===void 0?void 0:e.remove)===null||n===void 0||n.call(e),this._elementCollection=null}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.clear(!0)}else this._inputElm.disabled=!1}focus(){this.grid.focus(),this._inputElm&&(this._inputElm.focus(),this._inputElm.select())}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,n=!0){var r;if(this._inputElm.value=t!=null&&t.hasOwnProperty(this.labelName)?t[this.labelName]:t,e){this._currentValue=t,this._defaultTextValue=typeof t=="string"?t:(r=t==null?void 0:t[this.labelName])!==null&&r!==void 0?r:"",this.applyValue(this.args.item,this.serializeValue());const o=this.args.compositeEditorOptions;o&&n&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(t,e){var n,r,o,s;let l=e;const u=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(u!==void 0){Array.isArray(this.collection)&&this.collection.length>0&&(l=vs(this.collection,p=>p&&Xo(e)&&p.hasOwnProperty(this.valueName)?p[this.valueName].toString()===(e.hasOwnProperty(this.valueName)&&e[this.valueName].toString()):p&&typeof e=="string"&&p.hasOwnProperty(this.valueName)?p[this.valueName].toString()===e:(p==null?void 0:p.toString())===e,""));const h=(u==null?void 0:u.indexOf("."))>0,c=this.validate(null,l);if(l=c!=null&&c.valid?l:"",h){const p=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:u)!==null&&s!==void 0?s:"";cr(t,p,l)}else t[u]=l}}isValueChanged(){var t,e;const n=this._inputElm.value,r=(t=this._lastInputKeyEvent)===null||t===void 0?void 0:t.keyCode;if(!((e=this.columnEditor)===null||e===void 0)&&e.alwaysSaveOnEnterKey&&r===xi.ENTER)return!0;const o=!(n===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&n!==this._defaultTextValue;return this._lastTriggeredByClearInput||o}isValueTouched(){return this._isValueTouched}loadValue(t){var e,n;const r=(e=this.columnDef)===null||e===void 0?void 0:e.field;if(t&&r!==void 0){const s=(r==null?void 0:r.indexOf("."))>0?_n(t,r):t[r];this._currentValue=s,this._originalValue=s,this._defaultTextValue=typeof s=="string"?s:(n=s==null?void 0:s[this.labelName])!==null&&n!==void 0?n:"",this._inputElm.value=this._defaultTextValue,this._inputElm.select()}}clear(t=!1){this._inputElm&&(this._currentValue="",this._defaultTextValue="",this.setValue("",!0)),this._isValueTouched=!0,this._lastTriggeredByClearInput=!0;const e=this.args.compositeEditorOptions;if(e){const n=!t;this.handleChangeOnCompositeEditor(null,e,"user",n)}else this.save()}reset(t,e=!0,n=!1){var r,o;const s=(r=t??this._originalValue)!==null&&r!==void 0?r:"";this._inputElm&&(this._currentValue=s,this._defaultTextValue=typeof s=="string"?s:(o=s==null?void 0:s[this.labelName])!==null&&o!==void 0?o:"",this._inputElm.value=this._defaultTextValue),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const u=!n;this.handleChangeOnCompositeEditor(null,l,"user",u)}}save(){var t;const e=this.validate(),n=(t=e==null?void 0:e.valid)!==null&&t!==void 0?t:!1;this.hasAutoCommitEdit&&n?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e,n,r,o,s;if(this._inputElm&&this.editorOptions.forceUserInput){const l=(e=(t=this.editorOptions)===null||t===void 0?void 0:t.minLength)!==null&&e!==void 0?e:Qb;this._currentValue=this._inputElm.value.length>l?this._inputElm.value:this._currentValue}return this.customStructure&&this._currentValue&&this._currentValue.hasOwnProperty(this.valueName)&&((n=this.columnDef)===null||n===void 0?void 0:n.type)!==ie.object&&((r=this.columnEditor)===null||r===void 0?void 0:r.type)!==ie.object?this._currentValue[this.valueName]:this._currentValue&&this._currentValue.value!==void 0?((o=this.columnDef)===null||o===void 0?void 0:o.type)===ie.object||((s=this.columnEditor)===null||s===void 0?void 0:s.type)===ie.object?{[this.labelName]:this._currentValue.label,[this.valueName]:this._currentValue.value}:this._currentValue.value:this._currentValue}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._inputElm)===null||n===void 0?void 0:n.value;return Bu(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleSelect(t){var e,n;if(t!==void 0){const o=t;this._currentValue=o,this._isValueTouched=!0;const s=this.args.compositeEditorOptions,l=(n=(e=this.editorOptions)===null||e===void 0?void 0:e.renderItem)!==null&&n!==void 0?n:!1,u=typeof o=="string"?o:l?o[this.labelName]:o.label;if(this.setValue(u),s?this.handleChangeOnCompositeEditor(null,s):this.save(),typeof this.editorOptions.onSelectItem=="function"){const{row:h,cell:c}=this.grid.getActiveCell();this.editorOptions.onSelectItem(t,h,c,this.args.column,this.args.item)}setTimeout(()=>this._lastTriggeredByClearInput=!1)}return!1}renderRegularItem(t){var e;const n=typeof t=="string"?t:(e=t==null?void 0:t.label)!==null&&e!==void 0?e:"";return Re("div",{textContent:n||""})}renderCustomItem(t){var e,n,r;const o=(r=(n=(e=this._autocompleterOptions)===null||e===void 0?void 0:e.renderItem)===null||n===void 0?void 0:n.templateCallback(t))!==null&&r!==void 0?r:"",s=Ln(this.gridOptions,o)||"",l=document.createElement("div");return l.innerHTML=s,l}renderCollectionItem(t){var e,n;const r=(n=(e=this.columnEditor)===null||e===void 0?void 0:e.enableRenderHtml)!==null&&n!==void 0?n:!1,o=t.labelPrefix||"",s=t.label||"",l=t.labelSuffix||"",u=o+s+l,h=Ln(this.gridOptions,u)||"",c=document.createElement("div");return c[r?"innerHTML":"textContent"]=h,c}renderDomElement(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;const E=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",D=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.placeholder)!==null&&o!==void 0?o:"",A=(l=(s=this.columnEditor)===null||s===void 0?void 0:s.title)!==null&&l!==void 0?l:"";this._editorInputGroupElm=Re("div",{className:"autocomplete-container input-group"});const P=Re("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=Re("button",{type:"button",className:"btn btn-default icon-clear"}),this._inputElm=Re("input",{type:"text",placeholder:D,title:A,autocomplete:"off",ariaAutoComplete:"none",className:`autocomplete form-control editor-text input-group-editor editor-${E}`,dataset:{input:""}},this._editorInputGroupElm),this._editorInputGroupElm.appendChild(document.createElement("span")),Sl(this.columnEditor,"hideClearButton",void 0,"autocomplete")||(P.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(P),this._bindEventService.bind(this._clearButtonElm,"click",()=>this.clear())),this._bindEventService.bind(this._inputElm,"focus",()=>{var B;return(B=this._inputElm)===null||B===void 0?void 0:B.select()}),this._bindEventService.bind(this._inputElm,"keydown",B=>{this._lastInputKeyEvent=B,(B.keyCode===xi.LEFT||B.keyCode===xi.RIGHT||B.key==="ArrowLeft"||B.key==="ArrowRight")&&B.stopImmediatePropagation(),this.columnEditor.alwaysSaveOnEnterKey&&(B.keyCode===xi.ENTER||B.key==="Enter")&&(this._currentValue=null)});let M=t;if(M&&(!((u=this.columnEditor)===null||u===void 0)&&u.collectionOverride)){const B={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:Z,modalType:L}=this.args.compositeEditorOptions;B.compositeEditorOptions={formValues:Z,modalType:L}}M=this.columnEditor.collectionOverride(M,B)}M&&(this.finalCollection=M),Array.isArray(M)&&(this.collection.every(B=>Kd(B))?M=M.map(B=>({label:B,value:B})):M=M.map(B=>{var Z,L;return{label:B==null?void 0:B[this.labelName],value:B==null?void 0:B[this.valueName],labelPrefix:(Z=B==null?void 0:B[this.labelPrefixName])!==null&&Z!==void 0?Z:"",labelSuffix:(L=B==null?void 0:B[this.labelSuffixName])!==null&&L!==void 0?L:""}}),this._elementCollection=M),this._autocompleterOptions={input:this._inputElm,debounceWaitMs:200,className:`slick-autocomplete ${(c=(h=this.editorOptions)===null||h===void 0?void 0:h.className)!==null&&c!==void 0?c:""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&(!((p=this._translater)===null||p===void 0)&&p.translate)?this._translater.translate("NO_ELEMENTS_FOUND"):(v=(m=this._locales)===null||m===void 0?void 0:m.TEXT_NO_ELEMENTS_FOUND)!==null&&v!==void 0?v:"No elements found",customize:(B,Z,L)=>{L.style.width=""},onSelect:this.handleSelect.bind(this),...this.editorOptions},!((_=this._autocompleterOptions.renderItem)===null||_===void 0)&&_.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Ga(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(t)?this._autocompleterOptions.render=(x=(C=this._autocompleterOptions.render)===null||C===void 0?void 0:C.bind(this))!==null&&x!==void 0?x:this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),!((S=this._autocompleterOptions)===null||S===void 0)&&S.fetch?(Wp(this._inputElm,this._autocompleterOptions),this._instance=gv(this._autocompleterOptions)):this._instance=gv({...this._autocompleterOptions,fetch:(B,Z)=>{M&&Z(M.filter(L=>((typeof L=="string"?L:L==null?void 0:L.label)||"").toLowerCase().includes(B.toLowerCase())))}}),this.args.container.appendChild(this._editorInputGroupElm),this.args.compositeEditorOptions||setTimeout(()=>this.focus(),50)}}class eC{constructor(t){if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new Nn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l;const u=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",h=this.args.compositeEditorOptions;this._checkboxContainerElm=Re("div",{className:`checkbox-editor-container editor-${u}`}),this._input=Re("input",{type:"checkbox",value:"true",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${Kr(u+"")} Checkbox Editor`,className:`editor-checkbox editor-${u}`,title:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.title)!==null&&s!==void 0?s:""});const c=(l=this.args)===null||l===void 0?void 0:l.container;c&&typeof c.appendChild=="function"&&(h?(this._checkboxContainerElm.appendChild(this._input),c.appendChild(this._checkboxContainerElm)):c.appendChild(this._input)),this.hasAutoCommitEdit&&!h&&this._bindEventService.bind(this._input,"click",()=>{this._isValueTouched=!0,this.save()}),h?this._bindEventService.bind(this._input,"change",p=>{this._isValueTouched=!0,this.handleChangeOnCompositeEditor(p,h)}):this.focus()}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled"),this._checkboxContainerElm.classList.add("disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==!1&&this.reset(!1,!0,!0)}else this._input.removeAttribute("disabled"),this._checkboxContainerElm.classList.remove("disabled")}focus(){var t;this.grid.focus(),(t=this._input)===null||t===void 0||t.focus()}preClick(){this._input&&(this._input.checked=!this._input.checked)}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.checked)!==null&&e!==void 0?e:!1}setValue(t,e=!1,n=!0){const r=!!t;if(this._input&&(this._input.checked=r),e){this.applyValue(this.args.item,this.serializeValue());const o=this.args.compositeEditorOptions;o&&n&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=(s==null?void 0:s.indexOf("."))>0,u=this.validate(null,e),h=u&&u.valid?e:"";if(l){const c=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";cr(t,c,h)}else t[s]=h}}isValueChanged(){return this.serializeValue()!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?_n(t,e):t[e];this._originalValue=r,this._input.checked=!!this._originalValue}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:!1;this._input&&(this._originalValue=o,this._input.checked=!!o),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.checked)!==null&&e!==void 0?e:!1}validate(t,e){var n,r;const o=!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e!==void 0?e:(r=this._input)===null||r===void 0?void 0:r.checked,l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):o&&!s?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}}const tC=cd&&On||cd,Vu=Us||hs;class iC{constructor(t){var e;if(this.args=t,this._isValueTouched=!1,this._lastTriggeredByClearDate=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},!((e=this.gridOptions)===null||e===void 0)&&e.translater&&(this._translaterService=this.gridOptions.translater),this._bindEventService=new Nn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._inputElm}get editorOptions(){return this.columnEditor.editorOptions||{}}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get pickerOptions(){return this._pickerMergedOptions}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l;if(this.args&&this.columnDef){const u=this.args.compositeEditorOptions,h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.grid.getOptions()||{};this.defaultDate=this.args.item?this.args.item[this.columnDef.field]:null;const p=Ua(this.columnEditor.type||this.columnDef.type||ie.dateUtc),m=Ua(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||ie.dateUtc);let v=((r=(n=this._translaterService)===null||n===void 0?void 0:n.getCurrentLanguage)===null||r===void 0?void 0:r.call(n))||c.locale||"en";v.length>2&&(v=v.substring(0,2));const _={defaultDate:this.defaultDate,altInput:!0,altFormat:m,dateFormat:p,closeOnSelect:!0,wrap:!0,locale:v,onChange:()=>this.handleOnDateChange(),errorHandler:S=>{S.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${v}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};this._pickerMergedOptions={..._,...this.editorOptions};const C=`.editor-text.editor-${h}.form-control`;this._pickerMergedOptions.altInput&&(this._pickerMergedOptions.altInputClass="flatpickr-alt-input form-control"),this._editorInputGroupElm=Re("div",{className:"flatpickr input-group"});const x=Re("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=Re("button",{type:"button",className:"btn btn-default icon-clear"}),this._inputElm=Re("input",{placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:this.columnEditor&&this.columnEditor.title||"",className:C.replace(/\./g," "),dataset:{input:"",defaultdate:this.defaultDate}},this._editorInputGroupElm),Sl(this.columnEditor,"hideClearButton",void 0,"date")||(x.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(x),this._bindEventService.bind(this._clearButtonElm,"click",()=>this._lastTriggeredByClearDate=!0)),this.args.container.appendChild(this._editorInputGroupElm),this.flatInstance=tC(this._editorInputGroupElm,this._pickerMergedOptions),this._inputWithDataElm=!((l=this._pickerMergedOptions)===null||l===void 0)&&l.altInput?document.querySelector(`${C}.flatpickr-alt-input`):this._inputElm,u||setTimeout(()=>{this.show(),this.focus()},50)}}destroy(){var t,e,n,r,o,s,l,u;this.hide(),this._bindEventService.unbindAll(),typeof((t=this.flatInstance)===null||t===void 0?void 0:t.destroy)=="function"&&(this.flatInstance.destroy(),!((e=this.flatInstance)===null||e===void 0)&&e.element&&setTimeout(()=>Ch(this.flatInstance))),on(this._editorInputGroupElm),on(this._inputWithDataElm),on(this._inputElm),(r=(n=this._editorInputGroupElm)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n),(s=(o=this._inputWithDataElm)===null||o===void 0?void 0:o.remove)===null||s===void 0||s.call(o),(u=(l=this._inputElm)===null||l===void 0?void 0:l.remove)===null||u===void 0||u.call(l)}disable(t=!0){var e,n;const r=this.disabled;if(this.disabled=t,!((e=this.flatInstance)===null||e===void 0)&&e._input)if(t){this.flatInstance._input.setAttribute("disabled","disabled"),this._clearButtonElm.disabled=!0;const o=this.getValue();r!==t&&(!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions)&&o!==""&&this.reset("",!0,!0)}else this.flatInstance._input.removeAttribute("disabled"),this._clearButtonElm.disabled=!1}changeEditorOption(t,e){this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this._pickerMergedOptions={...this._pickerMergedOptions,[t]:e},this.flatInstance.set(t,e)}focus(){var t,e;this.grid.focus(),this.show(),(t=this._inputElm)===null||t===void 0||t.focus(),!((e=this._inputWithDataElm)===null||e===void 0)&&e.focus&&(this._inputWithDataElm.focus(),this._inputWithDataElm.select())}hide(){this.flatInstance&&typeof this.flatInstance.close=="function"&&this.flatInstance.close()}show(){var t;const e=!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions);!e&&this.flatInstance&&typeof this.flatInstance.open=="function"&&this.flatInstance._input?this.flatInstance.open():e&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,n=!0){if(this.flatInstance.setDate(t),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(r,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),u=Fr(this.columnDef&&(this.columnDef.saveOutputType||this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),h=(s==null?void 0:s.indexOf("."))>0,c=this.validate(null,e),p=e&&c&&c.valid?Vu(e,l).format(u):"";if(h){const m=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";cr(t,m,p)}else t[s]=p}}isValueChanged(){var t;const e=this._inputElm.value,n=Fr(this.columnEditor.type||((t=this.columnDef)===null||t===void 0?void 0:t.type)||ie.dateIso),r=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),o=e?Vu(e,n,!1).format(r):"",s=this._originalDate?Vu(this._originalDate,n,!1).format(r):"";return o==="Invalid date"||s==="Invalid date"?!1:this._lastTriggeredByClearDate||!(o===""&&s==="")&&o!==s}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0){const r=(e==null?void 0:e.indexOf("."))>0?_n(t,e):t[e];this._originalDate=r,this.flatInstance.setDate(r)}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalDate)!==null&&r!==void 0?r:"";this.flatInstance&&(this._originalDate=o,this.flatInstance.setDate(o),o||this.flatInstance.clear()),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t;const e=this._inputElm.value;if(!e)return"";const n=Fr(this.columnEditor.type||((t=this.columnDef)===null||t===void 0?void 0:t.type)||ie.dateIso),r=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateIso);return Vu(e,n,!1).format(r)}validate(t,e){var n,r;const o=!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e!==void 0?e:(r=this._inputElm)===null||r===void 0?void 0:r.value,l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):o&&s===""?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleOnDateChange(){var t,e;this._isValueTouched=!0;const n=(e=(t=this.flatInstance)===null||t===void 0?void 0:t.config)!==null&&e!==void 0?e:this._pickerMergedOptions;if(this.args&&(n!=null&&n.closeOnSelect)){const r=this.args.compositeEditorOptions;r?this.handleChangeOnCompositeEditor(r):this.save()}setTimeout(()=>this._lastTriggeredByClearDate=!1)}handleChangeOnCompositeEditor(t,e="user",n=!1){var r,o,s,l,u;const h=this.grid.getActiveCell(),c=this.args.column,p=(o=(r=this.columnDef)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:"",m=this.dataContext,v=this.grid,_=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,_),this.applyValue(t.formValues,_);const C=(u=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.compositeEditorOptions)===null||l===void 0?void 0:l.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(n||this.disabled&&C&&t.formValues.hasOwnProperty(p))&&delete t.formValues[p],v.onCompositeEditorChange.notify({...h,item:m,grid:v,column:c,formValues:t.formValues,editors:t.editors,triggeredBy:e},new Slick.EventData)}}function _v(a,t){const e=isNaN(a)?null:parseFloat(a),n=t.decimal||0,r=t.required,o=t.minValue,s=t.maxValue,l=t.operatorConditionalType||"inclusive",u=t.errorMessage,h={"{{minValue}}":o,"{{maxValue}}":s,"{{minDecimal}}":0,"{{maxDecimal}}":n};let c=!0,p="";if(typeof t.validator=="function")return t.validator(a,t.editorArgs);if(r&&a==="")c=!1,p=u||je.VALIDATION_REQUIRED_FIELD;else if(a!==""&&(isNaN(a)||n===0&&!/^[-+]?(\d*(\.)?(\d)*)$/.test(a)))c=!1,p=u||je.VALIDATION_EDITOR_VALID_NUMBER;else if(o!==void 0&&s!==void 0&&e!==null&&(l==="exclusive"&&(e<=+o||e>=+s)||l==="inclusive"&&(e<+o||e>+s)))c=!1,p=u||je.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,m=>h[m]);else if(o!==void 0&&e!==null&&(l==="exclusive"&&e<=+o||l==="inclusive"&&e<+o)){c=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE:je.VALIDATION_EDITOR_NUMBER_MIN;p=u||m.replace(/{{minValue}}/gi,v=>h[v])}else if(s!==void 0&&e!==null&&(l==="exclusive"&&e>=+s||l==="inclusive"&&e>+s)){c=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE:je.VALIDATION_EDITOR_NUMBER_MAX;p=u||m.replace(/{{maxValue}}/gi,v=>h[v])}else n>0&&!new RegExp(`^[-+]?(\\d*(\\.)?(\\d){0,${n}})$`).test(a)&&(c=!1,p=u||je.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi,m=>h[m]));return{valid:c,msg:p}}function bv(a,t){let e=isNaN(a)?null:parseInt(a,10);e!==null&&isNaN(e)&&(e=null);const n=t.errorMessage,r=t.required,o=t.minValue,s=t.maxValue,l=t.operatorConditionalType||"inclusive",u={"{{minValue}}":o,"{{maxValue}}":s};let h=!0,c="";if(t.validator)return t.validator(a,t.editorArgs);if(r&&a==="")h=!1,c=n||je.VALIDATION_REQUIRED_FIELD;else if(a!==""&&(isNaN(a)||!/^[+-]?\d+$/.test(a)))h=!1,c=n||je.VALIDATION_EDITOR_VALID_INTEGER;else if(o!==void 0&&s!==void 0&&e!==null&&(l==="exclusive"&&(e<=+o||e>=+s)||l==="inclusive"&&(e<+o||e>+s)))h=!1,c=n||je.VALIDATION_EDITOR_INTEGER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,p=>u[p]);else if(o!==void 0&&e!==null&&(l==="exclusive"&&e<=+o||l==="inclusive"&&e!==null&&e<+o)){h=!1;const p=l==="inclusive"?je.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE:je.VALIDATION_EDITOR_INTEGER_MIN;c=n||p.replace(/{{minValue}}/gi,m=>u[m])}else if(s!==void 0&&e!==null&&(l==="exclusive"&&e>=+s||l==="inclusive"&&e!==null&&e>+s)){h=!1;const p=l==="inclusive"?je.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE:je.VALIDATION_EDITOR_INTEGER_MAX;c=n||p.replace(/{{maxValue}}/gi,m=>u[m])}return{valid:h,msg:c}}function nC(a,t){const e=t.required,n=t.minValue,r=t.maxValue,o=t.errorMessage,s={"{{minValue}}":n,"{{maxValue}}":r};return t.validator?t.validator(a,t.editorArgs):e&&a===""?{valid:!1,msg:o||je.VALIDATION_REQUIRED_FIELD}:n!==void 0&&r!==void 0&&a!==null&&(a<n||a>r)?{valid:!1,msg:o||je.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,l=>s[l])}:{valid:!0,msg:null}}class rC{constructor(t){if(this.args=t,this._isValueSaveCalled=!1,this._isLeftValueTouched=!1,this._isRightValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._eventHandler=new Slick.EventHandler,this._bindEventService=new Nn,this.init(),this._eventHandler.subscribe(this.grid.onValidationError,()=>this._isValueSaveCalled=!0)}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return{leftInput:this._leftInput,rightInput:this._rightInput}}get editorParams(){return this.columnEditor.params||{}}get eventHandler(){return this._eventHandler}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get isValueSaveCalled(){return this._isValueSaveCalled}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r;if(!this.editorParams||!this.editorParams.leftInput||!this.editorParams.leftInput.field||!this.editorParams.rightInput||!this.editorParams.rightInput.field)throw new Error(`[Slickgrid-Universal] Please make sure that your Combo Input Editor has params defined with "leftInput" and "rightInput" (example: { editor: { model: Editors.comboInput, params: { leftInput: { field: 'firstName' }, { rightSide: { field: 'lastName' } }}}`);this._leftFieldName=(t=this.editorParams.leftInput)===null||t===void 0?void 0:t.field,this._rightFieldName=(e=this.editorParams.rightInput)===null||e===void 0?void 0:e.field,this._leftInput=this.createInput("leftInput"),this._rightInput=this.createInput("rightInput");const o=(n=this.args)===null||n===void 0?void 0:n.container;o&&typeof o.appendChild=="function"&&(o.appendChild(this._leftInput),o.appendChild(this._rightInput)),this._bindEventService.bind(this._leftInput,"keydown",l=>this.handleKeyDown(l,"leftInput")),this._bindEventService.bind(this._rightInput,"keydown",l=>this.handleKeyDown(l,"rightInput")),this.hasAutoCommitEdit&&(this._bindEventService.bind(this._leftInput,"focusout",l=>this.handleFocusOut(l,"leftInput")),this._bindEventService.bind(this._rightInput,"focusout",l=>this.handleFocusOut(l,"rightInput"))),((r=this.args)===null||r===void 0?void 0:r.compositeEditorOptions)?(this._bindEventService.bind(this._leftInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this)),this._bindEventService.bind(this._rightInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this))):setTimeout(()=>this._leftInput.select(),50)}handleFocusOut(t,e){var n;const r=((n=t.relatedTarget)===null||n===void 0?void 0:n.className)||"";!this.args.compositeEditorOptions&&r.indexOf("dual-editor")===-1&&this._lastEventType!=="focusout-right"&&(e==="rightInput"||e==="leftInput"&&this._lastEventType!=="focusout-left")&&(e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this.save());const s=e==="leftInput"?"left":"right";this._lastEventType=`${t==null?void 0:t.type}-${s}`}handleKeyDown(t,e){e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this._lastInputKeyEvent=t,(t.keyCode===xi.LEFT||t.keyCode===xi.RIGHT||t.keyCode===xi.TAB)&&t.stopImmediatePropagation()}destroy(){var t,e,n,r;this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),(e=(t=this._leftInput)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t),(r=(n=this._rightInput)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n)}createInput(t){var e,n,r,o,s,l,u;const h=this.editorParams[t],c=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",p=this.gridOptions.datasetIdPropertyName||"id",m=(s=(o=(r=this.args)===null||r===void 0?void 0:r.item)===null||o===void 0?void 0:o[p])!==null&&s!==void 0?s:"";let v=h.type||"text";(v==="float"||v==="integer")&&(v="number");const _=Re("input",{type:v||"text",id:`item-${m}-${t}`,ariaLabel:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.ariaLabel)!==null&&u!==void 0?u:`${Kr(c+"")} Input Editor`,className:`dual-editor-text editor-${c} ${t.replace(/input/gi,"")}`,autocomplete:"off",ariaAutoComplete:"none",placeholder:h.placeholder||"",title:h.title||""});return v==="readonly"&&(_.readOnly=!0,v="text"),v==="number"&&(_.step=this.getInputDecimalSteps(t)),_}disable(t=!0){var e;const n=this.disabled;this.disabled=t,this._leftInput&&this._rightInput&&(t?(this._leftInput.setAttribute("disabled","disabled"),this._rightInput.setAttribute("disabled","disabled"),n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.reset("",!0,!0)):(this._leftInput.removeAttribute("disabled"),this._rightInput.removeAttribute("disabled")))}focus(){this.grid.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValues(){const t={},e=this._leftInput.value,n=this._rightInput.value,r=this.editorParams.leftInput&&(this.editorParams.leftInput.type==="float"||this.editorParams.leftInput.type==="integer"),o=this.editorParams.rightInput&&(this.editorParams.rightInput.type==="float"||this.editorParams.rightInput.type==="integer"),s=e!==""&&r?+this._leftInput.value:e||"",l=n!==""&&o?+this._rightInput.value:n||"";return cr(t,this._leftFieldName,s),cr(t,this._rightFieldName,l),t}setValues(t){Array.isArray(t)&&t.length===2&&(this._leftInput.value=`${t[0]}`,this._rightInput.value=`${t[1]}`)}applyValue(t,e){this.applyValueByPosition(t,e,"leftInput"),this.applyValueByPosition(t,e,"rightInput")}applyValueByPosition(t,e,n){var r,o,s;const l=n==="leftInput"?this._leftFieldName:this._rightFieldName;if(l!==void 0){const u=(l==null?void 0:l.indexOf("."))>0;let h=l;if(u){const m=l.split(/\.(.*)/);h=m.length>1?m[1]:m}const c=u?_n(e,h):e[l],p=this.validate(null,{position:n,inputValue:c});if(u){const m=_n(e,h),v=p&&p.valid?m:"",_=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";cr(t,_,v)}else l&&(t[l]=p&&p.valid?e[l]:"")}}isValueChanged(){const t=this._leftInput.value,e=this._rightInput.value,n=this.editorParams&&this.editorParams.leftInput,r=this.editorParams&&this.editorParams.rightInput,o=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;if((n&&n.alwaysSaveOnEnterKey||r&&r.alwaysSaveOnEnterKey)&&o===xi.ENTER)return!0;const s=!(t===""&&(this._originalLeftValue===null||this._originalLeftValue===void 0))&&t!==this._originalLeftValue,l=!(e===""&&(this._originalRightValue===null||this._originalRightValue===void 0))&&e!==this._originalRightValue;return s||l}isValueTouched(){return this._isLeftValueTouched||this._isRightValueTouched}loadValue(t){this.loadValueByPosition(t,"leftInput"),this.loadValueByPosition(t,"rightInput"),this._leftInput.select()}loadValueByPosition(t,e){const n=e==="leftInput"?this._leftFieldName:this._rightFieldName,r=e==="leftInput"?"_originalLeftValue":"_originalRightValue",o=e==="leftInput"?"_leftInput":"_rightInput";if(t&&n!==void 0){const l=(n==null?void 0:n.indexOf("."))>0?_n(t,n):t.hasOwnProperty(n)?t[n]:"";if(this[r]=l,this.editorParams[e].type==="float"){const u=this.getDecimalPlaces(e);u!==null&&(this[r]||this[r]===0)&&typeof this[r]!==void 0&&(this[r]=(+this[r]).toFixed(u))}this[o]&&(this[o].value=`${this[r]}`)}}reset(t,e=!0,n=!1){var r,o;const s=(r=t??this._originalLeftValue)!==null&&r!==void 0?r:"",l=(o=t??this._originalRightValue)!==null&&o!==void 0?o:"";this._leftInput&&this._rightInput&&(this._originalLeftValue=s,this._originalRightValue=l,this._leftInput.value=`${s}`,this._rightInput.value=`${l}`),this._isLeftValueTouched=!1,this._isRightValueTouched=!1;const u=this.args.compositeEditorOptions;if(u&&e){const h=!n;this.handleChangeOnCompositeEditor(null,u,"user",h)}}save(){const t=this.validate(),e=t&&t.valid||!1;this._isValueSaveCalled||(this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges(),this._isValueSaveCalled=!0)}serializeValue(){const t={},e=this.serializeValueByPosition("leftInput"),n=this.serializeValueByPosition("rightInput");return cr(t,this._leftFieldName,e),cr(t,this._rightFieldName,n),t}serializeValueByPosition(t){const e=t==="leftInput"?this._leftInput.value:this._rightInput.value;if(e===""||isNaN(+e))return e;let n=parseFloat(e);const r=this.getDecimalPlaces(t);return r!==null&&(n||n===0)&&n.toFixed&&(n=parseFloat(n.toFixed(r))),n}getDecimalPlaces(t){const n=t==="leftInput"?"leftInput":"rightInput",r=this.editorParams[n],o=r==null?void 0:r.decimal;return o===void 0?0:o}getInputDecimalSteps(t){const e=this.getDecimalPlaces(t);let n="";for(let r=1;r<e;r++)n+="0";return e>0?`0.${n}1`:"1"}validate(t,e){if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(e){const n=this.validateByPosition(e.position,e.inputValue);if(!n.valid)return e.position==="leftInput"?this._leftInput.select():this._rightInput.select(),n}else{const n=this.validateByPosition("leftInput"),r=this.validateByPosition("rightInput");if(!n.valid)return this._leftInput.select(),n;if(!r.valid)return this._rightInput.select(),r}return{valid:!0,msg:""}}validateByPosition(t,e){var n;const r=this.editorParams[t];let o="";if(e)o=e;else{const u=t==="leftInput"?this._leftInput:this._rightInput;o=u&&u.value}const s=this.validator;o=typeof s=="function"?this.getValues():o;const l={editorArgs:this.args,errorMessage:r.errorMessage,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:r.required,validator:typeof s=="function"?s:r.validator};switch(r.type){case"float":return _v(o,{...l,decimal:this.getDecimalPlaces(t),minValue:r.minValue,maxValue:r.maxValue,operatorConditionalType:r.operatorConditionalType});case"integer":return bv(o,{...l,minValue:r.minValue,maxValue:r.maxValue,operatorConditionalType:r.operatorConditionalType});case"text":case"password":default:return Bu(o,l)}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h,c,p,m,v;const _=this.grid.getActiveCell(),C=this.args.column,x=(l=(s=(o=this.columnEditor.params)===null||o===void 0?void 0:o.leftInput)===null||s===void 0?void 0:s.field)!==null&&l!==void 0?l:"",S=(c=(h=(u=this.columnEditor.params)===null||u===void 0?void 0:u.rightInput)===null||h===void 0?void 0:h.field)!==null&&c!==void 0?c:"",E=this.dataContext,D=this.grid,A=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,A),this.applyValue(e.formValues,A);const P=(v=(m=(p=this.gridOptions)===null||p===void 0?void 0:p.compositeEditorOptions)===null||m===void 0?void 0:m.excludeDisabledFieldFormValues)!==null&&v!==void 0?v:!1;(r||this.disabled&&P&&e.formValues.hasOwnProperty(x))&&delete e.formValues[x],(r||this.disabled&&P&&e.formValues.hasOwnProperty(S))&&delete e.formValues[S],D.onCompositeEditorChange.notify({..._,item:E,grid:D,column:C,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleChangeOnCompositeEditorDebounce(t){var e,n,r;const o=(e=this.args)===null||e===void 0?void 0:e.compositeEditorOptions;if(o){const s=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.editorTypingDebounce)!==null&&r!==void 0?r:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,o),s)}}}class zu{constructor(t,e){if(this.args=t,this._inputType="text",this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=t.grid&&t.grid.getOptions(),this._bindEventService=new Nn,this.inputType=e||"text",this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get inputType(){return this._inputType}set inputType(t){this._inputType=t}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u;const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Re("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${Kr(h+"")} Input Editor`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",className:`editor-text editor-${h}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._isValueTouched=!0,this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this))}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset("",!0,!0)}else this._input.removeAttribute("disabled")}focus(){var t;this.grid.focus(),(t=this._input)===null||t===void 0||t.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t;return((t=this._input)===null||t===void 0?void 0:t.value)||""}setValue(t,e=!1,n=!0){if(this._input&&(this._input.value=`${t}`,e)){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=(s==null?void 0:s.indexOf("."))>0,u=this.validate(null,e),h=u!=null&&u.valid?e:"";if(l){const c=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";cr(t,c,h)}else s&&(t[s]=h)}}isValueChanged(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value,n=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;return this.columnEditor&&this.columnEditor.alwaysSaveOnEnterKey&&n===xi.ENTER?!0:!(e===""&&(this._originalValue===null||this._originalValue===void 0))&&e!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?_n(t,e):t.hasOwnProperty(e)&&t[e]||"";this._originalValue=r,this._input.value=this._originalValue,this._input.select()}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:"";this._input&&(this._originalValue=o,this._input.value=`${o}`),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:""}validate(t,e){var n;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const r=e!==void 0?e:this._input&&this._input.value;return Bu(r,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleOnInputChange(t){var e,n;this._isValueTouched=!0;const r=this.args.compositeEditorOptions;if(r){const o=(n=(e=this.gridOptions)===null||e===void 0?void 0:e.editorTypingDebounce)!==null&&n!==void 0?n:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,r),o)}}}const oC=0;class sC extends zu{constructor(t){super(t,"number"),this.args=t}init(){var t,e,n,r,o,s,l,u;if(this.columnDef&&this.columnEditor&&this.args){const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Re("input",{type:"number",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${Kr(h+"")} Number Editor`,className:`editor-text editor-${h}`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:this.getInputDecimalSteps()}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this),{passive:!0}))}}getDecimalPlaces(){var t,e,n,r,o;let s=(o=(e=(t=this.columnEditor)===null||t===void 0?void 0:t.decimal)!==null&&e!==void 0?e:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.params)===null||r===void 0?void 0:r.decimalPlaces)!==null&&o!==void 0?o:void 0;return s===void 0&&(s=oC),!s&&s!==0?null:s}getInputDecimalSteps(){const t=this.getDecimalPlaces();let e="";for(let n=1;n<t;n++)e+="0";return t>0?`0.${e}1`:"1"}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(e!==void 0&&t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?_n(t,e):t[e];this._originalValue=r;const o=this.getDecimalPlaces();o!==null&&(this._originalValue||this._originalValue===0)&&typeof this._originalValue!==void 0&&(this._originalValue=(+this._originalValue).toFixed(o)),this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value;if(e===void 0||e===""||isNaN(+e))return e;let n=parseFloat(e);const r=this.getDecimalPlaces();return r!==null&&(n||n===0)&&n.toFixed&&(n=parseFloat(n.toFixed(r))),n}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._input)===null||n===void 0?void 0:n.value;return _v(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,decimal:this.getDecimalPlaces(),minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class lC extends zu{constructor(t){super(t,"password"),this.args=t}}class aC extends zu{constructor(t){super(t,"number"),this.args=t}init(){var t,e,n,r,o,s,l,u;if(this.columnDef&&this.columnEditor&&this.args){const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Re("input",{type:"number",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${Kr(h+"")} Slider Editor`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:"1"}`,className:`editor-text editor-${h}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this),{passive:!0}))}}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(e!==void 0&&t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?_n(t,e):t[e];this._originalValue=isNaN(r)||r===null||r===void 0?r:`${r}`,this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value;if(e===void 0||e===""||isNaN(+e))return e;const n=isNaN(+e)?e:parseInt(e,10);return isNaN(+n)?e:n}validate(t,e){var n;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const r=e!==void 0?e:this.getValue();return bv(r,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class dC{constructor(t){if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=t.grid&&t.grid.getOptions();const e=this.gridOptions||this.args.column.params||{};e!=null&&e.translater&&(this._translater=e.translater),this._locales=this.gridOptions&&this.gridOptions.locales||je.locales,this._bindEventService=new Nn,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)!==null&&e!==void 0?e:{}}get dataContext(){return this.args.item}get editorDomElement(){return this._textareaElm}get editorOptions(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.editorOptions)!==null&&e!==void 0?e:{}}get hasAutoCommitEdit(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.autoCommitEdit)!==null&&e!==void 0?e:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z,L,de;let be="",J="";if(this._translater&&this._translater.translate&&this.gridOptions.enableTranslate){const De=ho(this.gridOptions),ne=(e=(t=this.editorOptions.buttonTexts)===null||t===void 0?void 0:t.cancelKey)!==null&&e!==void 0?e:`${De}CANCEL`,pe=(r=(n=this.editorOptions.buttonTexts)===null||n===void 0?void 0:n.saveKey)!==null&&r!==void 0?r:`${De}SAVE`;be=this._translater.translate(`${De}${ne}`),J=this._translater.translate(`${De}${pe}`)}else be=(u=(s=(o=this.editorOptions.buttonTexts)===null||o===void 0?void 0:o.cancel)!==null&&s!==void 0?s:(l=this._locales)===null||l===void 0?void 0:l.TEXT_CANCEL)!==null&&u!==void 0?u:"Cancel",J=(m=(c=(h=this.editorOptions.buttonTexts)===null||h===void 0?void 0:h.save)!==null&&c!==void 0?c:(p=this._locales)===null||p===void 0?void 0:p.TEXT_SAVE)!==null&&m!==void 0?m:"Save";const U=this.args.compositeEditorOptions,F=(_=(v=this.columnDef)===null||v===void 0?void 0:v.id)!==null&&_!==void 0?_:"",ae=(C=this.columnEditor)===null||C===void 0?void 0:C.maxLength,Ke=(S=(x=this.editorOptions)===null||x===void 0?void 0:x.rows)!==null&&S!==void 0?S:4,Ie=U?this.args.container:document.body;this._wrapperElm=Re("div",{className:`slick-large-editor-text editor-${F}`,style:{position:U?"relative":"absolute"}}),Ie.appendChild(this._wrapperElm),this._textareaElm=Re("textarea",{ariaLabel:(D=(E=this.columnEditor)===null||E===void 0?void 0:E.ariaLabel)!==null&&D!==void 0?D:`${Kr(F+"")} Text Editor`,cols:(P=(A=this.editorOptions)===null||A===void 0?void 0:A.cols)!==null&&P!==void 0?P:40,rows:U&&Ke>3?3:Ke,placeholder:(B=(M=this.columnEditor)===null||M===void 0?void 0:M.placeholder)!==null&&B!==void 0?B:"",title:(L=(Z=this.columnEditor)===null||Z===void 0?void 0:Z.title)!==null&&L!==void 0?L:""},this._wrapperElm);const xe=Re("div",{className:"editor-footer"}),Oe=Re("span",{className:"counter"});if(this._currentLengthElm=Re("span",{className:"text-length",textContent:"0"}),Oe.appendChild(this._currentLengthElm),ae!==void 0&&(Oe.appendChild(Re("span",{className:"separator",textContent:"/"})),Oe.appendChild(Re("span",{className:"max-length",textContent:`${ae}`}))),xe.appendChild(Oe),!U){const De=Re("button",{className:"btn btn-cancel btn-default btn-xs",textContent:be},xe),ne=Re("button",{className:"btn btn-save btn-primary btn-xs",textContent:J},xe);this._bindEventService.bind(De,"click",this.cancel.bind(this)),this._bindEventService.bind(ne,"click",this.save.bind(this)),this.position((de=this.args)===null||de===void 0?void 0:de.position),this._textareaElm.focus(),this._textareaElm.select()}this._wrapperElm.appendChild(xe),this._bindEventService.bind(this._textareaElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._textareaElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._textareaElm,"paste",this.handleOnInputChange.bind(this))}cancel(){var t;const e=this._defaultTextValue||"";this._textareaElm.value=e,this._currentLengthElm.textContent=`${e.length}`,!((t=this.args)===null||t===void 0)&&t.cancelChanges&&this.args.cancelChanges()}hide(){this._wrapperElm.style.display="none"}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)?this.applyInputUsabilityState():this._wrapperElm.style.display="block"}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._wrapperElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._textareaElm&&this._wrapperElm)if(t){this._textareaElm.disabled=!0,this._wrapperElm.classList.add("disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset("",!0,!0)}else this._textareaElm.disabled=!1,this._wrapperElm.classList.remove("disabled")}focus(){this.grid.focus(),this._textareaElm&&(this._textareaElm.focus(),this._textareaElm.select())}getValue(){return this._textareaElm.value}setValue(t,e=!1,n=!0){if(this._textareaElm.value=t,this._currentLengthElm.textContent=`${t.length}`,e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o,s;const l=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(l!==void 0){const u=(l==null?void 0:l.indexOf("."))>0,h=this.validate(void 0,e),c=h&&h.valid?e:"";if(u){const p=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";cr(t,p,c)}else t[l]=c}}isValueChanged(){const t=this._textareaElm.value;return!(t===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&t!==this._defaultTextValue}isValueTouched(){return this._isValueTouched}loadValue(t){var e;const n=(e=this.columnDef)===null||e===void 0?void 0:e.field;if(t&&n!==void 0){const o=(n==null?void 0:n.indexOf("."))>0?_n(t,n):t[n];this._defaultTextValue=o||"",this._textareaElm.value=this._defaultTextValue,this._currentLengthElm.textContent=this._defaultTextValue.length,this._textareaElm.defaultValue=this._defaultTextValue,this._textareaElm.select()}}position(t){var e,n,r,o,s,l,u,h;const c=Wn(this.args.container),p=this.args.container.offsetHeight,m=this.args.container.offsetWidth,v=this._wrapperElm.getBoundingClientRect().height||this.args.position.height,_=this._wrapperElm.getBoundingClientRect().width||this.args.position.width,C=document.body.offsetHeight||window.innerHeight,x=document.body.offsetWidth||window.innerWidth;let S=(n=(e=c==null?void 0:c.top)!==null&&e!==void 0?e:t.top)!==null&&n!==void 0?n:0,E=(o=(r=c==null?void 0:c.left)!==null&&r!==void 0?r:t.left)!==null&&o!==void 0?o:0;const D=(l=(s=this.editorOptions)===null||s===void 0?void 0:s.position)!==null&&l!==void 0?l:"auto";if(D==="left"||D==="auto"&&E+_>x){const A=(h=(u=this.editorOptions)===null||u===void 0?void 0:u.marginRight)!==null&&h!==void 0?h:0;E-=_-m+A}(D==="top"||D==="auto"&&S+v>C)&&(S-=v-p),this._wrapperElm.style.top=`${S}px`,this._wrapperElm.style.left=`${E}px`}reset(t,e=!0,n=!1){var r;const o=(r=t??this._defaultTextValue)!==null&&r!==void 0?r:"";this._textareaElm&&(this._defaultTextValue=o,this._textareaElm.value=o,this._currentLengthElm.textContent=o.length),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){var t;const e=this.validate(),n=(t=e==null?void 0:e.valid)!==null&&t!==void 0?t:!1;this.hasAutoCommitEdit&&n?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){return this._textareaElm.value}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._textareaElm)===null||n===void 0?void 0:n.value;return Bu(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleKeyDown(t){var e;const n=(e=t.keyCode)!==null&&e!==void 0?e:t.code;this._isValueTouched=!0,this.args.compositeEditorOptions||(n===xi.ENTER&&t.ctrlKey||t.ctrlKey&&t.key.toUpperCase()==="S"?(t.preventDefault(),this.save()):n===xi.ESCAPE?(t.preventDefault(),this.cancel()):n===xi.TAB&&t.shiftKey?(t.preventDefault(),this.args&&this.grid&&this.grid.navigatePrev()):n===xi.TAB&&(t.preventDefault(),this.args&&this.grid&&this.grid.navigateNext()))}handleOnInputChange(t){var e,n,r;const o=this.args.compositeEditorOptions,s=(e=this.columnEditor)===null||e===void 0?void 0:e.maxLength;let l=!1;if(s&&(l=this.truncateText(this._textareaElm,s)),l)this._currentLengthElm.textContent=`${s}`;else{const u=t.type==="paste"?t.clipboardData.getData("text"):t.target.value;this._currentLengthElm.textContent=`${u.length}`}if(o){const u=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.editorTypingDebounce)!==null&&r!==void 0?r:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,o),u)}}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}truncateText(t,e){const n=t.value+"";return n.length>e?(t.value=n.substring(0,e),!0):!1}}class Cv{constructor(t,e,n=-1){var r,o,s,l,u,h,c,p,m,v,_;if(this.args=t,this.isMultipleSelect=e,this.delayOpening=n,this._isValueTouched=!1,this._isDisposingOrCallingSave=!1,this.disabled=!1,this.enableTranslateLabel=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},!((r=this.gridOptions)===null||r===void 0)&&r.translater&&(this._translaterService=this.gridOptions.translater),this._locales=this.gridOptions.locales||je.locales;const C=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"";this.elementName=`editor-${C}`;const x=this.args.compositeEditorOptions,S={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,minHeight:25,name:this.elementName,single:!0,renderOptionLabelAsHtml:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.enableRenderHtml)!==null&&u!==void 0?u:!1,sanitizer:E=>Ln(this.gridOptions,E),onClick:()=>this._isValueTouched=!0,onCheckAll:()=>this._isValueTouched=!0,onUncheckAll:()=>this._isValueTouched=!0,onClose:()=>{x?this.handleChangeOnCompositeEditor(x):(this._isDisposingOrCallingSave=!0,this.save(this.hasAutoCommitEdit))}};if(e)if(S.single=!1,S.displayTitle=!0,S.showOkButton=!0,!((h=this._translaterService)===null||h===void 0)&&h.getCurrentLanguage()){const E=ho(this.gridOptions);S.countSelectedText=this._translaterService.translate(`${E}X_OF_Y_SELECTED`),S.allSelectedText=this._translaterService.translate(`${E}ALL_SELECTED`),S.selectAllText=this._translaterService.translate(`${E}SELECT_ALL`),S.okButtonText=this._translaterService.translate(`${E}OK`),S.noMatchesFoundText=this._translaterService.translate(`${E}NO_MATCHES_FOUND`)}else S.countSelectedText=(c=this._locales)===null||c===void 0?void 0:c.TEXT_X_OF_Y_SELECTED,S.allSelectedText=(p=this._locales)===null||p===void 0?void 0:p.TEXT_ALL_SELECTED,S.selectAllText=(m=this._locales)===null||m===void 0?void 0:m.TEXT_SELECT_ALL,S.okButtonText=(v=this._locales)===null||v===void 0?void 0:v.TEXT_OK,S.noMatchesFoundText=(_=this._locales)===null||_===void 0?void 0:_.TEXT_NO_MATCHES_FOUND;this.defaultOptions=S,this.init()}get collection(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.collection)!==null&&e!==void 0?e:[]}get collectionOptions(){var t;return(t=this.columnEditor)===null||t===void 0?void 0:t.collectionOptions}get columnDef(){return this.args.column}get columnEditor(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)!==null&&e!==void 0?e:{}}get dataContext(){return this.args.item}get editorDomElement(){return this.editorElm}get isCompositeEditor(){var t;return!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)}get customStructure(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)===null||e===void 0?void 0:e.customStructure}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get currentValues(){var t,e,n,r,o,s;const l=(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[];if(this.collection.every(c=>typeof c=="number"||typeof c=="string"))return this.collection.filter(c=>l==null?void 0:l.some(p=>`${p}`===(c==null?void 0:c.toString())));const u=(r=(n=this.collectionOptions)===null||n===void 0?void 0:n.separatorBetweenTextLabels)!==null&&r!==void 0?r:"",h=(s=(o=this.collectionOptions)===null||o===void 0?void 0:o.includePrefixSuffixToSelectedValues)!==null&&s!==void 0?s:!1;return this.collection.filter(c=>l.some(p=>{var m;return`${p}`===((m=c==null?void 0:c[this.valueName])===null||m===void 0?void 0:m.toString())})).map(c=>{var p,m,v,_;const C=c[this.valueName];let x=c[this.labelPrefixName]||"",S=c[this.labelSuffixName]||"";const E=(m=(p=this.columnDef)===null||p===void 0?void 0:p.field)!==null&&m!==void 0?m:"",D=(E==null?void 0:E.indexOf("."))>0,A=(_=(v=this.columnEditor)===null||v===void 0?void 0:v.serializeComplexValueFormat)!==null&&_!==void 0?_:"object";return D&&typeof c=="object"&&A==="object"?c:(x=this.enableTranslateLabel&&this._translaterService&&x&&typeof x=="string"?this._translaterService.translate(x||" "):x,S=this.enableTranslateLabel&&this._translaterService&&S&&typeof S=="string"?this._translaterService.translate(S||" "):S,h?[x,C,S].filter(M=>M).join(u):C)})}get currentValue(){var t,e,n,r,o,s,l,u,h;const c=(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[],p=c.length?c[0]:"",m=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(m!==void 0){if(this.collection.every(E=>typeof E=="number"||typeof E=="string"))return vs(this.collection,E=>{var D;return((D=E==null?void 0:E.toString)===null||D===void 0?void 0:D.call(E))===`${p}`});const v=(o=(r=this.collectionOptions)===null||r===void 0?void 0:r.separatorBetweenTextLabels)!==null&&o!==void 0?o:"",_=(l=(s=this.collectionOptions)===null||s===void 0?void 0:s.includePrefixSuffixToSelectedValues)!==null&&l!==void 0?l:!1,C=vs(this.collection,E=>{var D;return E.hasOwnProperty(this.valueName)&&((D=E[this.valueName])===null||D===void 0?void 0:D.toString())===`${p}`}),x=(m==null?void 0:m.indexOf("."))>0,S=(h=(u=this.columnEditor)===null||u===void 0?void 0:u.serializeComplexValueFormat)!==null&&h!==void 0?h:"object";if(x&&typeof C=="object"&&S==="object")return C;if(C&&C.hasOwnProperty(this.valueName)){const E=C[this.valueName];if(_){let D=C[this.labelPrefixName]||"",A=C[this.labelSuffixName]||"";return D=this.enableTranslateLabel&&this._translaterService&&D&&typeof D=="string"?this._translaterService.translate(D||" "):D,A=this.enableTranslateLabel&&this._translaterService&&A&&typeof A=="string"?this._translaterService.translate(A||" "):A,[D,E,A].filter(M=>M).join(v)}return E}}return""}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c,p,m,v;if(!this.columnDef||!this.columnDef.internalColumnEditor||!this.columnDef.internalColumnEditor.collection&&!this.columnDef.internalColumnEditor.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.
      Also each option should include a value/label pair (or value/labelKey when using Locale).
      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }`);if(this._collectionService=new Gp(this._translaterService),this.enableTranslateLabel=(e=(t=this.columnEditor)===null||t===void 0?void 0:t.enableTranslateLabel)!==null&&e!==void 0?e:!1,this.labelName=(r=(n=this.customStructure)===null||n===void 0?void 0:n.label)!==null&&r!==void 0?r:"label",this.labelPrefixName=(s=(o=this.customStructure)===null||o===void 0?void 0:o.labelPrefix)!==null&&s!==void 0?s:"labelPrefix",this.labelSuffixName=(u=(l=this.customStructure)===null||l===void 0?void 0:l.labelSuffix)!==null&&u!==void 0?u:"labelSuffix",this.optionLabel=(c=(h=this.customStructure)===null||h===void 0?void 0:h.optionLabel)!==null&&c!==void 0?c:"value",this.valueName=(m=(p=this.customStructure)===null||p===void 0?void 0:p.value)!==null&&m!==void 0?m:"value",this.enableTranslateLabel&&(!this._translaterService||typeof this._translaterService.translate!="function"))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.renderDomElement(this.collection),(this.disabled||!((v=this.columnEditor)===null||v===void 0)&&v.collectionAsync&&Array.isArray(this.collection)&&this.collection.length===0)&&this.disable(!0)}getValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}setValue(t,e=!1,n=!0){if(this.isMultipleSelect&&Array.isArray(t)?this.loadMultipleValues(t):this.loadSingleValue(t),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(r,"system")}}hide(){this._msInstance&&this._msInstance.close()}show(t){!this.isCompositeEditor&&this._msInstance?this._msInstance.open(t):this.isCompositeEditor&&this.applyInputUsabilityState()}applyValue(t,e){var n,r,o,s,l;const u=(n=this.columnDef)===null||n===void 0?void 0:n.field,h=(r=this.columnDef)===null||r===void 0?void 0:r.type;let c=e;if(u!==void 0){(h===ie.number||h===ie.integer||h===ie.boolean)&&!isNaN(parseFloat(e))&&(c=parseFloat(e)),this.isMultipleSelect&&typeof e=="string"&&e.indexOf(",")>=0&&(c=e.split(","));const p=(u==null?void 0:u.indexOf("."))>0,m=this.validate(null,c);if(c=m!=null&&m.valid?c:"",p){const v=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:u)!==null&&l!==void 0?l:"";cr(t,v,c)}else t[u]=c}}destroy(){var t,e;this._msInstance&&this.hasAutoCommitEdit&&this.isValueChanged()&&!this._isDisposingOrCallingSave&&!this.isCompositeEditor&&(this._isDisposingOrCallingSave=!0,this.save(!0)),this._isDisposingOrCallingSave=!0,typeof((t=this._msInstance)===null||t===void 0?void 0:t.destroy)=="function"&&this._msInstance.destroy(),(e=this.editorElm)===null||e===void 0||e.remove(),this._msInstance=void 0}loadValue(t){var e,n,r;const o=(e=this.columnDef)===null||e===void 0?void 0:e.field,s=o!==void 0&&(o==null?void 0:o.indexOf("."))>0;if(t&&o!==void 0){const l=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:o,u=s?_n(t,l):t.hasOwnProperty(o)&&t[o],h=s&&(u!=null&&u.hasOwnProperty(this.valueName))?u[this.valueName]:u;this.isMultipleSelect&&Array.isArray(h)?this.loadMultipleValues(h):this.loadSingleValue(h)}}loadMultipleValues(t){var e;if(Array.isArray(t)){this.originalValue=t.map(r=>typeof r=="number"||typeof r=="boolean"?`${r}`:r),(e=this._msInstance)===null||e===void 0||e.setSelects(this.originalValue);const n=this.args.compositeEditorOptions;n&&this.handleChangeOnCompositeEditor(n)}}loadSingleValue(t){var e;this.originalValue=typeof t=="number"||typeof t=="boolean"?`${t}`:t,(e=this._msInstance)===null||e===void 0||e.setSelects([this.originalValue])}serializeValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}changeEditorOption(t,e){var n;this.columnEditor&&(this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this.editorElmOptions={...this.editorElmOptions,[t]:e},(n=this._msInstance)===null||n===void 0||n.refreshOptions(this.editorElmOptions))}disable(t=!0){const e=this.disabled;if(this.disabled=t,this._msInstance)if(t){this._msInstance.disable();const n=this.getValue(),r=Array.isArray(n)&&this.isMultipleSelect?(n==null?void 0:n[0])==="":n==="";e!==t&&this.isCompositeEditor&&!r&&this.reset("",!0,!0)}else this._msInstance.enable()}focus(){var t;this.grid.focus(),(t=this._msInstance)===null||t===void 0||t.focus()}isValueChanged(){var t;const e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects();if(this.isMultipleSelect)return!Qo(e,this.originalValue);const n=Array.isArray(e)&&e.length>0?e[0]:void 0;return n!==void 0&&n!==this.originalValue}isValueTouched(){return this._isValueTouched}reset(t,e=!0,n=!1){const r=t??this.originalValue;if(this._msInstance){this.originalValue=this.isMultipleSelect?r!==void 0?[r]:[]:r;const s=this.originalValue===void 0?[]:[this.originalValue];this._msInstance.setSelects(s)}this._isValueTouched=!1;const o=this.args.compositeEditorOptions;if(o&&e){const s=!n;this.handleChangeOnCompositeEditor(o,"user",s)}}save(t=!1){var e;const n=this.validate(),r=(e=n==null?void 0:n.valid)!==null&&e!==void 0?e:!1;(!this._isDisposingOrCallingSave||t)&&this.hasAutoCommitEdit&&r?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}validate(t,e){var n,r;const o=this.isCompositeEditor?!1:(n=this.columnEditor)===null||n===void 0?void 0:n.required,s=e!==void 0?e:(r=this._msInstance)===null||r===void 0?void 0:r.getSelects(),l=this.columnEditor&&this.columnEditor.errorMessage;if(this.isCompositeEditor&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(this.validator){const u=e!==void 0?e:this.isMultipleSelect?this.currentValues:this.currentValue;return this.validator(u,this.args)}return o&&(s===""||Array.isArray(s)&&s.length===0)?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}filterCollection(t){var e,n;let r=t;if(this.columnEditor&&this.columnEditor.collectionFilterBy){const o=this.columnEditor.collectionFilterBy,s=(n=(e=this.columnEditor.collectionOptions)===null||e===void 0?void 0:e.filterResultAfterEachPass)!==null&&n!==void 0?n:null;r=this._collectionService.filterCollection(r,o,s)}return r}sortCollection(t){let e=t;if(this.columnDef&&this.columnEditor&&this.columnEditor.collectionSortBy){const n=this.columnEditor.collectionSortBy;e=this._collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}renderDomElement(t){var e,n,r,o,s;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const c=this.collectionOptions.collectionInsideObjectProperty;t=_n(t,c)}if(!Array.isArray(t))throw new Error('The "collection" passed to the Select Editor is not a valid array.');let l=[];if(t.length>0&&(l=[...t]),!((n=this.collectionOptions)===null||n===void 0)&&n.addBlankEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==""&&(l.unshift(this.createBlankEntry()),this.collection.unshift(this.createBlankEntry())),!((r=this.collectionOptions)===null||r===void 0)&&r.addCustomFirstEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&(l.unshift(this.collectionOptions.addCustomFirstEntry),this.collection.unshift(this.collectionOptions.addCustomFirstEntry)),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomLastEntry&&Array.isArray(l)&&l.length>0){const c=l.length-1;l[c][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&l.push(this.collectionOptions.addCustomLastEntry)}let u=l;if(u=this.filterCollection(u),u=this.sortCollection(u),!((s=this.columnEditor)===null||s===void 0)&&s.collectionOverride){const c={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:p,modalType:m}=this.args.compositeEditorOptions;c.compositeEditorOptions={formValues:p,modalType:m}}u=this.columnEditor.collectionOverride(u,c)}this.finalCollection=u;const h=om("editor",u,this.columnDef,this.grid,this.isMultipleSelect,this._translaterService);this.createDomElement(h.selectElement,h.dataCollection)}createBlankEntry(){const t={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t}createDomElement(t,e){var n,r,o,s,l;const u=this.args.container;t&&u&&typeof u.appendChild=="function"&&(on(u),u.appendChild(t));const h=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.placeholder)!==null&&r!==void 0?r:"";this.defaultOptions.placeholder=h||"";const c=(l=(s=(o=this.columnDef)===null||o===void 0?void 0:o.internalColumnEditor)===null||s===void 0?void 0:s.editorOptions)!==null&&l!==void 0?l:{};this.editorElmOptions={...this.defaultOptions,...c,data:e},this._msInstance=ta(t,this.editorElmOptions),this.editorElm=this._msInstance.getParentElement(),this.isCompositeEditor||(this.delayOpening>=0?setTimeout(()=>this.show()):this.show())}handleChangeOnCompositeEditor(t,e="user",n=!1){var r,o,s,l,u;const h=this.grid.getActiveCell(),c=this.args.column,p=(o=(r=this.columnDef)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:"",m=this.dataContext,v=this.grid,_=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,_),this.applyValue(t.formValues,_);const C=(u=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.compositeEditorOptions)===null||l===void 0?void 0:l.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(n||this.disabled&&C&&t.formValues.hasOwnProperty(p))&&delete t.formValues[p],v.onCompositeEditorChange.notify({...h,item:m,grid:v,column:c,formValues:t.formValues,editors:t.editors,triggeredBy:e},new Slick.EventData)}}class uC extends Cv{constructor(t,e=0){super(t,!0,e),this.args=t,this.delayOpening=e}}class cC extends Cv{constructor(t,e=0){super(t,!1,e),this.args=t,this.delayOpening=e}}class hC{constructor(t){if(this.args=t,this._defaultValue=0,this._isValueTouched=!1,this._sliderNumberElm=null,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new Nn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._editorElm}get editorInputDomElement(){return this._inputElm}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get sliderOptions(){return this._sliderOptions}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t;if(this._cellContainerElm=(t=this.args)===null||t===void 0?void 0:t.container,this._cellContainerElm&&this.columnDef){const e=this.args.compositeEditorOptions;this._editorElm=this.buildDomElement(),e||this.focus(),this._cellContainerElm.appendChild(this._editorElm),this._bindEventService.bind(this._sliderTrackElm,["click","mouseup"],this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._inputElm,["change","mouseup","touchend"],this.handleChangeEvent.bind(this)),this._bindEventService.bind(this._inputElm,["input","change"],this.handleChangeSliderNumber.bind(this))}}cancel(){this._inputElm&&(this._inputElm.value=`${this._originalValue}`),this.args.cancelChanges()}destroy(){var t,e,n;this._bindEventService.unbindAll(),(t=this._inputElm)===null||t===void 0||t.remove(),(e=this._editorElm)===null||e===void 0||e.remove(),(n=this._sliderTrackElm)===null||n===void 0||n.remove()}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset(0,!0,!0)}else this._inputElm.disabled=!1}focus(){var t;this.grid.focus(),(t=this._inputElm)===null||t===void 0||t.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t,e;return(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:""}setValue(t,e=!1,n=!0){if(this._inputElm&&(this._inputElm.value=`${t}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${t}`),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o,s,l;const u=(r=(n=this.columnDef)===null||n===void 0?void 0:n.field)!==null&&r!==void 0?r:"";if(u!==void 0){const h=(u==null?void 0:u.indexOf("."))>0,c=this.validate(void 0,e),p=c&&c.valid?e:"";if(h){const m=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:u)!==null&&l!==void 0?l:"";cr(t,m,p)}else t&&(t[u]=p)}}isValueChanged(){var t,e;const n=(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"";return!(n===""&&this._originalValue===void 0)&&+n!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){var e,n;const r=(n=(e=this.columnDef)===null||e===void 0?void 0:e.field)!==null&&n!==void 0?n:"";if(t&&r!==void 0){let s=(r==null?void 0:r.indexOf("."))>0?_n(t,r):t.hasOwnProperty(r)?t[r]:this._defaultValue;(s===""||s===null||s===void 0)&&(s=this._defaultValue),this._originalValue=+s,this._inputElm&&(this._inputElm.value=`${s}`,this._inputElm.title=`${s}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${s}`)}this.updateTrackFilledColorWhenEnabled()}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:0;this._inputElm&&(this._inputElm.value=`${o}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${o}`),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;const n=(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"";return n!==""?parseInt(n,10):this._originalValue}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._inputElm)===null||n===void 0?void 0:n.value;return nC(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}buildDomElement(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C;const x=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",S=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"",E=+((s=(o=this.columnEditor)===null||o===void 0?void 0:o.minValue)!==null&&s!==void 0?s:je.SLIDER_DEFAULT_MIN_VALUE),D=+((u=(l=this.columnEditor)===null||l===void 0?void 0:l.maxValue)!==null&&u!==void 0?u:je.SLIDER_DEFAULT_MAX_VALUE),A=+((c=(h=this.columnEditor)===null||h===void 0?void 0:h.valueStep)!==null&&c!==void 0?c:je.SLIDER_DEFAULT_STEP),P=(p=Sl(this.columnEditor,"sliderStartValue"))!==null&&p!==void 0?p:E;this._defaultValue=+P,this._sliderTrackElm=Re("div",{className:"slider-track"}),this._inputElm=Re("input",{type:"range",title:S,defaultValue:`${P}`,value:`${P}`,min:`${E}`,max:`${D}`,step:`${(v=(m=this.columnEditor)===null||m===void 0?void 0:m.valueStep)!==null&&v!==void 0?v:je.SLIDER_DEFAULT_STEP}`,ariaLabel:(C=(_=this.columnEditor)===null||_===void 0?void 0:_.ariaLabel)!==null&&C!==void 0?C:`${Kr(x+"")} Slider Editor`,className:`slider-editor-input editor-${x}`});const M=Re("div",{className:"slider-container slider-editor"}),B=Re("div",{className:"slider-input-container slider-editor"});if(B.appendChild(this._sliderTrackElm),B.appendChild(this._inputElm),M.appendChild(B),!Sl(this.columnEditor,"hideSliderNumber")){M.classList.add("input-group");const Z=Re("div",{className:"input-group-addon input-group-append slider-value"});this._sliderNumberElm=Re("span",{className:"input-group-text",textContent:`${P}`}),Z.appendChild(this._sliderNumberElm),M.appendChild(Z)}return this._sliderOptions={minValue:E,maxValue:D,step:A},M}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeEvent(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e?this.handleChangeOnCompositeEditor(t,e):this.save()}handleChangeSliderNumber(t){var e,n,r;const o=(n=(e=t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"";o!==""&&(!Sl(this.columnEditor,"hideSliderNumber")&&this._sliderNumberElm&&(this._sliderNumberElm.textContent=o),this._inputElm.title=o,!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions||this.grid.onMouseEnter.notify({grid:this.grid},{...new Slick.EventData,target:t==null?void 0:t.target})),this.updateTrackFilledColorWhenEnabled()}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}sliderTrackClicked(t){t.preventDefault();const e=t.offsetX,n=this._sliderTrackElm.offsetWidth,r=(e+0)*100/n;this._inputElm&&(this._inputElm.value=`${r}`,this._inputElm.dispatchEvent(new Event("change")))}updateTrackFilledColorWhenEnabled(){var t,e,n;if(Sl(this.columnEditor,"enableSliderTrackColoring")&&this._inputElm){const o=(+this.getValue()-+this._inputElm.min)/((e=(t=this.sliderOptions)===null||t===void 0?void 0:t.maxValue)!==null&&e!==void 0?e:0-+this._inputElm.min)*100,s="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,(n=Sl(this.columnEditor,"sliderTrackFilledColor"))!==null&&n!==void 0?n:"var(--slick-slider-filter-thumb-color, #86bff8)").replace(/%p1/g,"0%").replace(/%p2/g,`${o}%`);this._sliderTrackElm.style.background=s,this._sliderOptions.sliderTrackBackground=s}}}const vf={autocompleter:Jb,checkbox:eC,date:iC,dualInput:rC,float:sC,integer:aC,longText:dC,multipleSelect:uC,password:lC,singleSelect:cC,slider:hC,text:zu},fC=(a,t,e)=>{let n=e;return e==null&&(n=""),`<div style="float: right">${n}</div>`},pC=(a,t,e,n,r)=>{var o;const s=n&&n.params||{},l=s.propertyNames,u=(o=s==null?void 0:s.includeTitle)!==null&&o!==void 0?o:!0;let h=s.dataContextProperty;if(h||(h=n&&n.field&&n.field.split(".")[0]),!l||!Array.isArray(l)||!h)throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.
      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}.
      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.`);if(r[h]&&Array.isArray(r[h])&&Array.isArray(r[h])&&r[h].length>0){const c=[];r[h].forEach(m=>{const v=[];l.forEach(_=>{v.push(m[_])}),c.push(v.join(" "))});const p=c.join(", ");return u?`<span title="${p}">${p}</span>`:p}return e},Uu=(a,t,e)=>{if(e&&Array.isArray(e)&&e.length>0){const n=e.join(", ");return`<span title="${n}">${n}</span>`}return e},mC=(a,t,e)=>e?`<b>${e}</b>`:"",yv=(a,t,e)=>{let n=e;return e==null&&(n=""),`<center>${n}</center>`},vC=(a,t,e)=>e?"&#x2611;":"",gC=(a,t,e)=>{let n=!1;const r=en(e);return r&&(e=+e),(e===!0||r&&+e>0||typeof e=="string"&&e.length>0&&e.toLowerCase()!=="false"&&e!=="0")&&(n=!0),n?'<i class="mdi mdi-18px mdi-check checkmark-icon" aria-hidden="true"></i>':""},_C=(a,t,e)=>{let n=!1;const r=en(e);return r&&(e=+e),(e===!0||r&&+e>0||typeof e=="string"&&e.length>0&&e.toLowerCase()!=="false"&&e!=="0")&&(n=!0),n?'<i class="fa fa-check checkmark-icon" aria-hidden="true"></i>':""},bC=(a,t,e,n,r,o)=>{if(!e||!n||!n.internalColumnEditor||!n.internalColumnEditor.collection||!n.internalColumnEditor.collection.length)return e;const{internalColumnEditor:s,internalColumnEditor:{collection:l}}=n,u=s.customStructure?s.customStructure.label:"label",h=s.customStructure?s.customStructure.value:"value";return Array.isArray(e)?l.every(c=>typeof c=="string")?Uu(a,t,e.map(c=>vs(l,p=>p===c))):Uu(a,t,e.map(c=>vs(l,p=>p[h]===c)[u])):vs(l,c=>c[h]===e)[u]||""},CC=(a,t,e,n,r,o)=>{if(!e||!n||!n.params||!n.params.collection||!n.params.collection.length)return e;const{params:s,params:{collection:l}}=n,u=s.customStructure?s.customStructure.label:"label",h=s.customStructure?s.customStructure.value:"value";return Array.isArray(e)?Uu(a,t,e.map(c=>vs(l,p=>p[h]===c)[u])):vs(l,c=>c[h]===e)[u]||""},Ev=(a,t,e,n,r)=>{var o,s,l;if(!n)return"";const u=n.params||{},h=(s=(o=u==null?void 0:u.complexField)!==null&&o!==void 0?o:u==null?void 0:u.complexFieldLabel)!==null&&s!==void 0?s:n.field;if(!h)throw new Error(`For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.
      There are 3 ways to provide it:
      1- via the generic "params" with a "complexField" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]
      2- via the generic "params" with a "complexField" and a "labelKey" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]
      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] `);if(n.labelKey&&r.hasOwnProperty(h))return(l=r[h])===null||l===void 0?void 0:l[n.labelKey];if(typeof h=="string"&&h.indexOf(".")>0){let c=h.split(".").reduce((p,m)=>p!=null&&p.hasOwnProperty(m)?p[m]:"",r);return(c==null||typeof c=="object"&&Object.entries(c).length===0&&!(c instanceof Date))&&(c=""),c}return e},yC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,numberPrefix:u,numberSuffix:h,decimalSeparator:c,thousandSeparator:p,wrapNegativeNumber:m}=un(n,o,"decimal","cell");return en(e)?wn(e,s,l,m,u,h,c,p):e},EC=()=>'<i class="fa fa-trash pointer delete-icon" aria-hidden="true"></i>',SC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"currency","cell");return en(e)?wn(e,s,l,c,"$","",u,h):e},wC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"currency","cell");if(en(e)){const p=e>=0?"green":"red",m=wn(e,s,l,c,"$","",u,h);return`<span style="color:${p}">${m}</span>`}return e},xC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"currency","cell");if(en(e)){const p=e>=0?"green":"red",m=wn(e,s,l,c,"$","",u,h);return`<span style="color:${p}; font-weight:bold;">${m}</span>`}return e},TC=()=>'<i class="fa fa-pencil pointer edit-icon" aria-hidden="true"></i>',OC=(a,t,e,n,r,o)=>{const{currencyPrefix:s,currencySuffix:l,minDecimal:u,maxDecimal:h,numberPrefix:c,numberSuffix:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(n,o,"decimal","cell");if(en(e)){const C=wn(e,u,h,_,s,l,m,v);return`${c}${C}${p}`}return e},AC=(a,t,e)=>e?`<span class="fake-hyperlink">${e}</span>`:"",kC=(a,t,e,n,r,o)=>{const s=n&&n.params||{},l=o&&typeof o.getOptions=="function"?o.getOptions():{};let u=s.hyperlinkText?s.hyperlinkText:e;u=Ln(l,u);let h=s.hyperlinkUrl?s.hyperlinkUrl:e;h=Ln(l,h);const c=h.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);return c&&Array.isArray(c)&&c.length>0?`<a href="${c[0]}">${u}</a>`:e},IC=(a,t,e,n)=>{const o=((n==null?void 0:n.params)||{}).cssClass;if(!o)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "fa fa-check" }}');let s=!1;const l=!isNaN(e);return(e===!0||l&&parseFloat(e)>0||!l&&typeof e=="string"&&e.toLowerCase()!=="false"&&e!=="0")&&(s=!0),s?`<i class="${o}" aria-hidden="true"></i>`:""},DC=(a,t,e,n)=>{var r;const o=(r=n==null?void 0:n.params)!==null&&r!==void 0?r:{},s=o.iconCssClass||o.icon||o.formatterIcon;if((o.icon||o.formatterIcon)&&console.warn('[Slickgrid-Universal] deprecated params.icon or params.formatterIcon are deprecated when using `Formatters.icon` in favor of params.iconCssClass. (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "fa fa-search" }}`'),!s)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "fa fa-search" }}`');return`<i class="${s}" aria-hidden="true"></i>`},RC=()=>'<i class="fa fa-info-circle pointer info-icon" aria-hidden="true"></i>',PC=(a,t,e)=>e?`<i>${e}</i>`:"",FC=(a,t,e)=>(e!==void 0&&typeof e!="string"&&(e=e+""),e?e.toLowerCase():""),MC=(a,t,e,n)=>{const o=(n.params||{}).mask;if(!o)throw new Error(`You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);if(e){let s=0;const l=e.toString();return o.replace(/[09A]/gi,()=>l[s++]||"")}return e},NC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"percent","cell");if(en(e)){const p=e*100;return wn(p,s,l,c,"","%",u,h)}return e},LC=(a,t,e)=>{if(!en(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="red":r<70?n="silver":n="green",`<span class="percent-complete-bar" title="${r}%" style="background:${n}; width:${r}%"></span>`},HC=(a,t,e)=>{if(!en(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="red":r<70?n="silver":n="green",`<div class="percent-complete-bar-with-text" title="${r}%" style="background:${n}; width:${r}%">${r}%</div>`},BC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"percent","cell");if(en(e)){const p=e<50?"red":"green",m=wn(e,s,l,c,"","%",u,h),v=e>100?"100%":m;return`<span style="color:${p}">${v}</span>`}return e},VC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=un(n,o,"percent","cell");return en(e)?wn(e,s,l,c,"","%",u,h):e},zC=(a,t,e)=>{if(!en(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="danger":r<70?n="warning":n="success",`<div class="progress">
    <div class="progress-bar progress-bar-${n} bg-${n}" role="progressbar" aria-valuenow="${r}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: ${r}%;">
    ${r}%
    </div>
  </div>`.replace(/\s{2,}/g," ").trim()},UC=(a,t,e,n,r,o)=>{const l=(o&&typeof o.getOptions=="function"?o.getOptions():{}).translater||n&&n.params&&n.params.translater;if(!l||typeof l.translate!="function")throw new Error(`"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return e!=null&&typeof e!="string"&&(e=e+""),e?l.translate(e):""},WC=(a,t,e,n,r,o)=>{var s,l,u,h,c,p,m,v,_,C,x;const S=o.getOptions(),E=S==null?void 0:S.treeDataOptions,D=(s=E==null?void 0:E.collapsedPropName)!==null&&s!==void 0?s:je.treeDataProperties.COLLAPSED_PROP,A=(l=E==null?void 0:E.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP,P=(u=E==null?void 0:E.levelPropName)!==null&&u!==void 0?u:je.treeDataProperties.TREE_LEVEL_PROP,M=(h=E==null?void 0:E.exportIndentMarginLeft)!==null&&h!==void 0?h:5,B=(c=E==null?void 0:E.exportIndentationLeadingChar)!==null&&c!==void 0?c:".",Z=(p=E==null?void 0:E.exportIndentationLeadingSpaceCount)!==null&&p!==void 0?p:3,L=(v=(m=S==null?void 0:S.excelExportOptions)===null||m===void 0?void 0:m.groupCollapsedSymbol)!==null&&v!==void 0?v:"⮞",de=(C=(_=S==null?void 0:S.excelExportOptions)===null||_===void 0?void 0:_.groupExpandedSymbol)!==null&&C!==void 0?C:"⮟";let be=e;if(be=Va(n,r,e),be==null||r===void 0)return"";if(!r.hasOwnProperty(P))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const J=(x=r==null?void 0:r[P])!==null&&x!==void 0?x:0;let U="",F=0;r[A]?(U=r!=null&&r[D]?L:de,F=J===0?0:M*J):F=M*(J===0?0:J+1);const ae=Wa(F);return E!=null&&E.titleFormatter&&(be=uu(E.titleFormatter,a,t,n,r,o)),be=`${J===0&&U?"":J===0?`${B}${Wa(Z)}`:B}${ae}${U} ${be}`,or(be)},GC=(a,t,e,n,r,o)=>{var s,l,u,h,c;const p=o.getOptions(),m=p==null?void 0:p.treeDataOptions,v=(s=m==null?void 0:m.indentMarginLeft)!==null&&s!==void 0?s:15,_=(l=m==null?void 0:m.collapsedPropName)!==null&&l!==void 0?l:je.treeDataProperties.COLLAPSED_PROP,C=(u=m==null?void 0:m.hasChildrenPropName)!==null&&u!==void 0?u:je.treeDataProperties.HAS_CHILDREN_PROP,x=(h=m==null?void 0:m.levelPropName)!==null&&h!==void 0?h:je.treeDataProperties.TREE_LEVEL_PROP;let S=e;if(S=Va(n,r,e),S==null||r===void 0)return"";if(!r.hasOwnProperty(x))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const E=(c=r==null?void 0:r[x])!==null&&c!==void 0?c:0,D=`<span style="display:inline-block; width:${v*E}px;"></span>`,A=`slick-tree-level-${E}`;let P="";r[C]&&(P=r!=null&&r[_]?"collapsed":"expanded"),m!=null&&m.titleFormatter&&(S=uu(m.titleFormatter,a,t,n,r,o));const M=Ln(p,S,{ADD_ATTR:["target"]}),B=`slick-group-toggle ${P}`.trim(),Z=`${D}<span class="${B}" aria-expanded="${P==="expanded"}"></span><span class="slick-tree-title" level="${E}">${M}</span>`;return{addClasses:A,text:Z}},$C=(a,t,e,n,r,o)=>{var s,l;const u=o.getOptions(),h=(l=(s=u==null?void 0:u.treeDataOptions)===null||s===void 0?void 0:s.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:c,treeTotalsFormatter:p,params:m}=n;if(!c&&!p)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(r[h]&&(r!=null&&r.__treeTotals)&&(c||p))return(p??c)(r==null?void 0:r.__treeTotals,n,o);if(m.formatters){let v=e;for(const _ of m.formatters)!r[h]&&!(r!=null&&r.__treeTotals)&&(v=_(a,t,v,n,r,o)||e);return v}return e},YC=(a,t,e,n,r,o)=>{const l=(o&&typeof o.getOptions=="function"?o.getOptions():{}).translater||n&&n.params&&n.params.translater;if(!l||typeof l.translate!="function")throw new Error(`"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return e!=null&&typeof e!="string"&&(e=e+""),e?l.translate(e.toUpperCase()):""},jC=(a,t,e)=>(e!==void 0&&typeof e!="string"&&(e=e+""),e?e.toUpperCase():""),XC=(a,t,e)=>e?"Yes":"No",ln={alignCenter:yv,alignRight:fC,arrayObjectToCsv:pC,arrayToCsv:Uu,bold:mC,center:yv,checkbox:vC,checkmark:_C,checkmarkMaterial:gC,complex:Ev,complexObject:Ev,collection:CC,collectionEditor:bC,currency:OC,dateIso:cn(ie.dateIso,"-"),dateTimeIso:cn(ie.dateTimeIso,"-"),dateTimeShortIso:cn(ie.dateTimeShortIso,"-"),dateTimeIsoAmPm:cn(ie.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:cn(ie.dateTimeIsoAM_PM,"-"),dateEuro:cn(ie.dateEuro,"/"),dateEuroShort:cn(ie.dateEuroShort,"/"),dateTimeEuro:cn(ie.dateTimeEuro,"/"),dateTimeEuroShort:cn(ie.dateTimeEuroShort,"/"),dateTimeShortEuro:cn(ie.dateTimeShortEuro,"/"),dateTimeEuroAmPm:cn(ie.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:cn(ie.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:cn(ie.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:cn(ie.dateTimeEuroShortAM_PM,"/"),dateUs:cn(ie.dateUs,"/"),dateTimeUs:cn(ie.dateTimeUs,"/"),dateTimeShortUs:cn(ie.dateTimeShortUs,"/"),dateTimeUsAmPm:cn(ie.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:cn(ie.dateTimeUsAM_PM,"/"),dateTimeUsShort:cn(ie.dateTimeUsShort,"/"),dateTimeUsShortAmPm:cn(ie.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:cn(ie.dateTimeUsShortAM_PM,"/"),dateUsShort:cn(ie.dateUsShort,"/"),dateUtc:cn(ie.dateUtc,"-"),deleteIcon:EC,decimal:yC,dollar:SC,dollarColored:wC,dollarColoredBold:xC,editIcon:TC,fakeHyperlink:AC,hyperlink:kC,icon:DC,iconBoolean:IC,infoIcon:RC,italic:PC,lowercase:FC,mask:MC,multiple:du,percent:NC,percentComplete:BC,percentCompleteBar:LC,percentCompleteBarWithText:HC,percentSymbol:VC,progressBar:zC,translate:UC,translateBoolean:YC,tree:GC,treeParseTotals:$C,treeExport:WC,uppercase:jC,yesNo:XC},Ti={avgTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"";let s=(r=a.avg)===null||r===void 0?void 0:r[o];const l=t==null?void 0:t.params;let u=(l==null?void 0:l.groupFormatterPrefix)||"";const h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){if(s<0)if(s=Math.abs(s),!_)u+="-";else{if(isNaN(c)&&isNaN(p)){const C=ms(Math.round(s),v);return`${u}(${C})${h}`}return`${u}(${Ws(s,c,p,m,v)})${h}`}if(isNaN(c)&&isNaN(p)){const C=ms(Math.round(s),v);return`${u}${C}${h}`}return`${u}${Ws(s,c,p,m,v)}${h}`}return""},avgTotalsCurrency:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.avg)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=wn(s,m,v,x,c,p,_,C);return`${u}${S}${h}`}return""},avgTotalsDollar:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.avg)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`${u}${C}${h}`}return""},avgTotalsPercentage:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"";let s=(r=a.avg)===null||r===void 0?void 0:r[o];const l=t==null?void 0:t.params;let u=(l==null?void 0:l.groupFormatterPrefix)||"";const h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"percent","group");if(s!==null&&!isNaN(+s)){if(s<0)if(s=Math.abs(s),!_)u+="-";else{if(isNaN(c)&&isNaN(p)){const C=ms(Math.round(s),v);return`${u}(${C}%)${h}`}return`${u}(${Ws(s,c,p,m,v)}%)${h}`}if(isNaN(c)&&isNaN(p)){const C=ms(Math.round(s),v);return`${u}${C}%${h}`}return`${u}${Ws(s,c,p,m,v)}%${h}`}return""},maxTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.max)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},minTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.min)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},sumTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},sumTotalsBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`<b>${u}${C}${h}</b>`}return""},sumTotalsColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"","",m,v);return`<span style="color:${C}">${u}${x}${h}</span>`}return""},sumTotalsCurrency:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=wn(s,m,v,x,c,p,_,C);return`${u}${S}${h}`}return""},sumTotalsCurrencyColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=s>=0?"green":"red",E=wn(s,m,v,x,c,p,_,C);return`<span style="color:${S}">${u}${E}${h}</span>`}return""},sumTotalsDollar:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`${u}${C}${h}`}return""},sumTotalsDollarBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`<b>${u}${C}${h}</b>`}return""},sumTotalsDollarColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"$","",m,v);return`<span style="color:${C}">${u}${x}${h}</span>`}return""},sumTotalsDollarColoredBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=un(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"$","",m,v);return`<span style="color:${C}; font-weight: bold;">${u}${x}${h}</span>`}return""}};class KC{constructor(){this.options=pf}}const gf={...Jg,...e_,...s_,...p_,...h_,deepAssign:ml};class Wu{constructor(t){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=t,this._property=t.property||"",this._elementBindings=[],t.property&&t.variable&&(t.variable.hasOwnProperty(t.property)||t.property in t.variable)?this._value=t.variable[t.property]:this._value=t.variable,typeof t.variable=="object"&&Object.defineProperty(t.variable,t.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(t){if(this._value=t,Array.isArray(this._elementBindings))for(const e of this._elementBindings)e!=null&&e.element&&(e!=null&&e.attribute)&&(e.element[e.attribute]=t)}bind(t,e,n,r){return t&&t.forEach?t.forEach(o=>this.bindSingleElement(o,e,n,r)):t&&this.bindSingleElement(t,e,n,r),this}unbind(t,e,n,r,o){if(t){t.removeEventListener(e,n,r);const s=this._boundedEventWithListeners.findIndex(l=>l.uid===o);s>=0&&this._boundedEventWithListeners.splice(s,1)}}unbindAll(){let t=this._boundedEventWithListeners.pop();for(;t;){const{element:e,eventName:n,listener:r,uid:o}=t;this.unbind(e,n,r,void 0,o),t=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(t,e,n,r){const o={element:t,attribute:e};if(t){if(n){const s=()=>{let l=t[e];if(this.hasData(l)&&(t==null?void 0:t.type)==="number"&&(l=+l),this.valueSetter(l),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),typeof r=="function")return r(this.valueGetter())};o.event=n,o.listener=s,t.addEventListener(n,s),this._boundedEventWithListeners.push({element:t,eventName:n,listener:s,uid:this.generateUuidV4()})}this._elementBindings.push(o),t[e]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}hasData(t){return t!=null&&t!==""}}class Sv{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(t){this._querySelectorPrefix=t}get observers(){return this._observers}dispose(){let t=this._observers.pop();for(;t;)t.dispose(),t=this._observers.pop();this._observers=[]}addElementBinding(t,e,n,r,o,s){const l=document.querySelectorAll(`${this.querySelectorPrefix}${n}`);let u=this._observers.find(h=>h.property===t);u||(u=new Wu({variable:t,property:e})),Array.isArray(o)?o.forEach(h=>u==null?void 0:u.bind(l,r,h,s)):u==null||u.bind(l,r,o,s),this._observers.push(u)}bindEventHandler(t,e,n,r){document.querySelectorAll(`${this.querySelectorPrefix}${t}`).forEach(s=>{s!=null&&s.addEventListener&&s.addEventListener(e,n,r)})}setElementAttributeValue(t,e,n){document.querySelectorAll(`${this.querySelectorPrefix}${t}`).forEach(o=>{o.textContent="",o&&e in o&&(o[e]=n)})}}function qC(a,t,e){let n;e={...{modalType:"edit",validationFailedMsg:"Some of the fields have failed validation",validationMsgPrefix:null,show:null,hide:null,position:null,destroy:null,formValues:{},editors:{}},...e};const o=()=>{},s=u=>{var h,c,p,m,v,_;const C=t[u],x=Wn(C),S=(h=C==null?void 0:C.clientWidth)!==null&&h!==void 0?h:0,E=(c=C==null?void 0:C.clientHeight)!==null&&c!==void 0?c:0;return{top:(p=x==null?void 0:x.top)!==null&&p!==void 0?p:0,left:(m=x==null?void 0:x.left)!==null&&m!==void 0?m:0,bottom:((v=x==null?void 0:x.top)!==null&&v!==void 0?v:0)+E,right:((_=x==null?void 0:x.left)!==null&&_!==void 0?_:0)+S,width:S,height:E,visible:!0}};function l(u){const h=this;let c=[];function p(){let m={},v=0;for(;v<a.length;){if(a[v].editor){const _=a[v];m={...u},m.container=t[v],m.column=_,m.position=s(v),m.commitChanges=o,m.cancelChanges=o,m.compositeEditorOptions=e,m.formValues={};const C=new _.editor(m);e.editors[_.id]=C,c.push(C)}v++}setTimeout(()=>{Array.isArray(c)&&c.length>0&&typeof c[0].focus=="function"&&c[0].focus()},0)}h.getEditors=()=>c,h.destroy=()=>{var m;let v=c.pop();for(;v;)v==null||v.destroy(),v=c.pop();let _=t.pop();for(;_;)on(_),_==null||_.remove(),_=t.pop();(m=e==null?void 0:e.destroy)===null||m===void 0||m.call(e),c=[],t=null},h.focus=()=>{(n||c[0]).focus()},h.isValueChanged=()=>{let m=0;for(;m<c.length;){if(c[m].isValueChanged())return!0;m++}return!1},h.serializeValue=()=>{const m=[];let v=0;for(;v<c.length;)m[v]=c[v].serializeValue(),v++;return m},h.applyValue=(m,v)=>{let _=0;for(;_<c.length;)c[_].applyValue(m,v==null?void 0:v[_]),_++},h.loadValue=m=>{let v=0;for(;v<c.length;)c[v].loadValue(m),v++},h.validate=m=>{var v,_;let C;n=null;const x=[];let S=0;for(;S<c.length;){const E=(v=c[S].args)===null||v===void 0?void 0:v.column;if((E==null?void 0:E.id)!==void 0){const D=document.querySelector(".slick-editor-modal");let A=D==null?void 0:D.querySelector(`.item-details-validation.editor-${E.id}`),P=D==null?void 0:D.querySelector(`.item-details-label.editor-${E.id}`),M=D==null?void 0:D.querySelector(`[data-editorid=${E.id}]`);const B=(_=e==null?void 0:e.validationMsgPrefix)!==null&&_!==void 0?_:"";(!m||M!=null&&M.contains(m))&&(C=c[S].validate(),C.valid?A&&(A.textContent="",M==null||M.classList.remove("invalid"),P==null||P.classList.remove("invalid")):(n=c[S],x.push({index:S,editor:c[S],container:t[S],msg:C.msg}),A&&(A.textContent=`${B}${C.msg}`,P==null||P.classList.add("invalid"),M==null||M.classList.add("invalid")))),A=null,P=null,M=null}S++}return m=null,x.length?{valid:!1,msg:e.validationFailedMsg,errors:x}:{valid:!0,msg:""}},h.hide=()=>{var m,v,_;let C=0;for(;C<c.length;)(v=(m=c[C])===null||m===void 0?void 0:m.hide)===null||v===void 0||v.call(m),C++;(_=e==null?void 0:e.hide)===null||_===void 0||_.call(e)},h.show=()=>{var m,v,_;let C=0;for(;C<c.length;)(v=(m=c[C])===null||m===void 0?void 0:m.show)===null||v===void 0||v.call(m),C++;(_=e==null?void 0:e.show)===null||_===void 0||_.call(e)},h.position=m=>{var v;(v=e==null?void 0:e.position)===null||v===void 0||v.call(e,m)},p()}return l.prototype=this,Slick.CompositeEditor=l,l}const wv=a=>console.log(a.message);class _f{get eventHandler(){return this._eventHandler}get dataView(){return this.grid.getData()}get dataViewLength(){return this.dataView.getLength()}get formValues(){return this._formValues}get editors(){return this._editors}set editors(t){this._editors=t}get gridOptions(){var t;return(t=this.grid)===null||t===void 0?void 0:t.getOptions()}constructor(){this._columnDefinitions=[],this._lastActiveRowNumber=-1,this._formValues=null,this.gridService=null,this._eventHandler=new Slick.EventHandler,this._bindEventService=new Nn}init(t,e){var n,r;if(this.grid=t,this.gridService=e.get("GridService"),this.translaterService=e.get("TranslaterService"),!this.gridService)throw new Error("[Slickgrid-Universal] it seems that the GridService is not being loaded properly, make sure the Container Service is properly implemented.");if(this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this._locales=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.locales)!==null&&r!==void 0?r:je.locales}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this._formValues=null,this.disposeComponent()}disposeComponent(){var t,e,n;(t=this._modalBodyTopValidationElm)===null||t===void 0||t.remove(),(e=this._modalSaveButtonElm)===null||e===void 0||e.remove(),typeof((n=this._modalElm)===null||n===void 0?void 0:n.remove)=="function"&&(this._modalElm.remove(),document.body.classList.remove("slick-modal-open")),this._editorContainers=[]}changeFormInputValue(t,e,n=!1,r=!0){var o,s,l,u,h,c,p,m,v,_,C,x;const S=this.getColumnByObjectOrId(t),E=typeof t=="string"?t:(o=S==null?void 0:S.id)!==null&&o!==void 0?o:"",D=(s=this._editors)===null||s===void 0?void 0:s[E];let A=e;if(!D&&!n)throw new Error(`Composite Editor with column id "${E}" not found.`);if(typeof(D==null?void 0:D.setValue)=="function"&&Array.isArray(this._editorContainers)){D.setValue(e,!0,r);const M=this._editorContainers.find(Z=>Z.dataset.editorid===E),B=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;!D.disabled||D.disabled&&!B?(c=M==null?void 0:M.classList)===null||c===void 0||c.add("modified"):(A="",(p=M==null?void 0:M.classList)===null||p===void 0||p.remove("modified")),D.disabled&&(A!==""||A!==null||A!==void 0||A!==0)&&(A="")}const P=(m=S==null?void 0:S.field)!==null&&m!==void 0?m:"";if(S&&(P!=null&&P.includes("."))){const M=(C=(_=(v=S.internalColumnEditor)===null||v===void 0?void 0:v.complexObjectPath)!==null&&_!==void 0?_:P)!==null&&C!==void 0?C:"";cr((x=this._formValues)!==null&&x!==void 0?x:{},M,e)}else this._formValues={...this._formValues,[E]:A}}changeFormValue(t,e){var n,r,o,s,l;const u=this.getColumnByObjectOrId(t),h=typeof t=="string"?t:(n=u==null?void 0:u.id)!==null&&n!==void 0?n:"",c=(r=u==null?void 0:u.field)!==null&&r!==void 0?r:t;if(c!=null&&c.includes(".")){const p=(l=(s=(o=u==null?void 0:u.internalColumnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:c)!==null&&l!==void 0?l:"";cr(this._formValues,p,e)}else this._formValues={...this._formValues,[h]:e};this._formValues=ml({},this._itemDataContext,this._formValues)}changeFormEditorOption(t,e,n){var r;const o=(r=this._editors)===null||r===void 0?void 0:r[t];if(o!=null&&o.changeEditorOption)o.changeEditorOption(e,n);else throw new Error(`Editor with column id "${t}" not found OR the Editor does not support "changeEditorOption" (current only available with AutoComplete, Date, MultipleSelect & SingleSelect Editors).`)}disableFormInput(t,e=!0){var n;const r=(n=this._editors)===null||n===void 0?void 0:n[t];r!=null&&r.disable&&Array.isArray(this._editorContainers)&&r.disable(e)}openDetails(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;const E=(e=t.onError)!==null&&e!==void 0?e:wv,D={backdrop:"static",showCloseButtonOutside:!0,shouldClearRowSelectionAfterMassAction:!0,viewColumnLayout:"auto",modalType:"edit"};try{if(!this.grid||this.grid.getEditorLock().isActive()&&!this.grid.getEditorLock().commitCurrentEdit())return null;this._formValues=null,this._options={...D,...this.gridOptions.compositeEditorOptions,...t,labels:{...(n=this.gridOptions.compositeEditorOptions)===null||n===void 0?void 0:n.labels,...t==null?void 0:t.labels}},this._options.backdrop=t.backdrop!==void 0?t.backdrop:"static";const A=this._options.viewColumnLayout||1,P=this.grid.getActiveCell(),M=(r=P==null?void 0:P.cell)!==null&&r!==void 0?r:0,B=(o=P==null?void 0:P.row)!==null&&o!==void 0?o:0,Z=this.grid.getUID()||"";let L=t.headerTitle||"";typeof this._options.onBeforeOpen=="function"&&this._options.onBeforeOpen(),this.hasRowSelectionEnabled()&&this._options.modalType==="auto-mass"&&this.grid.getSelectedRows&&((this.grid.getSelectedRows()||[]).length>0?(this._options.modalType="mass-selection",t!=null&&t.headerTitleMassSelection&&(L=t==null?void 0:t.headerTitleMassSelection)):(this._options.modalType="mass-update",t!=null&&t.headerTitleMassUpdate&&(L=t==null?void 0:t.headerTitleMassUpdate)));const de=this._options.modalType||"edit";if(this.gridOptions.editable)if(this.gridOptions.enableCellNavigation){if(!this.gridOptions.enableAddRow&&(de==="clone"||de==="create"))return E({type:"error",code:"ENABLE_ADD_ROW_REQUIRED",message:'Composite Editor requires the flag "enableAddRow" to be set to True in your Grid Options when cloning/creating a new item.'}),null;if(!P&&(de==="clone"||de==="edit"))return E({type:"warning",code:"NO_RECORD_FOUND",message:"No records selected for edit or clone operation."}),null;{const be=de==="mass-update"||de==="mass-selection",J=be?{}:this.grid.getDataItem(B);this._originalDataContext=fo(J),this._columnDefinitions=this.grid.getColumns();const U=this.hasRowSelectionEnabled()?this.grid.getSelectedRows():[],F=(l=(s=this.dataView)===null||s===void 0?void 0:s.getItemCount())!==null&&l!==void 0?l:0;this._lastActiveRowNumber=B;const ae=this.dataView.getAllSelectedIds(),Ke=de==="create"?this.dataViewLength:B;if(!this.focusOnFirstColumnCellWithEditor(this._columnDefinitions,J,M,Ke,be))return null;if(de==="edit"&&!J)return E({type:"warning",code:"ROW_NOT_EDITABLE",message:"Current row is not editable."}),null;if(de==="mass-selection"&&U.length<1)return E({type:"warning",code:"ROW_SELECTION_REQUIRED",message:"You must select some rows before trying to apply new value(s)."}),null;let xe=[];be?xe=this._columnDefinitions.filter(ct=>{var k;return ct.editor&&((k=ct.internalColumnEditor)===null||k===void 0?void 0:k.massUpdate)===!0}):xe=this._columnDefinitions.filter(ct=>ct.editor),xe.some(ct=>{var k;return((k=ct.internalColumnEditor)===null||k===void 0?void 0:k.compositeEditorFormOrder)!==void 0})&&xe.sort((ct,k)=>{var ee,ge,$,X;const re=(ge=(ee=ct==null?void 0:ct.internalColumnEditor)===null||ee===void 0?void 0:ee.compositeEditorFormOrder)!==null&&ge!==void 0?ge:1/0,Pe=(X=($=k==null?void 0:k.internalColumnEditor)===null||$===void 0?void 0:$.compositeEditorFormOrder)!==null&&X!==void 0?X:1/0;return Hp(re,Pe,ji.asc)});const Oe=L.replace(/\{\{(.*?)\}\}/g,(ct,k)=>_n(J,k)),De=A==="auto"?this.autoCalculateLayoutColumnCount(xe.length):A;this._modalElm=Re("div",{className:`slick-editor-modal ${Z}`});const ne=Re("div",{className:"slick-editor-modal-content"});if(!isNaN(A)&&+A>1||A==="auto"&&De>1){const ct=De===2?"split-view":"triple-split-view";ne.classList.add(ct)}const pe=Re("div",{className:"slick-editor-modal-title"});pe.innerHTML=Ln(this.gridOptions,Oe);const Ve=Re("button",{type:"button",ariaLabel:"Close",textContent:"×",className:"close",dataset:{action:"close"}});this._options.showCloseButtonOutside&&((u=pe==null?void 0:pe.classList)===null||u===void 0||u.add("outside"),(h=Ve==null?void 0:Ve.classList)===null||h===void 0||h.add("outside"));const Ye=Re("div",{ariaLabel:"Close",className:"slick-editor-modal-header"});Ye.appendChild(pe),Ye.appendChild(Ve);const Ue=Re("div",{className:"slick-editor-modal-body"});this._modalBodyTopValidationElm=Re("div",{className:"validation-summary",style:{display:"none"}},Ue);const ce=Re("div",{className:"slick-editor-modal-footer"}),Ce=Re("button",{type:"button",ariaLabel:this.getLabelText("cancelButton","TEXT_CANCEL","Cancel"),className:"btn btn-cancel btn-default btn-sm",textContent:this.getLabelText("cancelButton","TEXT_CANCEL","Cancel"),dataset:{action:"cancel"}});let _e="",He="";switch(de){case"clone":He=this.getLabelText("cloneButton","TEXT_CLONE","Clone");break;case"mass-update":const ct=this.getLabelText("massUpdateStatus","TEXT_ALL_X_RECORDS_SELECTED","All {{x}} records selected");_e=this.parseText(ct,{x:F}),He=this.getLabelText("massUpdateButton","TEXT_APPLY_MASS_UPDATE","Mass Update");break;case"mass-selection":const k=this.getLabelText("massSelectionStatus","TEXT_X_OF_Y_MASS_SELECTED","{{x}} of {{y}} selected");_e=this.parseText(k,{x:ae.length,y:F}),He=this.getLabelText("massSelectionButton","TEXT_APPLY_TO_SELECTION","Update Selection");break;default:He=this.getLabelText("saveButton","TEXT_SAVE","Save")}const ot=Re("div",{className:"footer-status-text",textContent:_e});this._modalSaveButtonElm=Re("button",{type:"button",className:"btn btn-save btn-primary btn-sm",ariaLabel:He,textContent:He,dataset:{action:de==="create"||de==="edit"?"save":de,ariaLabel:He}});const ze=Re("div",{className:"footer-buttons"});(de==="mass-update"||de==="mass-selection")&&ce.appendChild(ot),ze.appendChild(Ce),ze.appendChild(this._modalSaveButtonElm),ce.appendChild(ze),ne.appendChild(Ye),ne.appendChild(Ue),ne.appendChild(ce),this._modalElm.appendChild(ne);for(const ct of xe)if(ct.editor){const k=Re("div",{className:`item-details-container editor-${ct.id}`});De===1?k.classList.add("slick-col-medium-12"):k.classList.add("slick-col-medium-6",`slick-col-xlarge-${12/De}`);const ee=Re("div",{className:`item-details-label editor-${ct.id}`});ee.innerHTML=Ln(this.gridOptions,this.getColumnLabel(ct)||"n/a");const ge=Re("div",{className:"item-details-editor-container slick-cell",dataset:{editorid:`${ct.id}`}}),$=Re("div",{className:`item-details-validation editor-${ct.id}`});if(!((c=this._options)===null||c===void 0)&&c.showResetButtonOnEachEditor){const X=this.createEditorResetButtonElement(`${ct.id}`);this._bindEventService.bind(X,"click",this.handleResetInputValue.bind(this)),ee.appendChild(X)}k.appendChild(ee),k.appendChild(ge),k.appendChild($),Ue.appendChild(k)}if(!((p=this._options)===null||p===void 0)&&p.showFormResetButton){const ct=this.createFormResetButtonElement();this._bindEventService.bind(ct,"click",this.handleResetFormClicked.bind(this)),Ue.appendChild(ct)}document.body.appendChild(this._modalElm),document.body.classList.add("slick-modal-open"),this._bindEventService.bind(document.body,"click",this.handleBodyClicked.bind(this)),this._editors={},this._editorContainers=xe.map(ct=>Ue.querySelector(`[data-editorid=${ct.id}]`))||[],this._compositeOptions={destroy:this.disposeComponent.bind(this),modalType:de,validationMsgPrefix:"* ",formValues:{},editors:this._editors};const St=new qC(xe,this._editorContainers,this._compositeOptions);this.grid.editActiveCell(St),this._bindEventService.bind(Ve,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(Ce,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(this._modalSaveButtonElm,"click",this.handleSaveClicked.bind(this)),this._bindEventService.bind(this._modalElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._modalElm,"focusout",this.validateCurrentEditor.bind(this)),this._bindEventService.bind(this._modalElm,"blur",this.validateCurrentEditor.bind(this)),this._eventHandler.subscribe(this.grid.onCompositeEditorChange,this.handleOnCompositeEditorChange.bind(this)),this._eventHandler.subscribe(this.grid.onAddNewRow,(ct,k)=>{this.insertNewItemInDataView(k.item),this._originalDataContext=k.item,this.dispose()})}}else return E({type:"error",code:"ENABLE_CELL_NAVIGATION_REQUIRED",message:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.'}),null;else return E({type:"error",code:"EDITABLE_GRID_REQUIRED",message:"Your grid must be editable in order to use the Composite Editor Modal."}),null;return this}catch(A){this.dispose();const P=typeof A=="string"?A:(_=(m=A==null?void 0:A.message)!==null&&m!==void 0?m:(v=A==null?void 0:A.body)===null||v===void 0?void 0:v.message)!==null&&_!==void 0?_:"",M=typeof A=="string"?A:(S=(C=A==null?void 0:A.status)!==null&&C!==void 0?C:(x=A==null?void 0:A.body)===null||x===void 0?void 0:x.status)!==null&&S!==void 0?S:P;return E({type:"error",code:M,message:P}),null}}async cancelEditing(){var t,e;let n=!0;this.formValues&&Object.keys(this.formValues).length>0&&typeof this._options.onClose=="function"&&(n=await this._options.onClose()),n&&(this.grid.getEditController().cancelCurrentEdit(),(((t=this._options)===null||t===void 0?void 0:t.modalType)==="edit"||((e=this._options)===null||e===void 0?void 0:e.modalType)==="clone")&&this.resetCurrentRowDataContext(),this.grid.setActiveRow(this._lastActiveRowNumber),this.dispose())}showValidationSummaryText(t,e=""){var n,r;t&&e!==""?(this._modalBodyTopValidationElm.textContent=e,this._modalBodyTopValidationElm.style.display="block",(r=(n=this._modalBodyTopValidationElm).scrollIntoView)===null||r===void 0||r.call(n),this._modalSaveButtonElm.disabled=!1,this._modalSaveButtonElm.classList.remove("saving")):(this._modalBodyTopValidationElm.style.display="none",this._modalBodyTopValidationElm.textContent=e)}applySaveMassUpdateChanges(t,e,n=!0){const r=n?this.dataView.getItems():fo(this.dataView.getItems());for(const o in t)o in t&&r.forEach(s=>{var l;o in t&&(((l=this._options)===null||l===void 0?void 0:l.validateMassUpdateChange)===void 0||this._options.validateMassUpdateChange(o,s,t)!==!1)&&(s[o]=t[o])});return n&&(this.dataView.setItems(r,this.gridOptions.datasetIdPropertyName),this.grid.invalidate()),r}applySaveMassSelectionChanges(t,e,n=!0){var r,o;const l=((r=e==null?void 0:e.dataContextIds)!==null&&r!==void 0?r:[]).map(h=>this.dataView.getItemById(h)),u=n?l:fo(l);for(const h in t)h in t&&u.forEach(c=>{var p;h in t&&(((p=this._options)===null||p===void 0?void 0:p.validateMassUpdateChange)===void 0||this._options.validateMassUpdateChange(h,c,t)!==!1)&&(c[h]=t[h])});return n&&((o=this.gridService)===null||o===void 0||o.updateItems(u)),u}autoCalculateLayoutColumnCount(t){return t>=15?3:t>=8?2:1}createEditorResetButtonElement(t){var e,n,r,o,s;const l=Re("button",{type:"button",name:t,ariaLabel:"Reset",title:(r=(n=(e=this._options)===null||e===void 0?void 0:e.labels)===null||n===void 0?void 0:n.resetFormButton)!==null&&r!==void 0?r:"Reset Form Input",className:"btn btn-xs btn-editor-reset"});if(!((o=this._options)===null||o===void 0)&&o.resetEditorButtonCssClass){const u=(s=this._options)===null||s===void 0?void 0:s.resetEditorButtonCssClass.split(" ");for(const h of u)l.classList.add(h)}return l}createFormResetButtonElement(){var t,e;const n=Re("div",{className:"reset-container"}),r=Re("button",{type:"button",className:"btn btn-sm reset-form"},n);return Re("span",{className:(e=(t=this._options)===null||t===void 0?void 0:t.resetFormButtonIconCssClass)!==null&&e!==void 0?e:""},r),r.appendChild(document.createTextNode(" Reset Form")),n}executeOnError(t){var e,n;((n=(e=this._options)===null||e===void 0?void 0:e.onError)!==null&&n!==void 0?n:wv)(t)}async executeOnSave(t,e,n,r){var o,s,l,u,h,c;try{if(this.showValidationSummaryText(!1,""),this.validateCompositeEditors().valid){if(this._modalSaveButtonElm.classList.add("saving"),this._modalSaveButtonElm.disabled=!0,typeof((o=this._options)===null||o===void 0?void 0:o.onSave)=="function"){const m=this._options.modalType==="mass-update"||this._options.modalType==="mass-selection";let v;m&&(!((s=this._options)===null||s===void 0)&&s.shouldPreviewMassChangeDataset)&&(v=t(this.formValues,this.getCurrentRowSelections(),!1));const _=m?v:r;await((l=this._options)===null||l===void 0?void 0:l.onSave(this.formValues,this.getCurrentRowSelections(),_))&&(t(this.formValues,this.getCurrentRowSelections()),e())}else t(this.formValues,this.getCurrentRowSelections()),e();typeof n=="function"&&n(),this.dispose()}}catch(p){const m=typeof p=="string"?p:(c=(u=p==null?void 0:p.message)!==null&&u!==void 0?u:(h=p==null?void 0:p.body)===null||h===void 0?void 0:h.message)!==null&&c!==void 0?c:"";this.showValidationSummaryText(!0,m)}}focusOnFirstColumnCellWithEditor(t,e,n,r,o){const s=o&&!this.gridOptions.enableAddRow&&r>=this.dataViewLength?this.dataViewLength-1:r;let l=n;const u=t[n].editor;let h=this.grid.getCellNode(s,n);if(!u||!h||!this.getActiveCellEditor(s,n)){if(l=this.findNextAvailableEditorColumnIndex(t,e,r,o),l===-1)return this.executeOnError({type:"error",code:"NO_EDITOR_FOUND",message:"We could not find any Editor in your Column Definition"}),!1;this.grid.setActiveCell(s,l,!1),o&&this.grid.setActiveRow(this.dataViewLength,l,!0)}return h=this.grid.getCellNode(s,l),!!h}findNextAvailableEditorColumnIndex(t,e,n,r){var o;let s=-1;for(let l=0;l<t.length;l++){const u=t[l];if(u.editor&&(!r||r&&(!((o=u.internalColumnEditor)===null||o===void 0)&&o.massUpdate))){const h=this.grid.onBeforeEditCell.notify({row:n,cell:l,item:e,column:u,grid:this.grid,target:"composite",compositeEditorOptions:this._compositeOptions}).getReturnValue();if(this.grid.setActiveCell(n,l,!1),h!==!1){s=l;break}}}return s}getColumnByObjectOrId(t){let e;return typeof t=="object"?e=t:typeof t=="string"&&(e=this._columnDefinitions.find(n=>n.id===t)),e}getActiveCellEditor(t,e){return this.grid.setActiveCell(t,e,!1),this.grid.getCellEditor()}getColumnLabel(t){var e;const n=this.gridOptions.columnGroupSeparator||" - ";let r=t.nameCompositeEditor||t.name||"",o=t.columnGroup||"";if(this.gridOptions.enableTranslate&&this.translaterService){const l=t.nameCompositeEditorKey||t.nameKey;l&&(r=this.translaterService.translate(l)),t.columnGroupKey&&(!((e=this.translaterService)===null||e===void 0)&&e.translate)&&(o=this.translaterService.translate(t.columnGroupKey))}return(o?`${o}${n}${r}`:r)||""}getLabelText(t,e,n){var r,o,s,l,u,h,c;const p={...(r=this.gridOptions.compositeEditorOptions)===null||r===void 0?void 0:r.labels,...(o=this._options)===null||o===void 0?void 0:o.labels};if(!((s=this.gridOptions)===null||s===void 0)&&s.enableTranslate&&(!((l=this.translaterService)===null||l===void 0)&&l.translate)&&p.hasOwnProperty(`${t}Key`)){const m=p[`${t}Key`];return this.translaterService.translate(m||"")}return(c=(u=p==null?void 0:p[t])!==null&&u!==void 0?u:(h=this._locales)===null||h===void 0?void 0:h[e])!==null&&c!==void 0?c:n}getCurrentRowSelections(){const t=this.dataView.getAllSelectedIds();return{gridRowIndexes:this.dataView.mapIdsToRows(t),dataContextIds:t}}handleBodyClicked(t){var e,n,r;!((n=(e=t.target)===null||e===void 0?void 0:e.classList)===null||n===void 0)&&n.contains("slick-editor-modal")&&((r=this._options)===null||r===void 0?void 0:r.backdrop)!=="static"&&this.dispose()}handleKeyDown(t){t.code==="Escape"?(this.cancelEditing(),t.stopPropagation(),t.preventDefault()):t.code==="Tab"&&this.validateCurrentEditor()}handleResetInputValue(t){var e,n;const r=t.target.name,o=(e=this._editors)===null||e===void 0?void 0:e[r];o!=null&&o.reset&&o.reset(),(n=this._formValues)===null||n===void 0||delete n[r]}async handleMassSaving(t,e){if(!this.formValues||Object.keys(this.formValues).length===0)this.executeOnError({type:"warning",code:"NO_CHANGES_DETECTED",message:"Sorry we could not detect any changes."});else{const n=t==="mass-update"?"applySaveMassUpdateChanges":"applySaveMassSelectionChanges";this.executeOnSave(this[n].bind(this),e.bind(this))}}handleOnCompositeEditorChange(t,e){var n,r,o,s,l,u,h,c;const p=(r=(n=e.column)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";this._formValues={...this._formValues,...e.formValues};const m=(o=this._editors)===null||o===void 0?void 0:o[p],v=(h=(l=(s=m==null?void 0:m.isValueTouched)===null||s===void 0?void 0:s.call(m))!==null&&l!==void 0?l:(u=m==null?void 0:m.isValueChanged)===null||u===void 0?void 0:u.call(m))!==null&&h!==void 0?h:!1;this._itemDataContext=(c=m==null?void 0:m.dataContext)!==null&&c!==void 0?c:{};const _=this._modalElm.querySelector(`[data-editorid=${p}]`);_!=null&&_.classList&&(v?_.classList.add("modified"):_.classList.remove("modified")),this.validateCompositeEditors()}hasRowSelectionEnabled(){const t=this.grid.getSelectionModel();return(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&t}handleResetFormClicked(){for(const t of Object.keys(this._editors)){const e=this._editors[t];e!=null&&e.reset&&e.reset()}this._formValues=Mp(this._formValues)}handleSaveClicked(){var t,e,n;const r=(t=this._options)===null||t===void 0?void 0:t.modalType;switch(r){case"mass-update":this.handleMassSaving(r,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"mass-selection":this.handleMassSaving(r,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveRow(this._lastActiveRowNumber),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"clone":const o={...this._originalDataContext,...this.formValues},s=()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1)};this.executeOnSave(this.insertNewItemInDataView.bind(this,o),s,this.resetCurrentRowDataContext.bind(this),o);break;case"create":case"edit":default:if(this.grid.getEditController().commitCurrentEdit(),typeof((e=this._options)===null||e===void 0?void 0:e.onSave)=="function"){const l=this.grid.getDataItem(this._lastActiveRowNumber);(n=this._options)===null||n===void 0||n.onSave(this.formValues,this.getCurrentRowSelections(),l)}break}}insertNewItemInDataView(t){var e,n,r,o;const s=(n=(e=this.dataView)===null||e===void 0?void 0:e.getItemCount())!==null&&n!==void 0?n:0,l=(r=this._options.insertNewId)!==null&&r!==void 0?r:s+1;t[this.gridOptions.datasetIdPropertyName||"id"]=l,this.dataView.getItemById(l)?this.executeOnError({type:"error",code:"ITEM_ALREADY_EXIST",message:`The item object which you are trying to add already exist with the same Id:: ${l}`}):(o=this.gridService)===null||o===void 0||o.addItem(t,this._options.insertOptions)}parseText(t,e){return t.replace(/\{\{(.*?)\}\}/g,(n,r)=>e[r]!==void 0?e[r]:n)}resetCurrentRowDataContext(){const t=this.gridOptions.datasetIdPropertyName||"id";this.grid.getData().updateItem(this._originalDataContext[t],this._originalDataContext)}validateCompositeEditors(t){let e={valid:!0,msg:""};const n=this.grid.getCellEditor();return n&&(e=n.validate(t)),e}validateCurrentEditor(){const t=this.grid.getCellEditor();t!=null&&t.validate&&t.validate()}}class bf{get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}constructor(){this._warningLeftElement=null,this._warningRightElement=null,this.isPreviouslyShown=!1}init(t,e){this.grid=t,this.translaterService=e.get("TranslaterService")}dispose(){var t,e;(t=this._warningLeftElement)===null||t===void 0||t.remove(),(e=this._warningRightElement)===null||e===void 0||e.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(t=!0,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x;if(!this.grid||!this.gridOptions||this.isPreviouslyShown===t)return!1;this.isPreviouslyShown=t;const S=this.grid.getUID(),D={message:"No data to display.",...this.gridOptions.emptyDataWarning,...e},A=(n=D==null?void 0:D.className)!==null&&n!==void 0?n:"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${S} .${A}`);const P=document.querySelector(`.${S} .grid-canvas.grid-canvas-left`),M=document.querySelector(`.${S} .grid-canvas.grid-canvas-right`),B=(r=D.leftViewportMarginLeft)!==null&&r!==void 0?r:0,Z=(o=D.rightViewportMarginLeft)!==null&&o!==void 0?o:0,L=(s=D.frozenLeftViewportMarginLeft)!==null&&s!==void 0?s:0,de=(l=D.frozenRightViewportMarginLeft)!==null&&l!==void 0?l:0,be=((u=this.gridOptions)===null||u===void 0?void 0:u.frozenColumn)!==void 0&&this.gridOptions.frozenColumn>=0,J=typeof B=="string"?B:`${B}px`,U=typeof Z=="string"?Z:`${Z}px`;if(this.gridOptions.autoHeight){const ae=document.querySelector(`.${S} .slick-pane.slick-pane-top.slick-pane-left`);if(ae&&ae.style&&P&&P.style){const Ke=parseInt(ae.style.height,10)||0,Ie=(c=(h=this.gridOptions)===null||h===void 0?void 0:h.rowHeight)!==null&&c!==void 0?c:0,xe=this.gridOptions.enableFiltering&&(m=(p=this.gridOptions)===null||p===void 0?void 0:p.headerRowHeight)!==null&&m!==void 0?m:0,Oe=this.gridOptions.createPreHeaderPanel&&(_=(v=this.gridOptions)===null||v===void 0?void 0:v.preHeaderPanelHeight)!==null&&_!==void 0?_:0;if(t){let De=Ke!==null&&Ke<100?Ke:100;De+=xe+Oe,ae.style.minHeight=`${De}px`,P.style.minHeight=`${Ie}px`}}}let F=D.message;if(this.gridOptions.enableTranslate&&this.translaterService&&(D!=null&&D.messageKey)&&(F=this.translaterService.translate(D.messageKey)),!this._warningLeftElement&&P&&M){const ae=(x=(C=this.gridOptions)===null||C===void 0?void 0:C.sanitizeHtmlOptions)!==null&&x!==void 0?x:{};this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(A),this._warningLeftElement.classList.add("left"),this._warningLeftElement.innerHTML=Ln(this.gridOptions,F,ae),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),M.appendChild(this._warningRightElement),P.appendChild(this._warningLeftElement)}if(this._warningLeftElement){let ae=t?"block":"none";be&&t&&(ae=D.hideFrozenLeftWarning?"none":"block"),this._warningLeftElement.style.display=ae;const Ke=typeof L=="string"?L:`${L}px`;this._warningLeftElement.style.marginLeft=be?Ke:J}if(this._warningRightElement){let ae=t?"block":"none";be&&t&&(ae=D.hideFrozenRightWarning?"none":"block"),this._warningRightElement.style.display=ae;const Ke=typeof de=="string"?de:`${de}px`;this._warningRightElement.style.marginLeft=be?Ke:U}return t}}class xv{constructor(t,e,n,r){var o,s,l,u,h;if(this.paginationService=t,this.pubSubService=e,this.sharedService=n,this.translaterService=r,this._enableTranslate=!1,this._subscriptions=[],this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new Sv,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this.currentPagination=this.paginationService.getFullPagination(),this._enableTranslate=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&(!((l=this.pubSubService)===null||l===void 0)&&l.subscribe)){const c=(h=(u=this.translaterService)===null||u===void 0?void 0:u.eventName)!==null&&h!==void 0?h:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(c,()=>this.translatePaginationTexts()))}this._subscriptions.push(this.pubSubService.subscribe("onPaginationRefreshed",c=>{for(const m of Object.keys(c))this.currentPagination[m]=c[m];this.updatePageButtonsUsability();const p=document.querySelector(`.${this.gridUid} span.page-info-from-to`);p!=null&&p.style&&(p.style.display=this.currentPagination.totalItems===0?"none":"")}),this.pubSubService.subscribe("onPaginationSetCursorBased",()=>{this.dispose(),this.renderPagination(this._gridParentContainerElm)}))}get availablePageSizes(){return this.paginationService.availablePageSizes||[]}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(t){this.paginationService.changeItemPerPage(t)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions}get gridUid(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get locales(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.locales)!==null&&e!==void 0?e:je.locales}get totalItems(){return this.paginationService.totalItems}get isLeftPaginationDisabled(){return this.pageNumber===1||this.totalItems===0}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||this.totalItems===0}dispose(){this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(t){this._gridParentContainerElm=t;const e=this.createPaginationContainer(),n=Re("div",{className:"slick-pagination-nav"}),r=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-first",aClass:"page-link icon-seek-first",ariaLabel:"First Page"},{liClass:"page-item seek-prev",aClass:"page-link icon-seek-prev",ariaLabel:"Previous Page"}]),o=this.createPageNumberSection(),s=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-next",aClass:"page-link icon-seek-next",ariaLabel:"Next Page"},{liClass:"page-item seek-end",aClass:"page-link icon-seek-end",ariaLabel:"Last Page"}]);e.appendChild(n),n.appendChild(r),n.appendChild(o),n.appendChild(s);const l=this.createPaginationSettingsSection();e.appendChild(n),e.appendChild(l),this._paginationElement.appendChild(e),t!=null&&t.appendChild&&this._paginationElement&&t.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){const t=document.querySelector(`.${this.gridUid} .items-per-page`);if(t&&Array.isArray(this.availablePageSizes))for(const e of this.availablePageSizes)t.appendChild(Re("option",{value:`${e}`,text:`${e}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this.paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingHelper.bindEventHandler(".icon-seek-first","click",this.changeToFirstPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-end","click",this.changeToLastPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-next","click",this.changeToNextPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-prev","click",this.changeToPreviousPage.bind(this)),this._bindingHelper.bindEventHandler("select.items-per-page","change",t=>{var e,n;return this.itemsPerPage=+((n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:0)})}changeToFirstPage(t){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(t)}changeToLastPage(t){this.isRightPaginationDisabled||this.paginationService.goToLastPage(t)}changeToNextPage(t){this.isRightPaginationDisabled||this.paginationService.goToNextPage(t)}changeToPreviousPage(t){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(t)}changeToCurrentPage(t){this.paginationService.goToPageNumber(+t)}translatePaginationTexts(){var t;if(this._enableTranslate&&(!((t=this.translaterService)===null||t===void 0)&&t.translate)){const e=ho(this.gridOptions);this.textItemsPerPage=this.translaterService.translate(`${e}ITEMS_PER_PAGE`),this.textItems=this.translaterService.translate(`${e}ITEMS`),this.textOf=this.translaterService.translate(`${e}OF`),this.textPage=this.translaterService.translate(`${e}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){const t=Re("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),e=Re("div",{className:"slick-pagination"});return t.appendChild(e),this._paginationElement=t,e}createPageNavigation(t,e){const n=Re("nav",{ariaLabel:t}),r=Re("ul",{className:"pagination"});for(const o of e)Re("li",{className:o.liClass},r).appendChild(Re("a",{className:o.aClass,ariaLabel:o.ariaLabel,role:"button"}));return n.appendChild(r),n}createPageNumberSection(){const t=Re("div",{className:"slick-page-number"});return Re("span",{className:"text-page",textContent:"Page"},t),t.appendChild(document.createTextNode(" ")),this.paginationService.isCursorBased?Re("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},t):Re("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},t),t.appendChild(document.createTextNode(" ")),Re("span",{className:"text-of",textContent:"of"},t),t.appendChild(document.createTextNode(" ")),Re("span",{className:"page-count",dataset:{test:"page-count"}},t),t}createPaginationSettingsSection(){const t=Re("span",{className:"slick-pagination-settings"});Re("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},t),t.appendChild(document.createTextNode(" ")),Re("span",{className:"text-item-per-page",textContent:"items per page"},t),t.appendChild(document.createTextNode(", "));const e=Re("span",{className:"slick-pagination-count"},t),n=Re("span",{className:"page-info-from-to"},e);Re("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},n),n.appendChild(document.createTextNode("-")),Re("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},n),n.appendChild(document.createTextNode(" ")),Re("span",{className:"text-of",textContent:"of"},n),n.appendChild(document.createTextNode(" "));const r=Re("span",{className:"page-info-total-items"},e);return Re("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},r),r.appendChild(document.createTextNode(" ")),Re("span",{className:"text-items",textContent:"items"},r),r.appendChild(document.createTextNode(" ")),t}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}}var Cf={exports:{}};/*!

    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    <http://stuartk.com/jszip>

    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

    JSZip uses the library pako released under the MIT license :
    https://github.com/nodeca/pako/blob/main/LICENSE
    */var Tv;function ZC(){return Tv||(Tv=1,function(a,t){(function(e){a.exports=e()})(function(){return function e(n,r,o){function s(h,c){if(!r[h]){if(!n[h]){var p=typeof Na=="function"&&Na;if(!c&&p)return p(h,!0);if(l)return l(h,!0);var m=new Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m}var v=r[h]={exports:{}};n[h][0].call(v.exports,function(_){var C=n[h][1][_];return s(C||_)},v,v.exports,e,n,r,o)}return r[h].exports}for(var l=typeof Na=="function"&&Na,u=0;u<o.length;u++)s(o[u]);return s}({1:[function(e,n,r){var o=e("./utils"),s=e("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var h,c,p,m,v,_,C,x=[],S=0,E=u.length,D=E,A=o.getTypeOf(u)!=="string";S<u.length;)D=E-S,p=A?(h=u[S++],c=S<E?u[S++]:0,S<E?u[S++]:0):(h=u.charCodeAt(S++),c=S<E?u.charCodeAt(S++):0,S<E?u.charCodeAt(S++):0),m=h>>2,v=(3&h)<<4|c>>4,_=1<D?(15&c)<<2|p>>6:64,C=2<D?63&p:64,x.push(l.charAt(m)+l.charAt(v)+l.charAt(_)+l.charAt(C));return x.join("")},r.decode=function(u){var h,c,p,m,v,_,C=0,x=0,S="data:";if(u.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var E,D=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&D--,u.charAt(u.length-2)===l.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=s.uint8array?new Uint8Array(0|D):new Array(0|D);C<u.length;)h=l.indexOf(u.charAt(C++))<<2|(m=l.indexOf(u.charAt(C++)))>>4,c=(15&m)<<4|(v=l.indexOf(u.charAt(C++)))>>2,p=(3&v)<<6|(_=l.indexOf(u.charAt(C++))),E[x++]=h,v!==64&&(E[x++]=c),_!==64&&(E[x++]=p);return E}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),s=e("./stream/DataWorker"),l=e("./stream/Crc32Probe"),u=e("./stream/DataLengthProbe");function h(c,p,m,v,_){this.compressedSize=c,this.uncompressedSize=p,this.crc32=m,this.compression=v,this.compressedContent=_}h.prototype={getContentWorker:function(){var c=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return c.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(c,p,m){return c.pipe(new l).pipe(new u("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),s=function(){for(var l,u=[],h=0;h<256;h++){l=h;for(var c=0;c<8;c++)l=1&l?3988292384^l>>>1:l>>>1;u[h]=l}return u}();n.exports=function(l,u){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(h,c,p,m){var v=s,_=m+p;h^=-1;for(var C=m;C<_;C++)h=h>>>8^v[255&(h^c[C])];return-1^h}(0|u,l,l.length,0):function(h,c,p,m){var v=s,_=m+p;h^=-1;for(var C=m;C<_;C++)h=h>>>8^v[255&(h^c.charCodeAt(C))];return-1^h}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),l=e("./utils"),u=e("./stream/GenericWorker"),h=o?"uint8array":"array";function c(p,m){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}r.magic="\b\0",l.inherits(c,u),c.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(h,p.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},r.compressWorker=function(p){return new c("Deflate",p)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(v,_){var C,x="";for(C=0;C<_;C++)x+=String.fromCharCode(255&v),v>>>=8;return x}function s(v,_,C,x,S,E){var D,A,P=v.file,M=v.compression,B=E!==h.utf8encode,Z=l.transformTo("string",E(P.name)),L=l.transformTo("string",h.utf8encode(P.name)),de=P.comment,be=l.transformTo("string",E(de)),J=l.transformTo("string",h.utf8encode(de)),U=L.length!==P.name.length,F=J.length!==de.length,ae="",Ke="",Ie="",xe=P.dir,Oe=P.date,De={crc32:0,compressedSize:0,uncompressedSize:0};_&&!C||(De.crc32=v.crc32,De.compressedSize=v.compressedSize,De.uncompressedSize=v.uncompressedSize);var ne=0;_&&(ne|=8),B||!U&&!F||(ne|=2048);var pe=0,Ve=0;xe&&(pe|=16),S==="UNIX"?(Ve=798,pe|=function(Ue,ce){var Ce=Ue;return Ue||(Ce=ce?16893:33204),(65535&Ce)<<16}(P.unixPermissions,xe)):(Ve=20,pe|=function(Ue){return 63&(Ue||0)}(P.dosPermissions)),D=Oe.getUTCHours(),D<<=6,D|=Oe.getUTCMinutes(),D<<=5,D|=Oe.getUTCSeconds()/2,A=Oe.getUTCFullYear()-1980,A<<=4,A|=Oe.getUTCMonth()+1,A<<=5,A|=Oe.getUTCDate(),U&&(Ke=o(1,1)+o(c(Z),4)+L,ae+="up"+o(Ke.length,2)+Ke),F&&(Ie=o(1,1)+o(c(be),4)+J,ae+="uc"+o(Ie.length,2)+Ie);var Ye="";return Ye+=`
\0`,Ye+=o(ne,2),Ye+=M.magic,Ye+=o(D,2),Ye+=o(A,2),Ye+=o(De.crc32,4),Ye+=o(De.compressedSize,4),Ye+=o(De.uncompressedSize,4),Ye+=o(Z.length,2),Ye+=o(ae.length,2),{fileRecord:p.LOCAL_FILE_HEADER+Ye+Z+ae,dirRecord:p.CENTRAL_FILE_HEADER+o(Ve,2)+Ye+o(be.length,2)+"\0\0\0\0"+o(pe,4)+o(x,4)+Z+ae+be}}var l=e("../utils"),u=e("../stream/GenericWorker"),h=e("../utf8"),c=e("../crc32"),p=e("../signature");function m(v,_,C,x){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=C,this.encodeFileName=x,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(m,u),m.prototype.push=function(v){var _=v.meta.percent||0,C=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,u.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:C?(_+100*(C-x-1))/C:100}}))},m.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var _=this.streamFiles&&!v.file.dir;if(_){var C=s(v,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(v){this.accumulate=!1;var _=this.streamFiles&&!v.file.dir,C=s(v,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),_)this.push({data:function(x){return p.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var v=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var C=this.bytesWritten-v,x=function(S,E,D,A,P){var M=l.transformTo("string",P(A));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(S,2)+o(S,2)+o(E,4)+o(D,4)+o(M.length,2)+M}(this.dirRecords.length,C,v,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(v){this._sources.push(v);var _=this;return v.on("data",function(C){_.processChunk(C)}),v.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),v.on("error",function(C){_.error(C)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(v){var _=this._sources;if(!u.prototype.error.call(this,v))return!1;for(var C=0;C<_.length;C++)try{_[C].error(v)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var v=this._sources,_=0;_<v.length;_++)v[_].lock()},n.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),s=e("./ZipFileWorker");r.generateWorker=function(l,u,h){var c=new s(u.streamFiles,h,u.platform,u.encodeFileName),p=0;try{l.forEach(function(m,v){p++;var _=function(E,D){var A=E||D,P=o[A];if(!P)throw new Error(A+" is not a valid compression method !");return P}(v.options.compression,u.compression),C=v.options.compressionOptions||u.compressionOptions||{},x=v.dir,S=v.date;v._compressWorker(_,C).withStreamInfo("file",{name:m,dir:x,date:S,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(c)}),c.entriesCount=p}catch(m){c.error(m)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(s,l){return new o().loadAsync(s,l)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),s=e("./external"),l=e("./utf8"),u=e("./zipEntries"),h=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function p(m){return new s.Promise(function(v,_){var C=m.decompressed.getContentWorker().pipe(new h);C.on("error",function(x){_(x)}).on("end",function(){C.streamInfo.crc32!==m.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(m,v){var _=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),c.isNode&&c.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",m,!0,v.optimizedBinaryString,v.base64).then(function(C){var x=new u(v);return x.load(C),x}).then(function(C){var x=[s.Promise.resolve(C)],S=C.files;if(v.checkCRC32)for(var E=0;E<S.length;E++)x.push(p(S[E]));return s.Promise.all(x)}).then(function(C){for(var x=C.shift(),S=x.files,E=0;E<S.length;E++){var D=S[E],A=D.fileNameStr,P=o.resolve(D.fileNameStr);_.file(P,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:v.createFolders}),D.dir||(_.file(P).unsafeOriginalName=A)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),s=e("../stream/GenericWorker");function l(u,h){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(l,s),l.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(c){h.push({data:c,meta:{percent:0}})}).on("error",function(c){h.isPaused?this.generatedError=c:h.error(c)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function s(l,u,h){o.call(this,u),this._helper=l;var c=this;l.on("data",function(p,m){c.push(p)||c._helper.pause(),h&&h(m)}).on("error",function(p){c.emit("error",p)}).on("end",function(){c.push(null)})}e("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(P,M,B){var Z,L=l.getTypeOf(M),de=l.extend(B||{},c);de.date=de.date||new Date,de.compression!==null&&(de.compression=de.compression.toUpperCase()),typeof de.unixPermissions=="string"&&(de.unixPermissions=parseInt(de.unixPermissions,8)),de.unixPermissions&&16384&de.unixPermissions&&(de.dir=!0),de.dosPermissions&&16&de.dosPermissions&&(de.dir=!0),de.dir&&(P=S(P)),de.createFolders&&(Z=x(P))&&E.call(this,Z,!0);var be=L==="string"&&de.binary===!1&&de.base64===!1;B&&B.binary!==void 0||(de.binary=!be),(M instanceof p&&M.uncompressedSize===0||de.dir||!M||M.length===0)&&(de.base64=!1,de.binary=!0,M="",de.compression="STORE",L="string");var J=null;J=M instanceof p||M instanceof u?M:_.isNode&&_.isStream(M)?new C(P,M):l.prepareContent(P,M,de.binary,de.optimizedBinaryString,de.base64);var U=new m(P,J,de);this.files[P]=U}var s=e("./utf8"),l=e("./utils"),u=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),c=e("./defaults"),p=e("./compressedObject"),m=e("./zipObject"),v=e("./generate"),_=e("./nodejsUtils"),C=e("./nodejs/NodejsStreamInputAdapter"),x=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var M=P.lastIndexOf("/");return 0<M?P.substring(0,M):""},S=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},E=function(P,M){return M=M!==void 0?M:c.createFolders,P=S(P),this.files[P]||o.call(this,P,null,{dir:!0,createFolders:M}),this.files[P]};function D(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var M,B,Z;for(M in this.files)Z=this.files[M],(B=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&P(B,Z)},filter:function(P){var M=[];return this.forEach(function(B,Z){P(B,Z)&&M.push(Z)}),M},file:function(P,M,B){if(arguments.length!==1)return P=this.root+P,o.call(this,P,M,B),this;if(D(P)){var Z=P;return this.filter(function(de,be){return!be.dir&&Z.test(de)})}var L=this.files[this.root+P];return L&&!L.dir?L:null},folder:function(P){if(!P)return this;if(D(P))return this.filter(function(L,de){return de.dir&&P.test(L)});var M=this.root+P,B=E.call(this,M),Z=this.clone();return Z.root=B.name,Z},remove:function(P){P=this.root+P;var M=this.files[P];if(M||(P.slice(-1)!=="/"&&(P+="/"),M=this.files[P]),M&&!M.dir)delete this.files[P];else for(var B=this.filter(function(L,de){return de.name.slice(0,P.length)===P}),Z=0;Z<B.length;Z++)delete this.files[B[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var M,B={};try{if((B=l.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");l.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var Z=B.comment||this.comment||"";M=v.generateWorker(this,B,Z)}catch(L){(M=new u("error")).error(L)}return new h(M,B.type||"string",B.mimeType)},generateAsync:function(P,M){return this.generateInternalStream(P).accumulate(M)},generateNodeStream:function(P,M){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(M)}};n.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function s(l){o.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}e("../utils").inherits(s,o),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),h=l.charCodeAt(1),c=l.charCodeAt(2),p=l.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===h&&this.data[m+2]===c&&this.data[m+3]===p)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),h=l.charCodeAt(1),c=l.charCodeAt(2),p=l.charCodeAt(3),m=this.readData(4);return u===m[0]&&h===m[1]&&c===m[2]&&p===m[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,h=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=l,h},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=s},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),s=e("../support"),l=e("./ArrayReader"),u=e("./StringReader"),h=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");n.exports=function(p){var m=o.getTypeOf(p);return o.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new h(p):s.uint8array?new c(o.transformTo("uint8array",p)):new l(o.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),s=e("../utils");function l(u){o.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,o),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),s=e("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,o),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(l,s),l.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}s.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function l(u){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){h.dataIsReady=!0,h.data=c,h.max=c&&c.length||0,h.type=o.getTypeOf(c),h.isPaused||h._tickAndRepeat()},function(c){h.error(c)})}o.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),s=e("./ConvertWorker"),l=e("./GenericWorker"),u=e("../base64"),h=e("../support"),c=e("../external"),p=null;if(h.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(_,C){return new c.Promise(function(x,S){var E=[],D=_._internalType,A=_._outputType,P=_._mimeType;_.on("data",function(M,B){E.push(M),C&&C(B)}).on("error",function(M){E=[],S(M)}).on("end",function(){try{var M=function(B,Z,L){switch(B){case"blob":return o.newBlob(o.transformTo("arraybuffer",Z),L);case"base64":return u.encode(Z);default:return o.transformTo(B,Z)}}(A,function(B,Z){var L,de=0,be=null,J=0;for(L=0;L<Z.length;L++)J+=Z[L].length;switch(B){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(be=new Uint8Array(J),L=0;L<Z.length;L++)be.set(Z[L],de),de+=Z[L].length;return be;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+B+"'")}}(D,E),P);x(M)}catch(B){S(B)}E=[]}).resume()})}function v(_,C,x){var S=C;switch(C){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=C,this._mimeType=x,o.checkSupport(S),this._worker=_.pipe(new s(S)),_.lock()}catch(E){this._worker=new l("error"),this._worker.error(E)}}v.prototype={accumulate:function(_){return m(this,_)},on:function(_,C){var x=this;return _==="data"?this._worker.on(_,function(S){C.call(x,S.data,S.meta)}):this._worker.on(_,function(){o.delay(C,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),s=e("./support"),l=e("./nodejsUtils"),u=e("./stream/GenericWorker"),h=new Array(256),c=0;c<256;c++)h[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;h[254]=h[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}r.utf8encode=function(v){return s.nodebuffer?l.newBufferFrom(v,"utf-8"):function(_){var C,x,S,E,D,A=_.length,P=0;for(E=0;E<A;E++)(64512&(x=_.charCodeAt(E)))==55296&&E+1<A&&(64512&(S=_.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),E++),P+=x<128?1:x<2048?2:x<65536?3:4;for(C=s.uint8array?new Uint8Array(P):new Array(P),E=D=0;D<P;E++)(64512&(x=_.charCodeAt(E)))==55296&&E+1<A&&(64512&(S=_.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),E++),x<128?C[D++]=x:(x<2048?C[D++]=192|x>>>6:(x<65536?C[D++]=224|x>>>12:(C[D++]=240|x>>>18,C[D++]=128|x>>>12&63),C[D++]=128|x>>>6&63),C[D++]=128|63&x);return C}(v)},r.utf8decode=function(v){return s.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):function(_){var C,x,S,E,D=_.length,A=new Array(2*D);for(C=x=0;C<D;)if((S=_[C++])<128)A[x++]=S;else if(4<(E=h[S]))A[x++]=65533,C+=E-1;else{for(S&=E===2?31:E===3?15:7;1<E&&C<D;)S=S<<6|63&_[C++],E--;1<E?A[x++]=65533:S<65536?A[x++]=S:(S-=65536,A[x++]=55296|S>>10&1023,A[x++]=56320|1023&S)}return A.length!==x&&(A.subarray?A=A.subarray(0,x):A.length=x),o.applyFromCharCode(A)}(v=o.transformTo(s.uint8array?"uint8array":"array",v))},o.inherits(p,u),p.prototype.processChunk=function(v){var _=o.transformTo(s.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var C=_;(_=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),_.set(C,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(E,D){var A;for((D=D||E.length)>E.length&&(D=E.length),A=D-1;0<=A&&(192&E[A])==128;)A--;return A<0||A===0?D:A+h[E[A]]>D?A:D}(_),S=_;x!==_.length&&(s.uint8array?(S=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(S=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:r.utf8decode(S),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,o.inherits(m,u),m.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),s=e("./base64"),l=e("./nodejsUtils"),u=e("./external");function h(C){return C}function c(C,x){for(var S=0;S<C.length;++S)x[S]=255&C.charCodeAt(S);return x}e("setimmediate"),r.newBlob=function(C,x){r.checkSupport("blob");try{return new Blob([C],{type:x})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(C),S.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(C,x,S){var E=[],D=0,A=C.length;if(A<=S)return String.fromCharCode.apply(null,C);for(;D<A;)x==="array"||x==="nodebuffer"?E.push(String.fromCharCode.apply(null,C.slice(D,Math.min(D+S,A)))):E.push(String.fromCharCode.apply(null,C.subarray(D,Math.min(D+S,A)))),D+=S;return E.join("")},stringifyByChar:function(C){for(var x="",S=0;S<C.length;S++)x+=String.fromCharCode(C[S]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function m(C){var x=65536,S=r.getTypeOf(C),E=!0;if(S==="uint8array"?E=p.applyCanBeUsed.uint8array:S==="nodebuffer"&&(E=p.applyCanBeUsed.nodebuffer),E)for(;1<x;)try{return p.stringifyByChunk(C,S,x)}catch{x=Math.floor(x/2)}return p.stringifyByChar(C)}function v(C,x){for(var S=0;S<C.length;S++)x[S]=C[S];return x}r.applyFromCharCode=m;var _={};_.string={string:h,array:function(C){return c(C,new Array(C.length))},arraybuffer:function(C){return _.string.uint8array(C).buffer},uint8array:function(C){return c(C,new Uint8Array(C.length))},nodebuffer:function(C){return c(C,l.allocBuffer(C.length))}},_.array={string:m,array:h,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return l.newBufferFrom(C)}},_.arraybuffer={string:function(C){return m(new Uint8Array(C))},array:function(C){return v(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:h,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return l.newBufferFrom(new Uint8Array(C))}},_.uint8array={string:m,array:function(C){return v(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:h,nodebuffer:function(C){return l.newBufferFrom(C)}},_.nodebuffer={string:m,array:function(C){return v(C,new Array(C.length))},arraybuffer:function(C){return _.nodebuffer.uint8array(C).buffer},uint8array:function(C){return v(C,new Uint8Array(C.length))},nodebuffer:h},r.transformTo=function(C,x){if(x=x||"",!C)return x;r.checkSupport(C);var S=r.getTypeOf(x);return _[S][C](x)},r.resolve=function(C){for(var x=C.split("/"),S=[],E=0;E<x.length;E++){var D=x[E];D==="."||D===""&&E!==0&&E!==x.length-1||(D===".."?S.pop():S.push(D))}return S.join("/")},r.getTypeOf=function(C){return typeof C=="string"?"string":Object.prototype.toString.call(C)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(C)?"nodebuffer":o.uint8array&&C instanceof Uint8Array?"uint8array":o.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(C){if(!o[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(C){var x,S,E="";for(S=0;S<(C||"").length;S++)E+="\\x"+((x=C.charCodeAt(S))<16?"0":"")+x.toString(16).toUpperCase();return E},r.delay=function(C,x,S){setImmediate(function(){C.apply(S||null,x||[])})},r.inherits=function(C,x){function S(){}S.prototype=x.prototype,C.prototype=new S},r.extend=function(){var C,x,S={};for(C=0;C<arguments.length;C++)for(x in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],x)&&S[x]===void 0&&(S[x]=arguments[C][x]);return S},r.prepareContent=function(C,x,S,E,D){return u.Promise.resolve(x).then(function(A){return o.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(P,M){var B=new FileReader;B.onload=function(Z){P(Z.target.result)},B.onerror=function(Z){M(Z.target.error)},B.readAsArrayBuffer(A)}):A}).then(function(A){var P=r.getTypeOf(A);return P?(P==="arraybuffer"?A=r.transformTo("uint8array",A):P==="string"&&(D?A=s.decode(A):S&&E!==!0&&(A=function(M){return c(M,o.uint8array?new Uint8Array(M.length):new Array(M.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),l=e("./signature"),u=e("./zipEntry"),h=e("./support");function c(p){this.files=[],this.loadOptions=p}c.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(p)+")")}},isSignature:function(p,m){var v=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===m;return this.reader.setIndex(v),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=h.uint8array?"uint8array":"array",v=s.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,v,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),m=this.reader.readInt(4),v=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var _=m-v;if(0<_)this.isSignature(m,l.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),l=e("./compressedObject"),u=e("./crc32"),h=e("./utf8"),c=e("./compressions"),p=e("./support");function m(v,_){this.options=v,this.loadOptions=_}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var _,C;if(v.skip(22),this.fileNameLength=v.readInt(2),C=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(C),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var S in c)if(Object.prototype.hasOwnProperty.call(c,S)&&c[S].magic===x)return c[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,_,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var _=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(_),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var _,C,x,S=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<S;)_=v.readInt(2),C=v.readInt(2),x=v.readData(C),this.extraFields[_]={id:_,length:C,value:x};v.setIndex(S)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var C=s.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var S=s.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var _=o(v.value);return _.readInt(1)!==1||u(this.fileName)!==_.readInt(4)?null:h.utf8decode(_.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var _=o(v.value);return _.readInt(1)!==1||u(this.fileComment)!==_.readInt(4)?null:h.utf8decode(_.readData(v.length-5))}return null}},n.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(_,C,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=C,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=e("./stream/StreamHelper"),l=e("./stream/DataWorker"),u=e("./utf8"),h=e("./compressedObject"),c=e("./stream/GenericWorker");o.prototype={internalStream:function(_){var C=null,x="string";try{if(!_)throw new Error("No output type specified.");var S=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),C=this._decompressWorker();var E=!this._dataBinary;E&&!S&&(C=C.pipe(new u.Utf8EncodeWorker)),!E&&S&&(C=C.pipe(new u.Utf8DecodeWorker))}catch(D){(C=new c("error")).error(D)}return new s(C,x,"")},async:function(_,C){return this.internalStream(_).accumulate(C)},nodeStream:function(_,C){return this.internalStream(_||"nodebuffer").toNodejsStream(C)},_compressWorker:function(_,C){if(this._data instanceof h&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(x,_,C)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof c?this._data:new l(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)o.prototype[p[v]]=m;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var s,l,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var h=0,c=new u(_),p=o.document.createTextNode("");c.observe(p,{characterData:!0}),s=function(){p.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var C=o.document.createElement("script");C.onreadystatechange=function(){_(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},o.document.documentElement.appendChild(C)}:function(){setTimeout(_,0)};else{var m=new o.MessageChannel;m.port1.onmessage=_,s=function(){m.port2.postMessage(0)}}var v=[];function _(){var C,x;l=!0;for(var S=v.length;S;){for(x=v,v=[],C=-1;++C<S;)x[C]();S=v.length}l=!1}n.exports=function(C){v.push(C)!==1||l||s()}}).call(this,typeof Pr<"u"?Pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function s(){}var l={},u=["REJECTED"],h=["FULFILLED"],c=["PENDING"];function p(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==s&&C(this,S)}function m(S,E,D){this.promise=S,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function v(S,E,D){o(function(){var A;try{A=E(D)}catch(P){return l.reject(S,P)}A===S?l.reject(S,new TypeError("Cannot resolve promise with itself")):l.resolve(S,A)})}function _(S){var E=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof E=="function")return function(){E.apply(S,arguments)}}function C(S,E){var D=!1;function A(B){D||(D=!0,l.reject(S,B))}function P(B){D||(D=!0,l.resolve(S,B))}var M=x(function(){E(P,A)});M.status==="error"&&A(M.value)}function x(S,E){var D={};try{D.value=S(E),D.status="success"}catch(A){D.status="error",D.value=A}return D}(n.exports=p).prototype.finally=function(S){if(typeof S!="function")return this;var E=this.constructor;return this.then(function(D){return E.resolve(S()).then(function(){return D})},function(D){return E.resolve(S()).then(function(){throw D})})},p.prototype.catch=function(S){return this.then(null,S)},p.prototype.then=function(S,E){if(typeof S!="function"&&this.state===h||typeof E!="function"&&this.state===u)return this;var D=new this.constructor(s);return this.state!==c?v(D,this.state===h?S:E,this.outcome):this.queue.push(new m(D,S,E)),D},m.prototype.callFulfilled=function(S){l.resolve(this.promise,S)},m.prototype.otherCallFulfilled=function(S){v(this.promise,this.onFulfilled,S)},m.prototype.callRejected=function(S){l.reject(this.promise,S)},m.prototype.otherCallRejected=function(S){v(this.promise,this.onRejected,S)},l.resolve=function(S,E){var D=x(_,E);if(D.status==="error")return l.reject(S,D.value);var A=D.value;if(A)C(S,A);else{S.state=h,S.outcome=E;for(var P=-1,M=S.queue.length;++P<M;)S.queue[P].callFulfilled(E)}return S},l.reject=function(S,E){S.state=u,S.outcome=E;for(var D=-1,A=S.queue.length;++D<A;)S.queue[D].callRejected(E);return S},p.resolve=function(S){return S instanceof this?S:l.resolve(new this(s),S)},p.reject=function(S){var E=new this(s);return l.reject(E,S)},p.all=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,A=!1;if(!D)return this.resolve([]);for(var P=new Array(D),M=0,B=-1,Z=new this(s);++B<D;)L(S[B],B);return Z;function L(de,be){E.resolve(de).then(function(J){P[be]=J,++M!==D||A||(A=!0,l.resolve(Z,P))},function(J){A||(A=!0,l.reject(Z,J))})}},p.race=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,A=!1;if(!D)return this.resolve([]);for(var P=-1,M=new this(s);++P<D;)B=S[P],E.resolve(B).then(function(Z){A||(A=!0,l.resolve(M,Z))},function(Z){A||(A=!0,l.reject(M,Z))});var B;return M}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),s=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/messages"),h=e("./zlib/zstream"),c=Object.prototype.toString,p=0,m=-1,v=0,_=8;function C(S){if(!(this instanceof C))return new C(S);this.options=s.assign({level:m,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},S||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=o.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(D!==p)throw new Error(u[D]);if(E.header&&o.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(A=typeof E.dictionary=="string"?l.string2buf(E.dictionary):c.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(D=o.deflateSetDictionary(this.strm,A))!==p)throw new Error(u[D]);this._dict_set=!0}}function x(S,E){var D=new C(E);if(D.push(S,!0),D.err)throw D.msg||u[D.err];return D.result}C.prototype.push=function(S,E){var D,A,P=this.strm,M=this.options.chunkSize;if(this.ended)return!1;A=E===~~E?E:E===!0?4:0,typeof S=="string"?P.input=l.string2buf(S):c.call(S)==="[object ArrayBuffer]"?P.input=new Uint8Array(S):P.input=S,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(M),P.next_out=0,P.avail_out=M),(D=o.deflate(P,A))!==1&&D!==p)return this.onEnd(D),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(P.output,P.next_out))):this.onData(s.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&D!==1);return A===4?(D=o.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===p):A!==2||(this.onEnd(p),!(P.avail_out=0))},C.prototype.onData=function(S){this.chunks.push(S)},C.prototype.onEnd=function(S){S===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},r.Deflate=C,r.deflate=x,r.deflateRaw=function(S,E){return(E=E||{}).raw=!0,x(S,E)},r.gzip=function(S,E){return(E=E||{}).gzip=!0,x(S,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),s=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/constants"),h=e("./zlib/messages"),c=e("./zlib/zstream"),p=e("./zlib/gzheader"),m=Object.prototype.toString;function v(C){if(!(this instanceof v))return new v(C);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},C||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||C&&C.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=o.inflateInit2(this.strm,x.windowBits);if(S!==u.Z_OK)throw new Error(h[S]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function _(C,x){var S=new v(x);if(S.push(C,!0),S.err)throw S.msg||h[S.err];return S.result}v.prototype.push=function(C,x){var S,E,D,A,P,M,B=this.strm,Z=this.options.chunkSize,L=this.options.dictionary,de=!1;if(this.ended)return!1;E=x===~~x?x:x===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof C=="string"?B.input=l.binstring2buf(C):m.call(C)==="[object ArrayBuffer]"?B.input=new Uint8Array(C):B.input=C,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(Z),B.next_out=0,B.avail_out=Z),(S=o.inflate(B,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&L&&(M=typeof L=="string"?l.string2buf(L):m.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,S=o.inflateSetDictionary(this.strm,M)),S===u.Z_BUF_ERROR&&de===!0&&(S=u.Z_OK,de=!1),S!==u.Z_STREAM_END&&S!==u.Z_OK)return this.onEnd(S),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&S!==u.Z_STREAM_END&&(B.avail_in!==0||E!==u.Z_FINISH&&E!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=l.utf8border(B.output,B.next_out),A=B.next_out-D,P=l.buf2string(B.output,D),B.next_out=A,B.avail_out=Z-A,A&&s.arraySet(B.output,B.output,D,A,0),this.onData(P)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(de=!0)}while((0<B.avail_in||B.avail_out===0)&&S!==u.Z_STREAM_END);return S===u.Z_STREAM_END&&(E=u.Z_FINISH),E===u.Z_FINISH?(S=o.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u.Z_OK):E!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(B.avail_out=0))},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},r.Inflate=v,r.inflate=_,r.inflateRaw=function(C,x){return(x=x||{}).raw=!0,_(C,x)},r.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var c=h.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var p in c)c.hasOwnProperty(p)&&(u[p]=c[p])}}return u},r.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var s={arraySet:function(u,h,c,p,m){if(h.subarray&&u.subarray)u.set(h.subarray(c,c+p),m);else for(var v=0;v<p;v++)u[m+v]=h[c+v]},flattenChunks:function(u){var h,c,p,m,v,_;for(h=p=0,c=u.length;h<c;h++)p+=u[h].length;for(_=new Uint8Array(p),h=m=0,c=u.length;h<c;h++)v=u[h],_.set(v,m),m+=v.length;return _}},l={arraySet:function(u,h,c,p,m){for(var v=0;v<p;v++)u[m+v]=h[c+v]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new o.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function c(p,m){if(m<65537&&(p.subarray&&l||!p.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(p,m));for(var v="",_=0;_<m;_++)v+=String.fromCharCode(p[_]);return v}u[254]=u[254]=1,r.string2buf=function(p){var m,v,_,C,x,S=p.length,E=0;for(C=0;C<S;C++)(64512&(v=p.charCodeAt(C)))==55296&&C+1<S&&(64512&(_=p.charCodeAt(C+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),C++),E+=v<128?1:v<2048?2:v<65536?3:4;for(m=new o.Buf8(E),C=x=0;x<E;C++)(64512&(v=p.charCodeAt(C)))==55296&&C+1<S&&(64512&(_=p.charCodeAt(C+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),C++),v<128?m[x++]=v:(v<2048?m[x++]=192|v>>>6:(v<65536?m[x++]=224|v>>>12:(m[x++]=240|v>>>18,m[x++]=128|v>>>12&63),m[x++]=128|v>>>6&63),m[x++]=128|63&v);return m},r.buf2binstring=function(p){return c(p,p.length)},r.binstring2buf=function(p){for(var m=new o.Buf8(p.length),v=0,_=m.length;v<_;v++)m[v]=p.charCodeAt(v);return m},r.buf2string=function(p,m){var v,_,C,x,S=m||p.length,E=new Array(2*S);for(v=_=0;v<S;)if((C=p[v++])<128)E[_++]=C;else if(4<(x=u[C]))E[_++]=65533,v+=x-1;else{for(C&=x===2?31:x===3?15:7;1<x&&v<S;)C=C<<6|63&p[v++],x--;1<x?E[_++]=65533:C<65536?E[_++]=C:(C-=65536,E[_++]=55296|C>>10&1023,E[_++]=56320|1023&C)}return c(E,_)},r.utf8border=function(p,m){var v;for((m=m||p.length)>p.length&&(m=p.length),v=m-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?m:v+u[p[v]]>m?v:m}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,s,l,u){for(var h=65535&o|0,c=o>>>16&65535|0,p=0;l!==0;){for(l-=p=2e3<l?2e3:l;c=c+(h=h+s[u++]|0)|0,--p;);h%=65521,c%=65521}return h|c<<16|0}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();n.exports=function(s,l,u,h){var c=o,p=h+u;s^=-1;for(var m=h;m<p;m++)s=s>>>8^c[255&(s^l[m])];return-1^s}},{}],46:[function(e,n,r){var o,s=e("../utils/common"),l=e("./trees"),u=e("./adler32"),h=e("./crc32"),c=e("./messages"),p=0,m=4,v=0,_=-2,C=-1,x=4,S=2,E=8,D=9,A=286,P=30,M=19,B=2*A+1,Z=15,L=3,de=258,be=de+L+1,J=42,U=113,F=1,ae=2,Ke=3,Ie=4;function xe(k,ee){return k.msg=c[ee],ee}function Oe(k){return(k<<1)-(4<k?9:0)}function De(k){for(var ee=k.length;0<=--ee;)k[ee]=0}function ne(k){var ee=k.state,ge=ee.pending;ge>k.avail_out&&(ge=k.avail_out),ge!==0&&(s.arraySet(k.output,ee.pending_buf,ee.pending_out,ge,k.next_out),k.next_out+=ge,ee.pending_out+=ge,k.total_out+=ge,k.avail_out-=ge,ee.pending-=ge,ee.pending===0&&(ee.pending_out=0))}function pe(k,ee){l._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,ee),k.block_start=k.strstart,ne(k.strm)}function Ve(k,ee){k.pending_buf[k.pending++]=ee}function Ye(k,ee){k.pending_buf[k.pending++]=ee>>>8&255,k.pending_buf[k.pending++]=255&ee}function Ue(k,ee){var ge,$,X=k.max_chain_length,re=k.strstart,Pe=k.prev_length,Fe=k.nice_match,me=k.strstart>k.w_size-be?k.strstart-(k.w_size-be):0,Ge=k.window,mt=k.w_mask,We=k.prev,Le=k.strstart+de,jt=Ge[re+Pe-1],It=Ge[re+Pe];k.prev_length>=k.good_match&&(X>>=2),Fe>k.lookahead&&(Fe=k.lookahead);do if(Ge[(ge=ee)+Pe]===It&&Ge[ge+Pe-1]===jt&&Ge[ge]===Ge[re]&&Ge[++ge]===Ge[re+1]){re+=2,ge++;do;while(Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&Ge[++re]===Ge[++ge]&&re<Le);if($=de-(Le-re),re=Le-de,Pe<$){if(k.match_start=ee,Fe<=(Pe=$))break;jt=Ge[re+Pe-1],It=Ge[re+Pe]}}while((ee=We[ee&mt])>me&&--X!=0);return Pe<=k.lookahead?Pe:k.lookahead}function ce(k){var ee,ge,$,X,re,Pe,Fe,me,Ge,mt,We=k.w_size;do{if(X=k.window_size-k.lookahead-k.strstart,k.strstart>=We+(We-be)){for(s.arraySet(k.window,k.window,We,We,0),k.match_start-=We,k.strstart-=We,k.block_start-=We,ee=ge=k.hash_size;$=k.head[--ee],k.head[ee]=We<=$?$-We:0,--ge;);for(ee=ge=We;$=k.prev[--ee],k.prev[ee]=We<=$?$-We:0,--ge;);X+=We}if(k.strm.avail_in===0)break;if(Pe=k.strm,Fe=k.window,me=k.strstart+k.lookahead,Ge=X,mt=void 0,mt=Pe.avail_in,Ge<mt&&(mt=Ge),ge=mt===0?0:(Pe.avail_in-=mt,s.arraySet(Fe,Pe.input,Pe.next_in,mt,me),Pe.state.wrap===1?Pe.adler=u(Pe.adler,Fe,mt,me):Pe.state.wrap===2&&(Pe.adler=h(Pe.adler,Fe,mt,me)),Pe.next_in+=mt,Pe.total_in+=mt,mt),k.lookahead+=ge,k.lookahead+k.insert>=L)for(re=k.strstart-k.insert,k.ins_h=k.window[re],k.ins_h=(k.ins_h<<k.hash_shift^k.window[re+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[re+L-1])&k.hash_mask,k.prev[re&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=re,re++,k.insert--,!(k.lookahead+k.insert<L)););}while(k.lookahead<be&&k.strm.avail_in!==0)}function Ce(k,ee){for(var ge,$;;){if(k.lookahead<be){if(ce(k),k.lookahead<be&&ee===p)return F;if(k.lookahead===0)break}if(ge=0,k.lookahead>=L&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),ge!==0&&k.strstart-ge<=k.w_size-be&&(k.match_length=Ue(k,ge)),k.match_length>=L)if($=l._tr_tally(k,k.strstart-k.match_start,k.match_length-L),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=L){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else $=l._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if($&&(pe(k,!1),k.strm.avail_out===0))return F}return k.insert=k.strstart<L-1?k.strstart:L-1,ee===m?(pe(k,!0),k.strm.avail_out===0?Ke:Ie):k.last_lit&&(pe(k,!1),k.strm.avail_out===0)?F:ae}function _e(k,ee){for(var ge,$,X;;){if(k.lookahead<be){if(ce(k),k.lookahead<be&&ee===p)return F;if(k.lookahead===0)break}if(ge=0,k.lookahead>=L&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=L-1,ge!==0&&k.prev_length<k.max_lazy_match&&k.strstart-ge<=k.w_size-be&&(k.match_length=Ue(k,ge),k.match_length<=5&&(k.strategy===1||k.match_length===L&&4096<k.strstart-k.match_start)&&(k.match_length=L-1)),k.prev_length>=L&&k.match_length<=k.prev_length){for(X=k.strstart+k.lookahead-L,$=l._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-L),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=X&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=L-1,k.strstart++,$&&(pe(k,!1),k.strm.avail_out===0))return F}else if(k.match_available){if(($=l._tr_tally(k,0,k.window[k.strstart-1]))&&pe(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return F}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&($=l._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<L-1?k.strstart:L-1,ee===m?(pe(k,!0),k.strm.avail_out===0?Ke:Ie):k.last_lit&&(pe(k,!1),k.strm.avail_out===0)?F:ae}function He(k,ee,ge,$,X){this.good_length=k,this.max_lazy=ee,this.nice_length=ge,this.max_chain=$,this.func=X}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*P+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),De(this.dyn_ltree),De(this.dyn_dtree),De(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Z+1),this.heap=new s.Buf16(2*A+1),De(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*A+1),De(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(k){var ee;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=S,(ee=k.state).pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?J:U,k.adler=ee.wrap===2?0:1,ee.last_flush=p,l._tr_init(ee),v):xe(k,_)}function St(k){var ee=ze(k);return ee===v&&function(ge){ge.window_size=2*ge.w_size,De(ge.head),ge.max_lazy_match=o[ge.level].max_lazy,ge.good_match=o[ge.level].good_length,ge.nice_match=o[ge.level].nice_length,ge.max_chain_length=o[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=L-1,ge.match_available=0,ge.ins_h=0}(k.state),ee}function ct(k,ee,ge,$,X,re){if(!k)return _;var Pe=1;if(ee===C&&(ee=6),$<0?(Pe=0,$=-$):15<$&&(Pe=2,$-=16),X<1||D<X||ge!==E||$<8||15<$||ee<0||9<ee||re<0||x<re)return xe(k,_);$===8&&($=9);var Fe=new ot;return(k.state=Fe).strm=k,Fe.wrap=Pe,Fe.gzhead=null,Fe.w_bits=$,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=X+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+L-1)/L),Fe.window=new s.Buf8(2*Fe.w_size),Fe.head=new s.Buf16(Fe.hash_size),Fe.prev=new s.Buf16(Fe.w_size),Fe.lit_bufsize=1<<X+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new s.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=ee,Fe.strategy=re,Fe.method=ge,St(k)}o=[new He(0,0,0,0,function(k,ee){var ge=65535;for(ge>k.pending_buf_size-5&&(ge=k.pending_buf_size-5);;){if(k.lookahead<=1){if(ce(k),k.lookahead===0&&ee===p)return F;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var $=k.block_start+ge;if((k.strstart===0||k.strstart>=$)&&(k.lookahead=k.strstart-$,k.strstart=$,pe(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-be&&(pe(k,!1),k.strm.avail_out===0))return F}return k.insert=0,ee===m?(pe(k,!0),k.strm.avail_out===0?Ke:Ie):(k.strstart>k.block_start&&(pe(k,!1),k.strm.avail_out),F)}),new He(4,4,8,4,Ce),new He(4,5,16,8,Ce),new He(4,6,32,32,Ce),new He(4,4,16,16,_e),new He(8,16,32,32,_e),new He(8,16,128,128,_e),new He(8,32,128,256,_e),new He(32,128,258,1024,_e),new He(32,258,258,4096,_e)],r.deflateInit=function(k,ee){return ct(k,ee,E,15,8,0)},r.deflateInit2=ct,r.deflateReset=St,r.deflateResetKeep=ze,r.deflateSetHeader=function(k,ee){return k&&k.state?k.state.wrap!==2?_:(k.state.gzhead=ee,v):_},r.deflate=function(k,ee){var ge,$,X,re;if(!k||!k.state||5<ee||ee<0)return k?xe(k,_):_;if($=k.state,!k.output||!k.input&&k.avail_in!==0||$.status===666&&ee!==m)return xe(k,k.avail_out===0?-5:_);if($.strm=k,ge=$.last_flush,$.last_flush=ee,$.status===J)if($.wrap===2)k.adler=0,Ve($,31),Ve($,139),Ve($,8),$.gzhead?(Ve($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),Ve($,255&$.gzhead.time),Ve($,$.gzhead.time>>8&255),Ve($,$.gzhead.time>>16&255),Ve($,$.gzhead.time>>24&255),Ve($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Ve($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(Ve($,255&$.gzhead.extra.length),Ve($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(k.adler=h(k.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(Ve($,0),Ve($,0),Ve($,0),Ve($,0),Ve($,0),Ve($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Ve($,3),$.status=U);else{var Pe=E+($.w_bits-8<<4)<<8;Pe|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(Pe|=32),Pe+=31-Pe%31,$.status=U,Ye($,Pe),$.strstart!==0&&(Ye($,k.adler>>>16),Ye($,65535&k.adler)),k.adler=1}if($.status===69)if($.gzhead.extra){for(X=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending!==$.pending_buf_size));)Ve($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){X=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,Ve($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),re===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){X=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,Ve($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),re===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&ne(k),$.pending+2<=$.pending_buf_size&&(Ve($,255&k.adler),Ve($,k.adler>>8&255),k.adler=0,$.status=U)):$.status=U),$.pending!==0){if(ne(k),k.avail_out===0)return $.last_flush=-1,v}else if(k.avail_in===0&&Oe(ee)<=Oe(ge)&&ee!==m)return xe(k,-5);if($.status===666&&k.avail_in!==0)return xe(k,-5);if(k.avail_in!==0||$.lookahead!==0||ee!==p&&$.status!==666){var Fe=$.strategy===2?function(me,Ge){for(var mt;;){if(me.lookahead===0&&(ce(me),me.lookahead===0)){if(Ge===p)return F;break}if(me.match_length=0,mt=l._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++,mt&&(pe(me,!1),me.strm.avail_out===0))return F}return me.insert=0,Ge===m?(pe(me,!0),me.strm.avail_out===0?Ke:Ie):me.last_lit&&(pe(me,!1),me.strm.avail_out===0)?F:ae}($,ee):$.strategy===3?function(me,Ge){for(var mt,We,Le,jt,It=me.window;;){if(me.lookahead<=de){if(ce(me),me.lookahead<=de&&Ge===p)return F;if(me.lookahead===0)break}if(me.match_length=0,me.lookahead>=L&&0<me.strstart&&(We=It[Le=me.strstart-1])===It[++Le]&&We===It[++Le]&&We===It[++Le]){jt=me.strstart+de;do;while(We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&We===It[++Le]&&Le<jt);me.match_length=de-(jt-Le),me.match_length>me.lookahead&&(me.match_length=me.lookahead)}if(me.match_length>=L?(mt=l._tr_tally(me,1,me.match_length-L),me.lookahead-=me.match_length,me.strstart+=me.match_length,me.match_length=0):(mt=l._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++),mt&&(pe(me,!1),me.strm.avail_out===0))return F}return me.insert=0,Ge===m?(pe(me,!0),me.strm.avail_out===0?Ke:Ie):me.last_lit&&(pe(me,!1),me.strm.avail_out===0)?F:ae}($,ee):o[$.level].func($,ee);if(Fe!==Ke&&Fe!==Ie||($.status=666),Fe===F||Fe===Ke)return k.avail_out===0&&($.last_flush=-1),v;if(Fe===ae&&(ee===1?l._tr_align($):ee!==5&&(l._tr_stored_block($,0,0,!1),ee===3&&(De($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),ne(k),k.avail_out===0))return $.last_flush=-1,v}return ee!==m?v:$.wrap<=0?1:($.wrap===2?(Ve($,255&k.adler),Ve($,k.adler>>8&255),Ve($,k.adler>>16&255),Ve($,k.adler>>24&255),Ve($,255&k.total_in),Ve($,k.total_in>>8&255),Ve($,k.total_in>>16&255),Ve($,k.total_in>>24&255)):(Ye($,k.adler>>>16),Ye($,65535&k.adler)),ne(k),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?v:1)},r.deflateEnd=function(k){var ee;return k&&k.state?(ee=k.state.status)!==J&&ee!==69&&ee!==73&&ee!==91&&ee!==103&&ee!==U&&ee!==666?xe(k,_):(k.state=null,ee===U?xe(k,-3):v):_},r.deflateSetDictionary=function(k,ee){var ge,$,X,re,Pe,Fe,me,Ge,mt=ee.length;if(!k||!k.state||(re=(ge=k.state).wrap)===2||re===1&&ge.status!==J||ge.lookahead)return _;for(re===1&&(k.adler=u(k.adler,ee,mt,0)),ge.wrap=0,mt>=ge.w_size&&(re===0&&(De(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),Ge=new s.Buf8(ge.w_size),s.arraySet(Ge,ee,mt-ge.w_size,ge.w_size,0),ee=Ge,mt=ge.w_size),Pe=k.avail_in,Fe=k.next_in,me=k.input,k.avail_in=mt,k.next_in=0,k.input=ee,ce(ge);ge.lookahead>=L;){for($=ge.strstart,X=ge.lookahead-(L-1);ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[$+L-1])&ge.hash_mask,ge.prev[$&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=$,$++,--X;);ge.strstart=$,ge.lookahead=L-1,ce(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=L-1,ge.match_available=0,k.next_in=Fe,k.input=me,k.avail_in=Pe,ge.wrap=re,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,s){var l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z,L,de,be,J,U,F,ae;l=o.state,u=o.next_in,F=o.input,h=u+(o.avail_in-5),c=o.next_out,ae=o.output,p=c-(s-o.avail_out),m=c+(o.avail_out-257),v=l.dmax,_=l.wsize,C=l.whave,x=l.wnext,S=l.window,E=l.hold,D=l.bits,A=l.lencode,P=l.distcode,M=(1<<l.lenbits)-1,B=(1<<l.distbits)-1;e:do{D<15&&(E+=F[u++]<<D,D+=8,E+=F[u++]<<D,D+=8),Z=A[E&M];t:for(;;){if(E>>>=L=Z>>>24,D-=L,(L=Z>>>16&255)===0)ae[c++]=65535&Z;else{if(!(16&L)){if(!(64&L)){Z=A[(65535&Z)+(E&(1<<L)-1)];continue t}if(32&L){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}de=65535&Z,(L&=15)&&(D<L&&(E+=F[u++]<<D,D+=8),de+=E&(1<<L)-1,E>>>=L,D-=L),D<15&&(E+=F[u++]<<D,D+=8,E+=F[u++]<<D,D+=8),Z=P[E&B];i:for(;;){if(E>>>=L=Z>>>24,D-=L,!(16&(L=Z>>>16&255))){if(!(64&L)){Z=P[(65535&Z)+(E&(1<<L)-1)];continue i}o.msg="invalid distance code",l.mode=30;break e}if(be=65535&Z,D<(L&=15)&&(E+=F[u++]<<D,(D+=8)<L&&(E+=F[u++]<<D,D+=8)),v<(be+=E&(1<<L)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(E>>>=L,D-=L,(L=c-p)<be){if(C<(L=be-L)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(U=S,(J=0)===x){if(J+=_-L,L<de){for(de-=L;ae[c++]=S[J++],--L;);J=c-be,U=ae}}else if(x<L){if(J+=_+x-L,(L-=x)<de){for(de-=L;ae[c++]=S[J++],--L;);if(J=0,x<de){for(de-=L=x;ae[c++]=S[J++],--L;);J=c-be,U=ae}}}else if(J+=x-L,L<de){for(de-=L;ae[c++]=S[J++],--L;);J=c-be,U=ae}for(;2<de;)ae[c++]=U[J++],ae[c++]=U[J++],ae[c++]=U[J++],de-=3;de&&(ae[c++]=U[J++],1<de&&(ae[c++]=U[J++]))}else{for(J=c-be;ae[c++]=ae[J++],ae[c++]=ae[J++],ae[c++]=ae[J++],2<(de-=3););de&&(ae[c++]=ae[J++],1<de&&(ae[c++]=ae[J++]))}break}}break}}while(u<h&&c<m);u-=de=D>>3,E&=(1<<(D-=de<<3))-1,o.next_in=u,o.next_out=c,o.avail_in=u<h?h-u+5:5-(u-h),o.avail_out=c<m?m-c+257:257-(c-m),l.hold=E,l.bits=D}},{}],49:[function(e,n,r){var o=e("../utils/common"),s=e("./adler32"),l=e("./crc32"),u=e("./inffast"),h=e("./inftrees"),c=1,p=2,m=0,v=-2,_=1,C=852,x=592;function S(J){return(J>>>24&255)+(J>>>8&65280)+((65280&J)<<8)+((255&J)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(J){var U;return J&&J.state?(U=J.state,J.total_in=J.total_out=U.total=0,J.msg="",U.wrap&&(J.adler=1&U.wrap),U.mode=_,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new o.Buf32(C),U.distcode=U.distdyn=new o.Buf32(x),U.sane=1,U.back=-1,m):v}function A(J){var U;return J&&J.state?((U=J.state).wsize=0,U.whave=0,U.wnext=0,D(J)):v}function P(J,U){var F,ae;return J&&J.state?(ae=J.state,U<0?(F=0,U=-U):(F=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?v:(ae.window!==null&&ae.wbits!==U&&(ae.window=null),ae.wrap=F,ae.wbits=U,A(J))):v}function M(J,U){var F,ae;return J?(ae=new E,(J.state=ae).window=null,(F=P(J,U))!==m&&(J.state=null),F):v}var B,Z,L=!0;function de(J){if(L){var U;for(B=new o.Buf32(512),Z=new o.Buf32(32),U=0;U<144;)J.lens[U++]=8;for(;U<256;)J.lens[U++]=9;for(;U<280;)J.lens[U++]=7;for(;U<288;)J.lens[U++]=8;for(h(c,J.lens,0,288,B,0,J.work,{bits:9}),U=0;U<32;)J.lens[U++]=5;h(p,J.lens,0,32,Z,0,J.work,{bits:5}),L=!1}J.lencode=B,J.lenbits=9,J.distcode=Z,J.distbits=5}function be(J,U,F,ae){var Ke,Ie=J.state;return Ie.window===null&&(Ie.wsize=1<<Ie.wbits,Ie.wnext=0,Ie.whave=0,Ie.window=new o.Buf8(Ie.wsize)),ae>=Ie.wsize?(o.arraySet(Ie.window,U,F-Ie.wsize,Ie.wsize,0),Ie.wnext=0,Ie.whave=Ie.wsize):(ae<(Ke=Ie.wsize-Ie.wnext)&&(Ke=ae),o.arraySet(Ie.window,U,F-ae,Ke,Ie.wnext),(ae-=Ke)?(o.arraySet(Ie.window,U,F-ae,ae,0),Ie.wnext=ae,Ie.whave=Ie.wsize):(Ie.wnext+=Ke,Ie.wnext===Ie.wsize&&(Ie.wnext=0),Ie.whave<Ie.wsize&&(Ie.whave+=Ke))),0}r.inflateReset=A,r.inflateReset2=P,r.inflateResetKeep=D,r.inflateInit=function(J){return M(J,15)},r.inflateInit2=M,r.inflate=function(J,U){var F,ae,Ke,Ie,xe,Oe,De,ne,pe,Ve,Ye,Ue,ce,Ce,_e,He,ot,ze,St,ct,k,ee,ge,$,X=0,re=new o.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!J||!J.state||!J.output||!J.input&&J.avail_in!==0)return v;(F=J.state).mode===12&&(F.mode=13),xe=J.next_out,Ke=J.output,De=J.avail_out,Ie=J.next_in,ae=J.input,Oe=J.avail_in,ne=F.hold,pe=F.bits,Ve=Oe,Ye=De,ee=m;e:for(;;)switch(F.mode){case _:if(F.wrap===0){F.mode=13;break}for(;pe<16;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(2&F.wrap&&ne===35615){re[F.check=0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0),pe=ne=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&ne)<<8)+(ne>>8))%31){J.msg="incorrect header check",F.mode=30;break}if((15&ne)!=8){J.msg="unknown compression method",F.mode=30;break}if(pe-=4,k=8+(15&(ne>>>=4)),F.wbits===0)F.wbits=k;else if(k>F.wbits){J.msg="invalid window size",F.mode=30;break}F.dmax=1<<k,J.adler=F.check=1,F.mode=512&ne?10:12,pe=ne=0;break;case 2:for(;pe<16;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(F.flags=ne,(255&F.flags)!=8){J.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){J.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=ne>>8&1),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),pe=ne=0,F.mode=3;case 3:for(;pe<32;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.head&&(F.head.time=ne),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,re[2]=ne>>>16&255,re[3]=ne>>>24&255,F.check=l(F.check,re,4,0)),pe=ne=0,F.mode=4;case 4:for(;pe<16;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.head&&(F.head.xflags=255&ne,F.head.os=ne>>8),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),pe=ne=0,F.mode=5;case 5:if(1024&F.flags){for(;pe<16;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.length=ne,F.head&&(F.head.extra_len=ne),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),pe=ne=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(Oe<(Ue=F.length)&&(Ue=Oe),Ue&&(F.head&&(k=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),o.arraySet(F.head.extra,ae,Ie,Ue,k)),512&F.flags&&(F.check=l(F.check,ae,Ue,Ie)),Oe-=Ue,Ie+=Ue,F.length-=Ue),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(Oe===0)break e;for(Ue=0;k=ae[Ie+Ue++],F.head&&k&&F.length<65536&&(F.head.name+=String.fromCharCode(k)),k&&Ue<Oe;);if(512&F.flags&&(F.check=l(F.check,ae,Ue,Ie)),Oe-=Ue,Ie+=Ue,k)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(Oe===0)break e;for(Ue=0;k=ae[Ie+Ue++],F.head&&k&&F.length<65536&&(F.head.comment+=String.fromCharCode(k)),k&&Ue<Oe;);if(512&F.flags&&(F.check=l(F.check,ae,Ue,Ie)),Oe-=Ue,Ie+=Ue,k)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;pe<16;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(ne!==(65535&F.check)){J.msg="header crc mismatch",F.mode=30;break}pe=ne=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),J.adler=F.check=0,F.mode=12;break;case 10:for(;pe<32;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}J.adler=F.check=S(ne),pe=ne=0,F.mode=11;case 11:if(F.havedict===0)return J.next_out=xe,J.avail_out=De,J.next_in=Ie,J.avail_in=Oe,F.hold=ne,F.bits=pe,2;J.adler=F.check=1,F.mode=12;case 12:if(U===5||U===6)break e;case 13:if(F.last){ne>>>=7&pe,pe-=7&pe,F.mode=27;break}for(;pe<3;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}switch(F.last=1&ne,pe-=1,3&(ne>>>=1)){case 0:F.mode=14;break;case 1:if(de(F),F.mode=20,U!==6)break;ne>>>=2,pe-=2;break e;case 2:F.mode=17;break;case 3:J.msg="invalid block type",F.mode=30}ne>>>=2,pe-=2;break;case 14:for(ne>>>=7&pe,pe-=7&pe;pe<32;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if((65535&ne)!=(ne>>>16^65535)){J.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&ne,pe=ne=0,F.mode=15,U===6)break e;case 15:F.mode=16;case 16:if(Ue=F.length){if(Oe<Ue&&(Ue=Oe),De<Ue&&(Ue=De),Ue===0)break e;o.arraySet(Ke,ae,Ie,Ue,xe),Oe-=Ue,Ie+=Ue,De-=Ue,xe+=Ue,F.length-=Ue;break}F.mode=12;break;case 17:for(;pe<14;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(F.nlen=257+(31&ne),ne>>>=5,pe-=5,F.ndist=1+(31&ne),ne>>>=5,pe-=5,F.ncode=4+(15&ne),ne>>>=4,pe-=4,286<F.nlen||30<F.ndist){J.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;pe<3;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.lens[Pe[F.have++]]=7&ne,ne>>>=3,pe-=3}for(;F.have<19;)F.lens[Pe[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,ge={bits:F.lenbits},ee=h(0,F.lens,0,19,F.lencode,0,F.work,ge),F.lenbits=ge.bits,ee){J.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;He=(X=F.lencode[ne&(1<<F.lenbits)-1])>>>16&255,ot=65535&X,!((_e=X>>>24)<=pe);){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(ot<16)ne>>>=_e,pe-=_e,F.lens[F.have++]=ot;else{if(ot===16){for($=_e+2;pe<$;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(ne>>>=_e,pe-=_e,F.have===0){J.msg="invalid bit length repeat",F.mode=30;break}k=F.lens[F.have-1],Ue=3+(3&ne),ne>>>=2,pe-=2}else if(ot===17){for($=_e+3;pe<$;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}pe-=_e,k=0,Ue=3+(7&(ne>>>=_e)),ne>>>=3,pe-=3}else{for($=_e+7;pe<$;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}pe-=_e,k=0,Ue=11+(127&(ne>>>=_e)),ne>>>=7,pe-=7}if(F.have+Ue>F.nlen+F.ndist){J.msg="invalid bit length repeat",F.mode=30;break}for(;Ue--;)F.lens[F.have++]=k}}if(F.mode===30)break;if(F.lens[256]===0){J.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,ge={bits:F.lenbits},ee=h(c,F.lens,0,F.nlen,F.lencode,0,F.work,ge),F.lenbits=ge.bits,ee){J.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,ge={bits:F.distbits},ee=h(p,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,ge),F.distbits=ge.bits,ee){J.msg="invalid distances set",F.mode=30;break}if(F.mode=20,U===6)break e;case 20:F.mode=21;case 21:if(6<=Oe&&258<=De){J.next_out=xe,J.avail_out=De,J.next_in=Ie,J.avail_in=Oe,F.hold=ne,F.bits=pe,u(J,Ye),xe=J.next_out,Ke=J.output,De=J.avail_out,Ie=J.next_in,ae=J.input,Oe=J.avail_in,ne=F.hold,pe=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;He=(X=F.lencode[ne&(1<<F.lenbits)-1])>>>16&255,ot=65535&X,!((_e=X>>>24)<=pe);){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(He&&!(240&He)){for(ze=_e,St=He,ct=ot;He=(X=F.lencode[ct+((ne&(1<<ze+St)-1)>>ze)])>>>16&255,ot=65535&X,!(ze+(_e=X>>>24)<=pe);){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}ne>>>=ze,pe-=ze,F.back+=ze}if(ne>>>=_e,pe-=_e,F.back+=_e,F.length=ot,He===0){F.mode=26;break}if(32&He){F.back=-1,F.mode=12;break}if(64&He){J.msg="invalid literal/length code",F.mode=30;break}F.extra=15&He,F.mode=22;case 22:if(F.extra){for($=F.extra;pe<$;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.length+=ne&(1<<F.extra)-1,ne>>>=F.extra,pe-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;He=(X=F.distcode[ne&(1<<F.distbits)-1])>>>16&255,ot=65535&X,!((_e=X>>>24)<=pe);){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(!(240&He)){for(ze=_e,St=He,ct=ot;He=(X=F.distcode[ct+((ne&(1<<ze+St)-1)>>ze)])>>>16&255,ot=65535&X,!(ze+(_e=X>>>24)<=pe);){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}ne>>>=ze,pe-=ze,F.back+=ze}if(ne>>>=_e,pe-=_e,F.back+=_e,64&He){J.msg="invalid distance code",F.mode=30;break}F.offset=ot,F.extra=15&He,F.mode=24;case 24:if(F.extra){for($=F.extra;pe<$;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}F.offset+=ne&(1<<F.extra)-1,ne>>>=F.extra,pe-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){J.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(De===0)break e;if(Ue=Ye-De,F.offset>Ue){if((Ue=F.offset-Ue)>F.whave&&F.sane){J.msg="invalid distance too far back",F.mode=30;break}ce=Ue>F.wnext?(Ue-=F.wnext,F.wsize-Ue):F.wnext-Ue,Ue>F.length&&(Ue=F.length),Ce=F.window}else Ce=Ke,ce=xe-F.offset,Ue=F.length;for(De<Ue&&(Ue=De),De-=Ue,F.length-=Ue;Ke[xe++]=Ce[ce++],--Ue;);F.length===0&&(F.mode=21);break;case 26:if(De===0)break e;Ke[xe++]=F.length,De--,F.mode=21;break;case 27:if(F.wrap){for(;pe<32;){if(Oe===0)break e;Oe--,ne|=ae[Ie++]<<pe,pe+=8}if(Ye-=De,J.total_out+=Ye,F.total+=Ye,Ye&&(J.adler=F.check=F.flags?l(F.check,Ke,Ye,xe-Ye):s(F.check,Ke,Ye,xe-Ye)),Ye=De,(F.flags?ne:S(ne))!==F.check){J.msg="incorrect data check",F.mode=30;break}pe=ne=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;pe<32;){if(Oe===0)break e;Oe--,ne+=ae[Ie++]<<pe,pe+=8}if(ne!==(4294967295&F.total)){J.msg="incorrect length check",F.mode=30;break}pe=ne=0}F.mode=29;case 29:ee=1;break e;case 30:ee=-3;break e;case 31:return-4;case 32:default:return v}return J.next_out=xe,J.avail_out=De,J.next_in=Ie,J.avail_in=Oe,F.hold=ne,F.bits=pe,(F.wsize||Ye!==J.avail_out&&F.mode<30&&(F.mode<27||U!==4))&&be(J,J.output,J.next_out,Ye-J.avail_out)?(F.mode=31,-4):(Ve-=J.avail_in,Ye-=J.avail_out,J.total_in+=Ve,J.total_out+=Ye,F.total+=Ye,F.wrap&&Ye&&(J.adler=F.check=F.flags?l(F.check,Ke,Ye,J.next_out-Ye):s(F.check,Ke,Ye,J.next_out-Ye)),J.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(Ve==0&&Ye===0||U===4)&&ee===m&&(ee=-5),ee)},r.inflateEnd=function(J){if(!J||!J.state)return v;var U=J.state;return U.window&&(U.window=null),J.state=null,m},r.inflateGetHeader=function(J,U){var F;return J&&J.state&&2&(F=J.state).wrap?((F.head=U).done=!1,m):v},r.inflateSetDictionary=function(J,U){var F,ae=U.length;return J&&J.state?(F=J.state).wrap!==0&&F.mode!==11?v:F.mode===11&&s(1,U,ae,0)!==F.check?-3:be(J,U,ae,ae)?(F.mode=31,-4):(F.havedict=1,m):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,p,m,v,_,C,x,S){var E,D,A,P,M,B,Z,L,de,be=S.bits,J=0,U=0,F=0,ae=0,Ke=0,Ie=0,xe=0,Oe=0,De=0,ne=0,pe=null,Ve=0,Ye=new o.Buf16(16),Ue=new o.Buf16(16),ce=null,Ce=0;for(J=0;J<=15;J++)Ye[J]=0;for(U=0;U<v;U++)Ye[p[m+U]]++;for(Ke=be,ae=15;1<=ae&&Ye[ae]===0;ae--);if(ae<Ke&&(Ke=ae),ae===0)return _[C++]=20971520,_[C++]=20971520,S.bits=1,0;for(F=1;F<ae&&Ye[F]===0;F++);for(Ke<F&&(Ke=F),J=Oe=1;J<=15;J++)if(Oe<<=1,(Oe-=Ye[J])<0)return-1;if(0<Oe&&(c===0||ae!==1))return-1;for(Ue[1]=0,J=1;J<15;J++)Ue[J+1]=Ue[J]+Ye[J];for(U=0;U<v;U++)p[m+U]!==0&&(x[Ue[p[m+U]]++]=U);if(B=c===0?(pe=ce=x,19):c===1?(pe=s,Ve-=257,ce=l,Ce-=257,256):(pe=u,ce=h,-1),J=F,M=C,xe=U=ne=0,A=-1,P=(De=1<<(Ie=Ke))-1,c===1&&852<De||c===2&&592<De)return 1;for(;;){for(Z=J-xe,de=x[U]<B?(L=0,x[U]):x[U]>B?(L=ce[Ce+x[U]],pe[Ve+x[U]]):(L=96,0),E=1<<J-xe,F=D=1<<Ie;_[M+(ne>>xe)+(D-=E)]=Z<<24|L<<16|de|0,D!==0;);for(E=1<<J-1;ne&E;)E>>=1;if(E!==0?(ne&=E-1,ne+=E):ne=0,U++,--Ye[J]==0){if(J===ae)break;J=p[m+x[U]]}if(Ke<J&&(ne&P)!==A){for(xe===0&&(xe=Ke),M+=F,Oe=1<<(Ie=J-xe);Ie+xe<ae&&!((Oe-=Ye[Ie+xe])<=0);)Ie++,Oe<<=1;if(De+=1<<Ie,c===1&&852<De||c===2&&592<De)return 1;_[A=ne&P]=Ke<<24|Ie<<16|M-C|0}}return ne!==0&&(_[M+ne]=J-xe<<24|64<<16|0),S.bits=Ke,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),s=0,l=1;function u(X){for(var re=X.length;0<=--re;)X[re]=0}var h=0,c=29,p=256,m=p+1+c,v=30,_=19,C=2*m+1,x=15,S=16,E=7,D=256,A=16,P=17,M=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],de=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],be=new Array(2*(m+2));u(be);var J=new Array(2*v);u(J);var U=new Array(512);u(U);var F=new Array(256);u(F);var ae=new Array(c);u(ae);var Ke,Ie,xe,Oe=new Array(v);function De(X,re,Pe,Fe,me){this.static_tree=X,this.extra_bits=re,this.extra_base=Pe,this.elems=Fe,this.max_length=me,this.has_stree=X&&X.length}function ne(X,re){this.dyn_tree=X,this.max_code=0,this.stat_desc=re}function pe(X){return X<256?U[X]:U[256+(X>>>7)]}function Ve(X,re){X.pending_buf[X.pending++]=255&re,X.pending_buf[X.pending++]=re>>>8&255}function Ye(X,re,Pe){X.bi_valid>S-Pe?(X.bi_buf|=re<<X.bi_valid&65535,Ve(X,X.bi_buf),X.bi_buf=re>>S-X.bi_valid,X.bi_valid+=Pe-S):(X.bi_buf|=re<<X.bi_valid&65535,X.bi_valid+=Pe)}function Ue(X,re,Pe){Ye(X,Pe[2*re],Pe[2*re+1])}function ce(X,re){for(var Pe=0;Pe|=1&X,X>>>=1,Pe<<=1,0<--re;);return Pe>>>1}function Ce(X,re,Pe){var Fe,me,Ge=new Array(x+1),mt=0;for(Fe=1;Fe<=x;Fe++)Ge[Fe]=mt=mt+Pe[Fe-1]<<1;for(me=0;me<=re;me++){var We=X[2*me+1];We!==0&&(X[2*me]=ce(Ge[We]++,We))}}function _e(X){var re;for(re=0;re<m;re++)X.dyn_ltree[2*re]=0;for(re=0;re<v;re++)X.dyn_dtree[2*re]=0;for(re=0;re<_;re++)X.bl_tree[2*re]=0;X.dyn_ltree[2*D]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function He(X){8<X.bi_valid?Ve(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function ot(X,re,Pe,Fe){var me=2*re,Ge=2*Pe;return X[me]<X[Ge]||X[me]===X[Ge]&&Fe[re]<=Fe[Pe]}function ze(X,re,Pe){for(var Fe=X.heap[Pe],me=Pe<<1;me<=X.heap_len&&(me<X.heap_len&&ot(re,X.heap[me+1],X.heap[me],X.depth)&&me++,!ot(re,Fe,X.heap[me],X.depth));)X.heap[Pe]=X.heap[me],Pe=me,me<<=1;X.heap[Pe]=Fe}function St(X,re,Pe){var Fe,me,Ge,mt,We=0;if(X.last_lit!==0)for(;Fe=X.pending_buf[X.d_buf+2*We]<<8|X.pending_buf[X.d_buf+2*We+1],me=X.pending_buf[X.l_buf+We],We++,Fe===0?Ue(X,me,re):(Ue(X,(Ge=F[me])+p+1,re),(mt=B[Ge])!==0&&Ye(X,me-=ae[Ge],mt),Ue(X,Ge=pe(--Fe),Pe),(mt=Z[Ge])!==0&&Ye(X,Fe-=Oe[Ge],mt)),We<X.last_lit;);Ue(X,D,re)}function ct(X,re){var Pe,Fe,me,Ge=re.dyn_tree,mt=re.stat_desc.static_tree,We=re.stat_desc.has_stree,Le=re.stat_desc.elems,jt=-1;for(X.heap_len=0,X.heap_max=C,Pe=0;Pe<Le;Pe++)Ge[2*Pe]!==0?(X.heap[++X.heap_len]=jt=Pe,X.depth[Pe]=0):Ge[2*Pe+1]=0;for(;X.heap_len<2;)Ge[2*(me=X.heap[++X.heap_len]=jt<2?++jt:0)]=1,X.depth[me]=0,X.opt_len--,We&&(X.static_len-=mt[2*me+1]);for(re.max_code=jt,Pe=X.heap_len>>1;1<=Pe;Pe--)ze(X,Ge,Pe);for(me=Le;Pe=X.heap[1],X.heap[1]=X.heap[X.heap_len--],ze(X,Ge,1),Fe=X.heap[1],X.heap[--X.heap_max]=Pe,X.heap[--X.heap_max]=Fe,Ge[2*me]=Ge[2*Pe]+Ge[2*Fe],X.depth[me]=(X.depth[Pe]>=X.depth[Fe]?X.depth[Pe]:X.depth[Fe])+1,Ge[2*Pe+1]=Ge[2*Fe+1]=me,X.heap[1]=me++,ze(X,Ge,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],function(It,bi){var K,G,ve,ke,at,st,ht=bi.dyn_tree,Rt=bi.max_code,Lt=bi.stat_desc.static_tree,Ot=bi.stat_desc.has_stree,zt=bi.stat_desc.extra_bits,qt=bi.stat_desc.extra_base,Fi=bi.stat_desc.max_length,Mi=0;for(ke=0;ke<=x;ke++)It.bl_count[ke]=0;for(ht[2*It.heap[It.heap_max]+1]=0,K=It.heap_max+1;K<C;K++)Fi<(ke=ht[2*ht[2*(G=It.heap[K])+1]+1]+1)&&(ke=Fi,Mi++),ht[2*G+1]=ke,Rt<G||(It.bl_count[ke]++,at=0,qt<=G&&(at=zt[G-qt]),st=ht[2*G],It.opt_len+=st*(ke+at),Ot&&(It.static_len+=st*(Lt[2*G+1]+at)));if(Mi!==0){do{for(ke=Fi-1;It.bl_count[ke]===0;)ke--;It.bl_count[ke]--,It.bl_count[ke+1]+=2,It.bl_count[Fi]--,Mi-=2}while(0<Mi);for(ke=Fi;ke!==0;ke--)for(G=It.bl_count[ke];G!==0;)Rt<(ve=It.heap[--K])||(ht[2*ve+1]!==ke&&(It.opt_len+=(ke-ht[2*ve+1])*ht[2*ve],ht[2*ve+1]=ke),G--)}}(X,re),Ce(Ge,jt,X.bl_count)}function k(X,re,Pe){var Fe,me,Ge=-1,mt=re[1],We=0,Le=7,jt=4;for(mt===0&&(Le=138,jt=3),re[2*(Pe+1)+1]=65535,Fe=0;Fe<=Pe;Fe++)me=mt,mt=re[2*(Fe+1)+1],++We<Le&&me===mt||(We<jt?X.bl_tree[2*me]+=We:me!==0?(me!==Ge&&X.bl_tree[2*me]++,X.bl_tree[2*A]++):We<=10?X.bl_tree[2*P]++:X.bl_tree[2*M]++,Ge=me,jt=(We=0)===mt?(Le=138,3):me===mt?(Le=6,3):(Le=7,4))}function ee(X,re,Pe){var Fe,me,Ge=-1,mt=re[1],We=0,Le=7,jt=4;for(mt===0&&(Le=138,jt=3),Fe=0;Fe<=Pe;Fe++)if(me=mt,mt=re[2*(Fe+1)+1],!(++We<Le&&me===mt)){if(We<jt)for(;Ue(X,me,X.bl_tree),--We!=0;);else me!==0?(me!==Ge&&(Ue(X,me,X.bl_tree),We--),Ue(X,A,X.bl_tree),Ye(X,We-3,2)):We<=10?(Ue(X,P,X.bl_tree),Ye(X,We-3,3)):(Ue(X,M,X.bl_tree),Ye(X,We-11,7));Ge=me,jt=(We=0)===mt?(Le=138,3):me===mt?(Le=6,3):(Le=7,4)}}u(Oe);var ge=!1;function $(X,re,Pe,Fe){Ye(X,(h<<1)+(Fe?1:0),3),function(me,Ge,mt,We){He(me),We&&(Ve(me,mt),Ve(me,~mt)),o.arraySet(me.pending_buf,me.window,Ge,mt,me.pending),me.pending+=mt}(X,re,Pe,!0)}r._tr_init=function(X){ge||(function(){var re,Pe,Fe,me,Ge,mt=new Array(x+1);for(me=Fe=0;me<c-1;me++)for(ae[me]=Fe,re=0;re<1<<B[me];re++)F[Fe++]=me;for(F[Fe-1]=me,me=Ge=0;me<16;me++)for(Oe[me]=Ge,re=0;re<1<<Z[me];re++)U[Ge++]=me;for(Ge>>=7;me<v;me++)for(Oe[me]=Ge<<7,re=0;re<1<<Z[me]-7;re++)U[256+Ge++]=me;for(Pe=0;Pe<=x;Pe++)mt[Pe]=0;for(re=0;re<=143;)be[2*re+1]=8,re++,mt[8]++;for(;re<=255;)be[2*re+1]=9,re++,mt[9]++;for(;re<=279;)be[2*re+1]=7,re++,mt[7]++;for(;re<=287;)be[2*re+1]=8,re++,mt[8]++;for(Ce(be,m+1,mt),re=0;re<v;re++)J[2*re+1]=5,J[2*re]=ce(re,5);Ke=new De(be,B,p+1,m,x),Ie=new De(J,Z,0,v,x),xe=new De(new Array(0),L,0,_,E)}(),ge=!0),X.l_desc=new ne(X.dyn_ltree,Ke),X.d_desc=new ne(X.dyn_dtree,Ie),X.bl_desc=new ne(X.bl_tree,xe),X.bi_buf=0,X.bi_valid=0,_e(X)},r._tr_stored_block=$,r._tr_flush_block=function(X,re,Pe,Fe){var me,Ge,mt=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=function(We){var Le,jt=4093624447;for(Le=0;Le<=31;Le++,jt>>>=1)if(1&jt&&We.dyn_ltree[2*Le]!==0)return s;if(We.dyn_ltree[18]!==0||We.dyn_ltree[20]!==0||We.dyn_ltree[26]!==0)return l;for(Le=32;Le<p;Le++)if(We.dyn_ltree[2*Le]!==0)return l;return s}(X)),ct(X,X.l_desc),ct(X,X.d_desc),mt=function(We){var Le;for(k(We,We.dyn_ltree,We.l_desc.max_code),k(We,We.dyn_dtree,We.d_desc.max_code),ct(We,We.bl_desc),Le=_-1;3<=Le&&We.bl_tree[2*de[Le]+1]===0;Le--);return We.opt_len+=3*(Le+1)+5+5+4,Le}(X),me=X.opt_len+3+7>>>3,(Ge=X.static_len+3+7>>>3)<=me&&(me=Ge)):me=Ge=Pe+5,Pe+4<=me&&re!==-1?$(X,re,Pe,Fe):X.strategy===4||Ge===me?(Ye(X,2+(Fe?1:0),3),St(X,be,J)):(Ye(X,4+(Fe?1:0),3),function(We,Le,jt,It){var bi;for(Ye(We,Le-257,5),Ye(We,jt-1,5),Ye(We,It-4,4),bi=0;bi<It;bi++)Ye(We,We.bl_tree[2*de[bi]+1],3);ee(We,We.dyn_ltree,Le-1),ee(We,We.dyn_dtree,jt-1)}(X,X.l_desc.max_code+1,X.d_desc.max_code+1,mt+1),St(X,X.dyn_ltree,X.dyn_dtree)),_e(X),Fe&&He(X)},r._tr_tally=function(X,re,Pe){return X.pending_buf[X.d_buf+2*X.last_lit]=re>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&re,X.pending_buf[X.l_buf+X.last_lit]=255&Pe,X.last_lit++,re===0?X.dyn_ltree[2*Pe]++:(X.matches++,re--,X.dyn_ltree[2*(F[Pe]+p+1)]++,X.dyn_dtree[2*pe(re)]++),X.last_lit===X.lit_bufsize-1},r._tr_align=function(X){Ye(X,2,3),Ue(X,D,be),function(re){re.bi_valid===16?(Ve(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(X)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(s,l){if(!s.setImmediate){var u,h,c,p,m=1,v={},_=!1,C=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,u={}.toString.call(s.process)==="[object process]"?function(A){process.nextTick(function(){E(A)})}:function(){if(s.postMessage&&!s.importScripts){var A=!0,P=s.onmessage;return s.onmessage=function(){A=!1},s.postMessage("","*"),s.onmessage=P,A}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",D,!1):s.attachEvent("onmessage",D),function(A){s.postMessage(p+A,"*")}):s.MessageChannel?((c=new MessageChannel).port1.onmessage=function(A){E(A.data)},function(A){c.port2.postMessage(A)}):C&&"onreadystatechange"in C.createElement("script")?(h=C.documentElement,function(A){var P=C.createElement("script");P.onreadystatechange=function(){E(A),P.onreadystatechange=null,h.removeChild(P),P=null},h.appendChild(P)}):function(A){setTimeout(E,0,A)},x.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var P=new Array(arguments.length-1),M=0;M<P.length;M++)P[M]=arguments[M+1];var B={callback:A,args:P};return v[m]=B,u(m),m++},x.clearImmediate=S}function S(A){delete v[A]}function E(A){if(_)setTimeout(E,0,A);else{var P=v[A];if(P){_=!0;try{(function(M){var B=M.callback,Z=M.args;switch(Z.length){case 0:B();break;case 1:B(Z[0]);break;case 2:B(Z[0],Z[1]);break;case 3:B(Z[0],Z[1],Z[2]);break;default:B.apply(l,Z)}})(P)}finally{S(A),_=!1}}}}function D(A){A.source===s&&typeof A.data=="string"&&A.data.indexOf(p)===0&&E(+A.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Pr<"u"?Pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Cf)),Cf.exports}var hd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */hd.exports;var Ov;function QC(){return Ov||(Ov=1,function(a,t){(function(){var e,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,c="__lodash_placeholder__",p=1,m=2,v=4,_=1,C=2,x=1,S=2,E=4,D=8,A=16,P=32,M=64,B=128,Z=256,L=512,de=30,be="...",J=800,U=16,F=1,ae=2,Ke=3,Ie=1/0,xe=9007199254740991,Oe=17976931348623157e292,De=NaN,ne=4294967295,pe=ne-1,Ve=ne>>>1,Ye=[["ary",B],["bind",x],["bindKey",S],["curry",D],["curryRight",A],["flip",L],["partial",P],["partialRight",M],["rearg",Z]],Ue="[object Arguments]",ce="[object Array]",Ce="[object AsyncFunction]",_e="[object Boolean]",He="[object Date]",ot="[object DOMException]",ze="[object Error]",St="[object Function]",ct="[object GeneratorFunction]",k="[object Map]",ee="[object Number]",ge="[object Null]",$="[object Object]",X="[object Promise]",re="[object Proxy]",Pe="[object RegExp]",Fe="[object Set]",me="[object String]",Ge="[object Symbol]",mt="[object Undefined]",We="[object WeakMap]",Le="[object WeakSet]",jt="[object ArrayBuffer]",It="[object DataView]",bi="[object Float32Array]",K="[object Float64Array]",G="[object Int8Array]",ve="[object Int16Array]",ke="[object Int32Array]",at="[object Uint8Array]",st="[object Uint8ClampedArray]",ht="[object Uint16Array]",Rt="[object Uint32Array]",Lt=/\b__p \+= '';/g,Ot=/\b(__p \+=) '' \+/g,zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qt=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,Mi=RegExp(qt.source),z=RegExp(Fi.source),Q=/<%-([\s\S]+?)%>/g,he=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wt=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(wt.source),Et=/^\s+/,gt=/\s/,ei=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ai=/\{\n\/\* \[wrapped with (.+)\] \*/,zi=/,? & /,Zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Bn=/\\(\\)?/g,fn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/\w*$/,Se=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,xt=/^\[object .+?Constructor\]$/,ti=/^0o[0-7]+$/i,Ui=/^(?:0|[1-9]\d*)$/,Wi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Li=/($^)/,pn=/['\n\r\u2028\u2029\\]/g,Gn="\\ud800-\\udfff",Kt="\\u0300-\\u036f",Gi="\\ufe20-\\ufe2f",lr="\\u20d0-\\u20ff",bo=Kt+Gi+lr,er="\\u2700-\\u27bf",tr="a-z\\xdf-\\xf6\\xf8-\\xff",Co="\\xac\\xb1\\xd7\\xf7",mr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ar="\\u2000-\\u206f",Sr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$n="A-Z\\xc0-\\xd6\\xd8-\\xde",Vn="\\ufe0e\\ufe0f",di=Co+mr+ar+Sr,zn="['’]",to="["+Gn+"]",yo="["+di+"]",mn="["+bo+"]",ir="\\d+",vr="["+er+"]",gr="["+tr+"]",se="[^"+Gn+di+ir+er+tr+$n+"]",ue="\\ud83c[\\udffb-\\udfff]",ye="(?:"+mn+"|"+ue+")",$e="[^"+Gn+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",dt="[\\ud800-\\udbff][\\udc00-\\udfff]",At="["+$n+"]",Bt="\\u200d",ui="(?:"+gr+"|"+se+")",Ci="(?:"+At+"|"+se+")",Ei="(?:"+zn+"(?:d|ll|m|re|s|t|ve))?",yn="(?:"+zn+"(?:D|LL|M|RE|S|T|VE))?",Yn=ye+"?",jn="["+Vn+"]?",Xn="(?:"+Bt+"(?:"+[$e,Je,dt].join("|")+")"+jn+Yn+")*",io="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_r="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Eo=jn+Yn+Xn,Hi="(?:"+[vr,Je,dt].join("|")+")"+Eo,Oi="(?:"+[$e+mn+"?",mn,Je,dt,to].join("|")+")",Br=RegExp(zn,"g"),Cs=RegExp(mn,"g"),So=RegExp(ue+"(?="+ue+")|"+Oi+Eo,"g"),Ks=RegExp([At+"?"+gr+"+"+Ei+"(?="+[yo,At,"$"].join("|")+")",Ci+"+"+yn+"(?="+[yo,At+ui,"$"].join("|")+")",At+"?"+ui+"+"+Ei,At+"+"+yn,_r,io,ir,Hi].join("|"),"g"),ys=RegExp("["+Bt+Gn+bo+Vn+"]"),ia=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Es=-1,ki={};ki[bi]=ki[K]=ki[G]=ki[ve]=ki[ke]=ki[at]=ki[st]=ki[ht]=ki[Rt]=!0,ki[Ue]=ki[ce]=ki[jt]=ki[_e]=ki[It]=ki[He]=ki[ze]=ki[St]=ki[k]=ki[ee]=ki[$]=ki[Pe]=ki[Fe]=ki[me]=ki[We]=!1;var vi={};vi[Ue]=vi[ce]=vi[jt]=vi[It]=vi[_e]=vi[He]=vi[bi]=vi[K]=vi[G]=vi[ve]=vi[ke]=vi[k]=vi[ee]=vi[$]=vi[Pe]=vi[Fe]=vi[me]=vi[Ge]=vi[at]=vi[st]=vi[ht]=vi[Rt]=!0,vi[ze]=vi[St]=vi[We]=!1;var wo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},xo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ss={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qs=parseFloat,es=parseInt,ws=typeof Pr=="object"&&Pr&&Pr.Object===Object&&Pr,kt=typeof self=="object"&&self&&self.Object===Object&&self,Ki=ws||kt||Function("return this")(),wr=t&&!t.nodeType&&t,Ho=wr&&!0&&a&&!a.nodeType&&a,Tl=Ho&&Ho.exports===wr,no=Tl&&ws.process,Kn=function(){try{var oe=Ho&&Ho.require&&Ho.require("util").types;return oe||no&&no.binding&&no.binding("util")}catch{}}(),Zs=Kn&&Kn.isArrayBuffer,xr=Kn&&Kn.isDate,Ol=Kn&&Kn.isMap,xs=Kn&&Kn.isRegExp,Al=Kn&&Kn.isSet,Ts=Kn&&Kn.isTypedArray;function nn(oe,Ne,Me){switch(Me.length){case 0:return oe.call(Ne);case 1:return oe.call(Ne,Me[0]);case 2:return oe.call(Ne,Me[0],Me[1]);case 3:return oe.call(Ne,Me[0],Me[1],Me[2])}return oe.apply(Ne,Me)}function To(oe,Ne,Me,_t){for(var Xt=-1,Si=oe==null?0:oe.length;++Xt<Si;){var kn=oe[Xt];Ne(_t,kn,Me(kn),oe)}return _t}function rn(oe,Ne){for(var Me=-1,_t=oe==null?0:oe.length;++Me<_t&&Ne(oe[Me],Me,oe)!==!1;);return oe}function qn(oe,Ne){for(var Me=oe==null?0:oe.length;Me--&&Ne(oe[Me],Me,oe)!==!1;);return oe}function Oo(oe,Ne){for(var Me=-1,_t=oe==null?0:oe.length;++Me<_t;)if(!Ne(oe[Me],Me,oe))return!1;return!0}function Ft(oe,Ne){for(var Me=-1,_t=oe==null?0:oe.length,Xt=0,Si=[];++Me<_t;){var kn=oe[Me];Ne(kn,Me,oe)&&(Si[Xt++]=kn)}return Si}function Qs(oe,Ne){var Me=oe==null?0:oe.length;return!!Me&&R(oe,Ne,0)>-1}function Js(oe,Ne,Me){for(var _t=-1,Xt=oe==null?0:oe.length;++_t<Xt;)if(Me(Ne,oe[_t]))return!0;return!1}function $i(oe,Ne){for(var Me=-1,_t=oe==null?0:oe.length,Xt=Array(_t);++Me<_t;)Xt[Me]=Ne(oe[Me],Me,oe);return Xt}function Un(oe,Ne){for(var Me=-1,_t=Ne.length,Xt=oe.length;++Me<_t;)oe[Xt+Me]=Ne[Me];return oe}function Ao(oe,Ne,Me,_t){var Xt=-1,Si=oe==null?0:oe.length;for(_t&&Si&&(Me=oe[++Xt]);++Xt<Si;)Me=Ne(Me,oe[Xt],Xt,oe);return Me}function fd(oe,Ne,Me,_t){var Xt=oe==null?0:oe.length;for(_t&&Xt&&(Me=oe[--Xt]);Xt--;)Me=Ne(Me,oe[Xt],Xt,oe);return Me}function Os(oe,Ne){for(var Me=-1,_t=oe==null?0:oe.length;++Me<_t;)if(Ne(oe[Me],Me,oe))return!0;return!1}var ts=Be("length");function el(oe){return oe.split("")}function hi(oe){return oe.match(Zt)||[]}function g(oe,Ne,Me){var _t;return Me(oe,function(Xt,Si,kn){if(Ne(Xt,Si,kn))return _t=Si,!1}),_t}function w(oe,Ne,Me,_t){for(var Xt=oe.length,Si=Me+(_t?1:-1);_t?Si--:++Si<Xt;)if(Ne(oe[Si],Si,oe))return Si;return-1}function R(oe,Ne,Me){return Ne===Ne?Of(oe,Ne,Me):w(oe,te,Me)}function H(oe,Ne,Me,_t){for(var Xt=Me-1,Si=oe.length;++Xt<Si;)if(_t(oe[Xt],Ne))return Xt;return-1}function te(oe){return oe!==oe}function we(oe,Ne){var Me=oe==null?0:oe.length;return Me?Vt(oe,Ne)/Me:De}function Be(oe){return function(Ne){return Ne==null?e:Ne[oe]}}function qe(oe){return function(Ne){return oe==null?e:oe[Ne]}}function yt(oe,Ne,Me,_t,Xt){return Xt(oe,function(Si,kn,Bi){Me=_t?(_t=!1,Si):Ne(Me,Si,kn,Bi)}),Me}function ft(oe,Ne){var Me=oe.length;for(oe.sort(Ne);Me--;)oe[Me]=oe[Me].value;return oe}function Vt(oe,Ne){for(var Me,_t=-1,Xt=oe.length;++_t<Xt;){var Si=Ne(oe[_t]);Si!==e&&(Me=Me===e?Si:Me+Si)}return Me}function Mt(oe,Ne){for(var Me=-1,_t=Array(oe);++Me<oe;)_t[Me]=Ne(Me);return _t}function qi(oe,Ne){return $i(Ne,function(Me){return[Me,oe[Me]]})}function an(oe){return oe&&oe.slice(0,gd(oe)+1).replace(Et,"")}function Zi(oe){return function(Ne){return oe(Ne)}}function is(oe,Ne){return $i(Ne,function(Me){return oe[Me]})}function As(oe,Ne){return oe.has(Ne)}function ns(oe,Ne){for(var Me=-1,_t=oe.length;++Me<_t&&R(Ne,oe[Me],0)>-1;);return Me}function pd(oe,Ne){for(var Me=oe.length;Me--&&R(Ne,oe[Me],0)>-1;);return Me}function ju(oe,Ne){for(var Me=oe.length,_t=0;Me--;)oe[Me]===Ne&&++_t;return _t}var md=qe(wo),Xu=qe(xo);function xf(oe){return"\\"+xl[oe]}function Ku(oe,Ne){return oe==null?e:oe[Ne]}function tl(oe){return ys.test(oe)}function Tf(oe){return ia.test(oe)}function qu(oe){for(var Ne,Me=[];!(Ne=oe.next()).done;)Me.push(Ne.value);return Me}function vd(oe){var Ne=-1,Me=Array(oe.size);return oe.forEach(function(_t,Xt){Me[++Ne]=[Xt,_t]}),Me}function kl(oe,Ne){return function(Me){return oe(Ne(Me))}}function rs(oe,Ne){for(var Me=-1,_t=oe.length,Xt=0,Si=[];++Me<_t;){var kn=oe[Me];(kn===Ne||kn===c)&&(oe[Me]=c,Si[Xt++]=Me)}return Si}function ks(oe){var Ne=-1,Me=Array(oe.size);return oe.forEach(function(_t){Me[++Ne]=_t}),Me}function na(oe){var Ne=-1,Me=Array(oe.size);return oe.forEach(function(_t){Me[++Ne]=[_t,_t]}),Me}function Of(oe,Ne,Me){for(var _t=Me-1,Xt=oe.length;++_t<Xt;)if(oe[_t]===Ne)return _t;return-1}function ra(oe,Ne,Me){for(var _t=Me+1;_t--;)if(oe[_t]===Ne)return _t;return _t}function os(oe){return tl(oe)?Zu(oe):ts(oe)}function ro(oe){return tl(oe)?kf(oe):el(oe)}function gd(oe){for(var Ne=oe.length;Ne--&&gt.test(oe.charAt(Ne)););return Ne}var Af=qe(Ss);function Zu(oe){for(var Ne=So.lastIndex=0;So.test(oe);)++Ne;return Ne}function kf(oe){return oe.match(So)||[]}function If(oe){return oe.match(Ks)||[]}var _d=function oe(Ne){Ne=Ne==null?Ki:Is.defaults(Ki.Object(),Ne,Is.pick(Ki,Jo));var Me=Ne.Array,_t=Ne.Date,Xt=Ne.Error,Si=Ne.Function,kn=Ne.Math,Bi=Ne.Object,il=Ne.RegExp,Df=Ne.String,Tr=Ne.TypeError,oa=Me.prototype,Rf=Si.prototype,ss=Bi.prototype,Il=Ne["__core-js_shared__"],Ds=Rf.toString,Di=ss.hasOwnProperty,Qu=0,Ju=function(){var d=/[^.]+$/.exec(Il&&Il.keys&&Il.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),sa=ss.toString,ec=Ds.call(Bi),Pf=Ki._,Ff=il("^"+Ds.call(Di).replace(wt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ri=Tl?Ne.Buffer:e,nr=Ne.Symbol,In=Ne.Uint8Array,tc=Ri?Ri.allocUnsafe:e,la=kl(Bi.getPrototypeOf,Bi),nl=Bi.create,ic=ss.propertyIsEnumerable,aa=oa.splice,bd=nr?nr.isConcatSpreadable:e,Dl=nr?nr.iterator:e,Rs=nr?nr.toStringTag:e,da=function(){try{var d=Ll(Bi,"defineProperty");return d({},"",{}),d}catch{}}(),Cd=Ne.clearTimeout!==Ki.clearTimeout&&Ne.clearTimeout,ua=_t&&_t.now!==Ki.Date.now&&_t.now,Bo=Ne.setTimeout!==Ki.setTimeout&&Ne.setTimeout,ca=kn.ceil,Ps=kn.floor,ha=Bi.getOwnPropertySymbols,fa=Ri?Ri.isBuffer:e,nc=Ne.isFinite,pa=oa.join,rc=kl(Bi.keys,Bi),Dn=kn.max,vn=kn.min,Mf=_t.now,Nf=Ne.parseInt,Rl=kn.random,oc=oa.reverse,ma=Ll(Ne,"DataView"),Vo=Ll(Ne,"Map"),yd=Ll(Ne,"Promise"),ls=Ll(Ne,"Set"),rl=Ll(Ne,"WeakMap"),ol=Ll(Bi,"create"),Or=rl&&new rl,sl={},va=Hl(ma),ga=Hl(Vo),sc=Hl(yd),_a=Hl(ls),Lf=Hl(rl),Pl=nr?nr.prototype:e,Fs=Pl?Pl.valueOf:e,Ed=Pl?Pl.toString:e;function W(d){if(An(d)&&!ri(d)&&!(d instanceof fi)){if(d instanceof Qi)return d;if(Di.call(d,"__wrapped__"))return _g(d)}return new Qi(d)}var as=function(){function d(){}return function(f){if(!Sn(f))return{};if(nl)return nl(f);d.prototype=f;var b=new d;return d.prototype=e,b}}();function ba(){}function Qi(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=e}W.templateSettings={escape:Q,evaluate:he,interpolate:Ee,variable:"",imports:{_:W}},W.prototype=ba.prototype,W.prototype.constructor=W,Qi.prototype=as(ba.prototype),Qi.prototype.constructor=Qi;function fi(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function lc(){var d=new fi(this.__wrapped__);return d.__actions__=$r(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=$r(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=$r(this.__views__),d}function ac(){if(this.__filtered__){var d=new fi(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Hf(){var d=this.__wrapped__.value(),f=this.__dir__,b=ri(d),O=f<0,N=b?d.length:0,q=Fy(0,N,this.__views__),le=q.start,fe=q.end,Ae=fe-le,Ze=O?fe:le-1,Qe=this.__iteratees__,tt=Qe.length,Tt=0,Pt=vn(Ae,this.__takeCount__);if(!b||!O&&N==Ae&&Pt==Ae)return Yi(d,this.__actions__);var $t=[];e:for(;Ae--&&Tt<Pt;){Ze+=f;for(var ci=-1,Yt=d[Ze];++ci<tt;){var gi=Qe[ci],wi=gi.iteratee,uo=gi.type,Rr=wi(Yt);if(uo==ae)Yt=Rr;else if(!Rr){if(uo==F)continue e;break e}}$t[Tt++]=Yt}return $t}fi.prototype=as(ba.prototype),fi.prototype.constructor=fi;function Ar(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function dc(){this.__data__=ol?ol(null):{},this.size=0}function Bf(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f}function uc(d){var f=this.__data__;if(ol){var b=f[d];return b===u?e:b}return Di.call(f,d)?f[d]:e}function cc(d){var f=this.__data__;return ol?f[d]!==e:Di.call(f,d)}function Sd(d,f){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=ol&&f===e?u:f,this}Ar.prototype.clear=dc,Ar.prototype.delete=Bf,Ar.prototype.get=uc,Ar.prototype.has=cc,Ar.prototype.set=Sd;function zo(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function Vf(){this.__data__=[],this.size=0}function hc(d){var f=this.__data__,b=Ca(f,d);if(b<0)return!1;var O=f.length-1;return b==O?f.pop():aa.call(f,b,1),--this.size,!0}function zf(d){var f=this.__data__,b=Ca(f,d);return b<0?e:f[b][1]}function Uf(d){return Ca(this.__data__,d)>-1}function fc(d,f){var b=this.__data__,O=Ca(b,d);return O<0?(++this.size,b.push([d,f])):b[O][1]=f,this}zo.prototype.clear=Vf,zo.prototype.delete=hc,zo.prototype.get=zf,zo.prototype.has=Uf,zo.prototype.set=fc;function Uo(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function Wf(){this.size=0,this.__data__={hash:new Ar,map:new(Vo||zo),string:new Ar}}function Gf(d){var f=Wc(this,d).delete(d);return this.size-=f?1:0,f}function $f(d){return Wc(this,d).get(d)}function ll(d){return Wc(this,d).has(d)}function pc(d,f){var b=Wc(this,d),O=b.size;return b.set(d,f),this.size+=b.size==O?0:1,this}Uo.prototype.clear=Wf,Uo.prototype.delete=Gf,Uo.prototype.get=$f,Uo.prototype.has=ll,Uo.prototype.set=pc;function ds(d){var f=-1,b=d==null?0:d.length;for(this.__data__=new Uo;++f<b;)this.add(d[f])}function mc(d){return this.__data__.set(d,u),this}function vc(d){return this.__data__.has(d)}ds.prototype.add=ds.prototype.push=mc,ds.prototype.has=vc;function Vr(d){var f=this.__data__=new zo(d);this.size=f.size}function Yf(){this.__data__=new zo,this.size=0}function jf(d){var f=this.__data__,b=f.delete(d);return this.size=f.size,b}function gc(d){return this.__data__.get(d)}function _c(d){return this.__data__.has(d)}function bc(d,f){var b=this.__data__;if(b instanceof zo){var O=b.__data__;if(!Vo||O.length<r-1)return O.push([d,f]),this.size=++b.size,this;b=this.__data__=new Uo(O)}return b.set(d,f),this.size=b.size,this}Vr.prototype.clear=Yf,Vr.prototype.delete=jf,Vr.prototype.get=gc,Vr.prototype.has=_c,Vr.prototype.set=bc;function wd(d,f){var b=ri(d),O=!b&&Bl(d),N=!b&&!O&&fl(d),q=!b&&!O&&!N&&Pa(d),le=b||O||N||q,fe=le?Mt(d.length,Df):[],Ae=fe.length;for(var Ze in d)(f||Di.call(d,Ze))&&!(le&&(Ze=="length"||N&&(Ze=="offset"||Ze=="parent")||q&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||Hs(Ze,Ae)))&&fe.push(Ze);return fe}function xd(d){var f=d.length;return f?d[Hd(0,f-1)]:e}function Cc(d,f){return Gc($r(d),Ur(f,0,d.length))}function Td(d){return Gc($r(d))}function Fl(d,f,b){(b!==e&&!Yo(d[f],b)||b===e&&!(f in d))&&zr(d,f,b)}function al(d,f,b){var O=d[f];(!(Di.call(d,f)&&Yo(O,b))||b===e&&!(f in d))&&zr(d,f,b)}function Ca(d,f){for(var b=d.length;b--;)if(Yo(d[b][0],f))return b;return-1}function Od(d,f,b,O){return Zn(d,function(N,q,le){f(O,N,b(N),le)}),O}function dl(d,f){return d&&us(f,rr(f),d)}function Xf(d,f){return d&&us(f,jr(f),d)}function zr(d,f,b){f=="__proto__"&&da?da(d,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):d[f]=b}function Wo(d,f){for(var b=-1,O=f.length,N=Me(O),q=d==null;++b<O;)N[b]=q?e:_p(d,f[b]);return N}function Ur(d,f,b){return d===d&&(b!==e&&(d=d<=b?d:b),f!==e&&(d=d>=f?d:f)),d}function kr(d,f,b,O,N,q){var le,fe=f&p,Ae=f&m,Ze=f&v;if(b&&(le=N?b(d,O,N,q):b(d)),le!==e)return le;if(!Sn(d))return d;var Qe=ri(d);if(Qe){if(le=Ny(d),!fe)return $r(d,le)}else{var tt=br(d),Tt=tt==St||tt==ct;if(fl(d))return Gv(d,fe);if(tt==$||tt==Ue||Tt&&!N){if(le=Ae||Tt?{}:dg(d),!fe)return Ae?xy(d,Xf(le,d)):wy(d,dl(le,d))}else{if(!vi[tt])return N?d:{};le=Ly(d,tt,fe)}}q||(q=new Vr);var Pt=q.get(d);if(Pt)return Pt;q.set(d,le),Hg(d)?d.forEach(function(Yt){le.add(kr(Yt,f,b,Yt,d,q))}):Ng(d)&&d.forEach(function(Yt,gi){le.set(gi,kr(Yt,f,b,gi,d,q))});var $t=Ze?Ae?rp:np:Ae?jr:rr,ci=Qe?e:$t(d);return rn(ci||d,function(Yt,gi){ci&&(gi=Yt,Yt=d[gi]),al(le,gi,kr(Yt,f,b,gi,d,q))}),le}function Kf(d){var f=rr(d);return function(b){return Go(b,d,f)}}function Go(d,f,b){var O=b.length;if(d==null)return!O;for(d=Bi(d);O--;){var N=b[O],q=f[N],le=d[N];if(le===e&&!(N in d)||!q(le))return!1}return!0}function yc(d,f,b){if(typeof d!="function")throw new Tr(s);return Gd(function(){d.apply(e,b)},f)}function ul(d,f,b,O){var N=-1,q=Qs,le=!0,fe=d.length,Ae=[],Ze=f.length;if(!fe)return Ae;b&&(f=$i(f,Zi(b))),O?(q=Js,le=!1):f.length>=r&&(q=As,le=!1,f=new ds(f));e:for(;++N<fe;){var Qe=d[N],tt=b==null?Qe:b(Qe);if(Qe=O||Qe!==0?Qe:0,le&&tt===tt){for(var Tt=Ze;Tt--;)if(f[Tt]===tt)continue e;Ae.push(Qe)}else q(f,tt,O)||Ae.push(Qe)}return Ae}var Zn=Kv(oo),Ml=Kv(kd,!0);function Ec(d,f){var b=!0;return Zn(d,function(O,N,q){return b=!!f(O,N,q),b}),b}function Nl(d,f,b){for(var O=-1,N=d.length;++O<N;){var q=d[O],le=f(q);if(le!=null&&(fe===e?le===le&&!ao(le):b(le,fe)))var fe=le,Ae=q}return Ae}function ya(d,f,b,O){var N=d.length;for(b=li(b),b<0&&(b=-b>N?0:N+b),O=O===e||O>N?N:li(O),O<0&&(O+=N),O=b>O?0:Vg(O);b<O;)d[b++]=f;return d}function Ad(d,f){var b=[];return Zn(d,function(O,N,q){f(O,N,q)&&b.push(O)}),b}function Qn(d,f,b,O,N){var q=-1,le=d.length;for(b||(b=By),N||(N=[]);++q<le;){var fe=d[q];f>0&&b(fe)?f>1?Qn(fe,f-1,b,O,N):Un(N,fe):O||(N[N.length]=fe)}return N}var Ea=qv(),Sc=qv(!0);function oo(d,f){return d&&Ea(d,f,rr)}function kd(d,f){return d&&Sc(d,f,rr)}function Sa(d,f){return Ft(f,function(b){return Bs(d[b])})}function Ms(d,f){f=gn(f,d);for(var b=0,O=f.length;d!=null&&b<O;)d=d[cs(f[b++])];return b&&b==O?d:e}function wa(d,f,b){var O=f(d);return ri(d)?O:Un(O,b(d))}function dr(d){return d==null?d===e?mt:ge:Rs&&Rs in Bi(d)?Py(d):Yy(d)}function xa(d,f){return d>f}function wc(d,f){return d!=null&&Di.call(d,f)}function xc(d,f){return d!=null&&f in Bi(d)}function Tc(d,f,b){return d>=vn(f,b)&&d<Dn(f,b)}function Ta(d,f,b){for(var O=b?Js:Qs,N=d[0].length,q=d.length,le=q,fe=Me(q),Ae=1/0,Ze=[];le--;){var Qe=d[le];le&&f&&(Qe=$i(Qe,Zi(f))),Ae=vn(Qe.length,Ae),fe[le]=!b&&(f||N>=120&&Qe.length>=120)?new ds(le&&Qe):e}Qe=d[0];var tt=-1,Tt=fe[0];e:for(;++tt<N&&Ze.length<Ae;){var Pt=Qe[tt],$t=f?f(Pt):Pt;if(Pt=b||Pt!==0?Pt:0,!(Tt?As(Tt,$t):O(Ze,$t,b))){for(le=q;--le;){var ci=fe[le];if(!(ci?As(ci,$t):O(d[le],$t,b)))continue e}Tt&&Tt.push($t),Ze.push(Pt)}}return Ze}function Oc(d,f,b,O){return oo(d,function(N,q,le){f(O,b(N),q,le)}),O}function Wr(d,f,b){f=gn(f,d),d=fg(d,f);var O=d==null?d:d[cs(ko(f))];return O==null?e:nn(O,d,b)}function Oa(d){return An(d)&&dr(d)==Ue}function Ac(d){return An(d)&&dr(d)==jt}function Id(d){return An(d)&&dr(d)==He}function cl(d,f,b,O,N){return d===f?!0:d==null||f==null||!An(d)&&!An(f)?d!==d&&f!==f:qf(d,f,b,O,cl,N)}function qf(d,f,b,O,N,q){var le=ri(d),fe=ri(f),Ae=le?ce:br(d),Ze=fe?ce:br(f);Ae=Ae==Ue?$:Ae,Ze=Ze==Ue?$:Ze;var Qe=Ae==$,tt=Ze==$,Tt=Ae==Ze;if(Tt&&fl(d)){if(!fl(f))return!1;le=!0,Qe=!1}if(Tt&&!Qe)return q||(q=new Vr),le||Pa(d)?sg(d,f,b,O,N,q):Dy(d,f,Ae,b,O,N,q);if(!(b&_)){var Pt=Qe&&Di.call(d,"__wrapped__"),$t=tt&&Di.call(f,"__wrapped__");if(Pt||$t){var ci=Pt?d.value():d,Yt=$t?f.value():f;return q||(q=new Vr),N(ci,Yt,b,O,q)}}return Tt?(q||(q=new Vr),Ry(d,f,b,O,N,q)):!1}function Zf(d){return An(d)&&br(d)==k}function Dd(d,f,b,O){var N=b.length,q=N,le=!O;if(d==null)return!q;for(d=Bi(d);N--;){var fe=b[N];if(le&&fe[2]?fe[1]!==d[fe[0]]:!(fe[0]in d))return!1}for(;++N<q;){fe=b[N];var Ae=fe[0],Ze=d[Ae],Qe=fe[1];if(le&&fe[2]){if(Ze===e&&!(Ae in d))return!1}else{var tt=new Vr;if(O)var Tt=O(Ze,Qe,Ae,d,f,tt);if(!(Tt===e?cl(Qe,Ze,_|C,O,tt):Tt))return!1}}return!0}function kc(d){if(!Sn(d)||zy(d))return!1;var f=Bs(d)?Ff:xt;return f.test(Hl(d))}function Qf(d){return An(d)&&dr(d)==Pe}function Jf(d){return An(d)&&br(d)==Fe}function Ic(d){return An(d)&&qc(d.length)&&!!ki[dr(d)]}function Rd(d){return typeof d=="function"?d:d==null?Xr:typeof d=="object"?ri(d)?Md(d[0],d[1]):Fd(d):Zg(d)}function hl(d){if(!Wd(d))return rc(d);var f=[];for(var b in Bi(d))Di.call(d,b)&&b!="constructor"&&f.push(b);return f}function Dc(d){if(!Sn(d))return $y(d);var f=Wd(d),b=[];for(var O in d)O=="constructor"&&(f||!Di.call(d,O))||b.push(O);return b}function Aa(d,f){return d<f}function Pd(d,f){var b=-1,O=Yr(d)?Me(d.length):[];return Zn(d,function(N,q,le){O[++b]=f(N,q,le)}),O}function Fd(d){var f=sp(d);return f.length==1&&f[0][2]?cg(f[0][0],f[0][1]):function(b){return b===d||Dd(b,d,f)}}function Md(d,f){return ap(d)&&ug(f)?cg(cs(d),f):function(b){var O=_p(b,d);return O===e&&O===f?bp(b,d):cl(f,O,_|C)}}function so(d,f,b,O,N){d!==f&&Ea(f,function(q,le){if(N||(N=new Vr),Sn(q))Ir(d,f,le,b,so,O,N);else{var fe=O?O(up(d,le),q,le+"",d,f,N):e;fe===e&&(fe=q),Fl(d,le,fe)}},jr)}function Ir(d,f,b,O,N,q,le){var fe=up(d,b),Ae=up(f,b),Ze=le.get(Ae);if(Ze){Fl(d,b,Ze);return}var Qe=q?q(fe,Ae,b+"",d,f,le):e,tt=Qe===e;if(tt){var Tt=ri(Ae),Pt=!Tt&&fl(Ae),$t=!Tt&&!Pt&&Pa(Ae);Qe=Ae,Tt||Pt||$t?ri(fe)?Qe=fe:Pn(fe)?Qe=$r(fe):Pt?(tt=!1,Qe=Gv(Ae,!0)):$t?(tt=!1,Qe=$v(Ae,!0)):Qe=[]:$d(Ae)||Bl(Ae)?(Qe=fe,Bl(fe)?Qe=zg(fe):(!Sn(fe)||Bs(fe))&&(Qe=dg(Ae))):tt=!1}tt&&(le.set(Ae,Qe),N(Qe,Ae,O,q,le),le.delete(Ae)),Fl(d,b,Qe)}function Rc(d,f){var b=d.length;if(b)return f+=f<0?b:0,Hs(f,b)?d[f]:e}function Pc(d,f,b){f.length?f=$i(f,function(q){return ri(q)?function(le){return Ms(le,q.length===1?q[0]:q)}:q}):f=[Xr];var O=-1;f=$i(f,Zi(Wt()));var N=Pd(d,function(q,le,fe){var Ae=$i(f,function(Ze){return Ze(q)});return{criteria:Ae,index:++O,value:q}});return ft(N,function(q,le){return Sy(q,le,b)})}function Gr(d,f){return Nd(d,f,function(b,O){return bp(d,O)})}function Nd(d,f,b){for(var O=-1,N=f.length,q={};++O<N;){var le=f[O],fe=Ms(d,le);b(fe,le)&&y(q,gn(le,d),fe)}return q}function Fc(d){return function(f){return Ms(f,d)}}function Ld(d,f,b,O){var N=O?H:R,q=-1,le=f.length,fe=d;for(d===f&&(f=$r(f)),b&&(fe=$i(d,Zi(b)));++q<le;)for(var Ae=0,Ze=f[q],Qe=b?b(Ze):Ze;(Ae=N(fe,Qe,Ae,O))>-1;)fe!==d&&aa.call(fe,Ae,1),aa.call(d,Ae,1);return d}function Mc(d,f){for(var b=d?f.length:0,O=b-1;b--;){var N=f[b];if(b==O||N!==q){var q=N;Hs(N)?aa.call(d,N,1):pi(d,N)}}return d}function Hd(d,f){return d+Ps(Rl()*(f-d+1))}function ka(d,f,b,O){for(var N=-1,q=Dn(ca((f-d)/(b||1)),0),le=Me(q);q--;)le[O?q:++N]=d,d+=b;return le}function Bd(d,f){var b="";if(!d||f<1||f>xe)return b;do f%2&&(b+=d),f=Ps(f/2),f&&(d+=d);while(f);return b}function ni(d,f){return cp(hg(d,f,Xr),d+"")}function Vd(d){return xd(Fa(d))}function $o(d,f){var b=Fa(d);return Gc(b,Ur(f,0,b.length))}function y(d,f,b,O){if(!Sn(d))return d;f=gn(f,d);for(var N=-1,q=f.length,le=q-1,fe=d;fe!=null&&++N<q;){var Ae=cs(f[N]),Ze=b;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return d;if(N!=le){var Qe=fe[Ae];Ze=O?O(Qe,Ae,fe):e,Ze===e&&(Ze=Sn(Qe)?Qe:Hs(f[N+1])?[]:{})}al(fe,Ae,Ze),fe=fe[Ae]}return d}var T=Or?function(d,f){return Or.set(d,f),d}:Xr,I=da?function(d,f){return da(d,"toString",{configurable:!0,enumerable:!1,value:yp(f),writable:!0})}:Xr;function V(d){return Gc(Fa(d))}function Y(d,f,b){var O=-1,N=d.length;f<0&&(f=-f>N?0:N+f),b=b>N?N:b,b<0&&(b+=N),N=f>b?0:b-f>>>0,f>>>=0;for(var q=Me(N);++O<N;)q[O]=d[O+f];return q}function j(d,f){var b;return Zn(d,function(O,N,q){return b=f(O,N,q),!b}),!!b}function Te(d,f,b){var O=0,N=d==null?O:d.length;if(typeof f=="number"&&f===f&&N<=Ve){for(;O<N;){var q=O+N>>>1,le=d[q];le!==null&&!ao(le)&&(b?le<=f:le<f)?O=q+1:N=q}return N}return et(d,f,Xr,b)}function et(d,f,b,O){var N=0,q=d==null?0:d.length;if(q===0)return 0;f=b(f);for(var le=f!==f,fe=f===null,Ae=ao(f),Ze=f===e;N<q;){var Qe=Ps((N+q)/2),tt=b(d[Qe]),Tt=tt!==e,Pt=tt===null,$t=tt===tt,ci=ao(tt);if(le)var Yt=O||$t;else Ze?Yt=$t&&(O||Tt):fe?Yt=$t&&Tt&&(O||!Pt):Ae?Yt=$t&&Tt&&!Pt&&(O||!ci):Pt||ci?Yt=!1:Yt=O?tt<=f:tt<f;Yt?N=Qe+1:q=Qe}return vn(q,pe)}function rt(d,f){for(var b=-1,O=d.length,N=0,q=[];++b<O;){var le=d[b],fe=f?f(le):le;if(!b||!Yo(fe,Ae)){var Ae=fe;q[N++]=le===0?0:le}}return q}function ut(d){return typeof d=="number"?d:ao(d)?De:+d}function pt(d){if(typeof d=="string")return d;if(ri(d))return $i(d,pt)+"";if(ao(d))return Ed?Ed.call(d):"";var f=d+"";return f=="0"&&1/d==-Ie?"-0":f}function nt(d,f,b){var O=-1,N=Qs,q=d.length,le=!0,fe=[],Ae=fe;if(b)le=!1,N=Js;else if(q>=r){var Ze=f?null:ky(d);if(Ze)return ks(Ze);le=!1,N=As,Ae=new ds}else Ae=f?[]:fe;e:for(;++O<q;){var Qe=d[O],tt=f?f(Qe):Qe;if(Qe=b||Qe!==0?Qe:0,le&&tt===tt){for(var Tt=Ae.length;Tt--;)if(Ae[Tt]===tt)continue e;f&&Ae.push(tt),fe.push(Qe)}else N(Ae,tt,b)||(Ae!==fe&&Ae.push(tt),fe.push(Qe))}return fe}function pi(d,f){return f=gn(f,d),d=fg(d,f),d==null||delete d[cs(ko(f))]}function Qt(d,f,b,O){return y(d,f,b(Ms(d,f)),O)}function yi(d,f,b,O){for(var N=d.length,q=O?N:-1;(O?q--:++q<N)&&f(d[q],q,d););return b?Y(d,O?0:q,O?q+1:N):Y(d,O?q+1:0,O?N:q)}function Yi(d,f){var b=d;return b instanceof fi&&(b=b.value()),Ao(f,function(O,N){return N.func.apply(N.thisArg,Un([O],N.args))},b)}function Pi(d,f,b){var O=d.length;if(O<2)return O?nt(d[0]):[];for(var N=-1,q=Me(O);++N<O;)for(var le=d[N],fe=-1;++fe<O;)fe!=N&&(q[N]=ul(q[N]||le,d[fe],f,b));return nt(Qn(q,1),f,b)}function En(d,f,b){for(var O=-1,N=d.length,q=f.length,le={};++O<N;){var fe=O<q?f[O]:e;b(le,d[O],fe)}return le}function si(d){return Pn(d)?d:[]}function Rn(d){return typeof d=="function"?d:Xr}function gn(d,f){return ri(d)?d:ap(d,f)?[d]:gg(Vi(d))}var Nc=ni;function lo(d,f,b){var O=d.length;return b=b===e?O:b,!f&&b>=O?d:Y(d,f,b)}var zd=Cd||function(d){return Ki.clearTimeout(d)};function Gv(d,f){if(f)return d.slice();var b=d.length,O=tc?tc(b):new d.constructor(b);return d.copy(O),O}function ep(d){var f=new d.constructor(d.byteLength);return new In(f).set(new In(d)),f}function Cy(d,f){var b=f?ep(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function yy(d){var f=new d.constructor(d.source,Ct.exec(d));return f.lastIndex=d.lastIndex,f}function Ey(d){return Fs?Bi(Fs.call(d)):{}}function $v(d,f){var b=f?ep(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function Yv(d,f){if(d!==f){var b=d!==e,O=d===null,N=d===d,q=ao(d),le=f!==e,fe=f===null,Ae=f===f,Ze=ao(f);if(!fe&&!Ze&&!q&&d>f||q&&le&&Ae&&!fe&&!Ze||O&&le&&Ae||!b&&Ae||!N)return 1;if(!O&&!q&&!Ze&&d<f||Ze&&b&&N&&!O&&!q||fe&&b&&N||!le&&N||!Ae)return-1}return 0}function Sy(d,f,b){for(var O=-1,N=d.criteria,q=f.criteria,le=N.length,fe=b.length;++O<le;){var Ae=Yv(N[O],q[O]);if(Ae){if(O>=fe)return Ae;var Ze=b[O];return Ae*(Ze=="desc"?-1:1)}}return d.index-f.index}function jv(d,f,b,O){for(var N=-1,q=d.length,le=b.length,fe=-1,Ae=f.length,Ze=Dn(q-le,0),Qe=Me(Ae+Ze),tt=!O;++fe<Ae;)Qe[fe]=f[fe];for(;++N<le;)(tt||N<q)&&(Qe[b[N]]=d[N]);for(;Ze--;)Qe[fe++]=d[N++];return Qe}function Xv(d,f,b,O){for(var N=-1,q=d.length,le=-1,fe=b.length,Ae=-1,Ze=f.length,Qe=Dn(q-fe,0),tt=Me(Qe+Ze),Tt=!O;++N<Qe;)tt[N]=d[N];for(var Pt=N;++Ae<Ze;)tt[Pt+Ae]=f[Ae];for(;++le<fe;)(Tt||N<q)&&(tt[Pt+b[le]]=d[N++]);return tt}function $r(d,f){var b=-1,O=d.length;for(f||(f=Me(O));++b<O;)f[b]=d[b];return f}function us(d,f,b,O){var N=!b;b||(b={});for(var q=-1,le=f.length;++q<le;){var fe=f[q],Ae=O?O(b[fe],d[fe],fe,b,d):e;Ae===e&&(Ae=d[fe]),N?zr(b,fe,Ae):al(b,fe,Ae)}return b}function wy(d,f){return us(d,lp(d),f)}function xy(d,f){return us(d,lg(d),f)}function Lc(d,f){return function(b,O){var N=ri(b)?To:Od,q=f?f():{};return N(b,d,Wt(O,2),q)}}function Ia(d){return ni(function(f,b){var O=-1,N=b.length,q=N>1?b[N-1]:e,le=N>2?b[2]:e;for(q=d.length>3&&typeof q=="function"?(N--,q):e,le&&Dr(b[0],b[1],le)&&(q=N<3?e:q,N=1),f=Bi(f);++O<N;){var fe=b[O];fe&&d(f,fe,O,q)}return f})}function Kv(d,f){return function(b,O){if(b==null)return b;if(!Yr(b))return d(b,O);for(var N=b.length,q=f?N:-1,le=Bi(b);(f?q--:++q<N)&&O(le[q],q,le)!==!1;);return b}}function qv(d){return function(f,b,O){for(var N=-1,q=Bi(f),le=O(f),fe=le.length;fe--;){var Ae=le[d?fe:++N];if(b(q[Ae],Ae,q)===!1)break}return f}}function Ty(d,f,b){var O=f&x,N=Ud(d);function q(){var le=this&&this!==Ki&&this instanceof q?N:d;return le.apply(O?b:this,arguments)}return q}function Zv(d){return function(f){f=Vi(f);var b=tl(f)?ro(f):e,O=b?b[0]:f.charAt(0),N=b?lo(b,1).join(""):f.slice(1);return O[d]()+N}}function Da(d){return function(f){return Ao(Kg(Xg(f).replace(Br,"")),d,"")}}function Ud(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=as(d.prototype),O=d.apply(b,f);return Sn(O)?O:b}}function Oy(d,f,b){var O=Ud(d);function N(){for(var q=arguments.length,le=Me(q),fe=q,Ae=Ra(N);fe--;)le[fe]=arguments[fe];var Ze=q<3&&le[0]!==Ae&&le[q-1]!==Ae?[]:rs(le,Ae);if(q-=Ze.length,q<b)return ig(d,f,Hc,N.placeholder,e,le,Ze,e,e,b-q);var Qe=this&&this!==Ki&&this instanceof N?O:d;return nn(Qe,this,le)}return N}function Qv(d){return function(f,b,O){var N=Bi(f);if(!Yr(f)){var q=Wt(b,3);f=rr(f),b=function(fe){return q(N[fe],fe,N)}}var le=d(f,b,O);return le>-1?N[q?f[le]:le]:e}}function Jv(d){return Ls(function(f){var b=f.length,O=b,N=Qi.prototype.thru;for(d&&f.reverse();O--;){var q=f[O];if(typeof q!="function")throw new Tr(s);if(N&&!le&&Uc(q)=="wrapper")var le=new Qi([],!0)}for(O=le?O:b;++O<b;){q=f[O];var fe=Uc(q),Ae=fe=="wrapper"?op(q):e;Ae&&dp(Ae[0])&&Ae[1]==(B|D|P|Z)&&!Ae[4].length&&Ae[9]==1?le=le[Uc(Ae[0])].apply(le,Ae[3]):le=q.length==1&&dp(q)?le[fe]():le.thru(q)}return function(){var Ze=arguments,Qe=Ze[0];if(le&&Ze.length==1&&ri(Qe))return le.plant(Qe).value();for(var tt=0,Tt=b?f[tt].apply(this,Ze):Qe;++tt<b;)Tt=f[tt].call(this,Tt);return Tt}})}function Hc(d,f,b,O,N,q,le,fe,Ae,Ze){var Qe=f&B,tt=f&x,Tt=f&S,Pt=f&(D|A),$t=f&L,ci=Tt?e:Ud(d);function Yt(){for(var gi=arguments.length,wi=Me(gi),uo=gi;uo--;)wi[uo]=arguments[uo];if(Pt)var Rr=Ra(Yt),co=ju(wi,Rr);if(O&&(wi=jv(wi,O,N,Pt)),q&&(wi=Xv(wi,q,le,Pt)),gi-=co,Pt&&gi<Ze){var Fn=rs(wi,Rr);return ig(d,f,Hc,Yt.placeholder,b,wi,Fn,fe,Ae,Ze-gi)}var jo=tt?b:this,zs=Tt?jo[d]:d;return gi=wi.length,fe?wi=jy(wi,fe):$t&&gi>1&&wi.reverse(),Qe&&Ae<gi&&(wi.length=Ae),this&&this!==Ki&&this instanceof Yt&&(zs=ci||Ud(zs)),zs.apply(jo,wi)}return Yt}function eg(d,f){return function(b,O){return Oc(b,d,f(O),{})}}function Bc(d,f){return function(b,O){var N;if(b===e&&O===e)return f;if(b!==e&&(N=b),O!==e){if(N===e)return O;typeof b=="string"||typeof O=="string"?(b=pt(b),O=pt(O)):(b=ut(b),O=ut(O)),N=d(b,O)}return N}}function tp(d){return Ls(function(f){return f=$i(f,Zi(Wt())),ni(function(b){var O=this;return d(f,function(N){return nn(N,O,b)})})})}function Vc(d,f){f=f===e?" ":pt(f);var b=f.length;if(b<2)return b?Bd(f,d):f;var O=Bd(f,ca(d/os(f)));return tl(f)?lo(ro(O),0,d).join(""):O.slice(0,d)}function Ay(d,f,b,O){var N=f&x,q=Ud(d);function le(){for(var fe=-1,Ae=arguments.length,Ze=-1,Qe=O.length,tt=Me(Qe+Ae),Tt=this&&this!==Ki&&this instanceof le?q:d;++Ze<Qe;)tt[Ze]=O[Ze];for(;Ae--;)tt[Ze++]=arguments[++fe];return nn(Tt,N?b:this,tt)}return le}function tg(d){return function(f,b,O){return O&&typeof O!="number"&&Dr(f,b,O)&&(b=O=e),f=Vs(f),b===e?(b=f,f=0):b=Vs(b),O=O===e?f<b?1:-1:Vs(O),ka(f,b,O,d)}}function zc(d){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=Io(f),b=Io(b)),d(f,b)}}function ig(d,f,b,O,N,q,le,fe,Ae,Ze){var Qe=f&D,tt=Qe?le:e,Tt=Qe?e:le,Pt=Qe?q:e,$t=Qe?e:q;f|=Qe?P:M,f&=~(Qe?M:P),f&E||(f&=~(x|S));var ci=[d,f,N,Pt,tt,$t,Tt,fe,Ae,Ze],Yt=b.apply(e,ci);return dp(d)&&pg(Yt,ci),Yt.placeholder=O,mg(Yt,d,f)}function ip(d){var f=kn[d];return function(b,O){if(b=Io(b),O=O==null?0:vn(li(O),292),O&&nc(b)){var N=(Vi(b)+"e").split("e"),q=f(N[0]+"e"+(+N[1]+O));return N=(Vi(q)+"e").split("e"),+(N[0]+"e"+(+N[1]-O))}return f(b)}}var ky=ls&&1/ks(new ls([,-0]))[1]==Ie?function(d){return new ls(d)}:wp;function ng(d){return function(f){var b=br(f);return b==k?vd(f):b==Fe?na(f):qi(f,d(f))}}function Ns(d,f,b,O,N,q,le,fe){var Ae=f&S;if(!Ae&&typeof d!="function")throw new Tr(s);var Ze=O?O.length:0;if(Ze||(f&=~(P|M),O=N=e),le=le===e?le:Dn(li(le),0),fe=fe===e?fe:li(fe),Ze-=N?N.length:0,f&M){var Qe=O,tt=N;O=N=e}var Tt=Ae?e:op(d),Pt=[d,f,b,O,N,Qe,tt,q,le,fe];if(Tt&&Gy(Pt,Tt),d=Pt[0],f=Pt[1],b=Pt[2],O=Pt[3],N=Pt[4],fe=Pt[9]=Pt[9]===e?Ae?0:d.length:Dn(Pt[9]-Ze,0),!fe&&f&(D|A)&&(f&=~(D|A)),!f||f==x)var $t=Ty(d,f,b);else f==D||f==A?$t=Oy(d,f,fe):(f==P||f==(x|P))&&!N.length?$t=Ay(d,f,b,O):$t=Hc.apply(e,Pt);var ci=Tt?T:pg;return mg(ci($t,Pt),d,f)}function rg(d,f,b,O){return d===e||Yo(d,ss[b])&&!Di.call(O,b)?f:d}function og(d,f,b,O,N,q){return Sn(d)&&Sn(f)&&(q.set(f,d),so(d,f,e,og,q),q.delete(f)),d}function Iy(d){return $d(d)?e:d}function sg(d,f,b,O,N,q){var le=b&_,fe=d.length,Ae=f.length;if(fe!=Ae&&!(le&&Ae>fe))return!1;var Ze=q.get(d),Qe=q.get(f);if(Ze&&Qe)return Ze==f&&Qe==d;var tt=-1,Tt=!0,Pt=b&C?new ds:e;for(q.set(d,f),q.set(f,d);++tt<fe;){var $t=d[tt],ci=f[tt];if(O)var Yt=le?O(ci,$t,tt,f,d,q):O($t,ci,tt,d,f,q);if(Yt!==e){if(Yt)continue;Tt=!1;break}if(Pt){if(!Os(f,function(gi,wi){if(!As(Pt,wi)&&($t===gi||N($t,gi,b,O,q)))return Pt.push(wi)})){Tt=!1;break}}else if(!($t===ci||N($t,ci,b,O,q))){Tt=!1;break}}return q.delete(d),q.delete(f),Tt}function Dy(d,f,b,O,N,q,le){switch(b){case It:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case jt:return!(d.byteLength!=f.byteLength||!q(new In(d),new In(f)));case _e:case He:case ee:return Yo(+d,+f);case ze:return d.name==f.name&&d.message==f.message;case Pe:case me:return d==f+"";case k:var fe=vd;case Fe:var Ae=O&_;if(fe||(fe=ks),d.size!=f.size&&!Ae)return!1;var Ze=le.get(d);if(Ze)return Ze==f;O|=C,le.set(d,f);var Qe=sg(fe(d),fe(f),O,N,q,le);return le.delete(d),Qe;case Ge:if(Fs)return Fs.call(d)==Fs.call(f)}return!1}function Ry(d,f,b,O,N,q){var le=b&_,fe=np(d),Ae=fe.length,Ze=np(f),Qe=Ze.length;if(Ae!=Qe&&!le)return!1;for(var tt=Ae;tt--;){var Tt=fe[tt];if(!(le?Tt in f:Di.call(f,Tt)))return!1}var Pt=q.get(d),$t=q.get(f);if(Pt&&$t)return Pt==f&&$t==d;var ci=!0;q.set(d,f),q.set(f,d);for(var Yt=le;++tt<Ae;){Tt=fe[tt];var gi=d[Tt],wi=f[Tt];if(O)var uo=le?O(wi,gi,Tt,f,d,q):O(gi,wi,Tt,d,f,q);if(!(uo===e?gi===wi||N(gi,wi,b,O,q):uo)){ci=!1;break}Yt||(Yt=Tt=="constructor")}if(ci&&!Yt){var Rr=d.constructor,co=f.constructor;Rr!=co&&"constructor"in d&&"constructor"in f&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof co=="function"&&co instanceof co)&&(ci=!1)}return q.delete(d),q.delete(f),ci}function Ls(d){return cp(hg(d,e,yg),d+"")}function np(d){return wa(d,rr,lp)}function rp(d){return wa(d,jr,lg)}var op=Or?function(d){return Or.get(d)}:wp;function Uc(d){for(var f=d.name+"",b=sl[f],O=Di.call(sl,f)?b.length:0;O--;){var N=b[O],q=N.func;if(q==null||q==d)return N.name}return f}function Ra(d){var f=Di.call(W,"placeholder")?W:d;return f.placeholder}function Wt(){var d=W.iteratee||Ep;return d=d===Ep?Rd:d,arguments.length?d(arguments[0],arguments[1]):d}function Wc(d,f){var b=d.__data__;return Vy(f)?b[typeof f=="string"?"string":"hash"]:b.map}function sp(d){for(var f=rr(d),b=f.length;b--;){var O=f[b],N=d[O];f[b]=[O,N,ug(N)]}return f}function Ll(d,f){var b=Ku(d,f);return kc(b)?b:e}function Py(d){var f=Di.call(d,Rs),b=d[Rs];try{d[Rs]=e;var O=!0}catch{}var N=sa.call(d);return O&&(f?d[Rs]=b:delete d[Rs]),N}var lp=ha?function(d){return d==null?[]:(d=Bi(d),Ft(ha(d),function(f){return ic.call(d,f)}))}:xp,lg=ha?function(d){for(var f=[];d;)Un(f,lp(d)),d=la(d);return f}:xp,br=dr;(ma&&br(new ma(new ArrayBuffer(1)))!=It||Vo&&br(new Vo)!=k||yd&&br(yd.resolve())!=X||ls&&br(new ls)!=Fe||rl&&br(new rl)!=We)&&(br=function(d){var f=dr(d),b=f==$?d.constructor:e,O=b?Hl(b):"";if(O)switch(O){case va:return It;case ga:return k;case sc:return X;case _a:return Fe;case Lf:return We}return f});function Fy(d,f,b){for(var O=-1,N=b.length;++O<N;){var q=b[O],le=q.size;switch(q.type){case"drop":d+=le;break;case"dropRight":f-=le;break;case"take":f=vn(f,d+le);break;case"takeRight":d=Dn(d,f-le);break}}return{start:d,end:f}}function My(d){var f=d.match(Ai);return f?f[1].split(zi):[]}function ag(d,f,b){f=gn(f,d);for(var O=-1,N=f.length,q=!1;++O<N;){var le=cs(f[O]);if(!(q=d!=null&&b(d,le)))break;d=d[le]}return q||++O!=N?q:(N=d==null?0:d.length,!!N&&qc(N)&&Hs(le,N)&&(ri(d)||Bl(d)))}function Ny(d){var f=d.length,b=new d.constructor(f);return f&&typeof d[0]=="string"&&Di.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function dg(d){return typeof d.constructor=="function"&&!Wd(d)?as(la(d)):{}}function Ly(d,f,b){var O=d.constructor;switch(f){case jt:return ep(d);case _e:case He:return new O(+d);case It:return Cy(d,b);case bi:case K:case G:case ve:case ke:case at:case st:case ht:case Rt:return $v(d,b);case k:return new O;case ee:case me:return new O(d);case Pe:return yy(d);case Fe:return new O;case Ge:return Ey(d)}}function Hy(d,f){var b=f.length;if(!b)return d;var O=b-1;return f[O]=(b>1?"& ":"")+f[O],f=f.join(b>2?", ":" "),d.replace(ei,`{
/* [wrapped with `+f+`] */
`)}function By(d){return ri(d)||Bl(d)||!!(bd&&d&&d[bd])}function Hs(d,f){var b=typeof d;return f=f??xe,!!f&&(b=="number"||b!="symbol"&&Ui.test(d))&&d>-1&&d%1==0&&d<f}function Dr(d,f,b){if(!Sn(b))return!1;var O=typeof f;return(O=="number"?Yr(b)&&Hs(f,b.length):O=="string"&&f in b)?Yo(b[f],d):!1}function ap(d,f){if(ri(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||ao(d)?!0:vt.test(d)||!lt.test(d)||f!=null&&d in Bi(f)}function Vy(d){var f=typeof d;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?d!=="__proto__":d===null}function dp(d){var f=Uc(d),b=W[f];if(typeof b!="function"||!(f in fi.prototype))return!1;if(d===b)return!0;var O=op(b);return!!O&&d===O[0]}function zy(d){return!!Ju&&Ju in d}var Uy=Il?Bs:Tp;function Wd(d){var f=d&&d.constructor,b=typeof f=="function"&&f.prototype||ss;return d===b}function ug(d){return d===d&&!Sn(d)}function cg(d,f){return function(b){return b==null?!1:b[d]===f&&(f!==e||d in Bi(b))}}function Wy(d){var f=Xc(d,function(O){return b.size===h&&b.clear(),O}),b=f.cache;return f}function Gy(d,f){var b=d[1],O=f[1],N=b|O,q=N<(x|S|B),le=O==B&&b==D||O==B&&b==Z&&d[7].length<=f[8]||O==(B|Z)&&f[7].length<=f[8]&&b==D;if(!(q||le))return d;O&x&&(d[2]=f[2],N|=b&x?0:E);var fe=f[3];if(fe){var Ae=d[3];d[3]=Ae?jv(Ae,fe,f[4]):fe,d[4]=Ae?rs(d[3],c):f[4]}return fe=f[5],fe&&(Ae=d[5],d[5]=Ae?Xv(Ae,fe,f[6]):fe,d[6]=Ae?rs(d[5],c):f[6]),fe=f[7],fe&&(d[7]=fe),O&B&&(d[8]=d[8]==null?f[8]:vn(d[8],f[8])),d[9]==null&&(d[9]=f[9]),d[0]=f[0],d[1]=N,d}function $y(d){var f=[];if(d!=null)for(var b in Bi(d))f.push(b);return f}function Yy(d){return sa.call(d)}function hg(d,f,b){return f=Dn(f===e?d.length-1:f,0),function(){for(var O=arguments,N=-1,q=Dn(O.length-f,0),le=Me(q);++N<q;)le[N]=O[f+N];N=-1;for(var fe=Me(f+1);++N<f;)fe[N]=O[N];return fe[f]=b(le),nn(d,this,fe)}}function fg(d,f){return f.length<2?d:Ms(d,Y(f,0,-1))}function jy(d,f){for(var b=d.length,O=vn(f.length,b),N=$r(d);O--;){var q=f[O];d[O]=Hs(q,b)?N[q]:e}return d}function up(d,f){if(!(f==="constructor"&&typeof d[f]=="function")&&f!="__proto__")return d[f]}var pg=vg(T),Gd=Bo||function(d,f){return Ki.setTimeout(d,f)},cp=vg(I);function mg(d,f,b){var O=f+"";return cp(d,Hy(O,Xy(My(O),b)))}function vg(d){var f=0,b=0;return function(){var O=Mf(),N=U-(O-b);if(b=O,N>0){if(++f>=J)return arguments[0]}else f=0;return d.apply(e,arguments)}}function Gc(d,f){var b=-1,O=d.length,N=O-1;for(f=f===e?O:f;++b<f;){var q=Hd(b,N),le=d[q];d[q]=d[b],d[b]=le}return d.length=f,d}var gg=Wy(function(d){var f=[];return d.charCodeAt(0)===46&&f.push(""),d.replace(it,function(b,O,N,q){f.push(N?q.replace(Bn,"$1"):O||b)}),f});function cs(d){if(typeof d=="string"||ao(d))return d;var f=d+"";return f=="0"&&1/d==-Ie?"-0":f}function Hl(d){if(d!=null){try{return Ds.call(d)}catch{}try{return d+""}catch{}}return""}function Xy(d,f){return rn(Ye,function(b){var O="_."+b[0];f&b[1]&&!Qs(d,O)&&d.push(O)}),d.sort()}function _g(d){if(d instanceof fi)return d.clone();var f=new Qi(d.__wrapped__,d.__chain__);return f.__actions__=$r(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}function Ky(d,f,b){(b?Dr(d,f,b):f===e)?f=1:f=Dn(li(f),0);var O=d==null?0:d.length;if(!O||f<1)return[];for(var N=0,q=0,le=Me(ca(O/f));N<O;)le[q++]=Y(d,N,N+=f);return le}function qy(d){for(var f=-1,b=d==null?0:d.length,O=0,N=[];++f<b;){var q=d[f];q&&(N[O++]=q)}return N}function Zy(){var d=arguments.length;if(!d)return[];for(var f=Me(d-1),b=arguments[0],O=d;O--;)f[O-1]=arguments[O];return Un(ri(b)?$r(b):[b],Qn(f,1))}var Qy=ni(function(d,f){return Pn(d)?ul(d,Qn(f,1,Pn,!0)):[]}),Jy=ni(function(d,f){var b=ko(f);return Pn(b)&&(b=e),Pn(d)?ul(d,Qn(f,1,Pn,!0),Wt(b,2)):[]}),eE=ni(function(d,f){var b=ko(f);return Pn(b)&&(b=e),Pn(d)?ul(d,Qn(f,1,Pn,!0),e,b):[]});function tE(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:li(f),Y(d,f<0?0:f,O)):[]}function iE(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:li(f),f=O-f,Y(d,0,f<0?0:f)):[]}function nE(d,f){return d&&d.length?yi(d,Wt(f,3),!0,!0):[]}function rE(d,f){return d&&d.length?yi(d,Wt(f,3),!0):[]}function oE(d,f,b,O){var N=d==null?0:d.length;return N?(b&&typeof b!="number"&&Dr(d,f,b)&&(b=0,O=N),ya(d,f,b,O)):[]}function bg(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=b==null?0:li(b);return N<0&&(N=Dn(O+N,0)),w(d,Wt(f,3),N)}function Cg(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=O-1;return b!==e&&(N=li(b),N=b<0?Dn(O+N,0):vn(N,O-1)),w(d,Wt(f,3),N,!0)}function yg(d){var f=d==null?0:d.length;return f?Qn(d,1):[]}function sE(d){var f=d==null?0:d.length;return f?Qn(d,Ie):[]}function lE(d,f){var b=d==null?0:d.length;return b?(f=f===e?1:li(f),Qn(d,f)):[]}function aE(d){for(var f=-1,b=d==null?0:d.length,O={};++f<b;){var N=d[f];O[N[0]]=N[1]}return O}function Eg(d){return d&&d.length?d[0]:e}function dE(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=b==null?0:li(b);return N<0&&(N=Dn(O+N,0)),R(d,f,N)}function uE(d){var f=d==null?0:d.length;return f?Y(d,0,-1):[]}var cE=ni(function(d){var f=$i(d,si);return f.length&&f[0]===d[0]?Ta(f):[]}),hE=ni(function(d){var f=ko(d),b=$i(d,si);return f===ko(b)?f=e:b.pop(),b.length&&b[0]===d[0]?Ta(b,Wt(f,2)):[]}),fE=ni(function(d){var f=ko(d),b=$i(d,si);return f=typeof f=="function"?f:e,f&&b.pop(),b.length&&b[0]===d[0]?Ta(b,e,f):[]});function pE(d,f){return d==null?"":pa.call(d,f)}function ko(d){var f=d==null?0:d.length;return f?d[f-1]:e}function mE(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=O;return b!==e&&(N=li(b),N=N<0?Dn(O+N,0):vn(N,O-1)),f===f?ra(d,f,N):w(d,te,N,!0)}function vE(d,f){return d&&d.length?Rc(d,li(f)):e}var gE=ni(Sg);function Sg(d,f){return d&&d.length&&f&&f.length?Ld(d,f):d}function _E(d,f,b){return d&&d.length&&f&&f.length?Ld(d,f,Wt(b,2)):d}function bE(d,f,b){return d&&d.length&&f&&f.length?Ld(d,f,e,b):d}var CE=Ls(function(d,f){var b=d==null?0:d.length,O=Wo(d,f);return Mc(d,$i(f,function(N){return Hs(N,b)?+N:N}).sort(Yv)),O});function yE(d,f){var b=[];if(!(d&&d.length))return b;var O=-1,N=[],q=d.length;for(f=Wt(f,3);++O<q;){var le=d[O];f(le,O,d)&&(b.push(le),N.push(O))}return Mc(d,N),b}function hp(d){return d==null?d:oc.call(d)}function EE(d,f,b){var O=d==null?0:d.length;return O?(b&&typeof b!="number"&&Dr(d,f,b)?(f=0,b=O):(f=f==null?0:li(f),b=b===e?O:li(b)),Y(d,f,b)):[]}function SE(d,f){return Te(d,f)}function wE(d,f,b){return et(d,f,Wt(b,2))}function xE(d,f){var b=d==null?0:d.length;if(b){var O=Te(d,f);if(O<b&&Yo(d[O],f))return O}return-1}function TE(d,f){return Te(d,f,!0)}function OE(d,f,b){return et(d,f,Wt(b,2),!0)}function AE(d,f){var b=d==null?0:d.length;if(b){var O=Te(d,f,!0)-1;if(Yo(d[O],f))return O}return-1}function kE(d){return d&&d.length?rt(d):[]}function IE(d,f){return d&&d.length?rt(d,Wt(f,2)):[]}function DE(d){var f=d==null?0:d.length;return f?Y(d,1,f):[]}function RE(d,f,b){return d&&d.length?(f=b||f===e?1:li(f),Y(d,0,f<0?0:f)):[]}function PE(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:li(f),f=O-f,Y(d,f<0?0:f,O)):[]}function FE(d,f){return d&&d.length?yi(d,Wt(f,3),!1,!0):[]}function ME(d,f){return d&&d.length?yi(d,Wt(f,3)):[]}var NE=ni(function(d){return nt(Qn(d,1,Pn,!0))}),LE=ni(function(d){var f=ko(d);return Pn(f)&&(f=e),nt(Qn(d,1,Pn,!0),Wt(f,2))}),HE=ni(function(d){var f=ko(d);return f=typeof f=="function"?f:e,nt(Qn(d,1,Pn,!0),e,f)});function BE(d){return d&&d.length?nt(d):[]}function VE(d,f){return d&&d.length?nt(d,Wt(f,2)):[]}function zE(d,f){return f=typeof f=="function"?f:e,d&&d.length?nt(d,e,f):[]}function fp(d){if(!(d&&d.length))return[];var f=0;return d=Ft(d,function(b){if(Pn(b))return f=Dn(b.length,f),!0}),Mt(f,function(b){return $i(d,Be(b))})}function wg(d,f){if(!(d&&d.length))return[];var b=fp(d);return f==null?b:$i(b,function(O){return nn(f,e,O)})}var UE=ni(function(d,f){return Pn(d)?ul(d,f):[]}),WE=ni(function(d){return Pi(Ft(d,Pn))}),GE=ni(function(d){var f=ko(d);return Pn(f)&&(f=e),Pi(Ft(d,Pn),Wt(f,2))}),$E=ni(function(d){var f=ko(d);return f=typeof f=="function"?f:e,Pi(Ft(d,Pn),e,f)}),YE=ni(fp);function jE(d,f){return En(d||[],f||[],al)}function XE(d,f){return En(d||[],f||[],y)}var KE=ni(function(d){var f=d.length,b=f>1?d[f-1]:e;return b=typeof b=="function"?(d.pop(),b):e,wg(d,b)});function xg(d){var f=W(d);return f.__chain__=!0,f}function qE(d,f){return f(d),d}function $c(d,f){return f(d)}var ZE=Ls(function(d){var f=d.length,b=f?d[0]:0,O=this.__wrapped__,N=function(q){return Wo(q,d)};return f>1||this.__actions__.length||!(O instanceof fi)||!Hs(b)?this.thru(N):(O=O.slice(b,+b+(f?1:0)),O.__actions__.push({func:$c,args:[N],thisArg:e}),new Qi(O,this.__chain__).thru(function(q){return f&&!q.length&&q.push(e),q}))});function QE(){return xg(this)}function JE(){return new Qi(this.value(),this.__chain__)}function eS(){this.__values__===e&&(this.__values__=Bg(this.value()));var d=this.__index__>=this.__values__.length,f=d?e:this.__values__[this.__index__++];return{done:d,value:f}}function tS(){return this}function iS(d){for(var f,b=this;b instanceof ba;){var O=_g(b);O.__index__=0,O.__values__=e,f?N.__wrapped__=O:f=O;var N=O;b=b.__wrapped__}return N.__wrapped__=d,f}function nS(){var d=this.__wrapped__;if(d instanceof fi){var f=d;return this.__actions__.length&&(f=new fi(this)),f=f.reverse(),f.__actions__.push({func:$c,args:[hp],thisArg:e}),new Qi(f,this.__chain__)}return this.thru(hp)}function rS(){return Yi(this.__wrapped__,this.__actions__)}var oS=Lc(function(d,f,b){Di.call(d,b)?++d[b]:zr(d,b,1)});function sS(d,f,b){var O=ri(d)?Oo:Ec;return b&&Dr(d,f,b)&&(f=e),O(d,Wt(f,3))}function lS(d,f){var b=ri(d)?Ft:Ad;return b(d,Wt(f,3))}var aS=Qv(bg),dS=Qv(Cg);function uS(d,f){return Qn(Yc(d,f),1)}function cS(d,f){return Qn(Yc(d,f),Ie)}function hS(d,f,b){return b=b===e?1:li(b),Qn(Yc(d,f),b)}function Tg(d,f){var b=ri(d)?rn:Zn;return b(d,Wt(f,3))}function Og(d,f){var b=ri(d)?qn:Ml;return b(d,Wt(f,3))}var fS=Lc(function(d,f,b){Di.call(d,b)?d[b].push(f):zr(d,b,[f])});function pS(d,f,b,O){d=Yr(d)?d:Fa(d),b=b&&!O?li(b):0;var N=d.length;return b<0&&(b=Dn(N+b,0)),Zc(d)?b<=N&&d.indexOf(f,b)>-1:!!N&&R(d,f,b)>-1}var mS=ni(function(d,f,b){var O=-1,N=typeof f=="function",q=Yr(d)?Me(d.length):[];return Zn(d,function(le){q[++O]=N?nn(f,le,b):Wr(le,f,b)}),q}),vS=Lc(function(d,f,b){zr(d,b,f)});function Yc(d,f){var b=ri(d)?$i:Pd;return b(d,Wt(f,3))}function gS(d,f,b,O){return d==null?[]:(ri(f)||(f=f==null?[]:[f]),b=O?e:b,ri(b)||(b=b==null?[]:[b]),Pc(d,f,b))}var _S=Lc(function(d,f,b){d[b?0:1].push(f)},function(){return[[],[]]});function bS(d,f,b){var O=ri(d)?Ao:yt,N=arguments.length<3;return O(d,Wt(f,4),b,N,Zn)}function CS(d,f,b){var O=ri(d)?fd:yt,N=arguments.length<3;return O(d,Wt(f,4),b,N,Ml)}function yS(d,f){var b=ri(d)?Ft:Ad;return b(d,Kc(Wt(f,3)))}function ES(d){var f=ri(d)?xd:Vd;return f(d)}function SS(d,f,b){(b?Dr(d,f,b):f===e)?f=1:f=li(f);var O=ri(d)?Cc:$o;return O(d,f)}function wS(d){var f=ri(d)?Td:V;return f(d)}function xS(d){if(d==null)return 0;if(Yr(d))return Zc(d)?os(d):d.length;var f=br(d);return f==k||f==Fe?d.size:hl(d).length}function TS(d,f,b){var O=ri(d)?Os:j;return b&&Dr(d,f,b)&&(f=e),O(d,Wt(f,3))}var OS=ni(function(d,f){if(d==null)return[];var b=f.length;return b>1&&Dr(d,f[0],f[1])?f=[]:b>2&&Dr(f[0],f[1],f[2])&&(f=[f[0]]),Pc(d,Qn(f,1),[])}),jc=ua||function(){return Ki.Date.now()};function AS(d,f){if(typeof f!="function")throw new Tr(s);return d=li(d),function(){if(--d<1)return f.apply(this,arguments)}}function Ag(d,f,b){return f=b?e:f,f=d&&f==null?d.length:f,Ns(d,B,e,e,e,e,f)}function kg(d,f){var b;if(typeof f!="function")throw new Tr(s);return d=li(d),function(){return--d>0&&(b=f.apply(this,arguments)),d<=1&&(f=e),b}}var pp=ni(function(d,f,b){var O=x;if(b.length){var N=rs(b,Ra(pp));O|=P}return Ns(d,O,f,b,N)}),Ig=ni(function(d,f,b){var O=x|S;if(b.length){var N=rs(b,Ra(Ig));O|=P}return Ns(f,O,d,b,N)});function Dg(d,f,b){f=b?e:f;var O=Ns(d,D,e,e,e,e,e,f);return O.placeholder=Dg.placeholder,O}function Rg(d,f,b){f=b?e:f;var O=Ns(d,A,e,e,e,e,e,f);return O.placeholder=Rg.placeholder,O}function Pg(d,f,b){var O,N,q,le,fe,Ae,Ze=0,Qe=!1,tt=!1,Tt=!0;if(typeof d!="function")throw new Tr(s);f=Io(f)||0,Sn(b)&&(Qe=!!b.leading,tt="maxWait"in b,q=tt?Dn(Io(b.maxWait)||0,f):q,Tt="trailing"in b?!!b.trailing:Tt);function Pt(Fn){var jo=O,zs=N;return O=N=e,Ze=Fn,le=d.apply(zs,jo),le}function $t(Fn){return Ze=Fn,fe=Gd(gi,f),Qe?Pt(Fn):le}function ci(Fn){var jo=Fn-Ae,zs=Fn-Ze,Qg=f-jo;return tt?vn(Qg,q-zs):Qg}function Yt(Fn){var jo=Fn-Ae,zs=Fn-Ze;return Ae===e||jo>=f||jo<0||tt&&zs>=q}function gi(){var Fn=jc();if(Yt(Fn))return wi(Fn);fe=Gd(gi,ci(Fn))}function wi(Fn){return fe=e,Tt&&O?Pt(Fn):(O=N=e,le)}function uo(){fe!==e&&zd(fe),Ze=0,O=Ae=N=fe=e}function Rr(){return fe===e?le:wi(jc())}function co(){var Fn=jc(),jo=Yt(Fn);if(O=arguments,N=this,Ae=Fn,jo){if(fe===e)return $t(Ae);if(tt)return zd(fe),fe=Gd(gi,f),Pt(Ae)}return fe===e&&(fe=Gd(gi,f)),le}return co.cancel=uo,co.flush=Rr,co}var kS=ni(function(d,f){return yc(d,1,f)}),IS=ni(function(d,f,b){return yc(d,Io(f)||0,b)});function DS(d){return Ns(d,L)}function Xc(d,f){if(typeof d!="function"||f!=null&&typeof f!="function")throw new Tr(s);var b=function(){var O=arguments,N=f?f.apply(this,O):O[0],q=b.cache;if(q.has(N))return q.get(N);var le=d.apply(this,O);return b.cache=q.set(N,le)||q,le};return b.cache=new(Xc.Cache||Uo),b}Xc.Cache=Uo;function Kc(d){if(typeof d!="function")throw new Tr(s);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}function RS(d){return kg(2,d)}var PS=Nc(function(d,f){f=f.length==1&&ri(f[0])?$i(f[0],Zi(Wt())):$i(Qn(f,1),Zi(Wt()));var b=f.length;return ni(function(O){for(var N=-1,q=vn(O.length,b);++N<q;)O[N]=f[N].call(this,O[N]);return nn(d,this,O)})}),mp=ni(function(d,f){var b=rs(f,Ra(mp));return Ns(d,P,e,f,b)}),Fg=ni(function(d,f){var b=rs(f,Ra(Fg));return Ns(d,M,e,f,b)}),FS=Ls(function(d,f){return Ns(d,Z,e,e,e,f)});function MS(d,f){if(typeof d!="function")throw new Tr(s);return f=f===e?f:li(f),ni(d,f)}function NS(d,f){if(typeof d!="function")throw new Tr(s);return f=f==null?0:Dn(li(f),0),ni(function(b){var O=b[f],N=lo(b,0,f);return O&&Un(N,O),nn(d,this,N)})}function LS(d,f,b){var O=!0,N=!0;if(typeof d!="function")throw new Tr(s);return Sn(b)&&(O="leading"in b?!!b.leading:O,N="trailing"in b?!!b.trailing:N),Pg(d,f,{leading:O,maxWait:f,trailing:N})}function HS(d){return Ag(d,1)}function BS(d,f){return mp(Rn(f),d)}function VS(){if(!arguments.length)return[];var d=arguments[0];return ri(d)?d:[d]}function zS(d){return kr(d,v)}function US(d,f){return f=typeof f=="function"?f:e,kr(d,v,f)}function WS(d){return kr(d,p|v)}function GS(d,f){return f=typeof f=="function"?f:e,kr(d,p|v,f)}function $S(d,f){return f==null||Go(d,f,rr(f))}function Yo(d,f){return d===f||d!==d&&f!==f}var YS=zc(xa),jS=zc(function(d,f){return d>=f}),Bl=Oa(function(){return arguments}())?Oa:function(d){return An(d)&&Di.call(d,"callee")&&!ic.call(d,"callee")},ri=Me.isArray,XS=Zs?Zi(Zs):Ac;function Yr(d){return d!=null&&qc(d.length)&&!Bs(d)}function Pn(d){return An(d)&&Yr(d)}function KS(d){return d===!0||d===!1||An(d)&&dr(d)==_e}var fl=fa||Tp,qS=xr?Zi(xr):Id;function ZS(d){return An(d)&&d.nodeType===1&&!$d(d)}function QS(d){if(d==null)return!0;if(Yr(d)&&(ri(d)||typeof d=="string"||typeof d.splice=="function"||fl(d)||Pa(d)||Bl(d)))return!d.length;var f=br(d);if(f==k||f==Fe)return!d.size;if(Wd(d))return!hl(d).length;for(var b in d)if(Di.call(d,b))return!1;return!0}function JS(d,f){return cl(d,f)}function ew(d,f,b){b=typeof b=="function"?b:e;var O=b?b(d,f):e;return O===e?cl(d,f,e,b):!!O}function vp(d){if(!An(d))return!1;var f=dr(d);return f==ze||f==ot||typeof d.message=="string"&&typeof d.name=="string"&&!$d(d)}function tw(d){return typeof d=="number"&&nc(d)}function Bs(d){if(!Sn(d))return!1;var f=dr(d);return f==St||f==ct||f==Ce||f==re}function Mg(d){return typeof d=="number"&&d==li(d)}function qc(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=xe}function Sn(d){var f=typeof d;return d!=null&&(f=="object"||f=="function")}function An(d){return d!=null&&typeof d=="object"}var Ng=Ol?Zi(Ol):Zf;function iw(d,f){return d===f||Dd(d,f,sp(f))}function nw(d,f,b){return b=typeof b=="function"?b:e,Dd(d,f,sp(f),b)}function rw(d){return Lg(d)&&d!=+d}function ow(d){if(Uy(d))throw new Xt(o);return kc(d)}function sw(d){return d===null}function lw(d){return d==null}function Lg(d){return typeof d=="number"||An(d)&&dr(d)==ee}function $d(d){if(!An(d)||dr(d)!=$)return!1;var f=la(d);if(f===null)return!0;var b=Di.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&Ds.call(b)==ec}var gp=xs?Zi(xs):Qf;function aw(d){return Mg(d)&&d>=-xe&&d<=xe}var Hg=Al?Zi(Al):Jf;function Zc(d){return typeof d=="string"||!ri(d)&&An(d)&&dr(d)==me}function ao(d){return typeof d=="symbol"||An(d)&&dr(d)==Ge}var Pa=Ts?Zi(Ts):Ic;function dw(d){return d===e}function uw(d){return An(d)&&br(d)==We}function cw(d){return An(d)&&dr(d)==Le}var hw=zc(Aa),fw=zc(function(d,f){return d<=f});function Bg(d){if(!d)return[];if(Yr(d))return Zc(d)?ro(d):$r(d);if(Dl&&d[Dl])return qu(d[Dl]());var f=br(d),b=f==k?vd:f==Fe?ks:Fa;return b(d)}function Vs(d){if(!d)return d===0?d:0;if(d=Io(d),d===Ie||d===-Ie){var f=d<0?-1:1;return f*Oe}return d===d?d:0}function li(d){var f=Vs(d),b=f%1;return f===f?b?f-b:f:0}function Vg(d){return d?Ur(li(d),0,ne):0}function Io(d){if(typeof d=="number")return d;if(ao(d))return De;if(Sn(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=Sn(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=an(d);var b=Xe.test(d);return b||ti.test(d)?es(d.slice(2),b?2:8):Se.test(d)?De:+d}function zg(d){return us(d,jr(d))}function pw(d){return d?Ur(li(d),-xe,xe):d===0?d:0}function Vi(d){return d==null?"":pt(d)}var mw=Ia(function(d,f){if(Wd(f)||Yr(f)){us(f,rr(f),d);return}for(var b in f)Di.call(f,b)&&al(d,b,f[b])}),Ug=Ia(function(d,f){us(f,jr(f),d)}),Qc=Ia(function(d,f,b,O){us(f,jr(f),d,O)}),vw=Ia(function(d,f,b,O){us(f,rr(f),d,O)}),gw=Ls(Wo);function _w(d,f){var b=as(d);return f==null?b:dl(b,f)}var bw=ni(function(d,f){d=Bi(d);var b=-1,O=f.length,N=O>2?f[2]:e;for(N&&Dr(f[0],f[1],N)&&(O=1);++b<O;)for(var q=f[b],le=jr(q),fe=-1,Ae=le.length;++fe<Ae;){var Ze=le[fe],Qe=d[Ze];(Qe===e||Yo(Qe,ss[Ze])&&!Di.call(d,Ze))&&(d[Ze]=q[Ze])}return d}),Cw=ni(function(d){return d.push(e,og),nn(Wg,e,d)});function yw(d,f){return g(d,Wt(f,3),oo)}function Ew(d,f){return g(d,Wt(f,3),kd)}function Sw(d,f){return d==null?d:Ea(d,Wt(f,3),jr)}function ww(d,f){return d==null?d:Sc(d,Wt(f,3),jr)}function xw(d,f){return d&&oo(d,Wt(f,3))}function Tw(d,f){return d&&kd(d,Wt(f,3))}function Ow(d){return d==null?[]:Sa(d,rr(d))}function Aw(d){return d==null?[]:Sa(d,jr(d))}function _p(d,f,b){var O=d==null?e:Ms(d,f);return O===e?b:O}function kw(d,f){return d!=null&&ag(d,f,wc)}function bp(d,f){return d!=null&&ag(d,f,xc)}var Iw=eg(function(d,f,b){f!=null&&typeof f.toString!="function"&&(f=sa.call(f)),d[f]=b},yp(Xr)),Dw=eg(function(d,f,b){f!=null&&typeof f.toString!="function"&&(f=sa.call(f)),Di.call(d,f)?d[f].push(b):d[f]=[b]},Wt),Rw=ni(Wr);function rr(d){return Yr(d)?wd(d):hl(d)}function jr(d){return Yr(d)?wd(d,!0):Dc(d)}function Pw(d,f){var b={};return f=Wt(f,3),oo(d,function(O,N,q){zr(b,f(O,N,q),O)}),b}function Fw(d,f){var b={};return f=Wt(f,3),oo(d,function(O,N,q){zr(b,N,f(O,N,q))}),b}var Mw=Ia(function(d,f,b){so(d,f,b)}),Wg=Ia(function(d,f,b,O){so(d,f,b,O)}),Nw=Ls(function(d,f){var b={};if(d==null)return b;var O=!1;f=$i(f,function(q){return q=gn(q,d),O||(O=q.length>1),q}),us(d,rp(d),b),O&&(b=kr(b,p|m|v,Iy));for(var N=f.length;N--;)pi(b,f[N]);return b});function Lw(d,f){return Gg(d,Kc(Wt(f)))}var Hw=Ls(function(d,f){return d==null?{}:Gr(d,f)});function Gg(d,f){if(d==null)return{};var b=$i(rp(d),function(O){return[O]});return f=Wt(f),Nd(d,b,function(O,N){return f(O,N[0])})}function Bw(d,f,b){f=gn(f,d);var O=-1,N=f.length;for(N||(N=1,d=e);++O<N;){var q=d==null?e:d[cs(f[O])];q===e&&(O=N,q=b),d=Bs(q)?q.call(d):q}return d}function Vw(d,f,b){return d==null?d:y(d,f,b)}function zw(d,f,b,O){return O=typeof O=="function"?O:e,d==null?d:y(d,f,b,O)}var $g=ng(rr),Yg=ng(jr);function Uw(d,f,b){var O=ri(d),N=O||fl(d)||Pa(d);if(f=Wt(f,4),b==null){var q=d&&d.constructor;N?b=O?new q:[]:Sn(d)?b=Bs(q)?as(la(d)):{}:b={}}return(N?rn:oo)(d,function(le,fe,Ae){return f(b,le,fe,Ae)}),b}function Ww(d,f){return d==null?!0:pi(d,f)}function Gw(d,f,b){return d==null?d:Qt(d,f,Rn(b))}function $w(d,f,b,O){return O=typeof O=="function"?O:e,d==null?d:Qt(d,f,Rn(b),O)}function Fa(d){return d==null?[]:is(d,rr(d))}function Yw(d){return d==null?[]:is(d,jr(d))}function jw(d,f,b){return b===e&&(b=f,f=e),b!==e&&(b=Io(b),b=b===b?b:0),f!==e&&(f=Io(f),f=f===f?f:0),Ur(Io(d),f,b)}function Xw(d,f,b){return f=Vs(f),b===e?(b=f,f=0):b=Vs(b),d=Io(d),Tc(d,f,b)}function Kw(d,f,b){if(b&&typeof b!="boolean"&&Dr(d,f,b)&&(f=b=e),b===e&&(typeof f=="boolean"?(b=f,f=e):typeof d=="boolean"&&(b=d,d=e)),d===e&&f===e?(d=0,f=1):(d=Vs(d),f===e?(f=d,d=0):f=Vs(f)),d>f){var O=d;d=f,f=O}if(b||d%1||f%1){var N=Rl();return vn(d+N*(f-d+qs("1e-"+((N+"").length-1))),f)}return Hd(d,f)}var qw=Da(function(d,f,b){return f=f.toLowerCase(),d+(b?jg(f):f)});function jg(d){return Cp(Vi(d).toLowerCase())}function Xg(d){return d=Vi(d),d&&d.replace(Wi,md).replace(Cs,"")}function Zw(d,f,b){d=Vi(d),f=pt(f);var O=d.length;b=b===e?O:Ur(li(b),0,O);var N=b;return b-=f.length,b>=0&&d.slice(b,N)==f}function Qw(d){return d=Vi(d),d&&z.test(d)?d.replace(Fi,Xu):d}function Jw(d){return d=Vi(d),d&&Ht.test(d)?d.replace(wt,"\\$&"):d}var ex=Da(function(d,f,b){return d+(b?"-":"")+f.toLowerCase()}),tx=Da(function(d,f,b){return d+(b?" ":"")+f.toLowerCase()}),ix=Zv("toLowerCase");function nx(d,f,b){d=Vi(d),f=li(f);var O=f?os(d):0;if(!f||O>=f)return d;var N=(f-O)/2;return Vc(Ps(N),b)+d+Vc(ca(N),b)}function rx(d,f,b){d=Vi(d),f=li(f);var O=f?os(d):0;return f&&O<f?d+Vc(f-O,b):d}function ox(d,f,b){d=Vi(d),f=li(f);var O=f?os(d):0;return f&&O<f?Vc(f-O,b)+d:d}function sx(d,f,b){return b||f==null?f=0:f&&(f=+f),Nf(Vi(d).replace(Et,""),f||0)}function lx(d,f,b){return(b?Dr(d,f,b):f===e)?f=1:f=li(f),Bd(Vi(d),f)}function ax(){var d=arguments,f=Vi(d[0]);return d.length<3?f:f.replace(d[1],d[2])}var dx=Da(function(d,f,b){return d+(b?"_":"")+f.toLowerCase()});function ux(d,f,b){return b&&typeof b!="number"&&Dr(d,f,b)&&(f=b=e),b=b===e?ne:b>>>0,b?(d=Vi(d),d&&(typeof f=="string"||f!=null&&!gp(f))&&(f=pt(f),!f&&tl(d))?lo(ro(d),0,b):d.split(f,b)):[]}var cx=Da(function(d,f,b){return d+(b?" ":"")+Cp(f)});function hx(d,f,b){return d=Vi(d),b=b==null?0:Ur(li(b),0,d.length),f=pt(f),d.slice(b,b+f.length)==f}function fx(d,f,b){var O=W.templateSettings;b&&Dr(d,f,b)&&(f=e),d=Vi(d),f=Qc({},f,O,rg);var N=Qc({},f.imports,O.imports,rg),q=rr(N),le=is(N,q),fe,Ae,Ze=0,Qe=f.interpolate||Li,tt="__p += '",Tt=il((f.escape||Li).source+"|"+Qe.source+"|"+(Qe===Ee?fn:Li).source+"|"+(f.evaluate||Li).source+"|$","g"),Pt="//# sourceURL="+(Di.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Es+"]")+`
`;d.replace(Tt,function(Yt,gi,wi,uo,Rr,co){return wi||(wi=uo),tt+=d.slice(Ze,co).replace(pn,xf),gi&&(fe=!0,tt+=`' +
__e(`+gi+`) +
'`),Rr&&(Ae=!0,tt+=`';
`+Rr+`;
__p += '`),wi&&(tt+=`' +
((__t = (`+wi+`)) == null ? '' : __t) +
'`),Ze=co+Yt.length,Yt}),tt+=`';
`;var $t=Di.call(f,"variable")&&f.variable;if(!$t)tt=`with (obj) {
`+tt+`
}
`;else if(Ni.test($t))throw new Xt(l);tt=(Ae?tt.replace(Lt,""):tt).replace(Ot,"$1").replace(zt,"$1;"),tt="function("+($t||"obj")+`) {
`+($t?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+tt+`return __p
}`;var ci=qg(function(){return Si(q,Pt+"return "+tt).apply(e,le)});if(ci.source=tt,vp(ci))throw ci;return ci}function px(d){return Vi(d).toLowerCase()}function mx(d){return Vi(d).toUpperCase()}function vx(d,f,b){if(d=Vi(d),d&&(b||f===e))return an(d);if(!d||!(f=pt(f)))return d;var O=ro(d),N=ro(f),q=ns(O,N),le=pd(O,N)+1;return lo(O,q,le).join("")}function gx(d,f,b){if(d=Vi(d),d&&(b||f===e))return d.slice(0,gd(d)+1);if(!d||!(f=pt(f)))return d;var O=ro(d),N=pd(O,ro(f))+1;return lo(O,0,N).join("")}function _x(d,f,b){if(d=Vi(d),d&&(b||f===e))return d.replace(Et,"");if(!d||!(f=pt(f)))return d;var O=ro(d),N=ns(O,ro(f));return lo(O,N).join("")}function bx(d,f){var b=de,O=be;if(Sn(f)){var N="separator"in f?f.separator:N;b="length"in f?li(f.length):b,O="omission"in f?pt(f.omission):O}d=Vi(d);var q=d.length;if(tl(d)){var le=ro(d);q=le.length}if(b>=q)return d;var fe=b-os(O);if(fe<1)return O;var Ae=le?lo(le,0,fe).join(""):d.slice(0,fe);if(N===e)return Ae+O;if(le&&(fe+=Ae.length-fe),gp(N)){if(d.slice(fe).search(N)){var Ze,Qe=Ae;for(N.global||(N=il(N.source,Vi(Ct.exec(N))+"g")),N.lastIndex=0;Ze=N.exec(Qe);)var tt=Ze.index;Ae=Ae.slice(0,tt===e?fe:tt)}}else if(d.indexOf(pt(N),fe)!=fe){var Tt=Ae.lastIndexOf(N);Tt>-1&&(Ae=Ae.slice(0,Tt))}return Ae+O}function Cx(d){return d=Vi(d),d&&Mi.test(d)?d.replace(qt,Af):d}var yx=Da(function(d,f,b){return d+(b?" ":"")+f.toUpperCase()}),Cp=Zv("toUpperCase");function Kg(d,f,b){return d=Vi(d),f=b?e:f,f===e?Tf(d)?If(d):hi(d):d.match(f)||[]}var qg=ni(function(d,f){try{return nn(d,e,f)}catch(b){return vp(b)?b:new Xt(b)}}),Ex=Ls(function(d,f){return rn(f,function(b){b=cs(b),zr(d,b,pp(d[b],d))}),d});function Sx(d){var f=d==null?0:d.length,b=Wt();return d=f?$i(d,function(O){if(typeof O[1]!="function")throw new Tr(s);return[b(O[0]),O[1]]}):[],ni(function(O){for(var N=-1;++N<f;){var q=d[N];if(nn(q[0],this,O))return nn(q[1],this,O)}})}function wx(d){return Kf(kr(d,p))}function yp(d){return function(){return d}}function xx(d,f){return d==null||d!==d?f:d}var Tx=Jv(),Ox=Jv(!0);function Xr(d){return d}function Ep(d){return Rd(typeof d=="function"?d:kr(d,p))}function Ax(d){return Fd(kr(d,p))}function kx(d,f){return Md(d,kr(f,p))}var Ix=ni(function(d,f){return function(b){return Wr(b,d,f)}}),Dx=ni(function(d,f){return function(b){return Wr(d,b,f)}});function Sp(d,f,b){var O=rr(f),N=Sa(f,O);b==null&&!(Sn(f)&&(N.length||!O.length))&&(b=f,f=d,d=this,N=Sa(f,rr(f)));var q=!(Sn(b)&&"chain"in b)||!!b.chain,le=Bs(d);return rn(N,function(fe){var Ae=f[fe];d[fe]=Ae,le&&(d.prototype[fe]=function(){var Ze=this.__chain__;if(q||Ze){var Qe=d(this.__wrapped__),tt=Qe.__actions__=$r(this.__actions__);return tt.push({func:Ae,args:arguments,thisArg:d}),Qe.__chain__=Ze,Qe}return Ae.apply(d,Un([this.value()],arguments))})}),d}function Rx(){return Ki._===this&&(Ki._=Pf),this}function wp(){}function Px(d){return d=li(d),ni(function(f){return Rc(f,d)})}var Fx=tp($i),Mx=tp(Oo),Nx=tp(Os);function Zg(d){return ap(d)?Be(cs(d)):Fc(d)}function Lx(d){return function(f){return d==null?e:Ms(d,f)}}var Hx=tg(),Bx=tg(!0);function xp(){return[]}function Tp(){return!1}function Vx(){return{}}function zx(){return""}function Ux(){return!0}function Wx(d,f){if(d=li(d),d<1||d>xe)return[];var b=ne,O=vn(d,ne);f=Wt(f),d-=ne;for(var N=Mt(O,f);++b<d;)f(b);return N}function Gx(d){return ri(d)?$i(d,cs):ao(d)?[d]:$r(gg(Vi(d)))}function $x(d){var f=++Qu;return Vi(d)+f}var Yx=Bc(function(d,f){return d+f},0),jx=ip("ceil"),Xx=Bc(function(d,f){return d/f},1),Kx=ip("floor");function qx(d){return d&&d.length?Nl(d,Xr,xa):e}function Zx(d,f){return d&&d.length?Nl(d,Wt(f,2),xa):e}function Qx(d){return we(d,Xr)}function Jx(d,f){return we(d,Wt(f,2))}function eT(d){return d&&d.length?Nl(d,Xr,Aa):e}function tT(d,f){return d&&d.length?Nl(d,Wt(f,2),Aa):e}var iT=Bc(function(d,f){return d*f},1),nT=ip("round"),rT=Bc(function(d,f){return d-f},0);function oT(d){return d&&d.length?Vt(d,Xr):0}function sT(d,f){return d&&d.length?Vt(d,Wt(f,2)):0}return W.after=AS,W.ary=Ag,W.assign=mw,W.assignIn=Ug,W.assignInWith=Qc,W.assignWith=vw,W.at=gw,W.before=kg,W.bind=pp,W.bindAll=Ex,W.bindKey=Ig,W.castArray=VS,W.chain=xg,W.chunk=Ky,W.compact=qy,W.concat=Zy,W.cond=Sx,W.conforms=wx,W.constant=yp,W.countBy=oS,W.create=_w,W.curry=Dg,W.curryRight=Rg,W.debounce=Pg,W.defaults=bw,W.defaultsDeep=Cw,W.defer=kS,W.delay=IS,W.difference=Qy,W.differenceBy=Jy,W.differenceWith=eE,W.drop=tE,W.dropRight=iE,W.dropRightWhile=nE,W.dropWhile=rE,W.fill=oE,W.filter=lS,W.flatMap=uS,W.flatMapDeep=cS,W.flatMapDepth=hS,W.flatten=yg,W.flattenDeep=sE,W.flattenDepth=lE,W.flip=DS,W.flow=Tx,W.flowRight=Ox,W.fromPairs=aE,W.functions=Ow,W.functionsIn=Aw,W.groupBy=fS,W.initial=uE,W.intersection=cE,W.intersectionBy=hE,W.intersectionWith=fE,W.invert=Iw,W.invertBy=Dw,W.invokeMap=mS,W.iteratee=Ep,W.keyBy=vS,W.keys=rr,W.keysIn=jr,W.map=Yc,W.mapKeys=Pw,W.mapValues=Fw,W.matches=Ax,W.matchesProperty=kx,W.memoize=Xc,W.merge=Mw,W.mergeWith=Wg,W.method=Ix,W.methodOf=Dx,W.mixin=Sp,W.negate=Kc,W.nthArg=Px,W.omit=Nw,W.omitBy=Lw,W.once=RS,W.orderBy=gS,W.over=Fx,W.overArgs=PS,W.overEvery=Mx,W.overSome=Nx,W.partial=mp,W.partialRight=Fg,W.partition=_S,W.pick=Hw,W.pickBy=Gg,W.property=Zg,W.propertyOf=Lx,W.pull=gE,W.pullAll=Sg,W.pullAllBy=_E,W.pullAllWith=bE,W.pullAt=CE,W.range=Hx,W.rangeRight=Bx,W.rearg=FS,W.reject=yS,W.remove=yE,W.rest=MS,W.reverse=hp,W.sampleSize=SS,W.set=Vw,W.setWith=zw,W.shuffle=wS,W.slice=EE,W.sortBy=OS,W.sortedUniq=kE,W.sortedUniqBy=IE,W.split=ux,W.spread=NS,W.tail=DE,W.take=RE,W.takeRight=PE,W.takeRightWhile=FE,W.takeWhile=ME,W.tap=qE,W.throttle=LS,W.thru=$c,W.toArray=Bg,W.toPairs=$g,W.toPairsIn=Yg,W.toPath=Gx,W.toPlainObject=zg,W.transform=Uw,W.unary=HS,W.union=NE,W.unionBy=LE,W.unionWith=HE,W.uniq=BE,W.uniqBy=VE,W.uniqWith=zE,W.unset=Ww,W.unzip=fp,W.unzipWith=wg,W.update=Gw,W.updateWith=$w,W.values=Fa,W.valuesIn=Yw,W.without=UE,W.words=Kg,W.wrap=BS,W.xor=WE,W.xorBy=GE,W.xorWith=$E,W.zip=YE,W.zipObject=jE,W.zipObjectDeep=XE,W.zipWith=KE,W.entries=$g,W.entriesIn=Yg,W.extend=Ug,W.extendWith=Qc,Sp(W,W),W.add=Yx,W.attempt=qg,W.camelCase=qw,W.capitalize=jg,W.ceil=jx,W.clamp=jw,W.clone=zS,W.cloneDeep=WS,W.cloneDeepWith=GS,W.cloneWith=US,W.conformsTo=$S,W.deburr=Xg,W.defaultTo=xx,W.divide=Xx,W.endsWith=Zw,W.eq=Yo,W.escape=Qw,W.escapeRegExp=Jw,W.every=sS,W.find=aS,W.findIndex=bg,W.findKey=yw,W.findLast=dS,W.findLastIndex=Cg,W.findLastKey=Ew,W.floor=Kx,W.forEach=Tg,W.forEachRight=Og,W.forIn=Sw,W.forInRight=ww,W.forOwn=xw,W.forOwnRight=Tw,W.get=_p,W.gt=YS,W.gte=jS,W.has=kw,W.hasIn=bp,W.head=Eg,W.identity=Xr,W.includes=pS,W.indexOf=dE,W.inRange=Xw,W.invoke=Rw,W.isArguments=Bl,W.isArray=ri,W.isArrayBuffer=XS,W.isArrayLike=Yr,W.isArrayLikeObject=Pn,W.isBoolean=KS,W.isBuffer=fl,W.isDate=qS,W.isElement=ZS,W.isEmpty=QS,W.isEqual=JS,W.isEqualWith=ew,W.isError=vp,W.isFinite=tw,W.isFunction=Bs,W.isInteger=Mg,W.isLength=qc,W.isMap=Ng,W.isMatch=iw,W.isMatchWith=nw,W.isNaN=rw,W.isNative=ow,W.isNil=lw,W.isNull=sw,W.isNumber=Lg,W.isObject=Sn,W.isObjectLike=An,W.isPlainObject=$d,W.isRegExp=gp,W.isSafeInteger=aw,W.isSet=Hg,W.isString=Zc,W.isSymbol=ao,W.isTypedArray=Pa,W.isUndefined=dw,W.isWeakMap=uw,W.isWeakSet=cw,W.join=pE,W.kebabCase=ex,W.last=ko,W.lastIndexOf=mE,W.lowerCase=tx,W.lowerFirst=ix,W.lt=hw,W.lte=fw,W.max=qx,W.maxBy=Zx,W.mean=Qx,W.meanBy=Jx,W.min=eT,W.minBy=tT,W.stubArray=xp,W.stubFalse=Tp,W.stubObject=Vx,W.stubString=zx,W.stubTrue=Ux,W.multiply=iT,W.nth=vE,W.noConflict=Rx,W.noop=wp,W.now=jc,W.pad=nx,W.padEnd=rx,W.padStart=ox,W.parseInt=sx,W.random=Kw,W.reduce=bS,W.reduceRight=CS,W.repeat=lx,W.replace=ax,W.result=Bw,W.round=nT,W.runInContext=oe,W.sample=ES,W.size=xS,W.snakeCase=dx,W.some=TS,W.sortedIndex=SE,W.sortedIndexBy=wE,W.sortedIndexOf=xE,W.sortedLastIndex=TE,W.sortedLastIndexBy=OE,W.sortedLastIndexOf=AE,W.startCase=cx,W.startsWith=hx,W.subtract=rT,W.sum=oT,W.sumBy=sT,W.template=fx,W.times=Wx,W.toFinite=Vs,W.toInteger=li,W.toLength=Vg,W.toLower=px,W.toNumber=Io,W.toSafeInteger=pw,W.toString=Vi,W.toUpper=mx,W.trim=vx,W.trimEnd=gx,W.trimStart=_x,W.truncate=bx,W.unescape=Cx,W.uniqueId=$x,W.upperCase=yx,W.upperFirst=Cp,W.each=Tg,W.eachRight=Og,W.first=Eg,Sp(W,function(){var d={};return oo(W,function(f,b){Di.call(W.prototype,b)||(d[b]=f)}),d}(),{chain:!1}),W.VERSION=n,rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){W[d].placeholder=W}),rn(["drop","take"],function(d,f){fi.prototype[d]=function(b){b=b===e?1:Dn(li(b),0);var O=this.__filtered__&&!f?new fi(this):this.clone();return O.__filtered__?O.__takeCount__=vn(b,O.__takeCount__):O.__views__.push({size:vn(b,ne),type:d+(O.__dir__<0?"Right":"")}),O},fi.prototype[d+"Right"]=function(b){return this.reverse()[d](b).reverse()}}),rn(["filter","map","takeWhile"],function(d,f){var b=f+1,O=b==F||b==Ke;fi.prototype[d]=function(N){var q=this.clone();return q.__iteratees__.push({iteratee:Wt(N,3),type:b}),q.__filtered__=q.__filtered__||O,q}}),rn(["head","last"],function(d,f){var b="take"+(f?"Right":"");fi.prototype[d]=function(){return this[b](1).value()[0]}}),rn(["initial","tail"],function(d,f){var b="drop"+(f?"":"Right");fi.prototype[d]=function(){return this.__filtered__?new fi(this):this[b](1)}}),fi.prototype.compact=function(){return this.filter(Xr)},fi.prototype.find=function(d){return this.filter(d).head()},fi.prototype.findLast=function(d){return this.reverse().find(d)},fi.prototype.invokeMap=ni(function(d,f){return typeof d=="function"?new fi(this):this.map(function(b){return Wr(b,d,f)})}),fi.prototype.reject=function(d){return this.filter(Kc(Wt(d)))},fi.prototype.slice=function(d,f){d=li(d);var b=this;return b.__filtered__&&(d>0||f<0)?new fi(b):(d<0?b=b.takeRight(-d):d&&(b=b.drop(d)),f!==e&&(f=li(f),b=f<0?b.dropRight(-f):b.take(f-d)),b)},fi.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},fi.prototype.toArray=function(){return this.take(ne)},oo(fi.prototype,function(d,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),O=/^(?:head|last)$/.test(f),N=W[O?"take"+(f=="last"?"Right":""):f],q=O||/^find/.test(f);N&&(W.prototype[f]=function(){var le=this.__wrapped__,fe=O?[1]:arguments,Ae=le instanceof fi,Ze=fe[0],Qe=Ae||ri(le),tt=function(gi){var wi=N.apply(W,Un([gi],fe));return O&&Tt?wi[0]:wi};Qe&&b&&typeof Ze=="function"&&Ze.length!=1&&(Ae=Qe=!1);var Tt=this.__chain__,Pt=!!this.__actions__.length,$t=q&&!Tt,ci=Ae&&!Pt;if(!q&&Qe){le=ci?le:new fi(this);var Yt=d.apply(le,fe);return Yt.__actions__.push({func:$c,args:[tt],thisArg:e}),new Qi(Yt,Tt)}return $t&&ci?d.apply(this,fe):(Yt=this.thru(tt),$t?O?Yt.value()[0]:Yt.value():Yt)})}),rn(["pop","push","shift","sort","splice","unshift"],function(d){var f=oa[d],b=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",O=/^(?:pop|shift)$/.test(d);W.prototype[d]=function(){var N=arguments;if(O&&!this.__chain__){var q=this.value();return f.apply(ri(q)?q:[],N)}return this[b](function(le){return f.apply(ri(le)?le:[],N)})}}),oo(fi.prototype,function(d,f){var b=W[f];if(b){var O=b.name+"";Di.call(sl,O)||(sl[O]=[]),sl[O].push({name:f,func:b})}}),sl[Hc(e,S).name]=[{name:"wrapper",func:e}],fi.prototype.clone=lc,fi.prototype.reverse=ac,fi.prototype.value=Hf,W.prototype.at=ZE,W.prototype.chain=QE,W.prototype.commit=JE,W.prototype.next=eS,W.prototype.plant=iS,W.prototype.reverse=nS,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=rS,W.prototype.first=W.prototype.head,Dl&&(W.prototype[Dl]=tS),W},Is=_d();Ho?((Ho.exports=Is)._=Is,wr._=Is):Ki._=Is}).call(Pr)}(hd,hd.exports)),hd.exports}var yf={exports:{}},Av;function JC(){return Av||(Av=1,function(a,t){/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(e){typeof bootstrap=="function"?bootstrap("promise",e):a.exports=e()})(function(){var e=!1;try{throw new Error}catch(K){e=!!K.stack}var n=be(),r,o=function(){},s=function(){var K={task:void 0,next:null},G=K,ve=!1,ke=void 0,at=!1,st=[];function ht(){for(var zt,qt;K.next;)K=K.next,zt=K.task,K.task=void 0,qt=K.domain,qt&&(K.domain=void 0,qt.enter()),Rt(zt,qt);for(;st.length;)zt=st.pop(),Rt(zt);ve=!1}function Rt(zt,qt){try{zt()}catch(Fi){if(at)throw qt&&qt.exit(),setTimeout(ht,0),qt&&qt.enter(),Fi;setTimeout(function(){throw Fi},0)}qt&&qt.exit()}if(s=function(zt){G=G.next={task:zt,domain:at&&process.domain,next:null},ve||(ve=!0,ke())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)at=!0,ke=function(){process.nextTick(ht)};else if(typeof setImmediate=="function")typeof window<"u"?ke=setImmediate.bind(window,ht):ke=function(){setImmediate(ht)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel;Lt.port1.onmessage=function(){ke=Ot,Lt.port1.onmessage=ht,ht()};var Ot=function(){Lt.port2.postMessage(0)};ke=function(){setTimeout(ht,0),Ot()}}else ke=function(){setTimeout(ht,0)};return s.runAfter=function(zt){st.push(zt),ve||(ve=!0,ke())},s}(),l=Function.call;function u(K){return function(){return l.apply(K,arguments)}}var h=u(Array.prototype.slice),c=u(Array.prototype.reduce||function(K,G){var ve=0,ke=this.length;if(arguments.length===1)do{if(ve in this){G=this[ve++];break}if(++ve>=ke)throw new TypeError}while(!0);for(;ve<ke;ve++)ve in this&&(G=K(G,this[ve],ve));return G}),p=u(Array.prototype.indexOf||function(K){for(var G=0;G<this.length;G++)if(this[G]===K)return G;return-1}),m=u(Array.prototype.map||function(K,G){var ve=this,ke=[];return c(ve,function(at,st,ht){ke.push(K.call(G,st,ht,ve))},void 0),ke}),v=Object.create||function(K){function G(){}return G.prototype=K,new G},_=Object.defineProperty||function(K,G,ve){return K[G]=ve.value,K},C=u(Object.prototype.hasOwnProperty),x=Object.keys||function(K){var G=[];for(var ve in K)C(K,ve)&&G.push(ve);return G},S=u(Object.prototype.toString);function E(K){return K===Object(K)}function D(K){return S(K)==="[object StopIteration]"||K instanceof A}var A;typeof ReturnValue<"u"?A=ReturnValue:A=function(K){this.value=K};var P="From previous event:";function M(K,G){if(e&&G.stack&&typeof K=="object"&&K!==null&&K.stack){for(var ve=[],ke=G;ke;ke=ke.source)ke.stack&&(!K.__minimumStackCounter__||K.__minimumStackCounter__>ke.stackCounter)&&(_(K,"__minimumStackCounter__",{value:ke.stackCounter,configurable:!0}),ve.unshift(ke.stack));ve.unshift(K.stack);var at=ve.join(`
`+P+`
`),st=B(at);_(K,"stack",{value:st,configurable:!0})}}function B(K){for(var G=K.split(`
`),ve=[],ke=0;ke<G.length;++ke){var at=G[ke];!de(at)&&!Z(at)&&at&&ve.push(at)}return ve.join(`
`)}function Z(K){return K.indexOf("(module.js:")!==-1||K.indexOf("(node.js:")!==-1}function L(K){var G=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(K);if(G)return[G[1],Number(G[2])];var ve=/at ([^ ]+):(\d+):(?:\d+)$/.exec(K);if(ve)return[ve[1],Number(ve[2])];var ke=/.*@(.+):(\d+)$/.exec(K);if(ke)return[ke[1],Number(ke[2])]}function de(K){var G=L(K);if(!G)return!1;var ve=G[0],ke=G[1];return ve===r&&ke>=n&&ke<=bi}function be(){if(e)try{throw new Error}catch(ke){var K=ke.stack.split(`
`),G=K[0].indexOf("@")>0?K[1]:K[2],ve=L(G);return ve?(r=ve[0],ve[1]):void 0}}function J(K,G,ve){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(G+" is deprecated, use "+ve+" instead.",new Error("").stack),K.apply(K,arguments)}}function U(K){return K instanceof xe?K:pe(K)?ee(K):k(K)}U.resolve=U,U.nextTick=s,U.longStackSupport=!1;var F=1;typeof process=="object"&&process&&process.env&&process.env.Q_DEBUG&&(U.longStackSupport=!0),U.defer=ae;function ae(){var K=[],G=[],ve,ke=v(ae.prototype),at=v(xe.prototype);if(at.promiseDispatch=function(ht,Rt,Lt){var Ot=h(arguments);K?(K.push(Ot),Rt==="when"&&Lt[1]&&G.push(Lt[1])):U.nextTick(function(){ve.promiseDispatch.apply(ve,Ot)})},at.valueOf=function(){if(K)return at;var ht=De(ve);return ne(ht)&&(ve=ht),ht},at.inspect=function(){return ve?ve.inspect():{state:"pending"}},U.longStackSupport&&e)try{throw new Error}catch(ht){at.stack=ht.stack.substring(ht.stack.indexOf(`
`)+1),at.stackCounter=F++}function st(ht){ve=ht,U.longStackSupport&&e&&(at.source=ht),c(K,function(Rt,Lt){U.nextTick(function(){ht.promiseDispatch.apply(ht,Lt)})},void 0),K=void 0,G=void 0}return ke.promise=at,ke.resolve=function(ht){ve||st(U(ht))},ke.fulfill=function(ht){ve||st(k(ht))},ke.reject=function(ht){ve||st(ct(ht))},ke.notify=function(ht){ve||c(G,function(Rt,Lt){U.nextTick(function(){Lt(ht)})},void 0)},ke}ae.prototype.makeNodeResolver=function(){var K=this;return function(G,ve){G?K.reject(G):arguments.length>2?K.resolve(h(arguments,1)):K.resolve(ve)}},U.Promise=Ke,U.promise=Ke;function Ke(K){if(typeof K!="function")throw new TypeError("resolver must be a function.");var G=ae();try{K(G.resolve,G.reject,G.notify)}catch(ve){G.reject(ve)}return G.promise}Ke.race=Ie,Ke.all=Ge,Ke.reject=ct,Ke.resolve=U,U.passByCopy=function(K){return K},xe.prototype.passByCopy=function(){return this},U.join=function(K,G){return U(K).join(G)},xe.prototype.join=function(K){return U([this,K]).spread(function(G,ve){if(G===ve)return G;throw new Error("Q can't join: not the same: "+G+" "+ve)})},U.race=Ie;function Ie(K){return Ke(function(G,ve){for(var ke=0,at=K.length;ke<at;ke++)U(K[ke]).then(G,ve)})}xe.prototype.race=function(){return this.then(U.race)},U.makePromise=xe;function xe(K,G,ve){G===void 0&&(G=function(st){return ct(new Error("Promise does not support operation: "+st))}),ve===void 0&&(ve=function(){return{state:"unknown"}});var ke=v(xe.prototype);if(ke.promiseDispatch=function(st,ht,Rt){var Lt;try{K[ht]?Lt=K[ht].apply(ke,Rt):Lt=G.call(ke,ht,Rt)}catch(Ot){Lt=ct(Ot)}st&&st(Lt)},ke.inspect=ve,ve){var at=ve();at.state==="rejected"&&(ke.exception=at.reason),ke.valueOf=function(){var st=ve();return st.state==="pending"||st.state==="rejected"?ke:st.value}}return ke}xe.prototype.toString=function(){return"[object Promise]"},xe.prototype.then=function(K,G,ve){var ke=this,at=ae(),st=!1;function ht(Ot){try{return typeof K=="function"?K(Ot):Ot}catch(zt){return ct(zt)}}function Rt(Ot){if(typeof G=="function"){M(Ot,ke);try{return G(Ot)}catch(zt){return ct(zt)}}return ct(Ot)}function Lt(Ot){return typeof ve=="function"?ve(Ot):Ot}return U.nextTick(function(){ke.promiseDispatch(function(Ot){st||(st=!0,at.resolve(ht(Ot)))},"when",[function(Ot){st||(st=!0,at.resolve(Rt(Ot)))}])}),ke.promiseDispatch(void 0,"when",[void 0,function(Ot){var zt,qt=!1;try{zt=Lt(Ot)}catch(Fi){if(qt=!0,U.onerror)U.onerror(Fi);else throw Fi}qt||at.notify(zt)}]),at.promise},U.tap=function(K,G){return U(K).tap(G)},xe.prototype.tap=function(K){return K=U(K),this.then(function(G){return K.fcall(G).thenResolve(G)})},U.when=Oe;function Oe(K,G,ve,ke){return U(K).then(G,ve,ke)}xe.prototype.thenResolve=function(K){return this.then(function(){return K})},U.thenResolve=function(K,G){return U(K).thenResolve(G)},xe.prototype.thenReject=function(K){return this.then(function(){throw K})},U.thenReject=function(K,G){return U(K).thenReject(G)},U.nearer=De;function De(K){if(ne(K)){var G=K.inspect();if(G.state==="fulfilled")return G.value}return K}U.isPromise=ne;function ne(K){return K instanceof xe}U.isPromiseAlike=pe;function pe(K){return E(K)&&typeof K.then=="function"}U.isPending=Ve;function Ve(K){return ne(K)&&K.inspect().state==="pending"}xe.prototype.isPending=function(){return this.inspect().state==="pending"},U.isFulfilled=Ye;function Ye(K){return!ne(K)||K.inspect().state==="fulfilled"}xe.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},U.isRejected=Ue;function Ue(K){return ne(K)&&K.inspect().state==="rejected"}xe.prototype.isRejected=function(){return this.inspect().state==="rejected"};var ce=[],Ce=[],_e=[],He=!0;function ot(){ce.length=0,Ce.length=0,He||(He=!0)}function ze(K,G){He&&(typeof process=="object"&&typeof process.emit=="function"&&U.nextTick.runAfter(function(){p(Ce,K)!==-1&&(process.emit("unhandledRejection",G,K),_e.push(K))}),Ce.push(K),G&&typeof G.stack<"u"?ce.push(G.stack):ce.push("(no stack) "+G))}function St(K){if(He){var G=p(Ce,K);G!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&U.nextTick.runAfter(function(){var ve=p(_e,K);ve!==-1&&(process.emit("rejectionHandled",ce[G],K),_e.splice(ve,1))}),Ce.splice(G,1),ce.splice(G,1))}}U.resetUnhandledRejections=ot,U.getUnhandledReasons=function(){return ce.slice()},U.stopUnhandledRejectionTracking=function(){ot(),He=!1},ot(),U.reject=ct;function ct(K){var G=xe({when:function(ve){return ve&&St(this),ve?ve(K):this}},function(){return this},function(){return{state:"rejected",reason:K}});return ze(G,K),G}U.fulfill=k;function k(K){return xe({when:function(){return K},get:function(G){return K[G]},set:function(G,ve){K[G]=ve},delete:function(G){delete K[G]},post:function(G,ve){return G==null?K.apply(void 0,ve):K[G].apply(K,ve)},apply:function(G,ve){return K.apply(G,ve)},keys:function(){return x(K)}},void 0,function(){return{state:"fulfilled",value:K}})}function ee(K){var G=ae();return U.nextTick(function(){try{K.then(G.resolve,G.reject,G.notify)}catch(ve){G.reject(ve)}}),G.promise}U.master=ge;function ge(K){return xe({isDef:function(){}},function(ve,ke){return me(K,ve,ke)},function(){return U(K).inspect()})}U.spread=$;function $(K,G,ve){return U(K).spread(G,ve)}xe.prototype.spread=function(K,G){return this.all().then(function(ve){return K.apply(void 0,ve)},G)},U.async=X;function X(K){return function(){function G(st,ht){var Rt;if(typeof StopIteration>"u"){try{Rt=ve[st](ht)}catch(Lt){return ct(Lt)}return Rt.done?U(Rt.value):Oe(Rt.value,ke,at)}else{try{Rt=ve[st](ht)}catch(Lt){return D(Lt)?U(Lt.value):ct(Lt)}return Oe(Rt,ke,at)}}var ve=K.apply(this,arguments),ke=G.bind(G,"next"),at=G.bind(G,"throw");return ke()}}U.spawn=re;function re(K){U.done(U.async(K)())}U.return=Pe;function Pe(K){throw new A(K)}U.promised=Fe;function Fe(K){return function(){return $([this,Ge(arguments)],function(G,ve){return K.apply(G,ve)})}}U.dispatch=me;function me(K,G,ve){return U(K).dispatch(G,ve)}xe.prototype.dispatch=function(K,G){var ve=this,ke=ae();return U.nextTick(function(){ve.promiseDispatch(ke.resolve,K,G)}),ke.promise},U.get=function(K,G){return U(K).dispatch("get",[G])},xe.prototype.get=function(K){return this.dispatch("get",[K])},U.set=function(K,G,ve){return U(K).dispatch("set",[G,ve])},xe.prototype.set=function(K,G){return this.dispatch("set",[K,G])},U.del=U.delete=function(K,G){return U(K).dispatch("delete",[G])},xe.prototype.del=xe.prototype.delete=function(K){return this.dispatch("delete",[K])},U.mapply=U.post=function(K,G,ve){return U(K).dispatch("post",[G,ve])},xe.prototype.mapply=xe.prototype.post=function(K,G){return this.dispatch("post",[K,G])},U.send=U.mcall=U.invoke=function(K,G){return U(K).dispatch("post",[G,h(arguments,2)])},xe.prototype.send=xe.prototype.mcall=xe.prototype.invoke=function(K){return this.dispatch("post",[K,h(arguments,1)])},U.fapply=function(K,G){return U(K).dispatch("apply",[void 0,G])},xe.prototype.fapply=function(K){return this.dispatch("apply",[void 0,K])},U.try=U.fcall=function(K){return U(K).dispatch("apply",[void 0,h(arguments,1)])},xe.prototype.fcall=function(){return this.dispatch("apply",[void 0,h(arguments)])},U.fbind=function(K){var G=U(K),ve=h(arguments,1);return function(){return G.dispatch("apply",[this,ve.concat(h(arguments))])}},xe.prototype.fbind=function(){var K=this,G=h(arguments);return function(){return K.dispatch("apply",[this,G.concat(h(arguments))])}},U.keys=function(K){return U(K).dispatch("keys",[])},xe.prototype.keys=function(){return this.dispatch("keys",[])},U.all=Ge;function Ge(K){return Oe(K,function(G){var ve=0,ke=ae();return c(G,function(at,st,ht){var Rt;ne(st)&&(Rt=st.inspect()).state==="fulfilled"?G[ht]=Rt.value:(++ve,Oe(st,function(Lt){G[ht]=Lt,--ve===0&&ke.resolve(G)},ke.reject,function(Lt){ke.notify({index:ht,value:Lt})}))},void 0),ve===0&&ke.resolve(G),ke.promise})}xe.prototype.all=function(){return Ge(this)},U.any=mt;function mt(K){if(K.length===0)return U.resolve();var G=U.defer(),ve=0;return c(K,function(ke,at,st){var ht=K[st];ve++,Oe(ht,Rt,Lt,Ot);function Rt(zt){G.resolve(zt)}function Lt(zt){if(ve--,ve===0){var qt=zt||new Error(""+zt);qt.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+qt.message,G.reject(qt)}}function Ot(zt){G.notify({index:st,value:zt})}},void 0),G.promise}xe.prototype.any=function(){return mt(this)},U.allResolved=J(We,"allResolved","allSettled");function We(K){return Oe(K,function(G){return G=m(G,U),Oe(Ge(m(G,function(ve){return Oe(ve,o,o)})),function(){return G})})}xe.prototype.allResolved=function(){return We(this)},U.allSettled=Le;function Le(K){return U(K).allSettled()}xe.prototype.allSettled=function(){return this.then(function(K){return Ge(m(K,function(G){G=U(G);function ve(){return G.inspect()}return G.then(ve,ve)}))})},U.fail=U.catch=function(K,G){return U(K).then(void 0,G)},xe.prototype.fail=xe.prototype.catch=function(K){return this.then(void 0,K)},U.progress=jt;function jt(K,G){return U(K).then(void 0,void 0,G)}xe.prototype.progress=function(K){return this.then(void 0,void 0,K)},U.fin=U.finally=function(K,G){return U(K).finally(G)},xe.prototype.fin=xe.prototype.finally=function(K){if(!K||typeof K.apply!="function")throw new Error("Q can't apply finally callback");return K=U(K),this.then(function(G){return K.fcall().then(function(){return G})},function(G){return K.fcall().then(function(){throw G})})},U.done=function(K,G,ve,ke){return U(K).done(G,ve,ke)},xe.prototype.done=function(K,G,ve){var ke=function(st){U.nextTick(function(){if(M(st,at),U.onerror)U.onerror(st);else throw st})},at=K||G||ve?this.then(K,G,ve):this;typeof process=="object"&&process&&process.domain&&(ke=process.domain.bind(ke)),at.then(void 0,ke)},U.timeout=function(K,G,ve){return U(K).timeout(G,ve)},xe.prototype.timeout=function(K,G){var ve=ae(),ke=setTimeout(function(){(!G||typeof G=="string")&&(G=new Error(G||"Timed out after "+K+" ms"),G.code="ETIMEDOUT"),ve.reject(G)},K);return this.then(function(at){clearTimeout(ke),ve.resolve(at)},function(at){clearTimeout(ke),ve.reject(at)},ve.notify),ve.promise},U.delay=function(K,G){return G===void 0&&(G=K,K=void 0),U(K).delay(G)},xe.prototype.delay=function(K){return this.then(function(G){var ve=ae();return setTimeout(function(){ve.resolve(G)},K),ve.promise})},U.nfapply=function(K,G){return U(K).nfapply(G)},xe.prototype.nfapply=function(K){var G=ae(),ve=h(K);return ve.push(G.makeNodeResolver()),this.fapply(ve).fail(G.reject),G.promise},U.nfcall=function(K){var G=h(arguments,1);return U(K).nfapply(G)},xe.prototype.nfcall=function(){var K=h(arguments),G=ae();return K.push(G.makeNodeResolver()),this.fapply(K).fail(G.reject),G.promise},U.nfbind=U.denodeify=function(K){if(K===void 0)throw new Error("Q can't wrap an undefined function");var G=h(arguments,1);return function(){var ve=G.concat(h(arguments)),ke=ae();return ve.push(ke.makeNodeResolver()),U(K).fapply(ve).fail(ke.reject),ke.promise}},xe.prototype.nfbind=xe.prototype.denodeify=function(){var K=h(arguments);return K.unshift(this),U.denodeify.apply(void 0,K)},U.nbind=function(K,G){var ve=h(arguments,2);return function(){var ke=ve.concat(h(arguments)),at=ae();ke.push(at.makeNodeResolver());function st(){return K.apply(G,arguments)}return U(st).fapply(ke).fail(at.reject),at.promise}},xe.prototype.nbind=function(){var K=h(arguments,0);return K.unshift(this),U.nbind.apply(void 0,K)},U.nmapply=U.npost=function(K,G,ve){return U(K).npost(G,ve)},xe.prototype.nmapply=xe.prototype.npost=function(K,G){var ve=h(G||[]),ke=ae();return ve.push(ke.makeNodeResolver()),this.dispatch("post",[K,ve]).fail(ke.reject),ke.promise},U.nsend=U.nmcall=U.ninvoke=function(K,G){var ve=h(arguments,2),ke=ae();return ve.push(ke.makeNodeResolver()),U(K).dispatch("post",[G,ve]).fail(ke.reject),ke.promise},xe.prototype.nsend=xe.prototype.nmcall=xe.prototype.ninvoke=function(K){var G=h(arguments,1),ve=ae();return G.push(ve.makeNodeResolver()),this.dispatch("post",[K,G]).fail(ve.reject),ve.promise},U.nodeify=It;function It(K,G){return U(K).nodeify(G)}xe.prototype.nodeify=function(K){if(K)this.then(function(G){U.nextTick(function(){K(null,G)})},function(G){U.nextTick(function(){K(G)})});else return this},U.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var bi=be();return U})}(yf)),yf.exports}var kv=function(){var a={183:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.x=null,this.y=null,this.width=null,this.height=null,c&&(this.setPos(c.x,c.y),this.setDimensions(c.width,c.height))};l.extend(h.prototype,{setPos:function(c,p){this.x=c,this.y=p},setDimensions:function(c,p){this.width=c,this.height=p},toXML:function(c,p){var m=u.createElement(c,"xdr:absoluteAnchor"),v=u.createElement(c,"xdr:pos");v.setAttribute("x",this.x),v.setAttribute("y",this.y),m.appendChild(v);var _=u.createElement(c,"xdr:ext");return _.setAttribute("cx",this.width),_.setAttribute("cy",this.height),m.appendChild(_),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},75:function(r,o,s){var l=s(804),u=function(){};l.extend(u.prototype,{}),r.exports=u},982:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.x=null,this.y=null,this.xOff=null,this.yOff=null,this.width=null,this.height=null,c&&(this.setPos(c.x,c.y,c.xOff,c.yOff),this.setDimensions(c.width,c.height))};l.extend(h.prototype,{setPos:function(c,p,m,v){this.x=c,this.y=p,m!==void 0&&(this.xOff=m),v!==void 0&&(this.yOff=v)},setDimensions:function(c,p){this.width=c,this.height=p},toXML:function(c,p){var m=u.createElement(c,"xdr:oneCellAnchor"),v=u.createElement(c,"xdr:from"),_=u.createElement(c,"xdr:col");_.appendChild(c.createTextNode(this.x));var C=u.createElement(c,"xdr:colOff");C.appendChild(c.createTextNode(this.xOff||0));var x=u.createElement(c,"xdr:row");x.appendChild(c.createTextNode(this.y));var S=u.createElement(c,"xdr:rowOff");S.appendChild(c.createTextNode(this.yOff||0)),v.appendChild(_),v.appendChild(C),v.appendChild(x),v.appendChild(S),m.appendChild(v);var E=u.createElement(c,"xdr:ext");return E.setAttribute("cx",this.width),E.setAttribute("cy",this.height),m.appendChild(E),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},147:function(r,o,s){var l=s(804),u=s(328),h=s(890),c=function(){this.media=null,this.id=l.uniqueId("Picture"),this.pictureId=u.uniqueId("Picture"),this.fill={},this.mediaData=null};c.prototype=new h,l.extend(c.prototype,{setMedia:function(p){this.mediaData=p},setDescription:function(p){this.description=p},setFillType:function(p){this.fill.type=p},setFillConfig:function(p){l.extend(this.fill,p)},getMediaType:function(){return"image"},getMediaData:function(){return this.mediaData},setRelationshipId:function(p){this.mediaData.rId=p},toXML:function(p){var m=u.createElement(p,"xdr:pic"),v=u.createElement(p,"xdr:nvPicPr"),_=u.createElement(p,"xdr:cNvPr",[["id",this.pictureId],["name",this.mediaData.fileName],["descr",this.description||""]]);v.appendChild(_);var C=u.createElement(p,"xdr:cNvPicPr");C.appendChild(u.createElement(p,"a:picLocks",[["noChangeAspect","1"],["noChangeArrowheads","1"]])),v.appendChild(C),m.appendChild(v);var x=u.createElement(p,"xdr:blipFill");x.appendChild(u.createElement(p,"a:blip",[["xmlns:r",u.schemas.relationships],["r:embed",this.mediaData.rId]])),x.appendChild(u.createElement(p,"a:srcRect"));var S=u.createElement(p,"a:stretch");S.appendChild(u.createElement(p,"a:fillRect")),x.appendChild(S),m.appendChild(x);var E=u.createElement(p,"xdr:spPr",[["bwMode","auto"]]),D=u.createElement(p,"a:xfrm");E.appendChild(D);var A=u.createElement(p,"a:prstGeom",[["prst","rect"]]);return E.appendChild(A),m.appendChild(E),this.anchor.toXML(p,m)}}),r.exports=c},527:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.from={xOff:0,yOff:0},this.to={xOff:0,yOff:0},c&&(this.setFrom(c.from.x,c.from.y,c.to.xOff,c.to.yOff),this.setTo(c.to.x,c.to.y,c.to.xOff,c.to.yOff))};l.extend(h.prototype,{setFrom:function(c,p,m,v){this.from.x=c,this.from.y=p,m!==void 0&&(this.from.xOff=m),v!==void 0&&(this.from.yOff=m)},setTo:function(c,p,m,v){this.to.x=c,this.to.y=p,m!==void 0&&(this.to.xOff=m),v!==void 0&&(this.to.yOff=m)},toXML:function(c,p){var m=u.createElement(c,"xdr:twoCellAnchor"),v=u.createElement(c,"xdr:from"),_=u.createElement(c,"xdr:col");_.appendChild(c.createTextNode(this.from.x));var C=u.createElement(c,"xdr:colOff");C.appendChild(c.createTextNode(this.from.xOff));var x=u.createElement(c,"xdr:row");x.appendChild(c.createTextNode(this.from.y));var S=u.createElement(c,"xdr:rowOff");S.appendChild(c.createTextNode(this.from.yOff)),v.appendChild(_),v.appendChild(C),v.appendChild(x),v.appendChild(S);var E=u.createElement(c,"xdr:to"),D=u.createElement(c,"xdr:col");D.appendChild(c.createTextNode(this.to.x));var A=u.createElement(c,"xdr:colOff");A.appendChild(c.createTextNode(this.from.xOff));var P=u.createElement(c,"xdr:row");P.appendChild(c.createTextNode(this.to.y));var M=u.createElement(c,"xdr:rowOff");return M.appendChild(c.createTextNode(this.from.yOff)),E.appendChild(D),E.appendChild(A),E.appendChild(P),E.appendChild(M),m.appendChild(v),m.appendChild(E),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},890:function(r,o,s){var l=s(804),u=s(183),h=s(982),c=s(527),p=function(){this.id=l.uniqueId("Drawing")};l.extend(p.prototype,{createAnchor:function(m,v){switch(v=v||{},v.drawing=this,m){case"absoluteAnchor":this.anchor=new u(v);break;case"oneCellAnchor":this.anchor=new h(v);break;case"twoCellAnchor":this.anchor=new c(v);break}return this.anchor}}),Object.defineProperties(p,{AbsoluteAnchor:{get:function(){return s(183)}},Chart:{get:function(){return s(75)}},OneCellAnchor:{get:function(){return s(982)}},Picture:{get:function(){return s(147)}},TwoCellAnchor:{get:function(){return s(527)}}}),r.exports=p},861:function(r,o,s){var l=s(804),u=s(328),h=s(785),c=function(){this.drawings=[],this.relations=new h,this.id=l.uniqueId("Drawings")};l.extend(c.prototype,{addDrawing:function(p){this.drawings.push(p)},getCount:function(){return this.drawings.length},toXML:function(){var p=u.createXmlDoc(u.schemas.spreadsheetDrawing,"xdr:wsDr"),m=p.documentElement;m.setAttribute("xmlns:a",u.schemas.drawing),m.setAttribute("xmlns:r",u.schemas.relationships),m.setAttribute("xmlns:xdr",u.schemas.spreadsheetDrawing);for(var v=0,_=this.drawings.length;v<_;v++){var C=this.relations.getRelationshipId(this.drawings[v].getMediaData());C||(C=this.relations.addRelation(this.drawings[v].getMediaData(),this.drawings[v].getMediaType())),this.drawings[v].setRelationshipId(C),m.appendChild(this.drawings[v].toXML(p))}return p}}),r.exports=c},753:function(r,o,s){var l=s(804),u=function(){this.state=null,this.xSplit=null,this.ySplit=null,this.activePane="bottomRight",this.topLeftCell=null};l.extend(u.prototype,{freezePane:function(h,c,p){this._freezePane={xSplit:h,ySplit:c,cell:p}},exportXML:function(h){var c=h.createElement("pane");return this.state!==null&&(c.setAttribute("xSplit",this._freezePane.xSplit),c.setAttribute("ySplit",this._freezePane.ySplit),c.setAttribute("topLeftCell",this._freezePane.cell),c.setAttribute("activePane","bottomRight"),c.setAttribute("state","frozen")),c}}),r.exports=u},255:function(r){r.exports={}},864:function(r){r.exports={pixelsToEMUs:function(o){return Math.round(o*914400/96)}}},785:function(r,o,s){var l=s(804),u=s(328),h=s(255),c=function(){this.relations={},this.lastId=1};l.uniqueId("rId"),l.extend(c.prototype,{importData:function(p){this.relations=p.relations,this.lastId=p.lastId},exportData:function(){return{relations:this.relations,lastId:this.lastId}},addRelation:function(p,m){return this.relations[p.id]={id:l.uniqueId("rId"),schema:u.schemas[m],object:p},this.relations[p.id].id},getRelationshipId:function(p){return this.relations[p.id]?this.relations[p.id].id:null},toXML:function(){var p=u.createXmlDoc(u.schemas.relationshipPackage,"Relationships"),m=p.documentElement;return l.each(this.relations,function(v,_){var C=u.createElement(p,"Relationship",[["Id",v.id],["Type",v.schema],["Target",v.object.target||h[_]]]);v.object.targetMode&&C.setAttribute("TargetMode",v.object.targetMode),m.appendChild(C)}),p}}),r.exports=c},349:function(r,o,s){var l=s(804),u=s(328),h=function(){this.strings={},this.stringArray=[],this.id=l.uniqueId("SharedStrings")};l.extend(h.prototype,{addString:function(c){return this.strings[c]=this.stringArray.length,this.stringArray[this.stringArray.length]=c,this.strings[c]},exportData:function(){return this.strings},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"sst"),p=c.documentElement;this.stringArray.reverse();var m=this.stringArray.length;p.setAttribute("count",m),p.setAttribute("uniqueCount",m);var v=c.createElement("si"),_=c.createElement("t");_.appendChild(c.createTextNode("--placeholder--")),v.appendChild(_);for(var C=this.stringArray;m--;){var x=v.cloneNode(!0);x.firstChild.firstChild.nodeValue=C[m],p.appendChild(x)}return c}}),r.exports=h},958:function(r,o,s){var l=s(804),u=s(753),h=s(328),c=function(p){p=p||{},this.pane=p.pane||new u,this.showZeros=null,this.defaultGridColor=null,this.colorId=null,this.rightToLeft=null,this.showFormulas=null,this.showGridLines=null,this.showOutlineSymbols=null,this.showRowColHeaders=null,this.showRuler=null,this.showWhiteSpace=null,this.tabSelected=null,this.topLeftCell=null,this.viewType=null,this.windowProtection=null,this.zoomScale=null,this.zoomScaleNormal=null,this.zoomScalePageLayoutView=null,this.zoomScaleSheetLayoutView=null};l.extend(c.prototype,{freezePane:function(p,m,v){this.pane.state="frozen",this.pane.xSplit=p,this.pane.ySplit=m,this.pane.topLeftCell=v},exportXML:function(p){var m=p.createElement("sheetViews"),v=p.createElement("sheetView");return h.setAttributesOnDoc(v,{workbookViewId:0,showZeros:{v:this.showZeros,type:Boolean},defaultGridColor:{v:this.defaultGridColor,type:Boolean},colorId:this.colorId,rightToLeft:{v:this.rightToLeft,type:Boolean},showFormulas:{v:this.showFormulas,type:Boolean},showGridLines:{v:this.showGridLines,type:Boolean},showOutlineSymbols:{v:this.showOutlineSymbols,type:Boolean},showRowColHeaders:{v:this.showRowColHeaders,type:Boolean},showRuler:{v:this.showRuler,type:Boolean},showWhiteSpace:{v:this.showWhiteSpace,type:Boolean},tabSelected:{v:this.tabSelected,type:Boolean},viewType:this.viewType,windowProtection:{v:this.windowProtection,type:Boolean},zoomScale:{v:this.zoomScale,type:Boolean},zoomScaleNormal:this.zoomScaleNormal,zoomScalePageLayoutView:this.zoomScalePageLayoutView,zoomScaleSheetLayoutView:this.zoomScaleSheetLayoutView}),v.appendChild(this.pane.exportXML(p)),m.appendChild(v),m}}),r.exports=c},747:function(r,o,s){var l=s(804),u=s(328),h=function(){this.id=l.uniqueId("StyleSheet"),this.cellStyles=[{name:"Normal",xfId:"0",builtinId:"0"}],this.defaultTableStyle=!1,this.differentialStyles=[{}],this.masterCellFormats=[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfid:0}],this.masterCellStyles=[{numFmtId:0,fontId:0,fillId:0,borderId:0}],this.fonts=[{}],this.numberFormatters=[],this.fills=[{},{type:"pattern",patternType:"gray125",fgColor:"FF333333",bgColor:"FF333333"}],this.borders=[{top:{},left:{},right:{},bottom:{},diagonal:{}}],this.tableStyles=[]};l.extend(h.prototype,{createSimpleFormatter:function(c){var p=this.masterCellFormats.length,m={id:p};switch(c){case"date":m.numFmtId=14;break}return this.masterCellFormats.push(m),m},createFill:function(c){var p=this.fills.length,m=c;return m.id=p,this.fills.push(m),m},createNumberFormatter:function(c){var p=this.numberFormatters.length+100,m={id:p,formatCode:c};return this.numberFormatters.push(m),m},createFormat:function(c){var p=this.masterCellFormats.length,m={id:p};if(c.protection&&(m.protection=c.protection),c.font&&l.isObject(c.font))m.fontId=this.createFontStyle(c.font).id;else if(c.font){if(l.isNaN(parseInt(c.font,10)))throw"Passing a non-numeric font id is not supported";m.fontId=c.font}if(c.format&&l.isString(c.format))m.numFmtId=this.createNumberFormatter(c.format).id;else if(c.format){if(l.isNaN(parseInt(c.format,10)))throw"Invalid number formatter id";m.numFmtId=c.format}if(c.border&&l.isObject(c.border))m.borderId=this.createBorderFormatter(c.border).id;else if(c.border){if(l.isNaN(parseInt(c.border,10)))throw"Passing a non-numeric border id is not supported";m.borderId=c.border}if(c.fill&&l.isObject(c.fill))m.fillId=this.createFill(c.fill).id;else if(c.fill){if(l.isNaN(parseInt(c.fill,10)))throw"Passing a non-numeric fill id is not supported";m.fillId=c.fill}return c.alignment&&l.isObject(c.alignment)&&(m.alignment=l.pick(c.alignment,"horizontal","justifyLastLine","readingOrder","relativeIndent","shrinkToFit","textRotation","vertical","wrapText")),this.masterCellFormats.push(m),m},createDifferentialStyle:function(c){var p=this.differentialStyles.length,m={id:p};return c.font&&l.isObject(c.font)&&(m.font=c.font),c.border&&l.isObject(c.border)&&(m.border=l.defaults(c.border,{top:{},left:{},right:{},bottom:{},diagonal:{}})),c.fill&&l.isObject(c.fill)&&(m.fill=c.fill),c.alignment&&l.isObject(c.alignment)&&(m.alignment=c.alignment),c.format&&l.isString(c.format)&&(m.numFmt=c.format),this.differentialStyles[p]=m,m},createTableStyle:function(c){this.tableStyles.push(c)},createBorderFormatter:function(c){return l.defaults(c,{top:{},left:{},right:{},bottom:{},diagonal:{},id:this.borders.length}),this.borders.push(c),c},createFontStyle:function(c){var p=this.fonts.length,m={id:p};return c.bold&&(m.bold=!0),c.italic&&(m.italic=!0),c.superscript&&(m.vertAlign="superscript"),c.subscript&&(m.vertAlign="subscript"),c.underline&&(l.indexOf(["double","singleAccounting","doubleAccounting"],c.underline)!==-1?m.underline=c.underline:m.underline=!0),c.strike&&(m.strike=!0),c.outline&&(m.outline=!0),c.shadow&&(m.shadow=!0),c.size&&(m.size=c.size),c.color&&(m.color=c.color),c.fontName&&(m.fontName=c.fontName),this.fonts.push(m),m},exportBorders:function(c){var p=c.createElement("borders");p.setAttribute("count",this.borders.length);for(var m=0,v=this.borders.length;m<v;m++)p.appendChild(this.exportBorder(c,this.borders[m]));return p},exportBorder:function(c,p){var m=c.createElement("border"),v=this,_=function(C){var x=c.createElement(C);return p[C].style&&x.setAttribute("style",p[C].style),p[C].color&&x.appendChild(v.exportColor(c,p[C].color)),x};return m.appendChild(_("left")),m.appendChild(_("right")),m.appendChild(_("top")),m.appendChild(_("bottom")),m.appendChild(_("diagonal")),m},exportColor:function(c,p){var m=c.createElement("color");return l.isString(p)?(m.setAttribute("rgb",p),m):(l.isUndefined(p.tint)||m.setAttribute("tint",p.tint),l.isUndefined(p.auto)||m.setAttribute("auto",!!p.auto),l.isUndefined(p.theme)||m.setAttribute("theme",p.theme),m)},exportMasterCellFormats:function(c){for(var p=u.createElement(c,"cellXfs",[["count",this.masterCellFormats.length]]),m=0,v=this.masterCellFormats.length;m<v;m++){var _=this.masterCellFormats[m];p.appendChild(this.exportCellFormatElement(c,_))}return p},exportMasterCellStyles:function(c){for(var p=u.createElement(c,"cellStyleXfs",[["count",this.masterCellStyles.length]]),m=0,v=this.masterCellStyles.length;m<v;m++){var _=this.masterCellStyles[m];p.appendChild(this.exportCellFormatElement(c,_))}return p},exportCellFormatElement:function(c,p){var m=c.createElement("xf"),v=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","borderId","fillId","fontId","numFmtId","pivotButton","quotePrefix","xfId"],_=l.filter(l.keys(p),function(S){if(l.indexOf(v,S)!==-1)return!0});if(p.alignment){var C=p.alignment;m.appendChild(this.exportAlignment(c,C))}p.protection&&(m.appendChild(this.exportProtection(c,p.protection)),m.setAttribute("applyProtection","1"));for(var x=_.length;x--;)m.setAttribute(_[x],p[_[x]]);return p.fillId&&m.setAttribute("applyFill","1"),p.fontId&&m.setAttribute("applyFont","1"),p.borderId&&m.setAttribute("applyBorder","1"),p.alignment&&m.setAttribute("applyAlignment","1"),p.numFmtId&&m.setAttribute("applyNumberFormat","1"),p.numFmtId!==void 0&&p.xfId===void 0&&m.setAttribute("xfId","0"),m},exportAlignment:function(c,p){for(var m=c.createElement("alignment"),v=l.keys(p),_=0,C=v.length;_<C;_++)m.setAttribute(v[_],p[v[_]]);return m},exportFonts:function(c){var p=c.createElement("fonts");p.setAttribute("count",this.fonts.length);for(var m=0,v=this.fonts.length;m<v;m++){var _=this.fonts[m];p.appendChild(this.exportFont(c,_))}return p},exportFont:function(c,p){var m=c.createElement("font");if(p.size){var v=c.createElement("sz");v.setAttribute("val",p.size),m.appendChild(v)}if(p.fontName){var _=c.createElement("name");_.setAttribute("val",p.fontName),m.appendChild(_)}if(p.bold&&m.appendChild(c.createElement("b")),p.italic&&m.appendChild(c.createElement("i")),p.vertAlign){var C=c.createElement("vertAlign");C.setAttribute("val",p.vertAlign),m.appendChild(C)}if(p.underline){var x=c.createElement("u");p.underline!==!0&&x.setAttribute("val",p.underline),m.appendChild(x)}return p.strike&&m.appendChild(c.createElement("strike")),p.shadow&&m.appendChild(c.createElement("shadow")),p.outline&&m.appendChild(c.createElement("outline")),p.color&&m.appendChild(this.exportColor(c,p.color)),m},exportFills:function(c){var p=c.createElement("fills");p.setAttribute("count",this.fills.length);for(var m=0,v=this.fills.length;m<v;m++){var _=this.fills[m];p.appendChild(this.exportFill(c,_))}return p},exportFill:function(c,p){var m,v=c.createElement("fill");return p.type==="pattern"?(m=this.exportPatternFill(c,p),v.appendChild(m)):p.type==="gradient"&&(m=this.exportGradientFill(c,p),v.appendChild(m)),v},exportGradientFill:function(c,p){var m=c.createElement("gradientFill");p.degree?m.setAttribute("degree",p.degree):p.left&&(m.setAttribute("left",p.left),m.setAttribute("right",p.right),m.setAttribute("top",p.top),m.setAttribute("bottom",p.bottom));var v=c.createElement("stop");v.setAttribute("position",p.start.pureAt||0);var _=c.createElement("color");typeof p.start=="string"||p.start.color?_.setAttribute("rgb",p.start.color||p.start):(p.start.theme,_.setAttribute("theme",p.start.theme));var C=c.createElement("stop"),x=c.createElement("color");return C.setAttribute("position",p.end.pureAt||1),typeof p.start=="string"||p.end.color?x.setAttribute("rgb",p.end.color||p.end):(p.end.theme,x.setAttribute("theme",p.end.theme)),v.appendChild(_),C.appendChild(x),m.appendChild(v),m.appendChild(C),m},exportPatternFill:function(c,p){var m=u.createElement(c,"patternFill",[["patternType",p.patternType]]);p.bgColor||(p.bgColor="FFFFFFFF"),p.fgColor||(p.fgColor="FFFFFFFF");var v=c.createElement("bgColor");l.isString(p.bgColor)?v.setAttribute("rgb",p.bgColor):p.bgColor.theme?v.setAttribute("theme",p.bgColor.theme):v.setAttribute("rgb",p.bgColor.rbg);var _=c.createElement("fgColor");return l.isString(p.fgColor)?_.setAttribute("rgb",p.fgColor):p.fgColor.theme?_.setAttribute("theme",p.fgColor.theme):_.setAttribute("rgb",p.fgColor.rbg),m.appendChild(_),m.appendChild(v),m},exportNumberFormatters:function(c){var p=c.createElement("numFmts");p.setAttribute("count",this.numberFormatters.length);for(var m=0,v=this.numberFormatters.length;m<v;m++){var _=this.numberFormatters[m];p.appendChild(this.exportNumberFormatter(c,_))}return p},exportNumberFormatter:function(c,p){var m=c.createElement("numFmt");return m.setAttribute("numFmtId",p.id),m.setAttribute("formatCode",p.formatCode),m},exportCellStyles:function(c){var p=c.createElement("cellStyles");p.setAttribute("count",this.cellStyles.length);for(var m=0,v=this.cellStyles.length;m<v;m++){var _=this.cellStyles[m];delete _.id;var C=u.createElement(c,"cellStyle");p.appendChild(C);for(var x=l.keys(_),S=x.length;S--;)C.setAttribute(x[S],_[x[S]])}return p},exportDifferentialStyles:function(c){var p=c.createElement("dxfs");p.setAttribute("count",this.differentialStyles.length);for(var m=0,v=this.differentialStyles.length;m<v;m++){var _=this.differentialStyles[m];p.appendChild(this.exportDFX(c,_))}return p},exportDFX:function(c,p){var m=c.createElement("dxf");return p.font&&m.appendChild(this.exportFont(c,p.font)),p.fill&&m.appendChild(this.exportFill(c,p.fill)),p.border&&m.appendChild(this.exportBorder(c,p.border)),p.numFmt&&m.appendChild(this.exportNumberFormatter(c,p.numFmt)),p.alignment&&m.appendChild(this.exportAlignment(c,p.alignment)),m},exportTableStyles:function(c){var p=c.createElement("tableStyles");p.setAttribute("count",this.tableStyles.length),this.defaultTableStyle&&p.setAttribute("defaultTableStyle",this.defaultTableStyle);for(var m=0,v=this.tableStyles.length;m<v;m++)p.appendChild(this.exportTableStyle(c,this.tableStyles[m]));return p},exportTableStyle:function(c,p){var m=c.createElement("tableStyle");m.setAttribute("name",p.name),m.setAttribute("pivot",0);var v=0;return l.each(p,function(_,C){if(C!=="name"){v++;var x=c.createElement("tableStyleElement");x.setAttribute("type",C),x.setAttribute("dxfId",_),m.appendChild(x)}}),m.setAttribute("count",v),m},exportProtection:function(c,p){var m=c.createElement("protection");for(var v in p)p.hasOwnProperty(v)&&m.setAttribute(v,p[v]);return m},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"styleSheet"),p=c.documentElement;return p.appendChild(this.exportNumberFormatters(c)),p.appendChild(this.exportFonts(c)),p.appendChild(this.exportFills(c)),p.appendChild(this.exportBorders(c)),p.appendChild(this.exportMasterCellStyles(c)),p.appendChild(this.exportMasterCellFormats(c)),p.appendChild(this.exportCellStyles(c)),p.appendChild(this.exportDifferentialStyles(c)),this.tableStyles.length&&p.appendChild(this.exportTableStyles(c)),c}}),r.exports=h},496:function(r,o,s){var l=s(804),u=s(328),h=function(c){l.defaults(this,{name:"",displayName:"",dataCellStyle:null,dataDfxId:null,headerRowBorderDxfId:null,headerRowCellStyle:null,headerRowCount:1,headerRowDxfId:null,insertRow:!1,insertRowShift:!1,ref:null,tableBorderDxfId:null,totalsRowBorderDxfId:null,totalsRowCellStyle:null,totalsRowCount:0,totalsRowDxfId:null,tableColumns:[],autoFilter:null,sortState:null,styleInfo:{}}),this.initialize(c)};l.extend(h.prototype,{initialize:function(c){this.displayName=l.uniqueId("Table"),this.name=this.displayName,this.id=this.name,this.tableId=this.id.replace("Table",""),l.extend(this,c)},setReferenceRange:function(c,p){this.ref=[c,p]},setTableColumns:function(c){l.each(c,function(p){this.addTableColumn(p)},this)},addTableColumn:function(c){if(l.isString(c)&&(c={name:c}),!c.name)throw"Invalid argument for addTableColumn - minimum requirement is a name property";this.tableColumns.push(c)},setSortState:function(c){this.sortState=c},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"table"),p=c.documentElement;p.setAttribute("id",this.tableId),p.setAttribute("name",this.name),p.setAttribute("displayName",this.displayName);var m=this.ref[0],v=this.ref[1];if(p.setAttribute("ref",u.positionToLetterRef(m[0],m[1])+":"+u.positionToLetterRef(v[0],v[1])),p.setAttribute("totalsRowCount",this.totalsRowCount),p.setAttribute("headerRowCount",this.headerRowCount),this.headerRowDxfId&&p.setAttribute("headerRowDxfId",this.headerRowDxfId),this.headerRowBorderDxfId&&p.setAttribute("headerRowBorderDxfId",this.headerRowBorderDxfId),!this.ref)throw"Needs at least a reference range";return this.autoFilter||this.addAutoFilter(this.ref[0],this.ref[1]),p.appendChild(this.exportAutoFilter(c)),p.appendChild(this.exportTableColumns(c)),p.appendChild(this.exportTableStyleInfo(c)),c},exportTableColumns:function(c){var p=c.createElement("tableColumns");p.setAttribute("count",this.tableColumns.length);for(var m=this.tableColumns,v=0,_=m.length;v<_;v++){var C=m[v],x=c.createElement("tableColumn");x.setAttribute("id",v+1),x.setAttribute("name",C.name),p.appendChild(x),C.totalsRowFunction&&x.setAttribute("totalsRowFunction",C.totalsRowFunction),C.totalsRowLabel&&x.setAttribute("totalsRowLabel",C.totalsRowLabel)}return p},exportAutoFilter:function(c){var p=c.createElement("autoFilter"),m=this.autoFilter[0],v=this.autoFilter[1];return p.setAttribute("ref",u.positionToLetterRef(m[0],m[1])+":"+u.positionToLetterRef(v[0],v[1]-this.totalsRowCount)),p},exportTableStyleInfo:function(c){var p=this.styleInfo,m=c.createElement("tableStyleInfo");return m.setAttribute("name",p.themeStyle),m.setAttribute("showFirstColumn",p.showFirstColumn?"1":"0"),m.setAttribute("showLastColumn",p.showLastColumn?"1":"0"),m.setAttribute("showColumnStripes",p.showColumnStripes?"1":"0"),m.setAttribute("showRowStripes",p.showRowStripes?"1":"0"),m},addAutoFilter:function(c,p){this.autoFilter=[c,p]}}),r.exports=h},952:function(r,o,s){var l=s(434),u=s(804),h=s(328),c=s(747),p=s(20),m=s(349),v=s(785),_=s(255),C=s(543),x=function(S){this.worksheets=[],this.tables=[],this.drawings=[],this.media={},this.initialize(S)};u.extend(x.prototype,{initialize:function(){this.id=u.uniqueId("Workbook"),this.styleSheet=new c,this.sharedStrings=new m,this.relations=new v,this.relations.addRelation(this.styleSheet,"stylesheet"),this.relations.addRelation(this.sharedStrings,"sharedStrings")},createWorksheet:function(S){return S=S||{},u.defaults(S,{name:"Sheet ".concat(this.worksheets.length+1)}),new p(S)},getStyleSheet:function(){return this.styleSheet},addTable:function(S){this.tables.push(S)},addDrawings:function(S){this.drawings.push(S)},setPrintTitleTop:function(S,E){this.printTitles==null&&(this.printTitles={}),this.printTitles[S]==null&&(this.printTitles[S]={}),this.printTitles[S].top=E},setPrintTitleLeft:function(S,E){this.printTitles==null&&(this.printTitles={}),this.printTitles[S]==null&&(this.printTitles[S]={}),this.printTitles[S].left=String.fromCharCode(64+E)},addMedia:function(S,E,D,A){var P=E.split("."),M=P[P.length-1];if(!A)switch(M.toLowerCase()){case"jpeg":case"jpg":A="image/jpeg";break;case"png":A="image/png";break;case"gif":A="image/gif";break;default:A=null;break}return this.media[E]||(this.media[E]={id:E,data:D,fileName:E,contentType:A,extension:M}),this.media[E]},addWorksheet:function(S){this.relations.addRelation(S,"worksheet"),S.setSharedStringCollection(this.sharedStrings),this.worksheets.push(S)},createContentTypes:function(){var S=h.createXmlDoc(h.schemas.contentTypes,"Types"),E=S.documentElement,D,A;E.appendChild(h.createElement(S,"Default",[["Extension","rels"],["ContentType","application/vnd.openxmlformats-package.relationships+xml"]])),E.appendChild(h.createElement(S,"Default",[["Extension","xml"],["ContentType","application/xml"]]));var P={};for(var M in this.media)this.media.hasOwnProperty(M)&&(P[this.media[M].extension]=this.media[M].contentType);for(var B in P)P.hasOwnProperty(B)&&E.appendChild(h.createElement(S,"Default",[["Extension",B],["ContentType",P[B]]]));for(E.appendChild(h.createElement(S,"Override",[["PartName","/xl/workbook.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"]])),E.appendChild(h.createElement(S,"Override",[["PartName","/xl/sharedStrings.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"]])),E.appendChild(h.createElement(S,"Override",[["PartName","/xl/styles.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"]])),D=0,A=this.worksheets.length;D<A;D++)E.appendChild(h.createElement(S,"Override",[["PartName","/xl/worksheets/sheet"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"]]));for(D=0,A=this.tables.length;D<A;D++)E.appendChild(h.createElement(S,"Override",[["PartName","/xl/tables/table"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"]]));for(D=0,A=this.drawings.length;D<A;D++)E.appendChild(h.createElement(S,"Override",[["PartName","/xl/drawings/drawing"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.drawing+xml"]]));return S},toXML:function(){var S=h.createXmlDoc(h.schemas.spreadsheetml,"workbook"),E=S.documentElement;E.setAttribute("xmlns:r",h.schemas.relationships);for(var D=31,A=h.createElement(S,"sheets"),P=0,M=this.worksheets.length;P<M;P++){var B=S.createElement("sheet");typeof console<"u"&&this.worksheets[P].name.length>D&&console.log("Microsoft Excel requires work sheet names to be less than "+(D+1)+' characters long, work sheet name "'+this.worksheets[P].name+'" is '+this.worksheets[P].name.length+" characters long"),B.setAttribute("name",this.worksheets[P].name),B.setAttribute("sheetId",P+1),B.setAttribute("r:id",this.relations.getRelationshipId(this.worksheets[P])),A.appendChild(B)}E.appendChild(A);var Z=h.createElement(S,"definedNames"),L=0;for(var de in this.printTitles)if(this.printTitles.hasOwnProperty(de)){var be=this.printTitles[de],J=S.createElement("definedName");J.setAttribute("name","_xlnm.Print_Titles"),J.setAttribute("localSheetId",L++);var U="";be.top&&(U+=de+"!$1:$"+be.top,be.left&&(U+=",")),be.left&&(U+=de+"!$A:$"+be.left),J.appendChild(S.createTextNode(U)),Z.appendChild(J)}return E.appendChild(Z),S},createWorkbookRelationship:function(){var S=h.createXmlDoc(h.schemas.relationshipPackage,"Relationships"),E=S.documentElement;return E.appendChild(h.createElement(S,"Relationship",[["Id","rId1"],["Type",h.schemas.officeDocument],["Target","xl/workbook.xml"]])),S},_generateCorePaths:function(S){var E,D;for(_[this.styleSheet.id]="styles.xml",_[this.sharedStrings.id]="sharedStrings.xml",_[this.id]="/xl/workbook.xml",E=0,D=this.tables.length;E<D;E++)S["/xl/tables/table"+(E+1)+".xml"]=this.tables[E].toXML(),_[this.tables[E].id]="/xl/tables/table"+(E+1)+".xml";for(var A in this.media)if(this.media.hasOwnProperty(A)){var P=this.media[A];S["/xl/media/"+A]=P.data,_[A]="/xl/media/"+A}for(E=0,D=this.drawings.length;E<D;E++)S["/xl/drawings/drawing"+(E+1)+".xml"]=this.drawings[E].toXML(),_[this.drawings[E].id]="/xl/drawings/drawing"+(E+1)+".xml",S["/xl/drawings/_rels/drawing"+(E+1)+".xml.rels"]=this.drawings[E].relations.toXML()},_prepareFilesForPackaging:function(S){u.extend(S,{"/[Content_Types].xml":this.createContentTypes(),"/_rels/.rels":this.createWorkbookRelationship(),"/xl/styles.xml":this.styleSheet.toXML(),"/xl/workbook.xml":this.toXML(),"/xl/sharedStrings.xml":this.sharedStrings.toXML(),"/xl/_rels/workbook.xml.rels":this.relations.toXML()}),u.each(S,function(E,D){if(D.indexOf(".xml")!==-1||D.indexOf(".rels")!==-1){E instanceof C?S[D]=E.toString():S[D]=E.xml||new window.XMLSerializer().serializeToString(E);var A=S[D].replace(/xmlns=""/g,"");A=A.replace(/NS[\d]+:/g,""),A=A.replace(/xmlns:NS[\d]+=""/g,""),S[D]=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
`+A}})},generateFiles:function(){var S={};this._generateCorePaths(S);for(var E=0,D=this.worksheets.length;E<D;E++)S["/xl/worksheets/sheet"+(E+1)+".xml"]=this.worksheets[E].toXML(),_[this.worksheets[E].id]="worksheets/sheet"+(E+1)+".xml",S["/xl/worksheets/_rels/sheet"+(E+1)+".xml.rels"]=this.worksheets[E].relations.toXML();return this._prepareFilesForPackaging(S),l.resolve(S)}}),r.exports=x},20:function(r,o,s){var l=s(804),u=s(328),h=s(785),c=s(958),p=function(m){this.relations=null,this.columnFormats=[],this.data=[],this.mergedCells=[],this.columns=[],this.sheetProtection=!1,this._headers=[],this._footers=[],this._tables=[],this._drawings=[],this._rowInstructions={},this._freezePane={},this.hyperlinks=[],this.sheetView=m.sheetView||new c,this.showZeros=null,this.initialize(m)};l.extend(p.prototype,{initialize:function(m){m=m||{},this.name=m.name,this.id=l.uniqueId("Worksheet"),this._timezoneOffset=new Date().getTimezoneOffset()*60*1e3,m.columns&&this.setColumns(m.columns),this.relations=new h},exportData:function(){return{relations:this.relations.exportData(),columnFormats:this.columnFormats,data:this.data,columns:this.columns,mergedCells:this.mergedCells,_headers:this._headers,_footers:this._footers,_tables:this._tables,_rowInstructions:this._rowInstructions,_freezePane:this._freezePane,name:this.name,id:this.id}},importData:function(m){this.relations.importData(m.relations),delete m.relations,l.extend(this,m)},setSharedStringCollection:function(m){this.sharedStrings=m},addTable:function(m){this._tables.push(m),this.relations.addRelation(m,"table")},addDrawings:function(m){this._drawings.push(m),this.relations.addRelation(m,"drawingRelationship")},setRowInstructions:function(m,v){this._rowInstructions[m]=v},setHeader:function(m){if(!l.isArray(m))throw"Invalid argument type - setHeader expects an array of three instructions";this._headers=m},setFooter:function(m){if(!l.isArray(m))throw"Invalid argument type - setFooter expects an array of three instructions";this._footers=m},compilePageDetailPackage:function(m){return m=m||"",["&L",this.compilePageDetailPiece(m[0]||""),"&C",this.compilePageDetailPiece(m[1]||""),"&R",this.compilePageDetailPiece(m[2]||"")].join("")},compilePageDetailPiece:function(m){if(l.isString(m))return'&"-,Regular"'.concat(m);if(l.isObject(m)&&!l.isArray(m)){var v="";if(m.font||m.bold){var _=m.bold?"Bold":"Regular";v+='&"'+(m.font||"-"),v+=","+_+'"'}else v+='&"-,Regular"';return m.underline&&(v+="&U"),m.fontSize&&(v+="&"+m.fontSize),v+=m.text,v}if(l.isArray(m)){var C=this;return l.reduce(m,function(x,S){return x.concat(C.compilePageDetailPiece(S))},"")}},exportHeader:function(m){var v=m.createElement("oddHeader");return v.appendChild(m.createTextNode(this.compilePageDetailPackage(this._headers))),v},exportFooter:function(m){var v=m.createElement("oddFooter");return v.appendChild(m.createTextNode(this.compilePageDetailPackage(this._footers))),v},_buildCache:function(m){var v=m.createElement("c"),_=m.createElement("v");_.appendChild(m.createTextNode("--temp--")),v.appendChild(_);var C=m.createElement("c"),x=m.createElement("f");x.appendChild(m.createTextNode("--temp--")),C.appendChild(x);var S=m.createElement("c");S.setAttribute("t","s");var E=m.createElement("v");return E.appendChild(m.createTextNode("--temp--")),S.appendChild(E),{number:v,date:v,string:S,formula:C}},collectSharedStrings:function(){for(var m=this.data,v={},_=0,C=m.length;_<C;_++)for(var x=m[_],S=x.length,E=0;E<S;E++){var D=x[E],A=D&&D.metadata||{};D&&typeof D=="object"&&(D=D.value),A.type||typeof D=="number"&&(A.type="number"),(A.type==="text"||!A.type)&&typeof v[D]>"u"&&(v[D]=!0)}return l.keys(v)},toXML:function(){var m=this.data,v=this.columns||[],_=u.createXmlDoc(u.schemas.spreadsheetml,"worksheet"),C=_.documentElement,x,S,E;C.setAttribute("xmlns:r",u.schemas.relationships),C.setAttribute("xmlns:mc",u.schemas.markupCompat);var D=0,A=u.createElement(_,"sheetData"),P=this._buildCache(_);for(E=0,S=m.length;E<S;E++){var M=m[E],B=M.length;D=B>D?B:D;for(var Z=_.createElement("row"),L=0;L<B;L++){v[L]=v[L]||{};var de=M[L],be,J=de&&de.metadata||{};switch(de&&typeof de=="object"&&(de=de.value),J.type||typeof de=="number"&&(J.type="number"),J.type){case"number":be=P.number.cloneNode(!0),be.firstChild.firstChild.nodeValue=de;break;case"date":be=P.date.cloneNode(!0),be.firstChild.firstChild.nodeValue=25569+(de-this._timezoneOffset)/864e5;break;case"formula":be=P.formula.cloneNode(!0),be.firstChild.firstChild.nodeValue=de;break;case"text":default:var U;typeof this.sharedStrings.strings[de]<"u"?U=this.sharedStrings.strings[de]:U=this.sharedStrings.addString(de),be=P.string.cloneNode(!0),be.firstChild.firstChild.nodeValue=U;break}J.style?be.setAttribute("s",J.style):this._rowInstructions[E]&&this._rowInstructions[E].style!==void 0&&be.setAttribute("s",this._rowInstructions[E].style),be.setAttribute("r",u.positionToLetterRef(L+1,E+1)),Z.appendChild(be)}if(Z.setAttribute("r",E+1),this._rowInstructions[E]){var F=this._rowInstructions[E];F.height!==void 0&&(Z.setAttribute("customHeight","1"),Z.setAttribute("ht",F.height)),F.style!==void 0&&(Z.setAttribute("customFormat","1"),Z.setAttribute("s",F.style))}A.appendChild(Z)}if(D!==0?C.appendChild(u.createElement(_,"dimension",[["ref",u.positionToLetterRef(1,1)+":"+u.positionToLetterRef(D,m.length)]])):C.appendChild(u.createElement(_,"dimension",[["ref",u.positionToLetterRef(1,1)]])),C.appendChild(this.sheetView.exportXML(_)),this.columns.length&&C.appendChild(this.exportColumns(_)),C.appendChild(A),this.sheetProtection&&C.appendChild(this.sheetProtection.exportXML(_)),this.hyperlinks.length>0){var ae=_.createElement("hyperlinks"),Ke=this.hyperlinks;for(x=0,S=Ke.length;x<S;x++){var Ie=_.createElement("hyperlink"),xe=Ke[x];Ie.setAttribute("ref",xe.cell),xe.id=u.uniqueId("hyperlink"),this.relations.addRelation({id:xe.id,target:xe.location,targetMode:xe.targetMode||"External"},"hyperlink"),Ie.setAttribute("r:id",this.relations.getRelationshipId(xe)),ae.appendChild(Ie)}C.appendChild(ae)}if(this.mergedCells.length>0){var Oe=_.createElement("mergeCells");for(x=0,S=this.mergedCells.length;x<S;x++){var De=_.createElement("mergeCell");De.setAttribute("ref",this.mergedCells[x][0]+":"+this.mergedCells[x][1]),Oe.appendChild(De)}C.appendChild(Oe)}if(this.exportPageSettings(_,C),this._headers.length>0||this._footers.length>0){var ne=_.createElement("headerFooter");this._headers.length>0&&ne.appendChild(this.exportHeader(_)),this._footers.length>0&&ne.appendChild(this.exportFooter(_)),C.appendChild(ne)}for(x=0,S=this._drawings.length;x<S;x++){var pe=_.createElement("drawing");pe.setAttribute("r:id",this.relations.getRelationshipId(this._drawings[x])),C.appendChild(pe)}if(this._tables.length>0){var Ve=_.createElement("tableParts");for(Ve.setAttribute("count",this._tables.length),x=0,S=this._tables.length;x<S;x++){var Ye=_.createElement("tablePart");Ye.setAttribute("r:id",this.relations.getRelationshipId(this._tables[x])),Ve.appendChild(Ye)}C.appendChild(Ve)}return _},exportColumns:function(m){for(var v=u.createElement(m,"cols"),_=0,C=this.columns.length;_<C;_++){var x=this.columns[_],S=u.createElement(m,"col",[["min",x.min||_+1],["max",x.max||_+1]]);x.hidden&&S.setAttribute("hidden",1),x.bestFit&&S.setAttribute("bestFit",1),(x.customWidth||x.width)&&S.setAttribute("customWidth",1),x.width?S.setAttribute("width",x.width):S.setAttribute("width",9.140625),v.appendChild(S)}return v},exportPageSettings:function(m,v){if(this._margin){var _=.7,C=this._margin.left?this._margin.left:_,x=this._margin.right?this._margin.right:_,S=this._margin.top?this._margin.top:_,E=this._margin.bottom?this._margin.bottom:_;_=.3;var D=this._margin.header?this._margin.header:_,A=this._margin.footer?this._margin.footer:_;v.appendChild(u.createElement(m,"pageMargins",[["top",S],["bottom",E],["left",C],["right",x],["header",D],["footer",A]]))}this._orientation&&v.appendChild(u.createElement(m,"pageSetup",[["orientation",this._orientation]]))},setPageOrientation:function(m){this._orientation=m},setPageMargin:function(m){this._margin=m},setColumns:function(m){this.columns=m},setData:function(m){this.data=m},mergeCells:function(m,v){this.mergedCells.push([m,v])},freezePane:function(m,v,_){this.sheetView.freezePane(m,v,_)},setColumnFormats:function(m){this.columnFormats=m}}),r.exports=p},543:function(r,o,s){var l=s(804),u=function(h,c){this.documentElement=this.createElement(c),this.documentElement.setAttribute("xmlns",h)};l.extend(u.prototype,{createElement:function(h){return new u.XMLNode({nodeName:h})},createTextNode:function(h){return new u.TextNode(h)},toString:function(){return this.documentElement.toString()}}),u.Node=function(){},u.Node.Create=function(h){switch(h.type){case"XML":return new u.XMLNode(h);case"TEXT":return new u.TextNode(h.nodeValue)}},u.TextNode=function(h){this.nodeValue=h},l.extend(u.TextNode.prototype,{toJSON:function(){return{nodeValue:this.nodeValue,type:"TEXT"}},toString:function(){return l.escape(this.nodeValue)}}),u.XMLNode=function(h){if(this.nodeName=h.nodeName,this.children=[],this.nodeValue=h.nodeValue||"",this.attributes={},h.children)for(var c=0,p=h.children.length;c<p;c++)this.appendChild(u.Node.Create(h.children[c]));if(h.attributes)for(var m in h.attributes)h.attributes.hasOwnProperty(m)&&this.setAttribute(m,h.attributes[m])},l.extend(u.XMLNode.prototype,{toString:function(){var h="<"+this.nodeName;for(var c in this.attributes)this.attributes.hasOwnProperty(c)&&(h=h+" "+c+'="'+l.escape(this.attributes[c])+'"');for(var p="",m=0,v=this.children.length;m<v;m++)p+=this.children[m].toString();return p?h+=">"+p+"</"+this.nodeName+">":h+="/>",h},toJSON:function(){for(var h=[],c=0,p=this.children.length;c<p;c++)h.push(this.children[c].toJSON());return{nodeName:this.nodeName,children:h,nodeValue:this.nodeValue,attributes:this.attributes,type:"XML"}},setAttribute:function(h,c){if(c===null){delete this.attributes[h],delete this[h];return}this.attributes[h]=c,this[h]=c},appendChild:function(h){this.children.push(h),this.firstChild=this.children[0]},cloneNode:function(){return new u.XMLNode(this.toJSON())}}),r.exports=u},328:function(r,o,s){var l=s(543),u=s(804),h={_idSpaces:{},uniqueId:function(c){return this._idSpaces[c]||(this._idSpaces[c]=1),this._idSpaces[c]++},createXmlDoc:function(c,p){return new l(c||null,p,null)},createElement:function(c,p,m){var v=c.createElement(p);m=m||[];for(var _=m.length;_--;)v.setAttribute(m[_][0],m[_][1]);return v},setAttributesOnDoc:function(c,p){u.forEach(p,function(m,v){if(u.isPlainObject(m))if(m.v!==null&&m.v!==void 0)switch(m.type){case Boolean:m=m.v?"1":"0";break}else m=null;m!=null&&c.setAttribute(v,m)})},LETTER_REFS:{},positionToLetterRef:function(c,p){var m=1,v,_=c,C="",x="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(this.LETTER_REFS[c])return this.LETTER_REFS[c].concat(p);for(;_>0;)_-=Math.pow(26,m-1),v=_%Math.pow(26,m),_-=v,v=v/Math.pow(26,m-1),C=x.charAt(v)+C,m+=1;return this.LETTER_REFS[c]=C,C.concat(p)},schemas:{worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",sharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",stylesheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",relationships:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",relationshipPackage:"http://schemas.openxmlformats.org/package/2006/relationships",contentTypes:"http://schemas.openxmlformats.org/package/2006/content-types",spreadsheetml:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",markupCompat:"http://schemas.openxmlformats.org/markup-compatibility/2006",x14ac:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac",officeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",package:"http://schemas.openxmlformats.org/package/2006/relationships",table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",spreadsheetDrawing:"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing",drawing:"http://schemas.openxmlformats.org/drawingml/2006/main",drawingRelationship:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",chart:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink"}};r.exports=h},450:function(r,o,s){var l=s(952),u=s(496),h=s(804),c=function(p){this.workbook=new l,this.stylesheet=this.workbook.getStyleSheet(),this.columns={},this.predefinedStyles={},this.predefinedFormatters={date:this.stylesheet.createSimpleFormatter("date"),currency:this.stylesheet.createFormat({format:"$ #,##0.00;$ #,##0.00;-",font:{color:"FFE9F50A"}}),header:this.stylesheet.createFormat({font:{bold:!0,underline:!0,color:{theme:3}},alignment:{horizontal:"center"}})},p!=null?this.worksheet=this.workbook.createWorksheet(p):this.worksheet=this.workbook.createWorksheet(),this.workbook.addWorksheet(this.worksheet),this.worksheet.setPageOrientation("landscape"),this.table=new u,this.table.styleInfo.themeStyle="TableStyleLight1",this.worksheet.addTable(this.table),this.workbook.addTable(this.table)};h.extend(c.prototype,{setHeader:function(){this.worksheet.setHeader.apply(this.worksheet,arguments)},setFooter:function(){this.worksheet.setFooter.apply(this.worksheet,arguments)},prepare:function(){return this.workbook},setData:function(p){this.worksheet.setData(p),this.data=p,this.table.setReferenceRange([1,1],[this.columns.length,p.length])},setColumns:function(p){this.columns=p,this.worksheet.setColumns(p),this.table.setTableColumns(p),this.table.setReferenceRange([1,1],[this.columns.length,this.data.length])},getWorksheet:function(){return this.worksheet}}),r.exports=c},133:function(r,o,s){r.exports={BasicReport:s(450)}},396:function(r,o,s){var l=s(804),u=s(952),h=s(395),c={createWorkbook:function(){return new u},config:{forceUIThread:!1},createFile:function(p,m){var v=new h;return p.generateFiles().then(function(_){return l.each(_,function(C,x){x=x.substr(1),x.indexOf(".xml")!==-1||x.indexOf(".rel")!==-1?v.file(x,C,{base64:!1}):v.file(x,C,{base64:!0,binary:!0})}),v.generateAsync(l.defaults(m||{},{type:"base64"}))})}};r.exports=c},351:function(r,o,s){var l=r.exports={Drawings:s(861),Drawing:s(890),Pane:s(753),Paths:s(255),Positioning:s(864),RelationshipManager:s(785),SharedStrings:s(349),SheetView:s(958),StyleSheet:s(747),Table:s(496),util:s(328),Workbook:s(952),Worksheet:s(20),XMLDOM:s(543),Builder:s(396),Template:s(133)};try{typeof window<"u"&&(window.ExcelBuilder=l)}catch{console.info("Not attaching EB to window")}},395:function(r){r.exports=ZC()},804:function(r){r.exports=QC()},434:function(r){r.exports=JC()}},t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}},s=!0;try{a[r](o,o.exports,e),s=!1}finally{s&&delete t[r]}return o.exports}var n=typeof n<"u"?n:"";return e.ab=n+"/",e(351)}();const Iv=eh(kv),ey=pl({__proto__:null,default:Iv},[kv]),ty=a=>a,iy=(a,t,e,n,r)=>({value:typeof a=="string"&&/\d/g.test(a)?ny(a,t,r):a,metadata:{style:e}});function ny(a,t,e){let n=a;if(typeof a=="string"&&a){const r=Ko("decimalSeparator",t,e,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR),o=parseFloat(r===","?a.replace(/[^0-9\,\-]+/g,"").replace(",","."):a.replace(/[^\d\.\-]/g,""));n=isNaN(o)?a:o}return n}function ry(a,t,e,n,r=!0){const o=za(e);let s,l=ty;return o===ie.number&&r&&(s=Ef(a,t,e,n,"cell").stylesheetFormatter.id,l=iy),{stylesheetFormatterId:s,getDataValueParser:l}}function oy(a,t,e){var n,r;return(r=(n=a==null?void 0:a[e])===null||n===void 0?void 0:n[t.field])!==null&&r!==void 0?r:0}function sy(a,t,e){var n;let r;if(e==="group")switch(a.groupTotalsFormatter){case Ti.avgTotalsCurrency:case Ti.avgTotalsDollar:case Ti.sumTotalsCurrency:case Ti.sumTotalsCurrencyColored:case Ti.sumTotalsDollar:case Ti.sumTotalsDollarBold:case Ti.sumTotalsDollarColored:case Ti.sumTotalsDollarColoredBold:r="currency";break;case Ti.avgTotalsPercentage:r="percent";break;case Ti.avgTotals:case Ti.minTotals:case Ti.maxTotals:case Ti.sumTotals:case Ti.sumTotalsColored:case Ti.sumTotalsBold:default:r="decimal";break}else if(a.formatter===ln.multiple&&Array.isArray((n=a.params)===null||n===void 0?void 0:n.formatters)){r="decimal";for(const o of a.params.formatters)if(r=Dv(o),r!=="decimal")break}else r=Dv(a.formatter);return un(a,t,r,e)}function Dv(a){let t;switch(a){case ln.currency:case ln.dollar:case ln.dollarColored:case ln.dollarColoredBold:t="currency";break;case ln.percent:case ln.percentComplete:case ln.percentCompleteBar:case ln.percentCompleteBarWithText:case ln.percentSymbol:t="percent";break;case ln.decimal:default:t="decimal";break}return t}function Ef(a,t,e,n,r){var o;let s="",l="",u;const h=za(e);if(r==="group")switch(e.groupTotalsFormatter){case Ti.avgTotals:case Ti.avgTotalsCurrency:case Ti.avgTotalsDollar:case Ti.avgTotalsPercentage:l="avg";break;case Ti.minTotals:l="min";break;case Ti.maxTotals:l="max";break;case Ti.sumTotals:case Ti.sumTotalsBold:case Ti.sumTotalsColored:case Ti.sumTotalsCurrency:case Ti.sumTotalsCurrencyColored:case Ti.sumTotalsDollar:case Ti.sumTotalsDollarColoredBold:case Ti.sumTotalsDollarColored:case Ti.sumTotalsDollarBold:l="sum";break;default:u=t.numberFormatter;break}else switch(h){case ie.number:switch(e.formatter){case ln.multiple:if(Array.isArray((o=e.params)===null||o===void 0?void 0:o.formatters))for(const c of e.params.formatters){const{stylesheetFormatter:p}=Ef(a,t,{...e,formatter:c},n,r);if(p!==t.numberFormatter){u=p;break}}u||(u=t.numberFormatter);break;case ln.currency:case ln.decimal:case ln.dollar:case ln.dollarColored:case ln.dollarColoredBold:case ln.percent:case ln.percentComplete:case ln.percentCompleteBar:case ln.percentCompleteBarWithText:case ln.percentSymbol:s=Pv(e,n,"cell");break;default:u=t.numberFormatter;break}break}return!u&&(e.formatter||e.groupTotalsFormatter)&&(s=Pv(e,n,r,l),t.hasOwnProperty(s)||(t[s]=a.createFormat({format:s})),u=t[s]),{stylesheetFormatter:u,groupType:l}}function Rv(a){const[t,e,n,r,o,s,l,u]=(a==null?void 0:a.match(/^([^\d\(\-]*)([\(]?)([^\d]*)([\-]?[\w]]?[\d\s]*[.,\d]*[\d]*[^)\s\%]?)([^\d.,)]*)([\)]?)([^\d]*)$/i))||[],h=(o||"").replace(/1/g,"0").replace(/[2]/g,"#");return[Gu(e??""),n??"",Gu(r??""),h,Gu(s??""),l??"",Gu(u??"")].join("").replace(",",",")}function Pv(a,t,e,n=""){let r="",o="",s="";const{minDecimal:l,maxDecimal:u,thousandSeparator:h}=sy(a,t,e),p=parseFloat(`${h?"2220":"0"}.${ly(l,u)}`);return e==="group"&&a.groupTotalsFormatter?(o=or(a.groupTotalsFormatter({[n]:{[a.field]:p}},a,t)),s=or(a.groupTotalsFormatter({[n]:{[a.field]:-p}},a,t))):a.formatter&&(o=or(a.formatter(0,0,p,a,{},t)),s=or(a.formatter(0,0,-p,a,{},t))),o&&s&&(r=Rv(o)+";"+Rv(s)),r}function Gu(a){return a&&`"${a}"`}function ly(a,t){return Fv("1",a)+Fv("2",t-a)}function Fv(a,t){let e="";for(let n=0;n<t;n++)e+=a;return e}const wl=Iv||ey,ay={filename:"export",format:dn.xlsx};class dy{constructor(){this._fileFormat=dn.xlsx,this._columnHeaders=[],this._hasColumnTitlePreHeader=!1,this._hasGroupedItems=!1,this._pubSubService=null,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},this.className="ExcelExportService"}get _datasetIdPropName(){var t,e;return(e=(t=this._gridOptions)===null||t===void 0?void 0:t.datasetIdPropertyName)!==null&&e!==void 0?e:"id"}get _dataView(){var t;return(t=this._grid)===null||t===void 0?void 0:t.getData()}get _gridOptions(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getOptions())||{}}get stylesheet(){return this._stylesheet}get stylesheetFormats(){return this._stylesheetFormats}get groupTotalExcelFormats(){return this._groupTotalExcelFormats}get regularCellExcelFormats(){return this._regularCellExcelFormats}dispose(){var t;(t=this._pubSubService)===null||t===void 0||t.unsubscribeAll()}init(t,e){var n,r,o;if(this._grid=t,this._pubSubService=e.get("PubSubService"),this._locales=(r=(n=this._gridOptions)===null||n===void 0?void 0:n.locales)!==null&&r!==void 0?r:je.locales,this._translaterService=(o=this._gridOptions)===null||o===void 0?void 0:o.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToExcel(t){var e;if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableExcelExport"?');return(e=this._pubSubService)===null||e===void 0||e.publish("onBeforeExportToExcel",!0),this._excelExportOptions=fo({...ay,...this._gridOptions.excelExportOptions,...t}),this._fileFormat=this._excelExportOptions.format||dn.xlsx,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},new Promise(n=>{const r={name:this._excelExportOptions.sheetName||"Sheet1"};this._workbook=wl.Workbook?new wl.Workbook:wl.createWorkbook(),this._sheet=wl.Worksheet?new wl.Worksheet(r):this._workbook.createWorksheet(r),this._stylesheet=this._workbook.getStyleSheet();const o=this._stylesheet.createFormat({font:{bold:!0}}),s=this._stylesheet.createFormat({format:"@"}),l=this._stylesheet.createFormat({format:"0"});this._stylesheetFormats={boldFormatter:o,numberFormatter:l,stringFormatter:s},this._sheet.setColumnFormats([o]);const u=this.getDataOutput();setTimeout(async()=>{var h,c,p,m,v,_,C;!((c=(h=this._gridOptions)===null||h===void 0?void 0:h.excelExportOptions)===null||c===void 0)&&c.customExcelHeader&&this._gridOptions.excelExportOptions.customExcelHeader(this._workbook,this._sheet);const x=((p=this._grid)===null||p===void 0?void 0:p.getColumns())||[];this._sheet.setColumns(this.getColumnStyles(x));const S=this._sheet.data;let E=S;Array.isArray(S)&&Array.isArray(u)&&(E=this._sheet.data.concat(u)),this._sheet.setData(E),this._workbook.addWorksheet(this._sheet);const D=(v=(m=wl.Builder)===null||m===void 0?void 0:m.createFile)!==null&&v!==void 0?v:wl.createFile;let A=(_=this._excelExportOptions)===null||_===void 0?void 0:_.mimeType;A===void 0&&(A=this._fileFormat===dn.xls?"application/vnd.ms-excel":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");const P=A===""?{type:"blob"}:{type:"blob",mimeType:A},M=await D(this._workbook,P),B={filename:`${this._excelExportOptions.filename}.${this._fileFormat}`,format:this._fileFormat};this.startDownloadFile({...B,blob:M,data:this._sheet.data}),(C=this._pubSubService)===null||C===void 0||C.publish("onAfterExportToExcel",B),n(!0)})})}getExcelColumnNameByIndex(t){const e="ZABCDEFGHIJKLMNOPQRSTUVWXY";let n=Math.floor(t/26);const r=Math.floor(t%26);return r===0&&n--,t>26?this.getExcelColumnNameByIndex(n)+e[r]:e[r]+""}startDownloadFile(t){if(typeof navigator.msSaveOrOpenBlob=="function")navigator.msSaveOrOpenBlob(t.blob,t.filename);else{const e=document.createElement("a"),n=URL.createObjectURL(t.blob);e&&document&&(e.textContent="download",e.href=n,e.setAttribute("download",t.filename),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e))}}getDataOutput(){var t,e;const n=((t=this._grid)===null||t===void 0?void 0:t.getColumns())||[],r=[],o=(e=this._gridOptions)===null||e===void 0?void 0:e.excelExportOptions,s=o==null?void 0:o.columnHeaderStyle;let l=this._stylesheetFormats.boldFormatter.id;if(s&&(l=this._stylesheet.createFormat(s).id),this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping){const u=this._stylesheet.createFormat({alignment:{horizontal:"center"},font:{bold:!0}});r.push(this.getColumnGroupedHeaderTitlesData(n,{style:u==null?void 0:u.id})),this._hasColumnTitlePreHeader=!0}return r.push(this.getColumnHeaderData(n,{style:l})),this.pushAllGridRowDataToArray(r,n),r}getColumnStyles(t){var e,n,r;const o=this._dataView.getGrouping(),s=[];return Array.isArray(o)&&o.length>0&&s.push({bestFit:!0,columnStyles:(r=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.excelExportOptions)===null||n===void 0?void 0:n.customColumnWidth)!==null&&r!==void 0?r:10}),t.forEach(l=>{var u,h,c,p,m,v,_;const C=(u=l.excludeFromExport)!==null&&u!==void 0?u:!1;(l.width===void 0||l.width>0)&&!C&&s.push({bestFit:!0,width:(_=(p=(h=l.exportColumnWidth)!==null&&h!==void 0?h:(c=l.excelExportOptions)===null||c===void 0?void 0:c.width)!==null&&p!==void 0?p:(v=(m=this._gridOptions)===null||m===void 0?void 0:m.excelExportOptions)===null||v===void 0?void 0:v.customColumnWidth)!==null&&_!==void 0?_:10})}),s}getColumnGroupedHeaderTitlesData(t,e){let n=[];this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(t)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0&&(n=this._groupedColumnHeaders.map(s=>({value:s.title,metadata:e})));let r=0;const o=this._groupedColumnHeaders.length;for(let s=0;s<o;s++)if(s+1===o||s+1<o&&this._groupedColumnHeaders[s].title!==this._groupedColumnHeaders[s+1].title){const l=this.getExcelColumnNameByIndex(r+1),u=this.getExcelColumnNameByIndex(s+1);this._sheet.mergeCells(`${l}1`,`${u}1`),r=s+1}return n}getColumnHeaderData(t,e){let n=[];this._columnHeaders=this.getColumnHeaders(t)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0&&(n=this._columnHeaders.map(o=>({value:or(o.title),metadata:e})));const r=this.getGroupColumnTitle();return r&&n.unshift({value:r,metadata:e}),n}getGroupColumnTitle(){var t;let e=this._excelExportOptions.groupingColumnHeaderTitle;!e&&this._gridOptions.enableTranslate&&(!((t=this._translaterService)===null||t===void 0)&&t.translate)?e=this._translaterService.translate(`${ho(this._gridOptions)}GROUP_BY`):e||(e=this._locales&&this._locales.TEXT_GROUP_BY);const n=this._dataView.getGrouping();return Array.isArray(n)&&n.length>0?(this._hasGroupedItems=!0,e):(this._hasGroupedItems=!1,null)}getColumnGroupedHeaderTitles(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r;let o="";n.columnGroupKey&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)?o=this._translaterService.translate(n.columnGroupKey):o=n.columnGroup||"";const s=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!s&&e.push({key:n.field||n.id,title:o||""})}),e}getColumnHeaders(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r;let o="";(n.nameKey||n.nameKey)&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)?o=this._translaterService.translate(n.nameKey||n.nameKey):o=n.name||vl(n.field);const s=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!s&&e.push({key:(n.field||n.id)+"",title:o})}),e}pushAllGridRowDataToArray(t,e){const n=this._dataView.getLength();for(let r=0;r<n;r++){const o=this._dataView.getItem(r);o&&!o.hasOwnProperty("getItem")&&(o[this._datasetIdPropName]!==null&&o[this._datasetIdPropName]!==void 0?t.push(this.readRegularRowData(e,r,o)):this._hasGroupedItems&&o.__groupTotals===void 0?t.push([this.readGroupedRowTitle(o)]):o.__groupTotals&&t.push(this.readGroupedTotalRows(e,o)))}return t}readRegularRowData(t,e,n){var r,o,s,l,u,h;let c=0;const p=[],m=t.length;let v=1,_=0;const C=this._dataView.getItemMetadata(e);for(let x=0;x<m;x++){const S=t[x];if(S.excludeFromExport)continue;this._hasGroupedItems&&c===0&&p.push("");let E=1,D;if(C!=null&&C.columns){const A=C.columns,P=A[S.id]||A[x];!isNaN(v)&&+v>1||v==="*"&&x>0||(v=(r=P==null?void 0:P.colspan)!==null&&r!==void 0?r:1),v==="*"?E=t.length-x:(E=v,S.id in A&&(D=S.id,_=x))}if(v==="*"&&x>0||!isNaN(v)&&+v>1&&S.id!==D){const A=e+(this._hasColumnTitlePreHeader?3:2);if(typeof v=="number"&&E-1===1){const P=this.getExcelColumnNameByIndex(_+1),M=this.getExcelColumnNameByIndex(x+1);this._sheet.mergeCells(`${P}${A}`,`${M}${A}`),p.push("")}else if(v==="*"&&E===1){const P=this.getExcelColumnNameByIndex(x+1);this._sheet.mergeCells(`A${A}`,`${P}${A}`)}else p.push("");typeof v=="number"&&!isNaN(v)&&+v>1&&(E=v--)}else{let A="";const P=za(S),M={...this._excelExportOptions};if(S.exportWithFormatter!==!1&&nh(P)&&(M.exportWithFormatter=!0),A=wh(e,x,S,n,this._grid,M),!this._regularCellExcelFormats.hasOwnProperty(S.id)){const L=(s=(o=S.excelExportOptions)===null||o===void 0?void 0:o.autoDetectCellFormat)!==null&&s!==void 0?s:(l=this._excelExportOptions)===null||l===void 0?void 0:l.autoDetectCellFormat,de=ry(this._stylesheet,this._stylesheetFormats,S,this._grid,L);!((u=S.excelExportOptions)===null||u===void 0)&&u.style&&(de.stylesheetFormatterId=this._stylesheet.createFormat(S.excelExportOptions.style).id),!((h=S.excelExportOptions)===null||h===void 0)&&h.valueParserCallback&&(de.getDataValueParser=S.excelExportOptions.valueParserCallback),this._regularCellExcelFormats[S.id]=de}typeof A=="string"&&(S.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(A=or(A));const{stylesheetFormatterId:B,getDataValueParser:Z}=this._regularCellExcelFormats[S.id];A=Z(A,S,B,this._stylesheet,this._gridOptions),p.push(A),c++}}return p}readGroupedRowTitle(t){const e=or(t.title);if(this._excelExportOptions&&this._excelExportOptions.addGroupIndentation){const n=this._excelExportOptions&&this._excelExportOptions.groupCollapsedSymbol||"⮞",r=this._excelExportOptions&&this._excelExportOptions.groupExpandedSymbol||"⮟";return(t.collapsed?n:r)+" "+Wa(5*t.level)+e}return e}readGroupedTotalRows(t,e){const r=[this._excelExportOptions.groupingAggregatorRowText||""];return t.forEach(o=>{var s,l,u,h,c,p,m,v;let _="";const C=za(o),x=o.excludeFromExport||!1;o.exportCustomGroupTotalsFormatter&&(_=o.exportCustomGroupTotalsFormatter(e,o,this._grid));const S=(l=(s=o.excelExportOptions)===null||s===void 0?void 0:s.autoDetectCellFormat)!==null&&l!==void 0?l:(u=this._excelExportOptions)===null||u===void 0?void 0:u.autoDetectCellFormat;if(C===ie.number&&S!==!1){let E=this._groupTotalExcelFormats[o.id];E!=null&&E.groupType||(E=Ef(this._stylesheet,this._stylesheetFormats,o,this._grid,"group"),!((h=o.groupTotalsExcelExportOptions)===null||h===void 0)&&h.style&&(E.stylesheetFormatter=this._stylesheet.createFormat(o.groupTotalsExcelExportOptions.style)),this._groupTotalExcelFormats[o.id]=E);const D=(p=(c=o.groupTotalsExcelExportOptions)===null||c===void 0?void 0:c.valueParserCallback)!==null&&p!==void 0?p:oy;((m=e[E.groupType])===null||m===void 0?void 0:m[o.field])!==void 0&&(_={value:D(e,o,E.groupType,this._stylesheet),metadata:{style:(v=E.stylesheetFormatter)===null||v===void 0?void 0:v.id}})}else o.groupTotalsFormatter&&(_=o.groupTotalsFormatter(e,o,this._grid));typeof _=="string"&&(o.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(_=or(_)),(o.width===void 0||o.width>0)&&!x&&r.push(_)}),r}}class uy{constructor(){this._cellType="slick-cell",this._rxjs=null,this._sharedService=null,this._defaultOptions={className:"slick-custom-tooltip",offsetLeft:0,offsetRight:0,offsetTopBottom:4,hideArrow:!1,regularTooltipWhiteSpace:"pre-line",whiteSpace:"normal"},this.name="CustomTooltip",this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get cancellablePromise(){return this._cancellablePromise}get cellAddonOptions(){return this._cellAddonOptions}get className(){var t,e;return(e=(t=this._cellAddonOptions)===null||t===void 0?void 0:t.className)!==null&&e!==void 0?e:"slick-custom-tooltip"}get dataView(){return this._grid.getData()||{}}get gridOptions(){return this._grid.getOptions()||{}}get gridUid(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getUID())||""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get tooltipElm(){return this._tooltipElm}addRxJsResource(t){this._rxjs=t}init(t,e){var n,r;this._grid=t,this._rxjs=e.get("RxJsFacade"),this._sharedService=e.get("SharedService"),this._addonOptions={...this._defaultOptions,...(r=(n=this._sharedService)===null||n===void 0?void 0:n.gridOptions)===null||r===void 0?void 0:r.customTooltip},this._eventHandler.subscribe(t.onMouseEnter,this.handleOnMouseEnter.bind(this)).subscribe(t.onHeaderMouseEnter,(o,s)=>this.handleOnHeaderMouseEnterByType(o,s,"slick-header-column")).subscribe(t.onHeaderRowMouseEnter,(o,s)=>this.handleOnHeaderMouseEnterByType(o,s,"slick-headerrow-column")).subscribe(t.onMouseLeave,this.hideTooltip.bind(this)).subscribe(t.onHeaderMouseLeave,this.hideTooltip.bind(this)).subscribe(t.onHeaderRowMouseLeave,this.hideTooltip.bind(this))}dispose(){this.hideTooltip(),this._cancellablePromise=void 0,this._eventHandler.unsubscribeAll()}hideTooltip(){var t,e;(t=this._cancellablePromise)===null||t===void 0||t.cancel(),(e=this._observable$)===null||e===void 0||e.unsubscribe();const n=document.body.querySelector(`.${this.className}${this.gridUidSelector}`);n==null||n.remove()}getOptions(){return this._addonOptions}setOptions(t){this._addonOptions={...this._addonOptions,...t}}asyncProcessCallback(t,e,n,r,o){var s,l,u;this.hideTooltip();const h={...o,[(l=(s=this.addonOptions)===null||s===void 0?void 0:s.asyncParamsPropName)!==null&&l!==void 0?l:"__params"]:t};!((u=this._cellAddonOptions)===null||u===void 0)&&u.useRegularTooltip?this.renderRegularTooltip(this._cellAddonOptions.asyncPostFormatter,e,n,r,h):this.renderTooltipFormatter(this._cellAddonOptions.asyncPostFormatter,e,n,r,h)}handleOnHeaderMouseEnterByType(t,e,n){var r,o,s;this._cellType=n,this.hideTooltip();const l={row:-1,cell:this._grid.getColumns().findIndex(p=>{var m,v;return((v=(m=e==null?void 0:e.column)===null||m===void 0?void 0:m.id)!==null&&v!==void 0?v:"")===p.id})},u=e.column,h={},c=n==="slick-headerrow-column";if(e=e||{},e.cell=l.cell,e.row=l.row,e.columnDef=u,e.dataContext=h,e.grid=this._grid,e.type=c?"header-row":"header",this._cellAddonOptions={...this._addonOptions,...u==null?void 0:u.customTooltip},!(u!=null&&u.disableTooltip||typeof((r=this._cellAddonOptions)===null||r===void 0?void 0:r.usabilityOverride)=="function"&&!this._cellAddonOptions.usabilityOverride(e))&&u&&t.target){this._cellNodeElm=t.target.closest(`.${n}`);const p=c?this._cellAddonOptions.headerRowFormatter:this._cellAddonOptions.headerFormatter;if(!((o=this._cellAddonOptions)===null||o===void 0)&&o.useRegularTooltip||!p){const m=c?!((s=this._cellAddonOptions)===null||s===void 0)&&s.useRegularTooltip?null:p:u.name;this.renderRegularTooltip(m,l,null,u,h)}else this._cellNodeElm&&typeof p=="function"&&this.renderTooltipFormatter(p,l,null,u,h)}}async handleOnMouseEnter(t){var e,n,r,o,s,l,u,h;if(this._cellType="slick-cell",this.hideTooltip(),t&&this._grid){const c=(n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.closest(".slick-cell"))===null||n===void 0?void 0:n.className,p=c&&/l\d+/.exec(c||"")?this._grid.getCellFromEvent(t):null;if(p){const m=this.dataView?this.dataView.getItem(p.row):this._grid.getDataItem(p.row),v=this._grid.getColumns()[p.cell];if(this._cellNodeElm=this._grid.getCellNode(p.row,p.cell),m&&v){if(this._cellAddonOptions={...this._addonOptions,...v==null?void 0:v.customTooltip},v!=null&&v.disableTooltip||typeof((r=this._cellAddonOptions)===null||r===void 0?void 0:r.usabilityOverride)=="function"&&!this._cellAddonOptions.usabilityOverride({cell:p.cell,row:p.row,dataContext:m,column:v,grid:this._grid,type:"cell"}))return;const _=m.hasOwnProperty(v.field)?m[v.field]:null,C=this._grid.getEditorLock().isActive()?null:_;if(this._cellAddonOptions.useRegularTooltip&&!(!((o=this._cellAddonOptions)===null||o===void 0)&&o.asyncProcess)||!(!((s=this._cellAddonOptions)===null||s===void 0)&&s.formatter))this.renderRegularTooltip(v.formatter,p,C,v,m);else if(typeof((l=this._cellAddonOptions)===null||l===void 0?void 0:l.formatter)=="function"&&this.renderTooltipFormatter(this._cellAddonOptions.formatter,p,C,v,m),typeof((u=this._cellAddonOptions)===null||u===void 0?void 0:u.asyncProcess)=="function"){const x=this._cellAddonOptions.asyncProcess(p.row,p.cell,_,v,m,this._grid);if(this._cellAddonOptions.asyncPostFormatter||console.error('[Slickgrid-Universal] when using "asyncProcess" with Custom Tooltip, you must also provide an "asyncPostFormatter" formatter.'),x instanceof Promise)this._cancellablePromise=Ip(x),this._cancellablePromise.promise.then(S=>this.asyncProcessCallback(S,p,_,v,m)).catch(S=>{S instanceof La||console.error(S)});else if(!((h=this._rxjs)===null||h===void 0)&&h.isObservable(x)){const S=this._rxjs;this._observable$=x.pipe(S.switchMap(E=>S.of(E))).subscribe(E=>this.asyncProcessCallback(E,p,_,v,m),E=>console.error(E))}}}}}}parseFormatterAndSanitize(t,e,n,r,o){if(typeof t=="function"){const s=t(e.row,e.cell,n,r,o,this._grid),l=typeof s=="object"&&(s!=null&&s.text)?s.text:typeof s=="string"?s:"";return Ln(this.gridOptions,l)}else if(typeof t=="string")return Ln(this.gridOptions,t);return""}renderRegularTooltip(t,e,n,r,o){var s,l,u,h,c,p,m,v;const _=document.createElement("div");_.innerHTML=this.parseFormatterAndSanitize(t,e,n,r,o);let C=(s=r==null?void 0:r.toolTip)!==null&&s!==void 0?s:"",x;C||(this._cellType==="slick-cell"&&this._cellNodeElm&&this._cellNodeElm.clientWidth<this._cellNodeElm.scrollWidth&&!(!((l=this._cellAddonOptions)===null||l===void 0)&&l.useRegularTooltipFromFormatterOnly)?(C=(h=(u=this._cellNodeElm.textContent)===null||u===void 0?void 0:u.trim())!==null&&h!==void 0?h:"",!((c=this._cellAddonOptions)===null||c===void 0)&&c.tooltipTextMaxLength&&C.length>((p=this._cellAddonOptions)===null||p===void 0?void 0:p.tooltipTextMaxLength)&&(C=C.substring(0,this._cellAddonOptions.tooltipTextMaxLength-3)+"..."),x=this._cellNodeElm):(!((m=this._cellAddonOptions)===null||m===void 0)&&m.useRegularTooltipFromFormatterOnly?x=_.querySelector("[title], [data-slick-tooltip]"):(x=su(this._cellNodeElm,["title","data-slick-tooltip"])?this._cellNodeElm:_.querySelector("[title], [data-slick-tooltip]"),(!x||!su(x,["title","data-slick-tooltip"]))&&this._cellNodeElm&&(x=this._cellNodeElm.querySelector("[title], [data-slick-tooltip]"))),(!C||typeof t=="function"&&(!((v=this._cellAddonOptions)===null||v===void 0)&&v.useRegularTooltipFromFormatterOnly))&&(C=su(x,["title","data-slick-tooltip"])||""))),C!==""&&this.renderTooltipFormatter(t,e,n,r,o,C),this.swapAndClearTitleAttribute(x,C)}renderTooltipFormatter(t,e,n,r,o,s,l){var u,h,c,p,m,v,_,C,x,S;if(this._tooltipElm=Re("div",{className:this.className}),this._tooltipElm.classList.add(this.gridUid),this._tooltipElm.classList.add("l"+e.cell),this._tooltipElm.classList.add("r"+e.cell),n==null){const A=(u=this._cellNodeElm)===null||u===void 0?void 0:u.querySelector("[title], [data-slick-tooltip]");n=su(A,["title","data-slick-tooltip"])||n}let E=s||this.parseFormatterAndSanitize(t,e,n,r,o)||"";E=!((h=this._cellAddonOptions)===null||h===void 0)&&h.tooltipTextMaxLength&&E.length>this._cellAddonOptions.tooltipTextMaxLength?E.substring(0,this._cellAddonOptions.tooltipTextMaxLength-3)+"...":E;let D="";!s||!((c=this._cellAddonOptions)===null||c===void 0)&&c.renderRegularTooltipAsHtml?(D=Ln(this.gridOptions,E),this._tooltipElm.innerHTML=D,this._tooltipElm.style.whiteSpace=(m=(p=this._cellAddonOptions)===null||p===void 0?void 0:p.whiteSpace)!==null&&m!==void 0?m:this._defaultOptions.whiteSpace):(D=E||"",this._tooltipElm.textContent=D,this._tooltipElm.style.whiteSpace=(_=(v=this._cellAddonOptions)===null||v===void 0?void 0:v.regularTooltipWhiteSpace)!==null&&_!==void 0?_:this._defaultOptions.regularTooltipWhiteSpace),!((C=this._cellAddonOptions)===null||C===void 0)&&C.maxHeight&&(this._tooltipElm.style.maxHeight=`${this._cellAddonOptions.maxHeight}px`),!((x=this._cellAddonOptions)===null||x===void 0)&&x.maxWidth&&(this._tooltipElm.style.maxWidth=`${this._cellAddonOptions.maxWidth}px`),D&&(document.body.appendChild(this._tooltipElm),this.reposition(e),!((S=this._cellAddonOptions)===null||S===void 0)&&S.hideArrow||this._tooltipElm.classList.add("tooltip-arrow"),this.swapAndClearTitleAttribute(l,E))}reposition(t){var e,n,r,o,s,l,u,h,c,p,m,v,_;if(this._tooltipElm){this._cellNodeElm=this._cellNodeElm||this._grid.getCellNode(t.row,t.cell);const C=Wn(this._cellNodeElm)||{top:0,left:0},x=this._cellNodeElm.offsetWidth,S=this._tooltipElm.getBoundingClientRect().height,E=this._tooltipElm.getBoundingClientRect().width,D=document.body.offsetWidth||window.innerWidth;let A=(C.top||0)-this._tooltipElm.offsetHeight-((n=(e=this._cellAddonOptions)===null||e===void 0?void 0:e.offsetTopBottom)!==null&&n!==void 0?n:0),P=(C.left||0)-((o=(r=this._cellAddonOptions)===null||r===void 0?void 0:r.offsetRight)!==null&&o!==void 0?o:0);const M=(l=(s=this._cellAddonOptions)===null||s===void 0?void 0:s.position)!==null&&l!==void 0?l:"auto";M==="center"?(P+=x/2-E/2+((h=(u=this._cellAddonOptions)===null||u===void 0?void 0:u.offsetRight)!==null&&h!==void 0?h:0),this._tooltipElm.classList.remove("arrow-left-align"),this._tooltipElm.classList.remove("arrow-right-align"),this._tooltipElm.classList.add("arrow-center-align")):M==="right-align"||(M==="auto"||M!=="left-align")&&P+E>D?(P-=E-x-((p=(c=this._cellAddonOptions)===null||c===void 0?void 0:c.offsetLeft)!==null&&p!==void 0?p:0),this._tooltipElm.classList.remove("arrow-center-align"),this._tooltipElm.classList.remove("arrow-left-align"),this._tooltipElm.classList.add("arrow-right-align")):(this._tooltipElm.classList.remove("arrow-center-align"),this._tooltipElm.classList.remove("arrow-right-align"),this._tooltipElm.classList.add("arrow-left-align")),M==="bottom"||(M==="auto"||M!=="top")&&S>ou(this._cellNodeElm).top?(A=(C.top||0)+((m=this.gridOptions.rowHeight)!==null&&m!==void 0?m:0)+((_=(v=this._cellAddonOptions)===null||v===void 0?void 0:v.offsetTopBottom)!==null&&_!==void 0?_:0),this._tooltipElm.classList.remove("arrow-down"),this._tooltipElm.classList.add("arrow-up")):(this._tooltipElm.classList.add("arrow-down"),this._tooltipElm.classList.remove("arrow-up")),this._tooltipElm.style.top=`${A}px`,this._tooltipElm.style.left=`${P}px`}}swapAndClearTitleAttribute(t,e){var n;const r=t||this._cellNodeElm&&(this._cellNodeElm.hasAttribute("title")&&this._cellNodeElm.getAttribute("title")?this._cellNodeElm:(n=this._cellNodeElm)===null||n===void 0?void 0:n.querySelector("[title]"));r&&(r.setAttribute("data-slick-tooltip",e||""),r.hasAttribute("title")&&r.setAttribute("title",""))}}function $u(a,t,e){return t<=a&&a<=e}function Mv(a){if(a===void 0)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary")}function cy(a){for(var t=String(a),e=t.length,n=0,r=[];n<e;){var o=t.charCodeAt(n);if(o<55296||o>57343)r.push(o);else if(56320<=o&&o<=57343)r.push(65533);else if(55296<=o&&o<=56319)if(n===e-1)r.push(65533);else{var s=a.charCodeAt(n+1);if(56320<=s&&s<=57343){var l=o&1023,u=s&1023;r.push(65536+(l<<10)+u),n+=1}else r.push(65533)}n+=1}return r}var Nv=-1;function Lv(a){this.tokens=[].slice.call(a)}Lv.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Nv},prepend:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(a)},push:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.push(t.shift());else this.tokens.push(a)}};var Sf=-1,Hv="utf-8";function Yu(a,t){if(!(this instanceof Yu))return new Yu(a,t);if(a=a!==void 0?String(a).toLowerCase():Hv,a!==Hv)throw new Error("Encoding not supported. Only utf-8 is supported");t=Mv(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Yu.prototype={encode:function(t,e){t=t?String(t):"",e=Mv(e),this._streaming||(this._encoder=new hy(this._options)),this._streaming=!!e.stream;for(var n=[],r=new Lv(cy(t)),o;!r.endOfStream()&&(o=this._encoder.handler(r,r.read()),o!==Sf);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(r,r.read()),o!==Sf;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function hy(a){a.fatal,this.handler=function(t,e){if(e===Nv)return Sf;if($u(e,0,127))return e;var n,r;$u(e,128,2047)?(n=1,r=192):$u(e,2048,65535)?(n=2,r=224):$u(e,65536,1114111)&&(n=3,r=240);for(var o=[(e>>6*n)+r];n>0;){var s=e>>6*(n-1);o.push(128|s&63),n-=1}return o}}const fy={delimiter:fs.comma,filename:"export",format:dn.csv,useUtf8WithBom:!0};class py{constructor(){this._delimiter=",",this._exportQuoteWrapper="",this._fileFormat=dn.csv,this._lineCarriageReturn=`
`,this._columnHeaders=[],this._hasGroupedItems=!1,this.className="TextExportService"}get _datasetIdPropName(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}dispose(){var t;(t=this._pubSubService)===null||t===void 0||t.unsubscribeAll()}init(t,e){var n;if(this._grid=t,this._pubSubService=e.get("PubSubService"),this._locales=this._gridOptions&&this._gridOptions.locales||je.locales,this._translaterService=(n=this._gridOptions)===null||n===void 0?void 0:n.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToFile(t){if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableTextExport"?');return new Promise(e=>{var n;(n=this._pubSubService)===null||n===void 0||n.publish("onBeforeExportToTextFile",!0),this._exportOptions=fo({...fy,...this._gridOptions.textExportOptions,...t}),this._delimiter=this._exportOptions.delimiterOverride||this._exportOptions.delimiter||"",this._fileFormat=this._exportOptions.format||dn.csv;const r=this.getDataOutput();setTimeout(()=>{var o;const s={filename:`${this._exportOptions.filename}.${this._fileFormat}`,format:this._fileFormat||dn.csv,mimeType:this._exportOptions.mimeType||"text/plain",useUtf8WithBom:this._exportOptions&&this._exportOptions.hasOwnProperty("useUtf8WithBom")?this._exportOptions.useUtf8WithBom:!0};this.startDownloadFile({...s,content:r}),(o=this._pubSubService)===null||o===void 0||o.publish("onAfterExportToTextFile",s),e(!0)},0)})}startDownloadFile(t){const e=N_(t.content);let n;t.format===dn.csv?n=new Yu("utf-8").encode(e):n=e;const r=new Blob([t.useUtf8WithBom?"\uFEFF":"",n],{type:t.mimeType});if(typeof navigator.msSaveOrOpenBlob=="function")navigator.msSaveOrOpenBlob(r,t.filename);else{const o=document.createElement("a"),s=URL.createObjectURL(r);o.textContent="download",o.href=s,o.setAttribute("download",t.filename),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}getDataOutput(){var t,e,n;const r=this._grid.getColumns()||[];let o=this._exportOptions.groupingColumnHeaderTitle;!o&&this._gridOptions.enableTranslate&&(!((t=this._translaterService)===null||t===void 0)&&t.translate)&&(!((n=(e=this._translaterService)===null||e===void 0?void 0:e.getCurrentLanguage)===null||n===void 0)&&n.call(e))?o=this._translaterService.translate(`${ho(this._gridOptions)}GROUP_BY`):o||(o=this._locales&&this._locales.TEXT_GROUP_BY),this._exportQuoteWrapper=this._fileFormat===dn.csv?'"':"";let s="";const l=this._dataView.getGrouping();if(l&&Array.isArray(l)&&l.length>0?(this._hasGroupedItems=!0,s+=this._fileFormat===dn.csv?`"${o}"${this._delimiter}`:`${o}${this._delimiter}`):this._hasGroupedItems=!1,this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping&&(this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(r)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0)){const u=this._groupedColumnHeaders.map(h=>`${this._exportQuoteWrapper}${h.title}${this._exportQuoteWrapper}`);s+=u.join(this._delimiter)+this._lineCarriageReturn}if(this._columnHeaders=this.getColumnHeaders(r)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0){const u=this._columnHeaders.map(h=>or(`${this._exportQuoteWrapper}${h.title}${this._exportQuoteWrapper}`));s+=u.join(this._delimiter)+this._lineCarriageReturn}return s+=this.getAllGridRowData(r,this._lineCarriageReturn),s}getAllGridRowData(t,e){const n=[],r=this._dataView.getLength();for(let o=0;o<r;o++){const s=this._dataView.getItem(o);s&&!s.hasOwnProperty("getItem")&&(s[this._datasetIdPropName]!==null&&s[this._datasetIdPropName]!==void 0?n.push(this.readRegularRowData(t,o,s)):this._hasGroupedItems&&s.__groupTotals===void 0?n.push(this.readGroupedTitleRow(s)):s.__groupTotals&&n.push(this.readGroupedTotalRow(t,s)))}return n.join(e)}getColumnGroupedHeaderTitles(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r,o,s;let l="";n.columnGroupKey&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)&&(!((s=(o=this._translaterService)===null||o===void 0?void 0:o.getCurrentLanguage)===null||s===void 0)&&s.call(o))?l=this._translaterService.translate(n.columnGroupKey):l=n.columnGroup||"";const u=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!u&&e.push({key:n.field||n.id,title:l||""})}),e}getColumnHeaders(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r,o,s;let l="";(n.nameKey||n.nameKey)&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)&&(!((s=(o=this._translaterService)===null||o===void 0?void 0:o.getCurrentLanguage)===null||s===void 0)&&s.call(o))?l=this._translaterService.translate(n.nameKey||n.nameKey):l=n.name||vl(n.field);const u=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!u&&e.push({key:n.field||n.id,title:l||""})}),e}readRegularRowData(t,e,n){var r;let o=0;const s=[],l=this._exportQuoteWrapper;let u=1;const h=this._dataView.getItemMetadata(e);for(let c=0,p=t.length;c<p;c++){const m=t[c];if(m.excludeFromExport)continue;if(this._hasGroupedItems&&o===0){const _=this._fileFormat===dn.csv?'""':"";s.push(_)}let v;if(h!=null&&h.columns){const _=h==null?void 0:h.columns,C=_[m.id]||_[c];!isNaN(u)&&+u>1||u==="*"&&c>0||(u=(r=C==null?void 0:C.colspan)!==null&&r!==void 0?r:1),u!=="*"&&m.id in _&&(v=m.id)}if(u==="*"&&c>0||!isNaN(u)&&+u>1&&m.id!==v)s.push(""),!isNaN(u)&&+u>1&&u--;else{let _=wh(e,c,m,n,this._grid,this._exportOptions);(m.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(_=or(_)),this._fileFormat===dn.csv&&_&&(_=_.toString().replace(/"/gi,'""'));const C=m!=null&&m.exportCsvForceToKeepAsString?"=":"";s.push(C+l+_+l)}o++}return s.join(this._delimiter)}readGroupedTitleRow(t){let e=or(t.title);const n=this._exportQuoteWrapper;return e=Wa(5*t.level)+e,this._fileFormat===dn.csv&&(e=e.toString().replace(/"/gi,'""')),n+e+n}readGroupedTotalRow(t,e){const n=this._exportOptions.delimiter,r=this._exportOptions.format,o=this._exportOptions.groupingAggregatorRowText||"",s=this._exportQuoteWrapper,l=[`${s}${o}${s}`];return t.forEach(u=>{let h="";const c=u.excludeFromExport||!1;u.groupTotalsFormatter&&(h=u.groupTotalsFormatter(e,u,this._grid)),(u.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(h=or(h)),r===dn.csv&&(h=h.toString().replace(/"/gi,'""')),(u.width===void 0||u.width>0)&&!c&&l.push(s+h+s)}),l.join(n)}}var Bv={exports:{}};(function(a,t){(function(e,n){n(t)})(Pr,function(e){var n=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},r={firstDayOfWeek:1,weekdays:{shorthand:["dim","lun","mar","mer","jeu","ven","sam"],longhand:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},months:{shorthand:["janv","févr","mars","avr","mai","juin","juil","août","sept","oct","nov","déc"],longhand:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},ordinal:function(s){return s>1?"":"er"},rangeSeparator:" au ",weekAbbreviation:"Sem",scrollTitle:"Défiler pour augmenter la valeur",toggleTitle:"Cliquer pour basculer",time_24hr:!0};n.l10ns.fr=r;var o=n.l10ns;e.French=r,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})})})(Bv,Bv.exports),function(a){function t(ce,Ce){this.event=ce;let _e=ce,He=Ce,ot=!1,ze=!1,St=!1,ct;if(ce){const k=["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","type","which","x","y"];for(let ee of k)this[ee]=ce[ee]}this.target=_e?_e.target:void 0,this.stopPropagation=function(){ot=!0,_e&&_e.stopPropagation()},this.isPropagationStopped=function(){return ot},this.stopImmediatePropagation=function(){ze=!0,_e&&_e.stopImmediatePropagation()},this.isImmediatePropagationStopped=function(){return ze},this.getNativeEvent=function(){return _e},this.preventDefault=function(){_e&&_e.preventDefault(),St=!0},this.isDefaultPrevented=function(){return _e?_e.defaultPrevented:St},this.addReturnValue=function(k){ct===void 0&&k!==void 0&&(ct=k)},this.getReturnValue=function(){return ct},this.getArguments=function(){return He}}function e(){var ce=[];this.subscribe=function(Ce){ce.push(Ce)},this.unsubscribe=function(Ce){for(var _e=ce.length-1;_e>=0;_e--)ce[_e]===Ce&&ce.splice(_e,1)},this.notify=function(Ce,_e,He){_e instanceof t||(_e=new t(_e,Ce)),He=He||this;for(var ot=0;ot<ce.length&&!(_e.isPropagationStopped()||_e.isImmediatePropagationStopped());ot++){const ze=ce[ot].call(He,_e,Ce);_e.addReturnValue(ze)}return _e}}function n(){var ce=[];this.subscribe=function(Ce,_e){return ce.push({event:Ce,handler:_e}),Ce.subscribe(_e),this},this.unsubscribe=function(Ce,_e){for(var He=ce.length;He--;)if(ce[He].event===Ce&&ce[He].handler===_e){ce.splice(He,1),Ce.unsubscribe(_e);return}return this},this.unsubscribeAll=function(){for(var Ce=ce.length;Ce--;)ce[Ce].event.unsubscribe(ce[Ce].handler);return ce=[],this}}function r(ce,Ce,_e,He){_e===void 0&&He===void 0&&(_e=ce,He=Ce),this.fromRow=Math.min(ce,_e),this.fromCell=Math.min(Ce,He),this.toRow=Math.max(ce,_e),this.toCell=Math.max(Ce,He),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(ot,ze){return ot>=this.fromRow&&ot<=this.toRow&&ze>=this.fromCell&&ze<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function o(){this.__nonDataRow=!0}function s(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}s.prototype=new o,s.prototype.equals=function(ce){return this.value===ce.value&&this.count===ce.count&&this.collapsed===ce.collapsed&&this.title===ce.title};function l(){this.__groupTotals=!0,this.group=null,this.initialized=!1}l.prototype=new o;function u(){var ce=null;this.isActive=function(Ce){return Ce?ce===Ce:ce!==null},this.activate=function(Ce){if(Ce!==ce){if(ce!==null)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!Ce.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!Ce.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");ce=Ce}},this.deactivate=function(Ce){if(ce){if(ce!==Ce)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");ce=null}},this.commitCurrentEdit=function(){return ce?ce.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return ce?ce.cancelCurrentEdit():!0}}function h(ce){return ce.replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,"")}function c(ce){let Ce=0,_e=0,He=0,ot=0;const ze=a.innerHeight||0,St=a.innerWidth||0,ct=D(),k=ct.top,ee=ct.left,ge=E(ce);if(ge){const $=ge.top||0,X=ge.left||0;_e=$-k,Ce=ze-($-k),He=X-ee,ot=St-(X-ee)}return{top:_e,bottom:Ce,left:He,right:ot}}function p(ce,Ce,_e){const He=document.createElement(ce);return Ce&&Object.keys(Ce).forEach(ot=>{const ze=Ce[ot];typeof ze=="object"?Object.assign(He[ot],ze):He[ot]=Ce[ot]}),_e&&_e.appendChild&&_e.appendChild(He),He}function m(ce,Ce){let _e=null;return(...He)=>{Ce>=0?(clearTimeout(_e),_e=setTimeout(()=>ce.apply(null,He),Ce)):ce.apply(null)}}function v(ce){if(ce&&ce.firstChild)for(;ce.firstChild;)ce.lastChild&&ce.removeChild(ce.lastChild);return ce}function _(ce,Ce){let _e=0;if(ce){const He=Ce==="height"?"clientHeight":"clientWidth",ot=Ce==="height"?["top","bottom"]:["left","right"];_e=ce[He];for(const ze of ot){const St=parseFloat(C(ce,`padding-${ze}`))||0;_e-=St}}return _e}function C(ce,Ce){return ce&&ce.getComputedStyle?a.getComputedStyle(ce,null).getPropertyValue(Ce):null}function x(ce){return ce==null?!0:Object.entries(ce).length===0}function S(){}function E(ce){if(!ce||!ce.getBoundingClientRect)return;const Ce=ce.getBoundingClientRect(),_e=document.documentElement;return{top:Ce.top+a.pageYOffset-_e.clientTop,left:Ce.left+a.pageXOffset-_e.clientLeft}}function D(){return{left:a.pageXOffset||document.documentElement.scrollLeft||0,top:a.pageYOffset||document.documentElement.scrollTop||0}}function A(ce,Ce){if(!(!ce||!ce.getBoundingClientRect)){if(Ce===void 0)return ce.getBoundingClientRect().width;M(ce,"width",Ce)}}function P(ce,Ce){if(ce){if(Ce===void 0)return ce.getBoundingClientRect().height;M(ce,"height",Ce)}}function M(ce,Ce,_e){typeof _e=="function"?_e=_e():typeof _e=="string"?ce.style[Ce]=_e:ce.style[Ce]=_e+"px"}function B(ce,Ce){return!ce||!Ce?!1:!L(Ce).every(function(He){return ce!=He})}function Z(ce){return ce.offsetWidth===0&&ce.offsetHeight===0}function L(ce,Ce){const _e=[],He=Ce==":visible",ot=Ce==":hidden";for(;(ce=ce.parentNode)&&ce!==document&&!(!ce||!ce.parentNode);)ot?Z(ce)&&_e.push(ce):He?Z(ce)||_e.push(ce):(!Ce||ce.matches(Ce))&&_e.push(ce);return _e}function de(ce){var Ce=parseFloat(ce);return isNaN(Ce)?0:Ce}function be(ce,Ce){Ce=Ce||"",Array.isArray(ce)?ce.forEach(function(_e){_e.style.display=Ce}):ce.style.display=Ce}function J(ce){Array.isArray(ce)?ce.forEach(function(Ce){Ce.style.display="none"}):ce.style.display="none"}function U(ce,Ce){return ae(ce,"slideUp",Ce)}function F(ce,Ce){return ae(ce,"slideDown",Ce)}function ae(ce,Ce,_e){if(a.jQuery!==void 0){a.jQuery(ce)[Ce]("fast",_e);return}Ce==="slideUp"?J(ce):be(ce),_e()}var Ke=Object.getPrototypeOf,Ie={},xe=Ie.toString,Oe=Ie.hasOwnProperty,De=Oe.toString,ne=De.call(Object);function pe(ce){return typeof ce=="function"&&typeof ce.nodeType!="number"&&typeof ce.item!="function"}function Ve(ce){var Ce,_e;return!ce||xe.call(ce)!=="[object Object]"?!1:(Ce=Ke(ce),Ce?(_e=Oe.call(Ce,"constructor")&&Ce.constructor,typeof _e=="function"&&De.call(_e)===ne):!0)}function Ye(){var ce,Ce,_e,He,ot,ze,St=arguments[0],ct=1,k=arguments.length,ee=!1;for(typeof St=="boolean"?(ee=St,St=arguments[ct]||{},ct++):St=St||{},typeof St!="object"&&!pe(St)&&(St={}),ct===k&&(St=this,ct--);ct<k;ct++)if((ce=arguments[ct])!=null)for(Ce in ce)He=ce[Ce],!(Ce==="__proto__"||St===He)&&(ee&&He&&(Ve(He)||(ot=Array.isArray(He)))?(_e=St[Ce],ot&&!Array.isArray(_e)?ze=[]:!ot&&!Ve(_e)?ze={}:ze=_e,ot=!1,St[Ce]=Ye(ee,ze,He)):He!==void 0&&(St[Ce]=He));return St}function Ue(){this.boundedEvents=[],this.destroy=function(){this.unbindAll(),this.boundedEvents=[]},this.bind=function(ce,Ce,_e,He){ce.addEventListener(Ce,_e,He),this.boundedEvents.push({element:ce,eventName:Ce,listener:_e})},this.unbind=function(ce,Ce,_e){ce&&ce.removeEventListener&&ce.removeEventListener(Ce,_e)},this.unbindByEventName=function(ce,Ce){const _e=this.boundedEvents.find(He=>He.element===ce&&He.eventName===Ce);_e&&this.unbind(_e.element,_e.eventName,_e.listener)},this.unbindAll=function(){for(;this.boundedEvents.length>0;){const ce=this.boundedEvents.pop(),{element:Ce,eventName:_e,listener:He}=ce;this.unbind(Ce,_e,He)}}}a.Slick={Event:e,EventData:t,EventHandler:n,Range:r,NonDataRow:o,Group:s,GroupTotals:l,RegexSanitizer:h,EditorLock:u,BindingEventService:Ue,Utils:{debounce:m,extend:Ye,calculateAvailableSpace:c,createDomElement:p,emptyElement:v,innerSize:_,isEmptyObject:x,noop:S,offset:E,height:P,width:A,setStyleSize:M,contains:B,toFloat:de,parents:L,show:be,hide:J,slideUp:U,slideDown:F,storage:{_storage:new WeakMap,put:function(ce,Ce,_e){this._storage.has(ce)||this._storage.set(ce,new Map),this._storage.get(ce).set(Ce,_e)},get:function(ce,Ce){const _e=this._storage.get(ce);return _e?_e.get(Ce):null},remove:function(ce,Ce){var _e=this._storage.get(ce).delete(Ce);return!this._storage.get(ce).size===0&&this._storage.delete(ce),_e}}},GlobalEditorLock:new u,keyCode:{SPACE:8,BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick",GridAutosizeColsMode:{None:"NOA",LegacyOff:"LOF",LegacyForceFit:"LFF",IgnoreViewport:"IGV",FitColsToViewport:"FCV",FitViewportToCols:"FVC"},ColAutosizeMode:{Locked:"LCK",Guide:"GUI",Content:"CON",ContentExpandOnly:"CXO",ContentIntelligent:"CTI"},RowSelectionMode:{FirstRow:"FS1",FirstNRows:"FSN",AllRows:"ALL",LastRow:"LS1"},ValueFilterMode:{None:"NONE",DeDuplicate:"DEDP",GetGreatestAndSub:"GR8T",GetLongestTextAndSub:"LNSB",GetLongestText:"LNSC"},WidthEvalMode:{Auto:"AUTO",TextOnly:"CANV",HTML:"HTML"}},typeof Pr<"u"&&(Pr.Slick=a.Slick)}(window),function(){function a(n){let{containerElement:r,onDragInit:o,onDragStart:s,onDrag:l,onDragEnd:u}=n,h,c,p,m,v,_;if(r||(r=document),!r||typeof r.addEventListener!="function")throw new Error("[Slick.Draggable] You did not provide a valid container html element that will be used for dragging.");let C={dragSource:r,dragHandle:null};r&&(r.addEventListener("mousedown",E),r.addEventListener("touchstart",E));function x(M,B,Z){typeof M=="function"&&M(B,Z)}function S(){r&&(r.removeEventListener("mousedown",E),r.removeEventListener("touchstart",E))}function E(M){h=M.target;const B=M.touches?M.touches[0]:M,{target:Z}=B;if(!n.allowDragFrom||n.allowDragFrom&&h.matches(n.allowDragFrom)||n.allowDragFromClosest&&h.closest(n.allowDragFromClosest)){C.dragHandle=h;const L=P();c=L.left+B.clientX,p=L.top+B.clientY,m=B.clientX-B.clientX,v=B.clientY-B.clientY,C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Z}),x(o,M,C),document.addEventListener("mousemove",D),document.addEventListener("touchmove",D),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),document.addEventListener("touchcancel",A)}}function D(M){const B=M.touches?M.touches[0]:M;m=B.clientX-c,v=B.clientY-p;const{target:Z}=B;_||(C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Z}),x(s,M,C),_=!0),C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Z}),x(l,M,C)}function A(M){if(document.removeEventListener("mousemove",D),document.removeEventListener("touchmove",D),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),document.removeEventListener("touchcancel",A),_){const{target:B}=M;C=Object.assign(C,{target:B}),x(u,M,C),_=!1}}function P(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}return{destroy:S}}function t(n){let{element:r,onMouseWheel:o}=n;function s(){r.removeEventListener("wheel",u),r.removeEventListener("mousewheel",u)}function l(){r.addEventListener("wheel",u),r.addEventListener("mousewheel",u)}function u(h){const c=h||window.event;let p=0,m=0,v=0;c.wheelDelta&&(p=c.wheelDelta/120),c.detail&&(p=-c.detail/3),v=p,c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(v=0,m=-1*p),c.wheelDeltaY!==void 0&&(v=c.wheelDeltaY/120),c.wheelDeltaX!==void 0&&(m=-1*c.wheelDeltaX/120),typeof o=="function"&&o(h,p,m,v)}return l(),{destroy:s}}function e(n){const{resizeableElement:r,resizeableHandleElement:o,onResizeStart:s,onResize:l,onResizeEnd:u}=n;if(!o||typeof o.addEventListener!="function")throw new Error("[Slick.Resizable] You did not provide a valid html element that will be used for the handle to resize.");function h(){o&&typeof o.removeEventListener=="function"&&(o.removeEventListener("mousedown",p),o.removeEventListener("touchstart",p))}function c(_,C){typeof _=="function"&&_(C,{resizeableElement:r,resizeableHandleElement:o})}function p(_){_.preventDefault();const C=_.touches?_.changedTouches[0]:_;c(s,C),document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),document.addEventListener("touchmove",m),document.addEventListener("touchend",v)}function m(_){_.preventDefault&&_.type!=="touchmove"&&_.preventDefault();const C=_.touches?_.changedTouches[0]:_;typeof l=="function"&&(l(C,{resizeableElement:r,resizeableHandleElement:o}),l(C,{resizeableElement:r,resizeableHandleElement:o}))}function v(_){const C=_.touches?_.changedTouches[0]:_;c(u,C),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",v)}return o.addEventListener("mousedown",p),o.addEventListener("touchstart",p),{destroy:h}}Slick.Utils.extend(Slick,{Draggable:a,MouseWheel:t,Resizable:e})}();/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v4.1.7
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing JS DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */if(typeof Slick>"u")throw new Error('"slick.core.js" not loaded');(function(){var a,t;function e(n,r,o,s){var l={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,nonce:"",editorLock:Slick.GlobalEditorLock,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:ca,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,autosizeColsMode:Slick.GridAutosizeColsMode.LegacyOff,autosizeColPaddingPx:4,autosizeTextAvgToMWidthRatio:.75,viewportSwitchToScrollModeWidthPercent:void 0,viewportMinWidthPx:void 0,viewportMaxWidthPx:void 0,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,logSanitizedHtml:!1,shadowRoot:void 0,devMode:!1},u={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0,hidden:!1},h={ignoreHeaderText:!1,colValueArray:void 0,allowAddlPercent:void 0,formatterOverride:void 0,autosizeMode:Slick.ColAutosizeMode.ContentIntelligent,rowSelectionModeOnInit:void 0,rowSelectionMode:Slick.RowSelectionMode.FirstNRows,rowSelectionCount:100,valueFilterMode:Slick.ValueFilterMode.None,widthEvalMode:Slick.WidthEvalMode.Auto,sizeToRemaining:void 0,widthPx:void 0,contentSizePx:0,headerWidthPx:0,colDataTypeOf:void 0},c,p,m,v,_,C=0,x=0,S=1;const E=Slick.Utils,D=E.show,A=E.hide;var P=new Slick.BindingEventService,M=!1,B,Z="slickgrid_"+Math.round(1e6*Math.random()),L=this,de,be,J=[],U=[],F,ae,Ke,Ie,xe,Oe,De,ne,pe,Ve,Ye,Ue,ce,Ce,_e,He,ot,ze,St=[],ct,k,ee,ge,$,X,re,Pe,Fe,me,Ge,mt,We,Le=0,jt=0,It=0,bi=0,K,G=!1,ve=0,ke=-1,at=0,st=0,ht=0,Rt=0,Lt=0,Ot=0,zt=1,qt,Fi,Mi,z,Q,he=null,Ee=null,lt,vt,it={},wt=0,Ht=0,Et=0,gt=0,ei=0,Ai=0,zi=0,Zt=0,Ni,Bn=[],fn=[],Ct={},Se={},Xe=[],xt=[],ti=[],Ui=!1,Wi=!1,Li=Bf(Qi,50),pn=null,Gn=null,Kt=null,Gi={},lr=null,bo=null,er=[],tr=0,Co=0,mr=0,ar,Sr,$n,Vn,di,zn,to,yo,mn,ir,vr,gr,se,ue,ye,$e,Je,dt,At,Bt,ui,Ci,Ei,yn,Yn,jn,Xn,io,_r,Eo,Hi,Oi,Br,Cs,So,Ks={position:"absolute",visibility:"hidden",display:"block"},ys,ia=[],Jo=!1,Es=!1,ki=null,vi=[],wo=[],xo,Ss;function xl(){if(typeof n=="string"?B=document.querySelector(n):B=n,!B)throw new Error("SlickGrid requires a valid container, "+n+" does not exist in the DOM.");if(t=t||Qs(),s=E.extend(!0,{},l,s),ec(),u.width=s.defaultColumnWidth,s.suppressCssChangesOnHiddenInit||es(),Il(),s.enableColumnReorder&&!Sortable)throw new Error("SlickGrid requires Sortable.js module to be loaded");vt={commitCurrentEdit:Ld,cancelCurrentEdit:Mc},E.emptyElement(B),B.style.overflow="hidden",B.style.outline=0,B.classList.add(Z),B.classList.add("ui-widget");const y=window.getComputedStyle(B);/relative|absolute|fixed/.test(y.position)||(B.style.position="relative"),de=E.createDomElement("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},B),ar=E.createDomElement("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},B),Sr=E.createDomElement("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},B),$n=E.createDomElement("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},B),Vn=E.createDomElement("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},B),di=E.createDomElement("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},B),zn=E.createDomElement("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},B),s.createPreHeaderPanel&&(Ve=E.createDomElement("div",{className:"slick-preheader-panel ui-state-default",style:{overflow:"hidden",position:"relative"}},ar),Ve.appendChild(document.createElement("div")),pe=E.createDomElement("div",null,Ve),Ye=E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},Ve),ce=E.createDomElement("div",{className:"slick-preheader-panel ui-state-default",style:{overflow:"hidden",position:"relative"}},Sr),Ue=E.createDomElement("div",null,ce),E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},ce),s.showPreHeaderPanel||(A(Ve),A(ce))),to=E.createDomElement("div",{className:"slick-header ui-state-default slick-header-left"},ar),yo=E.createDomElement("div",{className:"slick-header ui-state-default slick-header-right"},Sr),J.push(to),J.push(yo),mn=E.createDomElement("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},to),ir=E.createDomElement("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},yo),U=[mn,ir],vr=E.createDomElement("div",{className:"slick-headerrow ui-state-default"},$n),gr=E.createDomElement("div",{className:"slick-headerrow ui-state-default"},Vn),ae=[vr,gr],Ke=E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},vr),Ie=E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},gr),ye=E.createDomElement("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},vr),$e=E.createDomElement("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},gr),F=[ye,$e],At=E.createDomElement("div",{className:"slick-top-panel-scroller ui-state-default"},$n),Bt=E.createDomElement("div",{className:"slick-top-panel-scroller ui-state-default"},Vn),Ce=[At,Bt],ui=E.createDomElement("div",{className:"slick-top-panel",style:{width:"10000px"}},At),Ci=E.createDomElement("div",{className:"slick-top-panel",style:{width:"10000px"}},Bt),_e=[ui,Ci],s.showColumnHeader||J.forEach(function(T){A(T)}),s.showTopPanel||Ce.forEach(function(T){A(T)}),s.showHeaderRow||ae.forEach(function(T){A(T)}),Ei=E.createDomElement("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},$n),yn=E.createDomElement("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},Vn),Yn=E.createDomElement("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},di),jn=E.createDomElement("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},zn),He=[Ei,yn,Yn,jn],s.viewportClass&&He.forEach(function(T){T.classList.add(...s.viewportClass.split(" "))}),Fi=Ei,Xn=E.createDomElement("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},Ei),io=E.createDomElement("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},yn),_r=E.createDomElement("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},Yn),Eo=E.createDomElement("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},jn),ot=[Xn,io,_r,Eo],a=a||To(),qt=Xn,Ye&&E.width(Ye,qn()+a.width),U.forEach(function(T){E.width(T,rn())}),E.width(Ke,qn()+a.width),E.width(Ie,qn()+a.width),s.createFooterRow&&(ue=E.createDomElement("div",{className:"slick-footerrow ui-state-default"},Vn),se=E.createDomElement("div",{className:"slick-footerrow ui-state-default"},$n),Oe=[se,ue],De=E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},se),E.width(De,qn()+a.width),ne=E.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},ue),E.width(ne,qn()+a.width),Je=E.createDomElement("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},se),dt=E.createDomElement("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},ue),xe=[Je,dt],s.showFooterRow||Oe.forEach(function(T){A(T)})),be=de.cloneNode(!0),B.appendChild(be),s.explicitInitialization||qs()}function qs(){M||(M=!0,ol(),rl(),xf(),Ft(U),s.enableTextSelectionOnCells||He.forEach(function(y){P.bind(y,"selectstart.ui",function(T){T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement})}),pd(),ju(),Xu(),md(),ss(),Vt(),qe(),Mt(),Ku(),Or(),Os(),P.bind(B,"resize.slickgrid",Or),He.forEach(function(y){P.bind(y,"scroll",Ar)}),s.enableMouseWheelScrollHandler&&He.forEach(function(y){vi.push(Slick.MouseWheel({element:y,onMouseWheel:fc}))}),J.forEach(function(y){P.bind(y,"contextmenu",gc),P.bind(y,"click",_c)}),ae.forEach(function(y){P.bind(y,"scroll",fi)}),s.createFooterRow&&(xe.forEach(function(y){P.bind(y,"contextmenu",bc),P.bind(y,"click",wd)}),Oe.forEach(function(y){P.bind(y,"scroll",lc)})),s.createPreHeaderPanel&&P.bind(Ve,"scroll",ac),P.bind(de,"keydown",ll),P.bind(be,"keydown",ll),ot.forEach(function(y){P.bind(y,"keydown",ll),P.bind(y,"click",pc),P.bind(y,"dblclick",mc),P.bind(y,"contextmenu",ds),P.bind(y,"mouseover",xd),P.bind(y,"mouseout",Cc)}),Slick.Draggable&&(ki=Slick.Draggable({containerElement:B,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",onDragInit:Uo,onDragStart:Wf,onDrag:Gf,onDragEnd:$f})),s.suppressCssChangesOnHiddenInit||ws())}function es(){ys=E.parents(B,":hidden");for(const T of ys){var y={};for(const I in Ks)y[I]=T.style[I],T.style[I]=Ks[I];ia.push(y)}}function ws(){let y=0;for(const I of ys){var T=ia[y++];for(const V in Ks)I.style[V]=T[V]}}function kt(){return s.frozenColumn>-1}function Ki(y){fn.unshift(y),y.init(L)}function wr(y){for(var T=fn.length;T>=0;T--)if(fn[T]===y){fn[T].destroy&&fn[T].destroy(),fn.splice(T,1);break}}function Ho(y){for(var T=fn.length-1;T>=0;T--)if(fn[T].pluginName===y)return fn[T]}function Tl(y){Ni&&(Ni.onSelectedRangesChanged.unsubscribe(Tr),Ni.destroy&&Ni.destroy()),Ni=y,Ni&&(Ni.init(L),Ni.onSelectedRangesChanged.subscribe(Tr))}function no(){return Ni}function Kn(y,T){return nn(xr(),y,T)}function Zs(y){return y===void 0||(y instanceof Slick.EventData&&(y=y.getNativeEvent()),qt=y.target.closest(".grid-canvas")),qt}function xr(){return ot}function Ol(y,T){return nn(xs(),y,T)}function xs(){return He}function Al(y){return Ts(y),Fi}function Ts(y){return y instanceof Slick.EventData&&(y=y.getNativeEvent()),Fi=y.target.closest(".slick-viewport"),Fi}function nn(y,T,I){if(y){T||(T=0),I||(I=0);var V=typeof T=="number"?T:_t(T),Y=G&&I>=ke+(s.frozenBottom?0:1),j=kt()&&V>s.frozenColumn;return y[(Y?2:0)+(j?1:0)]}}function To(){var y=E.createDomElement("div",{className:He.className,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),T=E.createDomElement("div",{style:{width:"200px",height:"200px",overflow:"auto"}},y),I={width:y.offsetWidth-y.clientWidth,height:y.offsetHeight-y.clientHeight};return T.remove(),y.remove(),I}function rn(){Fe=me=Ge=0;for(var y=!s.autoHeight,T=0,I=o.length;T<I;T++)if(!(!o[T]||o[T].hidden)){var V=o[T].width;s.frozenColumn>-1&&T>s.frozenColumn?Ge+=V:me+=V}return y&&(s.frozenColumn>-1&&T>s.frozenColumn?Ge+=a.width:me+=a.width),kt()?(me=me+1e3,Ge=Math.max(Ge,$)+me,Ge+=a.width):(me+=a.width,me=Math.max(me,$)+1e3),Fe=me+Ge,Math.max(Fe,$)+1e3}function qn(){var y=We?$-a.width:$,T=o.length;for(re=Pe=0;T--;)!o[T]||o[T].hidden||(kt()&&T>s.frozenColumn?Pe+=o[T].width:re+=o[T].width);var I=re+Pe;if(s.fullWidthRows){var V=Math.max(I,y)-I;V>0&&(I+=V,kt()?Pe+=V:re+=V)}return I}function Oo(y){var T=X,I=re,V=Pe,Y;if(X=qn(),Y=X!==T||re!==I||Pe!==V,Y||kt()||G)if(E.width(Xn,re),rn(),E.width(mn,me),E.width(ir,Ge),kt()){const j=E.width(B)||0;if(j>0&&re>j&&s.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");E.width(io,Pe),E.width(ar,re),E.setStyleSize(Sr,"left",re),E.setStyleSize(Sr,"width",$-re),E.width($n,re),E.setStyleSize(Vn,"left",re),E.width(Vn,$-re),E.width(vr,re),E.width(gr,$-re),E.width(ye,re),E.width($e,Pe),s.createFooterRow&&(E.width(se,re),E.width(ue,$-re),E.width(Je,re),E.width(dt,Pe)),s.createPreHeaderPanel&&E.width(pe,X),E.width(Ei,re),E.width(yn,$-re),G&&(E.width(di,re),E.setStyleSize(zn,"left",re),E.width(Yn,re),E.width(jn,$-re),E.width(_r,re),E.width(Eo,Pe))}else E.width(ar,"100%"),E.width($n,"100%"),E.width(vr,"100%"),E.width(ye,X),s.createFooterRow&&(E.width(se,"100%"),E.width(Je,X)),s.createPreHeaderPanel&&E.width(pe,X),E.width(Ei,"100%"),G&&(E.width(Yn,"100%"),E.width(_r,re));mt=X>=$-a.width,E.width(Ke,X+(We?a.width:0)),E.width(Ie,X+(We?a.width:0)),s.createFooterRow&&(E.width(De,X+(We?a.width:0)),E.width(ne,X+(We?a.width:0))),(Y||y)&&Si()}function Ft(y){y.forEach(function(T){T.setAttribute("unselectable","on"),T.style.MozUserSelect="none",P.bind(T,"selectstart.ui",function(){return!1})})}function Qs(){let y=1e6;const T=navigator.userAgent.toLowerCase().match(/firefox/)?s.ffMaxSupportedCssHeight:s.maxSupportedCssHeight,I=E.createDomElement("div",{style:{display:"hidden"}},document.body);for(;;){const V=y*2;E.height(I,V);const Y=E.height(I);if(V>T||Y!==V)break;y=V}return I.remove(),y}function Js(){return Z}function $i(){return Le}function Un(){return a}function Ao(){return{width:We?a.width:0,height:mt?a.height:0}}function fd(){return K}function Os(){for(var y=G&&!s.frozenBottom?_r:Xn;(y=y.parentNode)!=document.body&&y!=null;)(y==Ei||y.scrollWidth!=y.clientWidth||y.scrollHeight!=y.clientHeight)&&(St.push(y),P.bind(y,"scroll."+Z,Ea))}function ts(){St.forEach(function(y){P.unbindByEventName(y,"scroll."+Z)}),St=[]}function el(y,T,I){if(M){var V=_t(y);if(V!=null){var Y=o[V],j=Bi(V);j&&(T!==void 0&&(o[V].name=T),I!==void 0&&(o[V].toolTip=I),oe(L.onBeforeHeaderCellDestroy,{node:j,column:Y,grid:L}),j.setAttribute("title",I||""),T!==void 0&&(j.children[0].innerHTML=$o(T)),oe(L.onHeaderCellRendered,{node:j,column:Y,grid:L}))}}}function hi(y){if(!y)return kt()?U:mn;var T=_t(y.id);return kt()?T<=s.frozenColumn?mn:ir:mn}function g(y){var T=typeof y=="number"?y:_t(y),I=kt()?T<=s.frozenColumn?mn:ir:mn,V=kt()?T<=s.frozenColumn?T:T-s.frozenColumn-1:T;return I.children[V]}function w(){return kt()?F:F[0]}function R(){return kt()?xe:xe[0]}function H(){return pe}function te(){return Ue}function we(y){var T=typeof y=="number"?y:_t(y),I;return kt()?T<=s.frozenColumn?I=ye:(I=$e,T-=s.frozenColumn+1):I=ye,I.children[T]}function Be(y){var T=typeof y=="number"?y:_t(y),I;return kt()?T<=s.frozenColumn?I=Je:(I=dt,T-=s.frozenColumn+1):I=Je,I.children[T]}function qe(){if(s.createFooterRow){xe.forEach(function(I){I.querySelectorAll(".slick-footerrow-column").forEach(function(Y){const j=E.storage.get(Y,"column");oe(L.onBeforeFooterRowCellDestroy,{node:Y,column:j,grid:L})})}),E.emptyElement(Je),E.emptyElement(dt);for(var y=0;y<o.length;y++){var T=o[y];if(!T||T.hidden)continue;const I=E.createDomElement("div",{className:`ui-state-default slick-footerrow-column l${y} r${y}`},kt()&&y>s.frozenColumn?dt:Je),V=kt()&&y<=s.frozenColumn?"frozen":null;V&&I.classList.add(V),E.storage.put(I,"column",T),oe(L.onFooterRowCellRendered,{node:I,column:T,grid:L})}}}function yt(y){y.target.classList.add("ui-state-hover")}function ft(y){y.target.classList.remove("ui-state-hover")}function Vt(){U.forEach(function(I){I.querySelectorAll(".slick-header-column").forEach(function(Y){var j=E.storage.get(Y,"column");j&&oe(L.onBeforeHeaderCellDestroy,{node:Y,column:j,grid:L})})}),E.emptyElement(mn),E.emptyElement(ir),rn(),E.width(mn,me),E.width(ir,Ge),F.forEach(function(I){I.querySelectorAll(".slick-headerrow-column").forEach(function(Y){const j=E.storage.get(Y,"column");j&&oe(L.onBeforeHeaderRowCellDestroy,{node:this,column:j,grid:L})})}),E.emptyElement(ye),E.emptyElement($e),s.createFooterRow&&(Je.querySelectorAll(".slick-footerrow-column").forEach(function(V){var Y=E.storage.get(V,"column");Y&&oe(L.onBeforeFooterRowCellDestroy,{node:this,column:Y,grid:L})}),E.emptyElement(Je),kt()&&(dt.querySelectorAll(".slick-footerrow-column").forEach(function(Y){var j=E.storage.get(Y,"column");j&&oe(L.onBeforeFooterRowCellDestroy,{node:this,column:j,grid:L})}),E.emptyElement(dt)));for(var y=0;y<o.length;y++){const I=o[y];if(!I||I.hidden)continue;const V=kt()?y<=s.frozenColumn?mn:ir:mn,Y=kt()?y<=s.frozenColumn?ye:$e:ye,j=E.createDomElement("div",{id:`${Z+I.id}`,dataset:{id:I.id},className:"ui-state-default slick-header-column",title:I.toolTip||""},V),Te=E.createDomElement("span",{className:"slick-column-name"},j);Te.innerHTML=$o(I.name),E.width(j,I.width-Le);let et=I.headerCssClass||null;if(et&&j.classList.add(...et.split(" ")),et=kt()&&y<=s.frozenColumn?"frozen":null,et&&j.classList.add(et),P.bind(j,"mouseenter",vc),P.bind(j,"mouseleave",Vr),E.storage.put(j,"column",I),(s.enableColumnReorder||I.sortable)&&(P.bind(j,"mouseenter",yt),P.bind(j,"mouseleave",ft)),I.hasOwnProperty("headerCellAttrs")&&I.headerCellAttrs instanceof Object)for(var T in I.headerCellAttrs)I.headerCellAttrs.hasOwnProperty(T)&&j.setAttribute(T,I.headerCellAttrs[T]);if(I.sortable&&(j.classList.add("slick-header-sortable"),E.createDomElement("div",{className:`slick-sort-indicator ${s.numberedMultiColumnSort&&!s.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":""}`},j),s.numberedMultiColumnSort&&s.sortColNumberInSeparateSpan&&E.createDomElement("div",{className:"slick-sort-indicator-numbered"},j)),oe(L.onHeaderCellRendered,{node:j,column:I,grid:L}),s.showHeaderRow){const rt=E.createDomElement("div",{className:`ui-state-default slick-headerrow-column l${y} r${y}`},Y),ut=kt()&&y<=s.frozenColumn?"frozen":null;ut&&rt.classList.add(ut),P.bind(rt,"mouseenter",Yf),P.bind(rt,"mouseleave",jf),E.storage.put(rt,"column",I),oe(L.onHeaderRowCellRendered,{node:rt,column:I,grid:L})}if(s.createFooterRow&&s.showFooterRow){const rt=kt()?y<=s.frozenColumn?xe[0]:xe[1]:xe[0],ut=E.createDomElement("div",{className:`ui-state-default slick-footerrow-column l${y} r${y}`},rt);E.storage.put(ut,"column",I),oe(L.onFooterRowCellRendered,{node:ut,column:I,grid:L})}}il(Xe),As(),s.enableColumnReorder&&(typeof s.enableColumnReorder=="function"?s.enableColumnReorder(L,U,Le,Ds,As,o,_t,Z,oe):qi())}function Mt(){U.forEach(function(y){P.bind(y,"click",function(T){if(!Es&&!T.target.classList.contains("slick-resizable-handle")){var I=T.target.closest(".slick-header-column");if(I){var V=E.storage.get(I,"column");if(V.sortable){if(!Ne().commitCurrentEdit())return;for(var Y=Xe.slice(),j=null,Te=0;Te<Xe.length;Te++)if(Xe[Te].columnId==V.id){j=Xe[Te],j.sortAsc=!j.sortAsc;break}var et=!!j;s.tristateMultiColumnSort?(j||(j={columnId:V.id,sortAsc:V.defaultSortAsc}),et&&j.sortAsc&&(Xe.splice(Te,1),j=null),s.multiColumnSort||(Xe=[]),j&&(!et||!s.multiColumnSort)&&Xe.push(j)):T.metaKey&&s.multiColumnSort?j&&Xe.splice(Te,1):((!T.shiftKey&&!T.metaKey||!s.multiColumnSort)&&(Xe=[]),j?Xe.length===0&&Xe.push(j):(j={columnId:V.id,sortAsc:V.defaultSortAsc},Xe.push(j)));var rt;s.multiColumnSort?rt={multiColumnSort:!0,previousSortColumns:Y,sortCols:Xe.map(function(ut){return{columnId:o[_t(ut.columnId)].id,sortCol:o[_t(ut.columnId)],sortAsc:ut.sortAsc}})}:rt={multiColumnSort:!1,previousSortColumns:Y,columnId:Xe.length>0?V.id:null,sortCol:Xe.length>0?V:null,sortAsc:Xe.length>0?Xe[0].sortAsc:!0},oe(L.onBeforeSort,rt,T).getReturnValue()!==!1&&(il(Xe),oe(L.onSort,rt,T))}}}})})}function qi(){xo&&(xo.destroy(),Ss.destroy());var y=null;function T(){Hi.scrollLeft=Hi.scrollLeft+10}function I(){Hi.scrollLeft=Hi.scrollLeft-10}var V,Y={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!kt(),onStart:function(j){V=!kt()||E.offset(j.item).left>E.offset(Hi).left,V&&j.originalEvent.pageX>B.clientWidth?y||(y=setInterval(T,100)):V&&j.originalEvent.pageX<E.offset(Hi).left?y||(y=setInterval(I,100)):(clearInterval(y),y=null)},onEnd:function(j){clearInterval(y),y=null;var Te=null;if(Ne().commitCurrentEdit()){var et=xo.toArray();et=et.concat(Ss.toArray());for(var rt=[],ut=0;ut<et.length;ut++)rt.push(o[_t(et[ut])]);Ds(rt),oe(L.onColumnsReordered,{impactedColumns:Zi(Te)}),j.stopPropagation(),As()}}};xo=Sortable.create(mn,Y),Ss=Sortable.create(ir,Y)}function an(){const y=Array.from(U[0].children),T=Array.from(U[1].children);return y.concat(T)}function Zi(y){var T=[];if(y)for(var I=y.start;I<=y.end;I++)T.push(o[I]);else T=o;return T}function is(y){const T=y.target.parentElement.id.replace(Z,"");oe(L.onColumnsResizeDblClick,{triggeredByColumn:T})}function As(){if(typeof Slick.Resizable>"u")throw new Error('Slick.Resizable is undefined, make sure to import "slick.interactions.js"');var y,T,I,V,Y,j,Te,et,rt=0;const ut=an();for(let pt=0;pt<ut.length;pt++)ut[pt].querySelectorAll(".slick-resizable-handle").forEach(function(Qt){Qt.remove()}),!(pt>=o.length||!o[pt]||o[pt].hidden)&&o[pt].resizable&&(Te===void 0&&(Te=pt),et=pt);if(Te!==void 0)for(let pt=0;pt<ut.length;pt++){const nt=ut[pt];if(pt>=o.length||!o[pt]||o[pt].hidden||pt<Te||s.forceFitColumns&&pt>=et)continue;const pi=E.createDomElement("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},nt);P.bind(pi,"dblclick",is),wo.push(Slick.Resizable({resizeableElement:nt,resizeableHandleElement:pi,onResizeStart:function(Qt,yi){var Yi=Qt.touches?Qt.touches[0]:Qt;if(!Ne().commitCurrentEdit())return!1;V=Yi.pageX,rt=0,yi.resizeableElement.classList.add("slick-header-column-active");var Pi=null,En=null;for(let gn=0;gn<ut.length;gn++)gn>=o.length||!o[gn]||o[gn].hidden||(o[gn].previousWidth=ut[gn].offsetWidth);if(s.forceFitColumns)for(Pi=0,En=0,y=pt+1;y<o.length;y++)I=o[y],I&&I.resizable&&!I.hidden&&(En!==null&&(I.maxWidth?En+=I.maxWidth-I.previousWidth:En=null),Pi+=I.previousWidth-Math.max(I.minWidth||0,K));var si=0,Rn=0;for(y=0;y<=pt;y++)I=o[y],I&&I.resizable&&!I.hidden&&(Rn!==null&&(I.maxWidth?Rn+=I.maxWidth-I.previousWidth:Rn=null),si+=I.previousWidth-Math.max(I.minWidth||0,K));Pi===null&&(Pi=1e5),si===null&&(si=1e5),En===null&&(En=1e5),Rn===null&&(Rn=1e5),j=V+Math.min(Pi,Rn),Y=V-Math.min(si,En)},onResize:function(Qt,yi){var Yi=Qt.touches?Qt.touches[0]:Qt;Es=!0;var Pi,En=Math.min(j,Math.max(Y,Yi.pageX))-V,si,Rn=0,gn=0,Nc=We?$-a.width:$;if(En<0){for(si=En,y=pt;y>=0;y--)I=o[y],I&&I.resizable&&!I.hidden&&(Pi=Math.max(I.minWidth||0,K),si&&I.previousWidth+si<Pi?(si+=I.previousWidth-Pi,I.width=Pi):(I.width=I.previousWidth+si,si=0));for(T=0;T<=pt;T++)I=o[T],!(!I||I.hidden)&&(kt()&&T>s.frozenColumn?gn+=I.width:Rn+=I.width);if(s.forceFitColumns)for(si=-En,y=pt+1;y<o.length;y++)I=o[y],!(!I||I.hidden)&&I.resizable&&(si&&I.maxWidth&&I.maxWidth-I.previousWidth<si?(si-=I.maxWidth-I.previousWidth,I.width=I.maxWidth):(I.width=I.previousWidth+si,si=0),kt()&&y>s.frozenColumn?gn+=I.width:Rn+=I.width);else for(y=pt+1;y<o.length;y++)I=o[y],!(!I||I.hidden)&&(kt()&&y>s.frozenColumn?gn+=I.width:Rn+=I.width);if(s.forceFitColumns)for(si=-En,y=pt+1;y<o.length;y++)I=o[y],!(!I||I.hidden)&&I.resizable&&(si&&I.maxWidth&&I.maxWidth-I.previousWidth<si?(si-=I.maxWidth-I.previousWidth,I.width=I.maxWidth):(I.width=I.previousWidth+si,si=0))}else{for(si=En,Rn=0,gn=0,y=pt;y>=0;y--)if(I=o[y],!(!I||I.hidden)&&I.resizable)if(si&&I.maxWidth&&I.maxWidth-I.previousWidth<si)si-=I.maxWidth-I.previousWidth,I.width=I.maxWidth;else{var lo=I.previousWidth+si,zd=re+si;kt()&&y<=s.frozenColumn?(lo>rt&&zd<Nc-s.frozenRightViewportMinWidth&&(rt=lo),I.width=zd+s.frozenRightViewportMinWidth>Nc?rt:lo):I.width=lo,si=0}for(T=0;T<=pt;T++)I=o[T],!(!I||I.hidden)&&(kt()&&T>s.frozenColumn?gn+=I.width:Rn+=I.width);if(s.forceFitColumns)for(si=-En,y=pt+1;y<o.length;y++)I=o[y],!(!I||I.hidden)&&I.resizable&&(Pi=Math.max(I.minWidth||0,K),si&&I.previousWidth+si<Pi?(si+=I.previousWidth-Pi,I.width=Pi):(I.width=I.previousWidth+si,si=0),kt()&&y>s.frozenColumn?gn+=I.width:Rn+=I.width);else for(y=pt+1;y<o.length;y++)I=o[y],!(!I||I.hidden)&&(kt()&&y>s.frozenColumn?gn+=I.width:Rn+=I.width)}kt()&&Rn!=re&&(E.width(mn,Rn+1e3),E.setStyleSize(Sr,"left",Rn)),Xt(),s.syncColumnCellResize&&Si(),oe(L.onColumnsDrag,{triggeredByColumn:yi.resizeableElement,resizeHandle:yi.resizeableHandleElement})},onResizeEnd:function(Qt,yi){yi.resizeableElement.classList.remove("slick-header-column-active");var Yi=yi.resizeableElement.id.replace(Z,"");oe(L.onBeforeColumnsResize,{triggeredByColumn:Yi}).getReturnValue()===!0&&Xt();var Pi;for(y=0;y<o.length;y++)I=o[y],!(!I||I.hidden)&&(Pi=ut[y].offsetWidth,I.previousWidth!==Pi&&I.rerenderOnResize&&vn());Oo(!0),Qi(),oe(L.onColumnsResized,{triggeredByColumn:Yi}),setTimeout(function(){Es=!1},300)}}))}}function ns(y){var T=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],I=getComputedStyle(y),V=0;return T.forEach(function(Y){V+=E.toFloat(I[Y])}),V}function pd(){if(s.frozenColumn=s.frozenColumn>=0&&s.frozenColumn<o.length?parseInt(s.frozenColumn):-1,s.frozenRow>-1){G=!0,ve=s.frozenRow*s.rowHeight;var y=Ri();ke=s.frozenBottom?y-s.frozenRow:s.frozenRow}else G=!1}function ju(){kt()?(D(Sr),D(Vn),G?(D(di),D(zn)):(A(zn),A(di))):(A(Sr),A(Vn),A(zn),G?D(di):(A(zn),A(di)))}function md(){Ei.style["overflow-x"]=kt()?G&&!s.alwaysAllowHorizontalScroll?"hidden":"scroll":G&&!s.alwaysAllowHorizontalScroll?"hidden":"auto",Ei.style["overflow-y"]=!kt()&&s.alwaysShowVerticalScroll?"scroll":kt()?"hidden":G?"scroll":"auto",yn.style["overflow-x"]=kt()?G&&!s.alwaysAllowHorizontalScroll?"hidden":"scroll":G&&!s.alwaysAllowHorizontalScroll?"hidden":"auto",yn.style["overflow-y"]=s.alwaysShowVerticalScroll?"scroll":(kt(),G?"scroll":"auto"),Yn.style["overflow-x"]=kt()?G&&!s.alwaysAllowHorizontalScroll?"scroll":"auto":(G&&!s.alwaysAllowHorizontalScroll,"auto"),Yn.style["overflow-y"]=!kt()&&s.alwaysShowVerticalScroll?"scroll":kt()?"hidden":G?"scroll":"auto",jn.style["overflow-x"]=kt()?G&&!s.alwaysAllowHorizontalScroll?"scroll":"auto":(G&&!s.alwaysAllowHorizontalScroll,"auto"),jn.style["overflow-y"]=s.alwaysShowVerticalScroll?"scroll":(kt(),"auto"),s.viewportClass&&(Ei.classList.add(...s.viewportClass.split(" ")),yn.classList.add(...s.viewportClass.split(" ")),Yn.classList.add(...s.viewportClass.split(" ")),jn.classList.add(...s.viewportClass.split(" ")))}function Xu(){kt()?(Br=yo,Cs=gr,So=ue,G?s.frozenBottom?(Hi=jn,Oi=yn):Hi=Oi=jn:Hi=Oi=yn):(Br=to,Cs=vr,So=se,G?s.frozenBottom?(Hi=Yn,Oi=Ei):Hi=Oi=Yn:Hi=Oi=Ei)}function xf(){const y=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],T=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],I=U[0];Le=jt=0,It=bi=0;let V=E.createDomElement("div",{className:"ui-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},I),Y=getComputedStyle(V);Y["box-sizing"]!="border-box"&&Y["-moz-box-sizing"]!="border-box"&&Y["-webkit-box-sizing"]!="border-box"&&(y.forEach(function(Te){Le+=E.toFloat(Y[Te])}),T.forEach(function(Te){jt+=E.toFloat(Y[Te])})),V.remove();const j=E.createDomElement("div",{className:"slick-row"},ot[0]);V=E.createDomElement("div",{className:"slick-cell",id:"",style:{visibility:"hidden",textContent:"-"}},j),Y=getComputedStyle(V),Y["box-sizing"]!="border-box"&&Y["-moz-box-sizing"]!="border-box"&&Y["-webkit-box-sizing"]!="border-box"&&(y.forEach(function(Te){It+=E.toFloat(Y[Te])}),T.forEach(function(Te){bi+=E.toFloat(Y[Te])})),j.remove(),K=Math.max(Le,It)}function Ku(){ze=document.createElement("style"),(s.shadowRoot||document.head).appendChild(ze);const y=s.rowHeight-bi,T=[`.${Z} .slick-group-header-column { left: 1000px; }`,`.${Z} .slick-header-column { left: 1000px; }`,`.${Z} .slick-top-panel { height: ${s.topPanelHeight}px; }`,`.${Z} .slick-preheader-panel { height: ${s.preHeaderPanelHeight}px; }`,`.${Z} .slick-headerrow-columns { height: ${s.headerRowHeight}px; }`,`.${Z} .slick-footerrow-columns { height: ${s.footerRowHeight}px; }`,`.${Z} .slick-cell { height: ${y}px; }`,`.${Z} .slick-row { height: ${s.rowHeight}px; }`],I=ze.sheet;if(I){for(let V of T)I.insertRule(V);for(let V=0;V<o.length;V++)!o[V]||o[V].hidden||(I.insertRule(`.${Z} .l${V} { }`),I.insertRule(`.${Z} .r${V} { }`))}else tl(T)}function tl(y){const T=document.createElement("template");T.innerHTML='<style type="text/css" rel="stylesheet" />',ze=T.content.firstChild,(s.shadowRoot||document.head).appendChild(ze);for(let I=0;I<o.length;I++)!o[I]||o[I].hidden||(y.push(`.${Z} .l${I} { }`),y.push(`.${Z} .r${I} { }`));ze.styleSheet?ze.styleSheet.cssText=y.join(" "):ze.appendChild(document.createTextNode(y.join(" ")))}function Tf(y){var et;var T;if(!ct){var I=(s.shadowRoot||document).styleSheets;for(((et=s.devMode)==null?void 0:et.ownerNodeIndex)>=0&&(I[s.devMode.ownerNodeIndex].ownerNode=ze),T=0;T<I.length;T++)if((I[T].ownerNode||I[T].owningElement)==ze){ct=I[T];break}if(!ct)throw new Error("SlickGrid Cannot find stylesheet.");k=[],ee=[];var V=ct.cssRules||ct.rules,Y,j;for(T=0;T<V.length;T++){var Te=V[T].selectorText;(Y=/\.l\d+/.exec(Te))?(j=parseInt(Y[0].substr(2,Y[0].length-2),10),k[j]=V[T]):(Y=/\.r\d+/.exec(Te))&&(j=parseInt(Y[0].substr(2,Y[0].length-2),10),ee[j]=V[T])}}return{left:k[y],right:ee[y]}}function qu(){ze&&ze.remove(),ct=null}function vd(y){P.unbindAll(),ki=kl(ki),vi=kl(vi),wo=kl(wo),Ne().cancelCurrentEdit(),oe(L.onBeforeDestroy,{});for(var T=fn.length;T--;)wr(fn[T]);s.enableColumnReorder&&xo&&typeof xo.destroy=="function"&&(xo.destroy(),Ss.destroy()),ts(),P.unbindByEventName(B,"resize.slickgrid",Or),qu(),ot.forEach(function(Y){P.unbindByEventName(Y,"keydown",ll),P.unbindByEventName(Y,"click",pc),P.unbindByEventName(Y,"dblclick",mc),P.unbindByEventName(Y,"contextmenu",ds),P.unbindByEventName(Y,"mouseover",xd),P.unbindByEventName(Y,"mouseout",Cc)}),He.forEach(function(Y){P.unbindByEventName(Y,"scroll",Ar)}),J.forEach(function(Y){P.unbindByEventName(Y,"contextmenu",gc),P.unbindByEventName(Y,"click",_c)}),ae.forEach(function(Y){P.unbindByEventName(Y,"scroll",fi)}),xe&&xe.forEach(function(Y){P.unbindByEventName(Y,"contextmenu",bc),P.unbindByEventName(Y,"click",wd)}),Oe&&Oe.forEach(function(Y){P.unbindByEventName(Y,"scroll",lc)}),Ve&&P.unbindByEventName(Ve,"scroll",ac),P.unbindByEventName(de,"keydown",ll),P.unbindByEventName(be,"keydown",ll);const I=B.querySelectorAll(".slick-resizable-handle");[].forEach.call(I,function(Y){P.unbindByEventName(Y,"dblclick",is)});const V=B.querySelectorAll(".slick-header-column");[].forEach.call(V,function(Y){P.unbindByEventName(Y,"mouseenter",vc),P.unbindByEventName(Y,"mouseleave",Vr),P.unbindByEventName(Y,"mouseenter",yt),P.unbindByEventName(Y,"mouseleave",ft)}),E.emptyElement(B),B.classList.remove(Z),y&&rs()}function kl(y){if(y){const T=Array.isArray(y)?y:[y];let I;for(;(I=T.pop())!=null;)I&&typeof I.destroy=="function"&&I.destroy()}return y=Array.isArray(y)?[]:null,y}function rs(){qt=null,Fi=null,St=null,ot=null,Xn=null,io=null,_r=null,Eo=null,B=null,de=null,be=null,mn=null,ir=null,U=null,F=null,ye=null,$e=null,Ke=null,Ie=null,Cs=null,ae=null,vr=null,gr=null,Br=null,J=null,to=null,yo=null,ys=null,xe=null,Je=null,dt=null,De=null,ne=null,Oe=null,se=null,ue=null,So=null,pe=null,Ue=null,Ve=null,ce=null,Ye=null,_e=null,Ce=null,ze=null,At=null,Bt=null,ui=null,Ci=null,ar=null,Sr=null,$n=null,Vn=null,di=null,zn=null,He=null,Ei=null,yn=null,Yn=null,jn=null,Hi=null,Oi=null}var ks=null,na=null;function Of(y,T){var I=null,V=-1;if(typeof y=="number")I=o[y],V=y;else if(typeof y=="string")for(i=0;i<o.length;i++)o[i].Id===y&&(I=o[i],V=i);if(!I)return;const Y=Kn(0,0);gd(I,V,Y,T,V)}function ra(y){return!y.ignoreHeaderText&&!y.sizeToRemaining&&y.contentSizePx===y.headerWidthPx&&y.widthPx<100}function os(y,T){es(),ro(y,T),ws()}function ro(y,T){if(y=y||s.autosizeColsMode,y===Slick.GridAutosizeColsMode.LegacyForceFit||y===Slick.GridAutosizeColsMode.LegacyOff){If();return}if(y!==Slick.GridAutosizeColsMode.None){ks=document.createElement("canvas"),ks&&ks.getContext&&(na=ks.getContext("2d"));var I=Kn(0,0),V=We?$-a.width:$,Y,j,Te,et,rt=0,ut=0,pt=0,nt=0,pi=0;for(Y=0;Y<o.length;Y++)j=o[Y],gd(j,Y,I,T,Y),pi+=j.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?j.width:ra(j.autoSize)?j.autoSize.widthPx:0,nt+=j.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?j.width:ra(j.autoSize)?j.autoSize.widthPx:j.minWidth,rt+=j.autoSize.widthPx,ut+=j.autoSize.sizeToRemaining?0:j.autoSize.widthPx,pt+=j.autoSize.sizeToRemaining&&j.minWidth||0;var Qt=rt-ut;if(y===Slick.GridAutosizeColsMode.FitViewportToCols){var yi=rt+a.width;y=Slick.GridAutosizeColsMode.IgnoreViewport,s.viewportMaxWidthPx&&yi>s.viewportMaxWidthPx?(yi=s.viewportMaxWidthPx,y=Slick.GridAutosizeColsMode.FitColsToViewport):s.viewportMinWidthPx&&yi<s.viewportMinWidthPx&&(yi=s.viewportMinWidthPx,y=Slick.GridAutosizeColsMode.FitColsToViewport),E.width(B,yi)}if(y===Slick.GridAutosizeColsMode.FitColsToViewport)if(Qt>0&&ut<V-pt){for(Y=0;Y<o.length;Y++)if(j=o[Y],!(!j||j.hidden)){var Yi=V-ut;j.autoSize.sizeToRemaining?Te=Yi*j.autoSize.widthPx/Qt:Te=j.autoSize.widthPx,j.rerenderOnResize&&j.width!=Te&&(et=!0),j.width=Te}}else if(s.viewportSwitchToScrollModeWidthPercent&&ut+pt>V*s.viewportSwitchToScrollModeWidthPercent/100||nt>V)y=Slick.GridAutosizeColsMode.IgnoreViewport;else{var Pi=ut-pi,En=V-pi-pt;for(Y=0;Y<o.length;Y++)j=o[Y],!(!j||j.hidden)&&(Te=j.width,j.autoSize.autosizeMode!==Slick.ColAutosizeMode.Locked&&!ra(j.autoSize)&&(j.autoSize.sizeToRemaining?Te=j.minWidth:(Te=En/Pi*j.autoSize.widthPx-1,Te<j.minWidth&&(Te=j.minWidth),Pi-=j.autoSize.widthPx,En-=Te)),ra(j.autoSize)&&(Te=j.autoSize.widthPx,Te<j.minWidth&&(Te=j.minWidth)),j.rerenderOnResize&&j.width!=Te&&(et=!0),j.width=Te)}if(y===Slick.GridAutosizeColsMode.IgnoreViewport)for(Y=0;Y<o.length;Y++)!o[Y]||o[Y].hidden||(Te=o[Y].autoSize.widthPx,o[Y].rerenderOnResize&&o[Y].width!=Te&&(et=!0),o[Y].width=Te);_d(et)}}function gd(y,T,I,V,Y){var j=y.autoSize;if(j.widthPx=y.width,j.autosizeMode===Slick.ColAutosizeMode.Locked||j.autosizeMode===Slick.ColAutosizeMode.Guide)return;var Te=Ri();const et=new RegExp(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z/);if(j.autosizeMode===Slick.ColAutosizeMode.ContentIntelligent){var rt=j.colDataTypeOf,ut;if(Te>0){var pt=In(0);pt&&(ut=pt[y.field],et.test(ut)&&(ut=Date.parse(ut)),rt=typeof ut,rt==="object"&&(ut instanceof Date&&(rt="date"),typeof moment<"u"&&ut instanceof moment&&(rt="moment")))}rt==="boolean"&&(j.colValueArray=[!0,!1]),rt==="number"&&(j.valueFilterMode=Slick.ValueFilterMode.GetGreatestAndSub,j.rowSelectionMode=Slick.RowSelectionMode.AllRows),rt==="string"&&(j.valueFilterMode=Slick.ValueFilterMode.GetLongestText,j.rowSelectionMode=Slick.RowSelectionMode.AllRows,j.allowAddlPercent=5),rt==="date"&&(j.colValueArray=[new Date(2009,8,30,12,20,20)]),rt==="moment"&&typeof moment<"u"&&(j.colValueArray=[moment([2009,8,30,12,20,20])])}var nt=j.contentSizePx=Af(y,T,I,V,Y);nt===0&&(nt=j.widthPx);var pi=j.allowAddlPercent?1+j.allowAddlPercent/100:1;nt=nt*pi+s.autosizeColPaddingPx,y.minWidth&&nt<y.minWidth&&(nt=y.minWidth),y.maxWidth&&nt>y.maxWidth&&(nt=y.maxWidth),(j.autosizeMode===Slick.ColAutosizeMode.ContentExpandOnly||y.editor&&y.editor.ControlFillsColumn)&&nt<y.width&&(nt=y.width),j.widthPx=nt}function Af(y,T,I,V,Y){var j=y.autoSize,Te=1,et,rt,ut=0,pt=0;if(j.headerWidthPx=0,j.ignoreHeaderText||(j.headerWidthPx=kf(y)),j.headerWidthPx===0&&(j.headerWidthPx=y.width?y.width:y.maxWidth?y.maxWidth:y.minWidth?y.minWidth:20),j.colValueArray)return pt=Zu(y,I,j.colValueArray),Math.max(j.headerWidthPx,pt);var nt={};nt.colIndex=T,nt.rowCount=Ri(),nt.startIndex=0,nt.endIndex=nt.rowCount-1,nt.valueArr=null,nt.getRowVal=function(si){return In(si)[y.field]};var pi=(V?j.rowSelectionModeOnInit:void 0)||j.rowSelectionMode;if(pi===Slick.RowSelectionMode.FirstRow&&(nt.endIndex=0),pi===Slick.RowSelectionMode.LastRow&&(nt.endIndex=nt.startIndex=nt.rowCount-1),pi===Slick.RowSelectionMode.FirstNRows&&(nt.endIndex=Math.min(j.rowSelectionCount,nt.rowCount)-1),j.valueFilterMode===Slick.ValueFilterMode.DeDuplicate){var Qt={};for(et=nt.startIndex;et<=nt.endIndex;et++)Qt[nt.getRowVal(et)]=!0;if(Object.keys)nt.valueArr=Object.keys(Qt);else{nt.valueArr=[];for(var yi in Qt)nt.valueArr.push(yi)}nt.startIndex=0,nt.endIndex=nt.length-1}if(j.valueFilterMode===Slick.ValueFilterMode.GetGreatestAndSub){var Yi,Pi=0;for(et=nt.startIndex;et<=nt.endIndex;et++)rt=nt.getRowVal(et),Math.abs(rt)>Pi&&(Yi=rt,Pi=Math.abs(rt));Yi=""+Yi,Yi=Array(Yi.length+1).join("9"),Yi=+Yi,nt.valueArr=[Yi],nt.startIndex=nt.endIndex=0}if(j.valueFilterMode===Slick.ValueFilterMode.GetLongestTextAndSub){for(et=nt.startIndex;et<=nt.endIndex;et++)rt=nt.getRowVal(et),(rt||"").length>ut&&(ut=rt.length);rt=Array(ut+1).join("m"),Te=s.autosizeTextAvgToMWidthRatio,nt.maxLen=ut,nt.valueArr=[rt],nt.startIndex=nt.endIndex=0}if(j.valueFilterMode===Slick.ValueFilterMode.GetLongestText){ut=0;var En=0;for(et=nt.startIndex;et<=nt.endIndex;et++)rt=nt.getRowVal(et),(rt||"").length>ut&&(ut=rt.length,En=et);rt=nt.getRowVal(En),nt.maxLen=ut,nt.valueArr=[rt],nt.startIndex=nt.endIndex=0}return nt.maxLen&&nt.maxLen>30&&Y>1&&(j.sizeToRemaining=!0),pt=Zu(y,I,nt)*Te,Math.max(j.headerWidthPx,pt)}function Zu(y,T,I){const V=E.createDomElement("div",{className:"slick-row ui-widget-content"},T),Y=E.createDomElement("div",{className:"slick-cell"},V);Y.style.position="absolute",Y.style.visibility="hidden",Y.style["text-overflow"]="initial",Y.style["white-space"]="nowrap";var j,Te,et=0,rt,ut,pt,nt=y.autoSize.widthEvalMode===Slick.WidthEvalMode.TextOnly;if(y.autoSize.widthEvalMode===Slick.WidthEvalMode.Auto){var pi=!y.formatterOverride&&!y.formatter,Qt=y.formatterOverride&&y.formatterOverride.ReturnsTextOnly||!y.formatterOverride&&y.formatter&&y.formatter.ReturnsTextOnly;nt=pi||Qt}if(na&&nt){const yi=getComputedStyle(Y);for(na.font=yi["font-size"]+" "+yi["font-family"],j=I.startIndex;j<=I.endIndex;j++)pt=I.valueArr?I.valueArr[j]:I.getRowVal(j),y.formatterOverride?ut=y.formatterOverride(j,I.colIndex,pt,y,In(j),L):y.formatter?ut=y.formatter(j,I.colIndex,pt,y,In(j),L):ut=""+pt,Te=ut?na.measureText(ut).width:0,Te>et&&(et=Te,rt=ut);return Y.textContent=rt,Te=Y.offsetWidth,V.remove(),Te}for(j=I.startIndex;j<=I.endIndex;j++)pt=I.valueArr?I.valueArr[j]:I.getRowVal(j),y.formatterOverride?ut=y.formatterOverride(j,I.colIndex,pt,y,In(j),L):y.formatter?ut=y.formatter(j,I.colIndex,pt,y,In(j),L):ut=""+pt,Vo(ut,Y),Te=Y.offsetWidth,Te>et&&(et=Te);return V.remove(),et}function kf(y){var T=0,I=Js()+y.id,V=document.getElementById(I),Y=I+"_";if(V){var j=V.cloneNode(!0);j.id=Y,j.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",V.parentNode.insertBefore(j,V),T=j.offsetWidth,j.parentNode.removeChild(j)}else{let Te=hi(y);V=E.createDomElement("div",{id:Y,className:"ui-state-default slick-header-column"},Te);const et=E.createDomElement("span",{className:"slick-column-name"},V);et.innerHTML=$o(y.name),j.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",y.headerCssClass&&V.classList.add(...y.headerCssClass.split(" ")),T=V.offsetWidth,Te.removeChild(V)}return T}function If(){var y,T,I=[],V=0,Y=0,j,Te=We?$-a.width:$;for(y=0;y<o.length;y++)T=o[y],!(!T||T.hidden)&&(I.push(T.width),Y+=T.width,T.resizable&&(V+=T.width-Math.max(T.minWidth,K)));for(j=Y;Y>Te&&V;){var et=(Y-Te)/V;for(y=0;y<o.length&&Y>Te;y++)if(T=o[y],!(!T||T.hidden)){var rt=I[y];if(!(!T.resizable||rt<=T.minWidth||rt<=K)){var ut=Math.max(T.minWidth,K),pt=Math.floor(et*(rt-ut))||1;pt=Math.min(pt,rt-ut),Y-=pt,V-=pt,I[y]-=pt}}if(j<=Y)break;j=Y}for(j=Y;Y<Te;){var nt=Te/Y;for(y=0;y<o.length&&Y<Te;y++)if(T=o[y],!(!T||T.hidden)){var pi=I[y],Qt;!T.resizable||T.maxWidth<=pi?Qt=0:Qt=Math.min(Math.floor(nt*pi)-pi,T.maxWidth-pi||1e6)||1,Y+=Qt,I[y]+=Y<=Te?Qt:0}if(j>=Y)break;j=Y}var yi=!1;for(y=0;y<o.length;y++)!T||T.hidden||(o[y].rerenderOnResize&&o[y].width!=I[y]&&(yi=!0),o[y].width=I[y]);_d(yi)}function _d(y){Xt(),Oo(!0),oe(L.onAutosizeColumns,{columns:o}),y&&(vn(),Qi())}function Is(){return o.filter(y=>!y.hidden)}function oe(y,T,I){return I=I||new Slick.EventData(I,T),T=T||{},T.grid=L,y.notify(T,I,L)}function Ne(){return s.editorLock}function Me(){return vt}function _t(y){return Se[y]}function Xt(){if(!M)return;let y=0,T=Is();U.forEach(function(I){for(let V=0;V<I.children.length;V++,y++){const Y=I.children[V],Te=((T[y]||{}).width||0)-Le;E.width(Y)!==Te&&E.width(Y,Te)}}),ss()}function Si(){for(var y=0,T,I,V=0;V<o.length;V++)o[V]&&o[V].hidden||(T=o[V].width,I=Tf(V),I.left.style.left=y+"px",I.right.style.right=(s.frozenColumn!=-1&&V>s.frozenColumn?Pe:re)-y-T+"px",s.frozenColumn!=V&&(y+=o[V].width)),s.frozenColumn==V&&(y=0)}function kn(y,T){il([{columnId:y,sortAsc:T}])}function Bi(y){let T=null;return U.every(function(I){const V=I.children.length;return y<V?(T=I.children[y],!1):(y-=V,!0)}),T}function il(y){Xe=y;const T=s.numberedMultiColumnSort&&Xe.length>1;U.forEach(function(V){let Y=V.querySelectorAll(".slick-header-column-sorted");Y.forEach(function(j){j.classList.remove("slick-header-column-sorted")}),Y=V.querySelectorAll(".slick-sort-indicator"),Y.forEach(function(j){j.classList.remove("slick-sort-indicator-asc"),j.classList.remove("slick-sort-indicator-desc")}),Y=V.querySelectorAll(".slick-sort-indicator-numbered"),Y.forEach(function(j){j.textContent=""})});let I=1;Xe.forEach(function(V){V.sortAsc==null&&(V.sortAsc=!0);const Y=_t(V.columnId);if(Y!=null){const j=Bi(Y);if(j){j.classList.add("slick-header-column-sorted");let Te=j.querySelector(".slick-sort-indicator");Te&&Te.classList.add(V.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),T&&(Te=j.querySelector(".slick-sort-indicator-numbered"),Te&&(Te.textContent=I))}}I++})}function Df(){return Xe}function Tr(y,T){const I=y.getNativeEvent();var V=Bn.slice(0);Bn=[];for(var Y={},j=0;j<T.length;j++)for(var Te=T[j].fromRow;Te<=T[j].toRow;Te++){Y[Te]||(Bn.push(Te),Y[Te]={});for(var et=T[j].fromCell;et<=T[j].toCell;et++)Nd(Te,et)&&(Y[Te][o[et].id]=s.selectedCellCssClass)}if(hc(s.selectedCellCssClass,Y),oa(V,Bn)){var rt=I&&I.detail&&I.detail.caller||"click",ut=ka().filter(function(nt){return V.indexOf(nt)<0}),pt=V.filter(function(nt){return ka().indexOf(nt)<0});oe(L.onSelectedRowsChanged,{rows:ka(),previousSelectedRows:V,caller:rt,changedSelectedRows:ut,changedUnselectedRows:pt},y)}}function oa(y,T){return Array.isArray(y)&&Array.isArray(T)&&T.sort().toString()!==y.sort().toString()}function Rf(){return o}function ss(){xt=[],ti=[];for(var y=0,T=0,I=o.length;T<I;T++)!o[T]||o[T].hidden||(xt[T]=y,ti[T]=y+o[T].width,s.frozenColumn==T?y=0:y+=o[T].width)}function Il(){Se={};for(var y=0;y<o.length;y++){o[y].width&&(o[y].widthRequest=o[y].width);var T=o[y]=E.extend({},u,o[y]);T.autoSize=E.extend({},h,T.autoSize),Se[T.id]=y,T.minWidth&&T.width<T.minWidth&&(T.width=T.minWidth),T.maxWidth&&T.width>T.maxWidth&&(T.width=T.maxWidth)}}function Ds(y){oe(L.onBeforeSetColumns,{previousColumns:o,newColumns:y,grid:L}),o=y,o=y,Qu()}function Di(){oe(L.onBeforeUpdateColumns,{columns:o,grid:L}),Qu()}function Qu(){Il(),ss(),M&&(ju(),md(),vn(),Vt(),qe(),qu(),Ku(),Or(),Oo(),Xt(),Si(),Ar(),no()&&no().refreshSelections&&no().refreshSelections())}function Ju(){return s}function sa(y,T,I,V){if(Ne().commitCurrentEdit()){Zn(),y.showColumnHeader!==void 0&&bd(y.showColumnHeader),s.enableAddRow!==y.enableAddRow&&ma(Ri()),y.frozenColumn&&(xs().forEach(j=>j.scrollLeft=0),Ar());var Y=E.extend(!0,{},s);s=E.extend(s,y),oe(L.onSetOptions,{optionsBefore:Y,optionsAfter:s}),ec(),pd(),y.frozenBottom!==void 0&&(Jo=!0),He.forEach(function(j){j.style["overflow-y"]=s.autoHeight?"hidden":"auto"}),T||Qi(),Xu(),V||md(),I||Ds(o),s.enableMouseWheelScrollHandler&&He&&(!vi||vi.length===0)?He.forEach(function(j){vi.push(Slick.MouseWheel({element:j,onMouseWheel:fc}))}):s.enableMouseWheelScrollHandler===!1&&kl(vi)}}function ec(){s.autoHeight&&(s.leaveSpaceForNewRows=!1),s.forceFitColumns&&(s.autosizeColsMode=Slick.GridAutosizeColsMode.LegacyForceFit,console.log("forceFitColumns option is deprecated - use autosizeColsMode"))}function Pf(y,T){r=y,vn(),va(),T&&Bo(0)}function Ff(){return r}function Ri(){return r.getLength?r.getLength():r&&r.length||0}function nr(){return Ri()+(s.enableAddRow&&(!Ui||Wi)?1:0)}function In(y){return r.getItem?r.getItem(y):r[y]}function tc(){return _e[0]}function la(){return _e}function nl(y,T,I,V){var Y=V!==!1;if(s[y]!=I)if(s[y]=I,I){if(Y){E.slideDown(T,Or);return}D(T),Or()}else{if(Y){E.slideUp(T,Or);return}A(T),Or()}}function ic(y,T){nl("showTopPanel",Ce,y,T)}function aa(y,T){nl("showHeaderRow",ae,y,T)}function bd(y,T){nl("showColumnHeader",J,y,T)}function Dl(y,T){nl("showFooterRow",Oe,y,T)}function Rs(y,T){nl("showPreHeaderPanel",[Ve,ce],y,T)}function da(){return B}function Cd(y){return s.rowHeight*y-x}function ua(y){return Math.floor((y+x)/s.rowHeight)}function Bo(y){y=Math.max(y,0),y=Math.min(y,c-E.height(Oi)+(mt||kt()?a.height:0));var T=x;C=Math.min(v-1,Math.floor(y/m)),x=Math.round(C*_);var I=y-x;if(x!=T){var V=ga(I);rc(V),ba()}Et!=I&&(S=Et+T<I+x?1:-1,ei=gt=Et=I,kt()&&(Ei.scrollTop=I),G&&(Yn.scrollTop=jn.scrollTop=I),Oi.scrollTop=I,oe(L.onViewportChanged,{}))}function ca(y,T,I,V,Y,j){return I==null?"":(I+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ps(y,T){var I=r.getItemMetadata&&r.getItemMetadata(y),V=I&&I.columns&&(I.columns[T.id]||I.columns[_t(T.id)]);return V&&V.formatter||I&&I.formatter||T.formatter||s.formatterFactory&&s.formatterFactory.getFormatter(T)||s.defaultFormatter}function ha(y,T){var I=o[T],V=r.getItemMetadata&&r.getItemMetadata(y),Y=V&&V.columns;return Y&&Y[I.id]&&Y[I.id].editor!==void 0?Y[I.id].editor:Y&&Y[T]&&Y[T].editor!==void 0?Y[T].editor:I.editor||s.editorFactory&&s.editorFactory.getEditor(I)}function fa(y,T){return s.dataItemColumnValueExtractor?s.dataItemColumnValueExtractor(y,T):y[T.field]}function nc(y,T,I,V,Y){var j=In(I),Te=I<Y&&!j,et="slick-row"+(G&&I<=s.frozenRow?" frozen":"")+(Te?" loading":"")+(I===z&&s.showCellSelection?" active":"")+(I%2==1?" odd":" even");j||(et+=" "+s.addNewRowCssClass);var rt=r.getItemMetadata&&r.getItemMetadata(I);rt&&rt.cssClasses&&(et+=" "+rt.cssClasses);var ut=Od(I),pt=`<div class="ui-widget-content ${et}" style="top:${Cd(I)-ut}px">`;y.push(pt),kt()&&T.push(pt);for(var nt,pi,Qt=0,yi=o.length;Qt<yi;Qt++)if(pi=o[Qt],!(!pi||pi.hidden)){if(nt=1,rt&&rt.columns){var Yi=rt.columns[pi.id]||rt.columns[Qt];nt=Yi&&Yi.colspan||1,nt==="*"&&(nt=yi-Qt)}if(ti[Math.min(yi-1,Qt+nt-1)]>V.leftPx){if(!pi.alwaysRenderColumn&&xt[Qt]>V.rightPx)break;kt()&&Qt>s.frozenColumn?pa(T,I,Qt,nt,j):pa(y,I,Qt,nt,j)}else(pi.alwaysRenderColumn||kt()&&Qt<=s.frozenColumn)&&pa(y,I,Qt,nt,j);nt>1&&(Qt+=nt-1)}y.push("</div>"),kt()&&T.push("</div>")}function pa(y,T,I,V,Y){var j=o[I],Te="slick-cell l"+I+" r"+Math.min(o.length-1,I+V-1)+(j.cssClass?" "+j.cssClass:"");kt()&&I<=s.frozenColumn&&(Te+=" frozen"),T===z&&I===Q&&s.showCellSelection&&(Te+=" active");for(var et in Ct)Ct[et][T]&&Ct[et][T][j.id]&&(Te+=" "+Ct[et][T][j.id]);var rt=null,ut="";Y&&(rt=fa(Y,j),ut=Ps(T,j)(T,I,rt,j,Y,L),ut==null&&(ut=""));var nt=oe(L.onBeforeAppendCell,{row:T,cell:I,value:rt,dataContext:Y}).getReturnValue(),pi=typeof nt=="string"?nt:"";ut&&ut.addClasses&&(pi+=(pi?" ":"")+ut.addClasses);var Qt=ut&&ut.toolTip?"title='"+ut.toolTip+"'":"",yi="";if(j.hasOwnProperty("cellAttrs")&&j.cellAttrs instanceof Object)for(var et in j.cellAttrs)j.cellAttrs.hasOwnProperty(et)&&(yi+=" "+et+'="'+j.cellAttrs[et]+'" ');y.push(`<div class="${Te+(pi?" "+pi:"")}" ${Qt+yi}>`),Y&&y.push(Object.prototype.toString.call(ut)!=="[object Object]"?ut:ut.text),y.push("</div>"),it[T].cellRenderQueue.push(I),it[T].cellColSpans[I]=V}function rc(y){for(var T in it){var I=!0;G&&(s.frozenBottom&&T>=ke||!s.frozenBottom&&T<=ke)&&(I=!1),(T=parseInt(T,10))!==z&&(T<y.top||T>y.bottom)&&I&&Rl(T)}s.enableAsyncPostRenderCleanup&&W()}function Dn(){va(),vn(),Qi()}function vn(){Ee&&Zn();for(var y in it)Rl(y);s.enableAsyncPostRenderCleanup&&W()}function Mf(y,T,I){tr++;for(var V in T)T.hasOwnProperty(V)&&er.push({actionType:"C",groupId:tr,node:y.cellNodesByColumnIdx[V|0],columnIdx:V|0,rowIdx:I});y.rowNode||(y.rowNode=[]),er.push({actionType:"R",groupId:tr,node:y.rowNode}),y.rowNode.forEach(function(Y){Y.remove()})}function Nf(y,T,I){er.push({actionType:"C",groupId:tr,node:y,columnIdx:T,rowIdx:I}),y.remove()}function Rl(y){var T=it[y];!T||!T.rowNode||(s.enableAsyncPostRenderCleanup&&Gi[y]?Mf(T,Gi[y],y):T.rowNode.forEach(function(I){I.parentElement&&I.parentElement.removeChild(I)}),delete it[y],delete Gi[y],wt--,mr++)}function oc(y){var T,I;if(!(!y||!y.length)){for(S=0,I=y.length,T=0;T<I;T++)Ee&&z===y[T]&&Zn(),it[y[T]]&&Rl(y[T]);s.enableAsyncPostRenderCleanup&&W()}}function ma(y){!y&&y!==0||oc([y])}function Vo(y,T,I){if(y==null&&(y=""),Object.prototype.toString.call(y)!=="[object Object]"){T.innerHTML=$o(y);return}T.innerHTML=$o(y.text),y.removeClasses&&!I&&y.removeClasses.split(" ").forEach(function(Y){T.classList.remove(Y)}),y.addClasses&&y.addClasses.split(" ").forEach(function(Y){T.classList.add(Y)}),y.toolTip&&T.setAttribute("title",y.toolTip)}function yd(y,T){var I=Ir(y,T);if(I){var V=o[T],Y=In(y);if(Ee&&z===y&&Q===T)Ee.loadValue(Y);else{var j=Y?Ps(y,V)(y,T,fa(Y,V),V,Y,L):"";Vo(j,I),as(y)}}}function ls(y){var T=it[y];if(T){_a(y);var I,V=In(y);for(var Y in T.cellNodesByColumnIdx)if(T.cellNodesByColumnIdx.hasOwnProperty(Y)){Y=Y|0;var j=o[Y],Te=T.cellNodesByColumnIdx[Y];y===z&&Y===Q&&Ee?Ee.loadValue(V):V?(I=Ps(y,j)(y,Y,fa(V,j),j,V,L),Vo(I,Te)):E.emptyElement(Te)}as(y)}}function rl(){if((!s.autoHeight||s.frozenColumn!=-1)&&(Rt=s.showTopPanel?s.topPanelHeight+ns(Ce[0]):0,Lt=s.showHeaderRow?s.headerRowHeight+ns(ae[0]):0,Ot=s.showFooterRow?s.footerRowHeight+ns(Oe[0]):0),s.autoHeight){let y=ar.offsetHeight;y+=s.showHeaderRow?s.headerRowHeight+ns(ae[0]):0,y+=s.showFooterRow?s.footerRowHeight+ns(Oe[0]):0,y+=qn()>$?a.height:0,ge=s.rowHeight*nr()+(s.frozenColumn==-1?y:0)}else{const y=s.showColumnHeader?E.toFloat(E.height(J[0]))+ns(J[0]):0,T=s.createPreHeaderPanel&&s.showPreHeaderPanel?s.preHeaderPanelHeight+ns(Ve):0,I=getComputedStyle(B);ge=E.toFloat(I.height)-E.toFloat(I.paddingTop)-E.toFloat(I.paddingBottom)-y-Rt-Lt-Ot-T}return Ht=Math.ceil(ge/s.rowHeight),ge}function ol(){var y;$=parseFloat(E.innerSize(B,"width"))||((y=s.devMode)==null?void 0:y.containerClientWidth)}function Or(){if(M){if(at=0,st=0,ht=0,ol(),rl(),G?s.frozenBottom?(at=ge-ve-a.height,st=ve+a.height):(at=ve,st=ge-ve):at=ge,at+=Rt+Lt+Ot,kt()&&s.autoHeight&&(at+=a.height),ht=at-Rt-Lt-Ot,s.autoHeight){if(kt()){const T=getComputedStyle(to);E.height(B,at+E.toFloat(T.height))}$n.style.position="relative"}E.setStyleSize($n,"top",E.height(ar)||(s.showHeaderRow?s.headerRowHeight:0)+(s.showPreHeaderPanel?s.preHeaderPanelHeight:0)),E.height($n,at);var y=$n.offsetTop+at;s.autoHeight||E.height(Ei,ht),kt()?(E.setStyleSize(Vn,"top",E.height(ar)),E.height(Vn,at),E.height(yn,ht),G&&(E.setStyleSize(di,"top",y),E.height(di,st),E.setStyleSize(zn,"top",y),E.height(zn,st),E.height(jn,st))):G&&(E.width(di,"100%"),E.height(di,st),E.setStyleSize(di,"top",y)),G?(E.height(Yn,st),s.frozenBottom?(E.height(_r,ve),kt()&&E.height(Eo,ve)):(E.height(Xn,ve),kt()&&E.height(io,ve))):E.height(yn,ht),(!a||!a.width)&&(a=To()),s.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&os(),va(),Ar(),Ai=-1,Qi()}}function sl(y){Ui=y.pageSize!==0,Wi=y.pageNum==y.totalPages-1}function va(){if(M){var y=Ri(),T=nr(),I=0,et=G&&!s.frozenBottom?E.height(_r):E.height(Xn);if(G)var I=Ri()-s.frozenRow;else var I=T+(s.leaveSpaceForNewRows?Ht-1:0);var V=E.height(Oi),Y=We;We=s.alwaysShowVerticalScroll||!s.autoHeight&&I*s.rowHeight>V,Zn();var j=y-1;for(var Te in it)Te>j&&Rl(Te);s.enableAsyncPostRenderCleanup&&W(),he&&z>j&&zr();var et=p;s.autoHeight?p=s.rowHeight*I:(c=Math.max(s.rowHeight*I,V-a.height),c<t?(p=m=c,v=1,_=0):(p=t,m=p/100,v=Math.floor(c/m),_=(c-p)/(v-1))),(p!==et||Jo)&&(G&&!s.frozenBottom?(E.height(_r,p),kt()&&E.height(Eo,p)):(E.height(Xn,p),E.height(io,p)),gt=Oi.scrollTop,Jo=!1);var rt=gt+x<=c-V;c==0||gt==0?C=x=0:Bo(rt?gt+x:c-V+a.height),p!=et&&s.autoHeight&&Or(),s.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&Y!=We&&os(),Oo(!1)}}function ga(y,T){return y==null&&(y=gt),T==null&&(T=Zt),{top:ua(y),bottom:ua(y+ge)+1,leftPx:T,rightPx:T+$}}function sc(y,T){var I=ga(y,T),V=Math.round(ge/s.rowHeight),Y=s.minRowBuffer;return S==-1?(I.top-=V,I.bottom+=Y):S==1?(I.top-=Y,I.bottom+=V):(I.top-=Y,I.bottom+=Y),I.top=Math.max(0,I.top),I.bottom=Math.min(nr()-1,I.bottom),I.leftPx-=$,I.rightPx+=$,I.leftPx=Math.max(0,I.leftPx),I.rightPx=Math.min(X,I.rightPx),I}function _a(y){const T=it[y];if(T&&T.cellRenderQueue.length&&T.rowNode&&T.rowNode.length){const I=T.rowNode;let V=Array.from(I[0].children);I.length>1&&(V=V.concat(Array.from(I[1].children)));let Y=V.length-1;for(;T.cellRenderQueue.length;){const j=T.cellRenderQueue.pop();T.cellNodesByColumnIdx[j]=V[Y--]}}}function Lf(y,T){if(!(G&&(s.frozenBottom&&T>ke||T<=ke))){var I=it[T],V=[];for(var Y in I.cellNodesByColumnIdx)if(I.cellNodesByColumnIdx.hasOwnProperty(Y)&&(Y=Y|0,!(Y<=s.frozenColumn)&&!(Array.isArray(o)&&o[Y]&&o[Y].alwaysRenderColumn))){var j=I.cellColSpans[Y];(xt[Y]>y.rightPx||ti[Math.min(o.length-1,Y+j-1)]<y.leftPx)&&(T==z&&Y==Q||V.push(Y))}for(var Te,et;(Te=V.pop())!=null;)et=I.cellNodesByColumnIdx[Te],s.enableAsyncPostRenderCleanup&&Gi[T]&&Gi[T][Te]?Nf(et,Te,T):et.parentElement.removeChild(et),delete I.cellColSpans[Te],delete I.cellNodesByColumnIdx[Te],Gi[T]&&delete Gi[T][Te]}}function Pl(y){for(var T,I=[],V=[],Y,j,Te=y.top,et=y.bottom;Te<=et;Te++)if(T=it[Te],!!T){_a(Te),Lf(y,Te),Y=0;var rt=r.getItemMetadata&&r.getItemMetadata(Te);rt=rt&&rt.columns;for(var ut=In(Te),pt=0,nt=o.length;pt<nt;pt++)if(!(!o[pt]||o[pt].hidden)){if(xt[pt]>y.rightPx)break;if((j=T.cellColSpans[pt])!=null){pt+=j>1?j-1:0;continue}if(j=1,rt){var pi=rt[o[pt].id]||rt[pt];j=pi&&pi.colspan||1,j==="*"&&(j=nt-pt)}ti[Math.min(nt-1,pt+j-1)]>y.leftPx&&(pa(I,Te,pt,j,ut),Y++),pt+=j>1?j-1:0}Y&&V.push(Te)}if(I.length){var Qt=document.createElement("div");Qt.innerHTML=$o(I.join(""));for(var yi,Yi;(yi=V.pop())!=null;){T=it[yi];for(var Pi;(Pi=T.cellRenderQueue.pop())!=null;)Yi=Qt.lastChild,kt()&&Pi>s.frozenColumn?T.rowNode[1].appendChild(Yi):T.rowNode[0].appendChild(Yi),T.cellNodesByColumnIdx[Pi]=Yi}}}function Fs(y){for(var T=[],I=[],V=[],Y=!1,j=Ri(),Te=y.top,et=y.bottom;Te<=et;Te++)it[Te]||G&&s.frozenBottom&&Te==Ri()||(wt++,V.push(Te),it[Te]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},nc(T,I,Te,y,j),he&&z===Te&&(Y=!0),Co++);if(!V.length)return;const rt=document.createElement("div"),ut=document.createElement("div");rt.innerHTML=$o(T.join("")),ut.innerHTML=$o(I.join(""));for(var Te=0,et=V.length;Te<et;Te++)G&&V[Te]>=ke?kt()?it&&it.hasOwnProperty(V[Te])&&rt.firstChild&&ut.firstChild&&(it[V[Te]].rowNode=[rt.firstChild,ut.firstChild],_r.appendChild(rt.firstChild),Eo.appendChild(ut.firstChild)):it&&it.hasOwnProperty(V[Te])&&rt.firstChild&&(it[V[Te]].rowNode=[rt.firstChild],_r.appendChild(rt.firstChild)):kt()?it&&it.hasOwnProperty(V[Te])&&rt.firstChild&&ut.firstChild&&(it[V[Te]].rowNode=[rt.firstChild,ut.firstChild],Xn.appendChild(rt.firstChild),io.appendChild(ut.firstChild)):it&&it.hasOwnProperty(V[Te])&&rt.firstChild&&(it[V[Te]].rowNode=[rt.firstChild],Xn.appendChild(rt.firstChild));Y&&(he=Ir(z,Q))}function Ed(){s.enableAsyncPostRender&&(clearTimeout(Gn),Gn=setTimeout(uc,s.asyncPostRenderDelay))}function W(){s.enableAsyncPostRenderCleanup&&(clearTimeout(Kt),Kt=setTimeout(cc,s.asyncPostRenderCleanupDelay))}function as(y){for(var T in Gi[y])Gi[y].hasOwnProperty(T)&&(Gi[y][T]="C");bo=Math.min(bo,y),lr=Math.max(lr,y),Ed()}function ba(){for(var y in it){var T=y?parseInt(y):0;E.setStyleSize("top",Cd(T))}}function Qi(){if(M){Li.dequeue();var y=ga(),T=sc();if(rc(T),Ai!=Zt){if(G){var I=E.extend(!0,{},T);s.frozenBottom?(I.top=ke,I.bottom=Ri()):(I.top=0,I.bottom=s.frozenRow),Pl(I)}Pl(T)}Fs(T),G&&(s.frozenBottom?Fs({top:ke,bottom:Ri()-1,leftPx:T.leftPx,rightPx:T.rightPx}):Fs({top:0,bottom:s.frozenRow-1,leftPx:T.leftPx,rightPx:T.rightPx})),bo=y.top,lr=Math.min(nr()-1,y.bottom),Ed(),ei=gt,Ai=Zt,oe(L.onRendered,{startRow:y.top,endRow:y.bottom,grid:L})}}function fi(){var y=Cs.scrollLeft;y!=Hi.scrollLeft&&(Hi.scrollLeft=y)}function lc(){var y=So.scrollLeft;y!=Hi.scrollLeft&&(Hi.scrollLeft=y)}function ac(){Hf(Ve)}function Hf(y){var T=y.scrollLeft;T!=Hi.scrollLeft&&(Hi.scrollLeft=T)}function Ar(){return gt=Oi.scrollTop,Zt=Hi.scrollLeft,dc(!1)}function dc(y){var T=Oi.scrollHeight-Oi.clientHeight,I=Oi.scrollWidth-Oi.clientWidth;T=Math.max(0,T),I=Math.max(0,I),gt>T&&(gt=T),Zt>I&&(Zt=I);var V=Math.abs(gt-Et),Y=Math.abs(Zt-zi);if(Y&&(zi=Zt,Hi.scrollLeft=Zt,Br.scrollLeft=Zt,Ce[0].scrollLeft=Zt,s.createFooterRow&&(So.scrollLeft=Zt),s.createPreHeaderPanel&&(kt()?ce.scrollLeft=Zt:Ve.scrollLeft=Zt),kt()?(G&&(yn.scrollLeft=Zt),gr.scrollLeft=Zt):(G&&(Ei.scrollLeft=Zt),vr.scrollLeft=Zt)),V&&!s.autoHeight)if(S=Et<gt?1:-1,Et=gt,y&&(Oi.scrollTop=gt),kt()&&(G&&!s.frozenBottom?Yn.scrollTop=gt:Ei.scrollTop=gt),V<ge)Bo(gt+x);else{var j=x;p==ge?C=0:C=Math.min(v-1,Math.floor(gt*((c-ge)/(p-ge))*(1/m))),x=Math.round(C*_),j!=x&&vn()}if(Y||V){var Te=Math.abs(Ai-Zt),et=Math.abs(ei-gt);(Te>20||et>20)&&(s.forceSyncScrolling||et<ge&&Te<$?Qi():Li.enqueue(),oe(L.onViewportChanged,{}))}return oe(L.onScroll,{scrollLeft:Zt,scrollTop:gt}),!!(Y||V)}function Bf(y,T){var I=!1,V=!1;function Y(){I?V=!0:Te()}function j(){V=!1}function Te(){I=!0,setTimeout(et,T),y()}function et(){V?(j(),Te()):I=!1}return{enqueue:Y,dequeue:j}}function uc(){for(var y=Ri();bo<=lr;){var T=S>=0?bo++:lr--,I=it[T];if(!(!I||T>=y)){Gi[T]||(Gi[T]={}),_a(T);for(var V in I.cellNodesByColumnIdx)if(I.cellNodesByColumnIdx.hasOwnProperty(V)){V=V|0;var Y=o[V],j=Gi[T][V];if(Y.asyncPostRender&&j!=="R"){var Te=I.cellNodesByColumnIdx[V];Te&&Y.asyncPostRender(Te,T,In(T),Y,j==="C"),Gi[T][V]="R"}}Gn=setTimeout(uc,s.asyncPostRenderDelay);return}}}function cc(){if(er.length>0){for(var y=er[0].groupId;er.length>0&&er[0].groupId==y;){var T=er.shift();if(T.actionType=="R"&&T.node.forEach(function(V){V.remove()}),T.actionType=="C"){var I=o[T.columnIdx];I.asyncPostRenderCleanup&&T.node&&I.asyncPostRenderCleanup(T.node,T.rowIdx,I)}}Kt=setTimeout(cc,s.asyncPostRenderCleanupDelay)}}function Sd(y,T){var I,V,Y,j;for(var Te in it){if(j=T&&T[Te],Y=y&&y[Te],j)for(V in j)(!Y||j[V]!=Y[V])&&(I=Ir(Te,_t(V)),I&&I.classList.remove(j[V]));if(Y)for(V in Y)(!j||j[V]!=Y[V])&&(I=Ir(Te,_t(V)),I&&I.classList.add(Y[V]))}}function zo(y,T){if(Ct[y])throw new Error("SlickGrid addCellCssStyles: cell CSS hash with key '"+y+"' already exists.");Ct[y]=T,Sd(T,null),oe(L.onCellCssStylesChanged,{key:y,hash:T,grid:L})}function Vf(y){Ct[y]&&(Sd(null,Ct[y]),delete Ct[y],oe(L.onCellCssStylesChanged,{key:y,hash:null,grid:L}))}function hc(y,T){const I=Ct[y];Ct[y]=T,Sd(T,I),oe(L.onCellCssStylesChanged,{key:y,hash:T,grid:L})}function zf(y){return Ct[y]}function Uf(y,T,I){I=I||250;function V(Y,j){j<1||setTimeout(function(){j%2==0?Y.classList.add(s.cellFlashingCssClass):Y.classList.remove(s.cellFlashingCssClass),V(Y,j-1)},I)}if(it[y]){const Y=Ir(y,T);Y&&V(Y,5)}}function fc(y,T,I,V){gt=Math.max(0,Oi.scrollTop-V*s.rowHeight),Zt=Hi.scrollLeft+I*10;var Y=dc(!0);Y&&y.preventDefault()}function Uo(y,T){var I=dl(y);if(!I||!Td(I.row,I.cell))return!1;var V=oe(L.onDragInit,T,y);return V.isImmediatePropagationStopped()?V.getReturnValue():!1}function Wf(y,T){var I=dl(y);if(!I||!Td(I.row,I.cell))return!1;var V=oe(L.onDragStart,T,y);return V.isImmediatePropagationStopped()?V.getReturnValue():!1}function Gf(y,T){return oe(L.onDrag,T,y).getReturnValue()}function $f(y,T){oe(L.onDragEnd,T,y)}function ll(y){var I=oe(L.onKeyDown,{row:z,cell:Q},y).isImmediatePropagationStopped(),V=Slick.keyCode;if(!I&&!y.shiftKey&&!y.altKey){if(s.editable&&Ee&&Ee.keyCaptureList&&Ee.keyCaptureList.indexOf(y.which)>-1)return;y.which==V.HOME?I=y.ctrlKey?Tc():Fd():y.which==V.END&&(I=y.ctrlKey?Ta():Md())}if(!I)if(!y.shiftKey&&!y.altKey&&!y.ctrlKey){if(s.editable&&Ee&&Ee.keyCaptureList&&Ee.keyCaptureList.indexOf(y.which)>-1)return;if(y.which==V.ESCAPE){if(!Ne().isActive())return;Nl()}else y.which==V.PAGE_DOWN?(wc(),I=!0):y.which==V.PAGE_UP?(xc(),I=!0):y.which==V.LEFT?I=Rd():y.which==V.RIGHT?I=Ic():y.which==V.UP?I=Dc():y.which==V.DOWN?I=hl():y.which==V.TAB?I=Aa():y.which==V.ENTER&&(s.editable&&(Ee?z===Ri()?hl():Ec():Ne().commitCurrentEdit()&&Ml(void 0,void 0,y)),I=!0)}else y.which==V.TAB&&y.shiftKey&&!y.ctrlKey&&!y.altKey&&(I=Pd());if(I){y.stopPropagation(),y.preventDefault();try{y.originalEvent.keyCode=0}catch{}}}function pc(y){let T=y;if(T instanceof Slick.EventData?T=y.getNativeEvent():y=void 0,!Ee&&(T.target!=document.activeElement||T.target.classList.contains("slick-cell"))){var I=Sa();Wo(),Ms(I)}var V=dl(T);if(!(!V||Ee!==null&&z==V.row&&Q==V.cell)&&(y=oe(L.onClick,{row:V.row,cell:V.cell},y||T),!y.isImmediatePropagationStopped()&&Gr(V.row,V.cell)&&(!Ne().isActive()||Ne().commitCurrentEdit()))){wa(V.row,!1);var Y=T.target&&T.target.className===Slick.preClickClassName,j=o[V.cell],Te=!!(s.editable&&j&&j.editor&&s.suppressActiveCellChangeOnEdit);Go(Ir(V.row,V.cell),null,Y,Te,T)}}function ds(y){var T=y.target.closest(".slick-cell");T&&(he===T&&Ee!==null||oe(L.onContextMenu,{},y))}function mc(y){var T=dl(y);!T||Ee!==null&&z==T.row&&Q==T.cell||(oe(L.onDblClick,{row:T.row,cell:T.cell},y),!y.defaultPrevented&&s.editable&&Fc(T.row,T.cell,!0,y))}function vc(y){const T=E.storage.get(y.target.closest(".slick-header-column"),"column");T&&oe(L.onHeaderMouseEnter,{column:T,grid:L},y)}function Vr(y){const T=E.storage.get(y.target.closest(".slick-header-column"),"column");T&&oe(L.onHeaderMouseLeave,{column:T,grid:L},y)}function Yf(y){const T=E.storage.get(y.target.closest(".slick-headerrow-column"),"column");T&&oe(L.onHeaderRowMouseEnter,{column:T,grid:L},y)}function jf(y){const T=E.storage.get(y.target.closest(".slick-headerrow-column"),"column");T&&oe(L.onHeaderRowMouseLeave,{column:T,grid:L},y)}function gc(y){var T=y.target.closest(".slick-header-column"),I=T&&E.storage.get(T,"column");oe(L.onHeaderContextMenu,{column:I},y)}function _c(y){if(!Es){var T=y.target.closest(".slick-header-column"),I=T&&E.storage.get(T,"column");I&&oe(L.onHeaderClick,{column:I},y)}}function bc(y){var T=y.target.closest(".slick-footerrow-column"),I=T&&E.storage.get(T,"column");oe(L.onFooterContextMenu,{column:I},y)}function wd(y){var T=y.target.closest(".slick-footerrow-column"),I=T&&E.storage.get(T,"column");oe(L.onFooterClick,{column:I},y)}function xd(y){oe(L.onMouseEnter,{},y)}function Cc(y){oe(L.onMouseLeave,{},y)}function Td(y,T){return!(y<0||y>=Ri()||T<0||T>=o.length)}function Fl(y,T){for(var I=ua(T),V=0,Y=0,j=0;j<o.length&&Y<y;j++)!o[j]||o[j].hidden||(Y+=o[j].width,V++);return V<0&&(V=0),{row:I,cell:V-1}}function al(y){var T=/l\d+/.exec(y.className);if(!T)throw new Error("SlickGrid getCellFromNode: cannot get cell - "+y.className);return parseInt(T[0].substr(1,T[0].length-1),10)}function Ca(y){for(var T in it)for(var I in it[T].rowNode)if(it[T].rowNode[I]===y)return T?parseInt(T):0;return null}function Od(y){let T=0;return G?s.frozenBottom?y>=ke?p<ht?T=ke*s.rowHeight:T=p:T=0:y>=ke?T=ve:T=0:T=0,T}function dl(y){y instanceof Slick.EventData&&(y=y.getNativeEvent());var T=y.touches?y.touches[0]:y,I,V,Y=y.target.closest(".slick-cell");if(!Y)return null;if(I=Ca(Y.parentNode),G){var j=E.offset(E.parents(Y,".grid-canvas")[0]),Te=0,et=E.parents(Y,".grid-canvas-bottom").length;et&&(Te=s.frozenBottom?E.height(Xn):ve),I=Fl(T.clientX-j.left,T.clientY-j.top+Te+document.documentElement.scrollTop).row}return V=al(Y),I==null||V==null?null:{row:I,cell:V}}function Xf(y,T){if(!Td(y,T))return null;for(var I=Od(y),V=Cd(y)-I,Y=V+s.rowHeight-1,j=0,Te=0;Te<T;Te++)!o[Te]||o[Te].hidden||(j+=o[Te].width,s.frozenColumn==Te&&(j=0));var et=j+o[T].width;return{top:V,left:j,bottom:Y,right:et}}function zr(){Go(null,!1)}function Wo(){zt==-1?de.focus():be.focus()}function Ur(y,T,I){if(wa(y,I),!(T<=s.frozenColumn)){var V=Wr(y,T);kr(xt[T],ti[T+(V>1?V-1:0)])}}function kr(y,T){var I=Zt+E.width(Hi)-(We?a.width:0);y<Zt?(Hi.scrollLeft=y,Ar(),Qi()):T>I&&(Hi.scrollLeft=Math.min(y,T-Hi.clientWidth),Ar(),Qi())}function Kf(y){kr(xt[y],ti[y])}function Go(y,T,I,V,Y){if(he!=null&&(Zn(),he.classList.remove("active"),it[z]&&it[z].rowNode&&it[z].rowNode.forEach(function(ut){ut.classList.remove("active")})),he=y,he!=null){var j=E.offset(he),Te=Math.floor(E.offset(E.parents(he,".grid-canvas")[0]).top),et=E.parents(he,".grid-canvas-bottom").length;G&&et&&(Te-=s.frozenBottom?E.height(Xn):ve);var rt=Fl(j.left,Math.ceil(j.top)-Te);z=rt.row,Q=Mi=Q=Mi=al(he),T==null&&(T=z==Ri()||s.autoEdit),s.showCellSelection&&(he.classList.add("active"),it[z]&&it[z].rowNode&&it[z].rowNode.forEach(function(ut){ut.classList.add("active")})),s.editable&&T&&ul(z,Q)&&(clearTimeout(pn),s.asyncEditorLoading?pn=setTimeout(function(){Ml(void 0,I,Y)},s.asyncEditorLoadDelay):Ml(void 0,I,Y))}else z=Q=null;V||oe(L.onActiveCellChanged,oo())}function yc(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}else if(window.getSelection){var y=window.getSelection();y&&y.removeAllRanges&&y.removeAllRanges()}}function ul(y,T){var I=Ri();return!(y<I&&!In(y)||o[T].cannotTriggerInsert&&y>=I||!o[T]||o[T].hidden||!ha(y,T))}function Zn(){if(Ee){if(oe(L.onBeforeCellEditorDestroy,{editor:Ee}),Ee.destroy(),Ee=null,he){var y=In(z);if(he.classList.remove("editable"),he.classList.remove("invalid"),y){var T=o[Q],I=Ps(z,T),V=I(z,Q,fa(y,T),T,y,L);Vo(V,he),as(z)}}navigator.userAgent.toLowerCase().match(/msie/)&&yc(),Ne().deactivate(vt)}}function Ml(y,T,I){if(he){if(!s.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(pn),!!ul(z,Q)){var V=o[Q],Y=In(z);if(oe(L.onBeforeEditCell,{row:z,cell:Q,item:Y,column:V,target:"grid"}).getReturnValue()===!1){Wo();return}Ne().activate(vt),he.classList.add("editable");var j=y||ha(z,Q);!y&&!j.suppressClearOnEdit&&E.emptyElement(he);var Te=r.getItemMetadata&&r.getItemMetadata(z);Te=Te&&Te.columns;var et=Te&&(Te[V.id]||Te[Q]);Ee=new j({grid:L,gridPosition:ya(B),position:ya(he),container:he,column:V,columnMetaData:et,item:Y||{},event:I,commitChanges:Ec,cancelChanges:Nl}),Y&&(Ee.loadValue(Y),T&&Ee.preClick&&Ee.preClick()),lt=Ee.serializeValue(),Ee.position&&Ea()}}}function Ec(){Ne().commitCurrentEdit()&&(Wo(),s.autoEdit&&!s.autoCommitEdit&&hl())}function Nl(){Ne().cancelCurrentEdit()&&Wo()}function ya(y){var T={top:y.offsetTop,left:y.offsetLeft,bottom:0,right:0,width:y.offsetWidth,height:y.offsetWidth,visible:!0};T.bottom=T.top+T.height,T.right=T.left+T.width;for(var I=y.offsetParent;(y=y.parentNode)!=document.body&&!(!y||!y.parentNode);){const V=getComputedStyle(y);T.visible&&y.scrollHeight!=y.offsetHeight&&V.overflowY!="visible"&&(T.visible=T.bottom>y.scrollTop&&T.top<y.scrollTop+y.clientHeight),T.visible&&y.scrollWidth!=y.offsetWidth&&V.overflowX!="visible"&&(T.visible=T.right>y.scrollLeft&&T.left<y.scrollLeft+y.clientWidth),T.left-=y.scrollLeft,T.top-=y.scrollTop,y===I&&(T.left+=y.offsetLeft,T.top+=y.offsetTop,I=y.offsetParent),T.bottom=T.top+T.height,T.right=T.left+T.width}return T}function Ad(){return ya(he)}function Qn(){return ya(B)}function Ea(){if(he&&(oe(L.onActiveCellPositionChanged,{}),Ee)){var y=Ad();Ee.show&&Ee.hide&&(y.visible?Ee.show():Ee.hide()),Ee.position&&Ee.position(y)}}function Sc(){return Ee}function oo(){return he?{row:z,cell:Q}:null}function kd(){return he}function Sa(){var y=null;if(window.getSelection){var T=window.getSelection();T.rangeCount>0&&(y=T.getRangeAt(0))}return y}function Ms(y){if(window.getSelection&&y){var T=window.getSelection();T.removeAllRanges(),T.addRange(y)}}function wa(y,T){if(!G||!s.frozenBottom&&y>ke-1||s.frozenBottom&&y<ke-1){var I=E.height(Oi),V=G&&!s.frozenBottom?y-s.frozenRow:y,Y=V*s.rowHeight,j=(V+1)*s.rowHeight-I+(mt?a.height:0);(V+1)*s.rowHeight>gt+I+x?(Bo(T?Y:j),Qi()):V*s.rowHeight<gt+x&&(Bo(T?j:Y),Qi())}}function dr(y){Bo(y*s.rowHeight),Qi()}function xa(y){var T=y*Ht,I=gt+s.rowHeight-1;if(Bo((ua(I)+T)*s.rowHeight),Qi(),s.enableCellNavigation&&z!=null){var V=z+T,Y=nr();V>=Y&&(V=Y-1),V<0&&(V=0);for(var j=0,Te=null,et=Mi;j<=Mi;)Gr(V,j)&&(Te=j),j+=Wr(V,j);Te!==null?(Go(Ir(V,Te)),Mi=et):zr()}}function wc(){xa(1)}function xc(){xa(-1)}function Tc(){Oc(0)}function Ta(){Oc(Ri()-1)}function Oc(y){var T=Ri();if(!T)return!0;if(y<0?y=0:y>=T&&(y=T-1),Ur(y,0,!0),s.enableCellNavigation&&z!=null){for(var I=0,V=null,Y=Mi;I<=Mi;)Gr(y,I)&&(V=I),I+=Wr(y,I);V!==null?(Go(Ir(y,V)),Mi=Y):zr()}return!0}function Wr(y,T){var I=r.getItemMetadata&&r.getItemMetadata(y);if(!I||!I.columns)return 1;var V=I.columns[o[T].id]||I.columns[T],Y=V&&V.colspan;return Y==="*"?Y=o.length-T:Y=Y||1,Y}function Oa(y){for(var T=0;T<o.length;){if(Gr(y,T))return T;T+=Wr(y,T)}return null}function Ac(y){for(var T=0,I=null;T<o.length;)Gr(y,T)&&(I=T),T+=Wr(y,T);return I}function Id(y,T,I){if(T>=o.length)return null;do T+=Wr(y,T);while(T<o.length&&!Gr(y,T));return T<o.length?{row:y,cell:T,posX:T}:null}function cl(y,T,I){if(T<=0)return null;var V=Oa(y);if(V===null||V>=T)return null;for(var Y={row:y,cell:V,posX:V},j;;){if(j=Id(Y.row,Y.cell,Y.posX),!j)return null;if(j.cell>=T)return Y;Y=j}}function qf(y,T,I){for(var V,Y=nr();;){if(++y>=Y)return null;for(V=T=0;T<=I;)V=T,T+=Wr(y,T);if(Gr(y,V))return{row:y,cell:V,posX:I}}}function Zf(y,T,I){for(var V;;){if(--y<0)return null;for(V=T=0;T<=I;)V=T,T+=Wr(y,T);if(Gr(y,V))return{row:y,cell:V,posX:I}}}function Dd(y,T,I){if(y==null&&T==null&&(y=T=0,Gr(y,T)))return{row:y,cell:T,posX:T};var V=Id(y,T);if(V)return V;var Y=null,j=nr();for(y===j-1&&y--;++y<j;)if(Y=Oa(y),Y!==null)return{row:y,cell:Y,posX:Y};return null}function kc(y,T,I){if(y==null&&T==null&&(y=nr()-1,T=o.length-1,Gr(y,T)))return{row:y,cell:T,posX:T};for(var V,Y;!V&&(V=cl(y,T),!V);){if(--y<0)return null;T=0,Y=Ac(y),Y!==null&&(V={row:y,cell:Y,posX:Y})}return V}function Qf(y,T,I){var V=Oa(y);return V===null?null:{row:y,cell:V,posX:V}}function Jf(y,T,I){var V=Ac(y);return V===null?null:{row:y,cell:V,posX:V}}function Ic(){return so("right")}function Rd(){return so("left")}function hl(){return so("down")}function Dc(){return so("up")}function Aa(){return so("next")}function Pd(){return so("prev")}function Fd(){return so("home")}function Md(){return so("end")}function so(y){if(!s.enableCellNavigation||!he&&y!="prev"&&y!="next")return!1;if(!Ne().commitCurrentEdit())return!0;Wo();var T={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};zt=T[y];var I={up:Zf,down:qf,left:cl,right:Id,prev:kc,next:Dd,home:Qf,end:Jf},V=I[y],Y=V(z,Q,Mi);if(Y){if(G&&s.frozenBottom&Y.row==Ri())return;var j=Y.row==Ri();return(!s.frozenBottom&&Y.row>=ke||s.frozenBottom&&Y.row<ke)&&Ur(Y.row,Y.cell,!j&&s.emulatePagingWhenScrolling),Go(Ir(Y.row,Y.cell)),Mi=Y.posX,!0}else return Go(Ir(z,Q)),!1}function Ir(y,T){if(it[y]){_a(y);try{return it[y].cellNodesByColumnIdx.length>T?it[y].cellNodesByColumnIdx[T]:null}catch{return it[y].cellNodesByColumnIdx[T]}}return null}function Rc(y,T,I,V,Y){M&&(y>Ri()||y<0||T>=o.length||T<0||s.enableCellNavigation&&(Ur(y,T,!1),Go(Ir(y,T),I,V,Y)))}function Pc(y,T,I){M&&(y>Ri()||y<0||T>=o.length||T<0||(z=y,I||Ur(y,T||0,!1)))}function Gr(y,T){if(!s.enableCellNavigation||y>=nr()||y<0||T>=o.length||T<0||!o[T]||o[T].hidden)return!1;var I=r.getItemMetadata&&r.getItemMetadata(y);if(I&&typeof I.focusable<"u")return!!I.focusable;var V=I&&I.columns;return V&&V[o[T].id]&&typeof V[o[T].id].focusable<"u"?!!V[o[T].id].focusable:V&&V[T]&&typeof V[T].focusable<"u"?!!V[T].focusable:!!o[T].focusable}function Nd(y,T){if(y>=Ri()||y<0||T>=o.length||T<0||!o[T]||o[T].hidden)return!1;var I=r.getItemMetadata&&r.getItemMetadata(y);if(I&&typeof I.selectable<"u")return!!I.selectable;var V=I&&I.columns&&(I.columns[o[T].id]||I.columns[T]);return V&&typeof V.selectable<"u"?!!V.selectable:!!o[T].selectable}function Fc(y,T,I,V){if(M&&Gr(y,T)&&Ne().commitCurrentEdit()){Ur(y,T,!1);var Y=Ir(y,T),j=o[T],Te=!!(s.editable&&j&&j.editor&&s.suppressActiveCellChangeOnEdit);Go(Y,I||y===Ri()||s.autoEdit,null,Te,V),Ee||Wo()}}function Ld(){var y=In(z),T=o[Q];if(Ee){if(Ee.isValueChanged()){var I=Ee.validate();if(I.valid){if(z<Ri()){var V={row:z,cell:Q,editor:Ee,serializedValue:Ee.serializeValue(),prevSerializedValue:lt,execute:function(){this.editor.applyValue(y,this.serializedValue),ls(this.row),oe(L.onCellChange,{command:"execute",row:this.row,cell:this.cell,item:y,column:T})},undo:function(){this.editor.applyValue(y,this.prevSerializedValue),ls(this.row),oe(L.onCellChange,{command:"undo",row:this.row,cell:this.cell,item:y,column:T})}};s.editCommandHandler?(Zn(),s.editCommandHandler(y,T,V)):(V.execute(),Zn())}else{var Y={};Ee.applyValue(Y,Ee.serializeValue()),Zn(),oe(L.onAddNewRow,{item:Y,column:T})}return!Ne().isActive()}else return he.classList.remove("invalid"),E.width(he),he.classList.add("invalid"),oe(L.onValidationError,{editor:Ee,cellNode:he,validationResults:I,row:z,cell:Q,column:T}),Ee.focus(),!1}Zn()}return!0}function Mc(){return Zn(),!0}function Hd(y){for(var T=[],I=o.length-1,V=0;V<y.length;V++)T.push(new Slick.Range(y[V],0,y[V],I));return T}function ka(){if(!Ni)throw new Error("SlickGrid Selection model is not set");return Bn.slice(0)}function Bd(y,T){if(!Ni)throw new Error("SlickGrid Selection model is not set");L&&L.getEditorLock&&!L.getEditorLock().isActive()&&Ni.setSelectedRanges(Hd(y),T||"SlickGrid.setSelectedRows")}var ni=0,Vd=30;function $o(y,T){if(!s.sanitizer||typeof y!="string")return y;var I=s.sanitizer(y);return!T&&s.logSanitizedHtml&&ni<=Vd&&I!==y&&(console.log("sanitizer altered html: "+y+" --> "+I),ni===Vd&&console.log("sanitizer: silencing messages after first "+Vd),ni++),I}this.debug=function(){var y="";y+=`
counter_rows_rendered:  `+Co,y+=`
counter_rows_removed:  `+mr,y+=`
renderedRows:  `+wt,y+=`
numVisibleRows:  `+Ht,y+=`
maxSupportedCssHeight:  `+t,y+=`
n(umber of pages):  `+v,y+=`
(current) page:  `+C,y+=`
page height (ph):  `+m,y+=`
vScrollDir:  `+S,alert(y)},Slick.Utils.extend(this,{slickGridVersion:"4.1.7",onScroll:new Slick.Event,onBeforeSort:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderRowMouseEnter:new Slick.Event,onHeaderRowMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onFooterContextMenu:new Slick.Event,onFooterClick:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsDrag:new Slick.Event,onColumnsResized:new Slick.Event,onColumnsResizeDblClick:new Slick.Event,onBeforeColumnsResize:new Slick.Event,onCellChange:new Slick.Event,onCompositeEditorChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,onBeforeSetColumns:new Slick.Event,onBeforeUpdateColumns:new Slick.Event,onRendered:new Slick.Event,onSetOptions:new Slick.Event,registerPlugin:Ki,unregisterPlugin:wr,getPluginByName:Ho,getColumns:Rf,setColumns:Ds,updateColumns:Di,getVisibleColumns:Is,getColumnIndex:_t,updateColumnHeader:el,setSortColumn:kn,setSortColumns:il,getSortColumns:Df,autosizeColumns:os,autosizeColumn:Of,getOptions:Ju,setOptions:sa,getData:Ff,getDataLength:Ri,getDataItem:In,setData:Pf,getSelectionModel:no,setSelectionModel:Tl,getSelectedRows:ka,setSelectedRows:Bd,getContainerNode:da,updatePagingStatusFromView:sl,applyFormatResultToCellNode:Vo,render:Qi,reRenderColumns:_d,invalidate:Dn,invalidateRow:ma,invalidateRows:oc,invalidateAllRows:vn,updateCell:yd,updateRow:ls,getViewport:ga,getRenderedRange:sc,resizeCanvas:Or,updateRowCount:va,scrollRowIntoView:wa,scrollRowToTop:dr,scrollCellIntoView:Ur,scrollColumnIntoView:Kf,getCanvasNode:Kn,getUID:Js,getHeaderColumnWidthDiff:$i,getScrollbarDimensions:Un,getHeadersWidth:rn,getCanvasWidth:qn,getCanvases:xr,getActiveCanvasNode:Zs,getViewportNode:Ol,getViewports:xs,getActiveViewportNode:Al,setActiveViewportNode:Ts,focus:Wo,scrollTo:Bo,cacheCssForHiddenInit:es,restoreCssFromHiddenInit:ws,getCellFromPoint:Fl,getCellFromEvent:dl,getActiveCell:oo,setActiveCell:Rc,setActiveRow:Pc,getActiveCellNode:kd,getActiveCellPosition:Ad,resetActiveCell:zr,editActiveCell:Ml,getCellEditor:Sc,getCellNode:Ir,getCellNodeBox:Xf,canCellBeSelected:Nd,canCellBeActive:Gr,navigatePrev:Pd,navigateNext:Aa,navigateUp:Dc,navigateDown:hl,navigateLeft:Rd,navigateRight:Ic,navigatePageUp:xc,navigatePageDown:wc,navigateTop:Tc,navigateBottom:Ta,navigateRowStart:Fd,navigateRowEnd:Md,gotoCell:Fc,getTopPanel:tc,getTopPanels:la,setTopPanelVisibility:ic,getPreHeaderPanel:H,getPreHeaderPanelLeft:H,getPreHeaderPanelRight:te,setPreHeaderPanelVisibility:Rs,getHeader:hi,getHeaderColumn:g,setHeaderRowVisibility:aa,getHeaderRow:w,getHeaderRowColumn:we,setFooterRowVisibility:Dl,getFooterRow:R,getFooterRowColumn:Be,getGridPosition:Qn,flashCell:Uf,addCellCssStyles:zo,setCellCssStyles:hc,removeCellCssStyles:Vf,getCellCssStyles:zf,getFrozenRowOffset:Od,setColumnHeaderVisibility:bd,sanitizeHtmlString:$o,getDisplayedScrollbarDimensions:Ao,getAbsoluteColumnMinWidth:fd,init:qs,destroy:vd,getEditorLock:Ne,getEditController:Me}),xl()}Slick.Utils.extend(Slick,{Grid:e})})(),function(){function a(s){var l=this,u={groupItemMetadataProvider:null,inlineFilters:!1},h="id",c=[],p=[],m=new Map,v=null,_=null,C=null,x=!1,S=!1,E=new Map,D=!0,A,P,M={},B={},Z,L=[],de,be,J=[],U=null,F={getter:null,formatter:null,comparer:function(se,ue){return se.value===ue.value?0:se.value>ue.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},ae=[],Ke=[],Ie=[],xe=":|:",Oe=null,De,ne=0,pe=0,Ve=0,Ye=new Slick.Event,Ue=new Slick.Event,ce=new Slick.Event,Ce=new Slick.Event,_e=new Slick.Event,He=new Slick.Event,ot=new Slick.Event,ze=new Slick.Event,St=new Slick.Event;s=Slick.Utils.extend(!0,{},u,s);function ct(se){x=!0,S=se===!0}function k(){var se=S;S=!1,x=!1,se&&(X(),Pe()),di()}function ee(){c=[],m=null,v=null,_=null,C=null,P=null,J=[],L=[],de=null,be=null,U&&U.onSelectedRowsChanged&&U.onCellCssStylesChanged&&(U.onSelectedRowsChanged.unsubscribe(),U.onCellCssStylesChanged.unsubscribe()),l.onRowsOrCountChanged&&l.onRowsOrCountChanged.unsubscribe()}function ge(se){M=se}function $(se){Z=se}function X(){if(m){for(var se,ue,ye=0,$e=0,Je=c.length;$e<Je;$e++){if(ue=c[$e],se=ue[h],se===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");E.has(se)?m.delete(se):(c[ye]=ue,m.set(se,ye),++ye)}c.length=ye,E=new Map}}function re(se){if(!(S||!m)){se=se||0;for(var ue,ye=se,$e=c.length;ye<$e;ye++){if(ue=c[ye][h],ue===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");m.set(ue,ye)}}}function Pe(){if(!(S||!m)){for(var se,ue=0,ye=c.length;ue<ye;ue++)if(se=c[ue][h],se===void 0||m.get(se)!==ue)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}}function Fe(){return c}function me(){return h}function Ge(se,ue){ue!==void 0&&(h=ue),c=L=se,Ue.notify({idProperty:ue,itemCount:c.length},null,l),m=new Map,re(),Pe(),di()}function mt(se){He.notify(We(),null,l).getReturnValue()!==!1&&(se.pageSize!=null&&(ne=se.pageSize,pe=ne?Math.min(pe,Math.max(0,Math.ceil(Ve/ne)-1)):0),se.pageNum!=null&&(pe=Math.min(se.pageNum,Math.max(0,Math.ceil(Ve/ne)-1))),ot.notify(We(),null,l),di())}function We(){var se=ne?Math.max(1,Math.ceil(Ve/ne)):1;return{pageSize:ne,pageNum:pe,totalRows:Ve,totalPages:se,dataView:l}}function Le(se,ue){D=ue,P=se,A=null,ue===!1&&c.reverse(),c.sort(se),ue===!1&&c.reverse(),m=new Map,re(),di()}function jt(se,ue){D=ue,A=se,P=null;var ye=Object.prototype.toString;Object.prototype.toString=typeof se=="function"?se:function(){return this[se]},ue===!1&&c.reverse(),c.sort(),Object.prototype.toString=ye,ue===!1&&c.reverse(),m=new Map,re(),di()}function It(){P?Le(P,D):A&&jt(A,D)}function bi(){return L}function K(){return L.length}function G(){return _}function ve(se){_=se,s.inlineFilters&&(de=er(),be=tr()),di()}function ke(){return ae}function at(se){s.groupItemMetadataProvider||(s.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Ke=[],Ie=[],se=se||[],ae=se instanceof Array?se:[se];for(var ue=0;ue<ae.length;ue++){var ye=ae[ue]=Slick.Utils.extend(!0,{},F,ae[ue]);ye.getterIsAFn=typeof ye.getter=="function",ye.compiledAccumulators=[];for(var $e=ye.aggregators.length;$e--;)ye.compiledAccumulators[$e]=bo(ye.aggregators[$e]);Ie[ue]={}}di()}function st(se,ue,ye){if(se==null){at([]);return}at({getter:se,formatter:ue,comparer:ye})}function ht(se,ue){if(!ae.length)throw new Error("[SlickGrid DataView] At least one grouping must be specified before calling setAggregators().");ae[0].aggregators=se,ae[0].aggregateCollapsed=ue,at(ae)}function Rt(se){return c[se]}function Lt(se){return m&&m.get(se)}function Ot(){if(!v){v={};for(var se=0,ue=p.length;se<ue;se++)v[p[se][h]]=se}}function zt(se){return Ot(),v[se[h]]}function qt(se){return Ot(),v[se]}function Fi(se){return c[m&&m.get(se)]}function Mi(se){var ue=[];Ot();for(var ye=0,$e=se.length;ye<$e;ye++){var Je=v[se[ye][h]];Je!=null&&(ue[ue.length]=Je)}return ue}function z(se){var ue=[];Ot();for(var ye=0,$e=se.length;ye<$e;ye++){var Je=v[se[ye]];Je!=null&&(ue[ue.length]=Je)}return ue}function Q(se){for(var ue=[],ye=0,$e=se.length;ye<$e;ye++)if(se[ye]<p.length){const Je=p[se[ye]];ue[ue.length]=Je&&Je[h]}return ue}function he(se,ue){if(m){if(!m.has(se))throw new Error("[SlickGrid DataView] Invalid id");if(se!==ue[h]){var ye=ue[h];if(ye==null)throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(m.has(ye))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");m.set(ye,m.get(se)),m.delete(se),C&&C[se]&&delete C[se],se=ye}c[m.get(se)]=ue,C||(C={}),C[se]=!0}}function Ee(se,ue){he(se,ue),di()}function lt(se,ue){if(se.length!==ue.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(var ye=0,$e=ue.length;ye<$e;ye++)he(se[ye],ue[ye]);di()}function vt(se,ue){c.splice(se,0,ue),re(se),di()}function it(se,ue){Array.prototype.splice.apply(c,[se,0].concat(ue)),re(se),di()}function wt(se){c.push(se),re(c.length-1),di()}function Ht(se){c=c.concat(se),re(c.length-se.length),di()}function Et(se){if(m)if(S)E.set(se,!0);else{var ue=m.get(se);if(ue===void 0)throw new Error("[SlickGrid DataView] Invalid id");m.delete(se),c.splice(ue,1),re(ue),di()}}function gt(se){if(!(se.length===0||!m))if(S)for(var ue=0,ye=se.length;ue<ye;ue++){var $e=se[ue],Je=m.get($e);if(Je===void 0)throw new Error("[SlickGrid DataView] Invalid id");E.set($e,!0)}else{for(var dt=[],ue=0,ye=se.length;ue<ye;ue++){var $e=se[ue],Je=m.get($e);if(Je===void 0)throw new Error("[SlickGrid DataView] Invalid id");m.delete($e),dt.push(Je)}dt.sort();for(var ue=dt.length-1;ue>=0;--ue)c.splice(dt[ue],1);re(dt[0]),di()}}function ei(se){if(!P)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");vt(zi(se),se)}function Ai(se,ue){if(m){if(!m.has(se)||se!==ue[h])throw new Error("[SlickGrid DataView] Invalid or non-matching id "+m.get(se));if(!P)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");var ye=Fi(se);P(ye,ue)!==0?(Et(se),ei(ue)):Ee(se,ue)}}function zi(se){for(var ue=0,ye=c.length;ue<ye;){var $e=ue+ye>>>1;P(c[$e],se)===-1?ue=$e+1:ye=$e}return ue}function Zt(){return c.length}function Ni(){return p.length}function Bn(se){var ue=p[se];if(ue&&ue.__group&&ue.totals&&!ue.totals.initialized){var ye=ae[ue.level];ye.displayTotalsRow||(pn(ue.totals),ue.title=ye.formatter?ye.formatter(ue):ue.value)}else ue&&ue.__groupTotals&&!ue.initialized&&pn(ue);return ue}function fn(se){var ue=p[se];return ue===void 0?null:ue.__group?s.groupItemMetadataProvider.getGroupRowMetadata(ue):ue.__groupTotals?s.groupItemMetadataProvider.getTotalsRowMetadata(ue):null}function Ct(se,ue){if(se==null)for(var ye=0;ye<ae.length;ye++)Ie[ye]={},ae[ye].collapsed=ue,ue===!0?St.notify({level:ye,groupingKey:null}):ze.notify({level:ye,groupingKey:null});else Ie[se]={},ae[se].collapsed=ue,ue===!0?St.notify({level:se,groupingKey:null}):ze.notify({level:se,groupingKey:null});di()}function Se(se){Ct(se,!0)}function Xe(se){Ct(se,!1)}function xt(se,ue,ye){Ie[se][ue]=ae[se].collapsed^ye,di()}function ti(se){var ue=Array.prototype.slice.call(arguments),ye=ue[0],$e,Je;ue.length===1&&ye.indexOf(xe)!==-1?($e=ye,Je=ye.split(xe).length-1):($e=ue.join(xe),Je=ue.length-1),xt(Je,$e,!0),St.notify({level:Je,groupingKey:$e})}function Ui(se){var ue=Array.prototype.slice.call(arguments),ye=ue[0],$e,Je;ue.length===1&&ye.indexOf(xe)!==-1?(Je=ye.split(xe).length-1,$e=ye):(Je=ue.length-1,$e=ue.join(xe)),xt(Je,$e,!1),ze.notify({level:Je,groupingKey:$e})}function Wi(){return Ke}function Li(se,ue){for(var ye,$e,Je=[],dt={},At,Bt=ue?ue.level+1:0,ui=ae[Bt],Ci=0,Ei=ui.predefinedValues.length;Ci<Ei;Ci++)$e=ui.predefinedValues[Ci],ye=dt[$e],ye||(ye=new Slick.Group,ye.value=$e,ye.level=Bt,ye.groupingKey=(ue?ue.groupingKey+xe:"")+$e,Je[Je.length]=ye,dt[$e]=ye);for(var Ci=0,Ei=se.length;Ci<Ei;Ci++)At=se[Ci],$e=ui.getterIsAFn?ui.getter(At):At[ui.getter],ye=dt[$e],ye||(ye=new Slick.Group,ye.value=$e,ye.level=Bt,ye.groupingKey=(ue?ue.groupingKey+xe:"")+$e,Je[Je.length]=ye,dt[$e]=ye),ye.rows[ye.count++]=At;if(Bt<ae.length-1)for(var Ci=0;Ci<Je.length;Ci++)ye=Je[Ci],ye.groups=Li(ye.rows,ye);return Je.length&&Kt(Je,Bt),Je.sort(ae[Bt].comparer),Je}function pn(se){var ue=se.group,ye=ae[ue.level],$e=ue.level==ae.length,Je,dt=ye.aggregators.length;if(!$e&&ye.aggregateChildGroups)for(var At=ue.groups.length;At--;)ue.groups[At].totals.initialized||pn(ue.groups[At].totals);for(;dt--;)Je=ye.aggregators[dt],Je.init(),!$e&&ye.aggregateChildGroups?ye.compiledAccumulators[dt].call(Je,ue.groups):ye.compiledAccumulators[dt].call(Je,ue.rows),Je.storeResult(se);se.initialized=!0}function Gn(se){var ue=ae[se.level],ye=new Slick.GroupTotals;ye.group=se,se.totals=ye,ue.lazyTotalsCalculation||pn(ye)}function Kt(se,ue){ue=ue||0;for(var ye=ae[ue],$e=ye.collapsed,Je=Ie[ue],dt=se.length,At;dt--;)At=se[dt],!(At.collapsed&&!ye.aggregateCollapsed)&&(At.groups&&Kt(At.groups,ue+1),ye.aggregators.length&&(ye.aggregateEmpty||At.rows.length||At.groups&&At.groups.length)&&Gn(At),At.collapsed=$e^Je[At.groupingKey],At.title=ye.formatter?ye.formatter(At):At.value)}function Gi(se,ue){ue=ue||0;for(var ye=ae[ue],$e=[],Je,dt=0,At,Bt=0,ui=se.length;Bt<ui;Bt++){if(At=se[Bt],$e[dt++]=At,!At.collapsed){Je=At.groups?Gi(At.groups,ue+1):At.rows;for(var Ci=0,Ei=Je.length;Ci<Ei;Ci++)$e[dt++]=Je[Ci]}At.totals&&ye.displayTotalsRow&&(!At.collapsed||ye.aggregateCollapsed)&&($e[dt++]=At.totals)}return $e}function lr(se){var ue=se.toString(),ye=ue.indexOf("function")>=0,$e=ye?/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/:/^[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,Je=se.toString().match($e);return{params:Je[1].split(","),body:Je[2]}}function bo(se){if(se.accumulate){var ue=lr(se.accumulate),ye=new Function("_items","for (var "+ue.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+ue.params[0]+" = _items[_i]; "+ue.body+"}"),$e="compiledAccumulatorLoop";return ye.displayName=$e,ye.name=Co(ye,$e),ye}else return function(){}}function er(){var se=lr(_),ue="{ continue _coreloop; }$1",ye="{ _retval[_idx++] = $item$; continue _coreloop; }$1",$e=se.body.replace(/return false\s*([;}]|\}|$)/gi,ue).replace(/return!1([;}]|\}|$)/gi,ue).replace(/return true\s*([;}]|\}|$)/gi,ye).replace(/return!0([;}]|\}|$)/gi,ye).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),Je=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");Je=Je.replace(/\$filter\$/gi,$e),Je=Je.replace(/\$item\$/gi,se.params[0]),Je=Je.replace(/\$args\$/gi,se.params[1]);var dt=new Function("_items,_args",Je),At="compiledFilter";return dt.displayName=At,dt.name=Co(dt,At),dt}function tr(){var se=lr(_),ue="{ continue _coreloop; }$1",ye="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",$e=se.body.replace(/return false\s*([;}]|\}|$)/gi,ue).replace(/return!1([;}]|\}|$)/gi,ue).replace(/return true\s*([;}]|\}|$)/gi,ye).replace(/return!0([;}]|\}|$)/gi,ye).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),Je=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");Je=Je.replace(/\$filter\$/gi,$e),Je=Je.replace(/\$item\$/gi,se.params[0]),Je=Je.replace(/\$args\$/gi,se.params[1]);var dt=new Function("_items,_args,_cache",Je),At="compiledFilterWithCaching";return dt.displayName=At,dt.name=Co(dt,At),dt}function Co(se,ue){try{Object.defineProperty(se,"name",{writable:!0,value:ue})}catch{se.name=ue}}function mr(se,ue){for(var ye=[],$e=0,Je=0,dt=se.length;Je<dt;Je++)_(se[Je],ue)&&(ye[$e++]=se[Je]);return ye}function ar(se,ue,ye){for(var $e=[],Je=0,dt,At=0,Bt=se.length;At<Bt;At++)dt=se[At],ye[At]?$e[Je++]=dt:_(dt,ue)&&($e[Je++]=dt,ye[At]=!0);return $e}function Sr(se){if(_){var ue=s.inlineFilters?de:mr,ye=s.inlineFilters?be:ar;M.isFilterNarrowing?L=ue(L,Z):M.isFilterExpanding?L=ye(se,Z,J):M.isFilterUnchanged||(L=ue(se,Z))}else L=ne?se:se.concat();var $e;return ne?(L.length<=pe*ne&&(L.length===0?pe=0:pe=Math.floor((L.length-1)/ne)),$e=L.slice(ne*pe,ne*pe+ne)):$e=L,{totalRows:L.length,rows:$e}}function $n(se,ue){var ye,$e,Je,dt=[],At=0,Bt=Math.max(ue.length,se.length);M&&M.ignoreDiffsBefore&&(At=Math.max(0,Math.min(ue.length,M.ignoreDiffsBefore))),M&&M.ignoreDiffsAfter&&(Bt=Math.min(ue.length,Math.max(0,M.ignoreDiffsAfter)));for(var ui=At,Ci=se.length;ui<Bt;ui++)ui>=Ci?dt[dt.length]=ui:(ye=ue[ui],$e=se[ui],(!ye||ae.length&&(Je=ye.__nonDataRow||$e.__nonDataRow)&&ye.__group!==$e.__group||ye.__group&&!ye.equals($e)||Je&&(ye.__groupTotals||$e.__groupTotals)||ye[h]!=$e[h]||C&&C[ye[h]])&&(dt[dt.length]=ui));return dt}function Vn(se){v=null,(M.isFilterNarrowing!=B.isFilterNarrowing||M.isFilterExpanding!=B.isFilterExpanding)&&(J=[]);var ue=Sr(se);Ve=ue.totalRows;var ye=ue.rows;Ke=[],ae.length&&(Ke=Li(ye),Ke.length&&(ye=Gi(Ke)));var $e=$n(p,ye);return p=ye,$e}function di(){if(!x){var se=Slick.Utils.extend(!0,{},We()),ue=p.length,ye=Ve,$e=Vn(c);ne&&Ve<pe*ne&&(pe=Math.max(0,Math.ceil(Ve/ne)-1),$e=Vn(c)),C=null,B=M,M={},ye!==Ve&&He.notify(se,null,l)!==!1&&ot.notify(We(),null,l),ue!==p.length&&ce.notify({previous:ue,current:p.length,itemCount:c.length,dataView:l,callingOnRowsChanged:$e.length>0},null,l),$e.length>0&&Ce.notify({rows:$e,itemCount:c.length,dataView:l,calledOnRowCountChanged:ue!==p.length},null,l),(ue!==p.length||$e.length>0)&&_e.notify({rowsDiff:$e,previousRowCount:ue,currentRowCount:p.length,itemCount:c.length,rowCountChanged:ue!==p.length,rowsChanged:$e.length>0,dataView:l},null,l)}}function zn(se,ue,ye){var $e=this;U=se;var Je;Oe=$e.mapRowsToIds(se.getSelectedRows());function dt(Bt){Bt===!1?Oe=[]:Oe.sort().join(",")!==Bt.sort().join(",")&&(Oe=Bt)}function At(){if(Oe.length>0&&!Je){Je=!0;var Bt=$e.mapIdsToRows(Oe);if(!ue){var ui={grid:U,ids:$e.mapRowsToIds(Bt),rows:Bt,dataView:$e};De(ui),Ye.notify(Object.assign(ui,{selectedRowIds:Oe,filteredIds:$e.getAllSelectedFilteredIds()}),new Slick.EventData,$e)}se.setSelectedRows(Bt),Je=!1}}return se.onSelectedRowsChanged.subscribe(function(Bt,ui){if(!Je){var Ci=$e.mapRowsToIds(ui.rows),Ei={grid:U,ids:Ci,rows:ui.rows,added:!0,dataView:$e};De(Ei),Ye.notify(Object.assign(Ei,{selectedRowIds:Oe,filteredIds:$e.getAllSelectedFilteredIds()}),new Slick.EventData,$e)}}),De=function(Bt){if(!Je){Je=!0;var ui=typeof Bt.added>"u";if(ui)dt(Bt.ids);else{var Ci;if(Bt.added)if(ye&&se.getOptions().multiSelect){var Ei=Oe.filter(function(yn){return $e.getRowById(yn)===void 0});Ci=Ei.concat(Bt.ids)}else Ci=Bt.ids;else ye&&se.getOptions().multiSelect?Ci=Oe.filter(function(yn){return Bt.ids.indexOf(yn)===-1}):Ci=[];dt(Ci)}Je=!1}},this.onRowsOrCountChanged.subscribe(At),Ye}function to(){return Oe}function yo(){return vr().map(function(se){return se[h]})}function mn(se,ue){var ye=ue&&ue.isRowBeingAdded,$e=ue&&ue.shouldTriggerEvent,Je=ue&&ue.applyRowSelectionToGrid;ye!==!1&&(ye=!0);var dt=l.mapIdsToRows(se),At={grid:U,ids:se,rows:dt,added:ye,dataView:l};De(At),$e!==!1&&Ye.notify(Object.assign(At,{selectedRowIds:Oe,filteredIds:l.getAllSelectedFilteredIds()}),new Slick.EventData,l),Je!==!1&&U&&U.setSelectedRows(dt)}function ir(){var se=[],ue=to();return ue.forEach(function(ye){se.push(l.getItemById(ye))}),se}function vr(){if(!Array.isArray(Oe))return[];var se=L.filter(function(ue){return Oe.some(function(ye){return ue[h]===ye})});return se||[]}function gr(se,ue){var ye,$e;Je(se.getCellCssStyles(ue));function Je(At){ye={};for(var Bt in At){var ui=p[Bt][h];ye[ui]=At[Bt]}}function dt(){if(ye){$e=!0,Ot();var At={};for(var Bt in ye){var ui=v[Bt];ui!=null&&(At[ui]=ye[Bt])}se.setCellCssStyles(ue,At),$e=!1}}se.onCellCssStylesChanged.subscribe(function(At,Bt){$e||ue==Bt.key&&(Bt.hash?Je(Bt.hash):(se.onCellCssStylesChanged.unsubscribe(),l.onRowsOrCountChanged.unsubscribe(dt)))}),this.onRowsOrCountChanged.subscribe(dt)}Slick.Utils.extend(this,{beginUpdate:ct,endUpdate:k,destroy:ee,setPagingOptions:mt,getPagingInfo:We,getIdPropertyName:me,getItems:Fe,setItems:Ge,setFilter:ve,getFilter:G,getFilteredItems:bi,getFilteredItemCount:K,sort:Le,fastSort:jt,reSort:It,setGrouping:at,getGrouping:ke,groupBy:st,setAggregators:ht,collapseAllGroups:Se,expandAllGroups:Xe,collapseGroup:ti,expandGroup:Ui,getGroups:Wi,getAllSelectedIds:to,getAllSelectedItems:ir,getAllSelectedFilteredIds:yo,getAllSelectedFilteredItems:vr,setSelectedIds:mn,getIdxById:Lt,getRowByItem:zt,getRowById:qt,getItemById:Fi,getItemByIdx:Rt,mapItemsToRows:Mi,mapRowsToIds:Q,mapIdsToRows:z,setRefreshHints:ge,setFilterArgs:$,refresh:di,updateItem:Ee,updateItems:lt,insertItem:vt,insertItems:it,addItem:wt,addItems:Ht,deleteItem:Et,deleteItems:gt,sortedAddItem:ei,sortedUpdateItem:Ai,syncGridSelection:zn,syncGridCellCssStyles:gr,getItemCount:Zt,getLength:Ni,getItem:Bn,getItemMetadata:fn,onSelectedRowIdsChanged:Ye,onSetItemsCalled:Ue,onRowCountChanged:ce,onRowsChanged:Ce,onRowsOrCountChanged:_e,onBeforePagingInfoChanged:He,onPagingInfoChanged:ot,onGroupExpanded:ze,onGroupCollapsed:St})}function t(s){this.field_=s,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(l){var u=l[this.field_];this.count_++,u!=null&&u!==""&&!isNaN(u)&&(this.nonNullCount_++,this.sum_+=parseFloat(u))},this.storeResult=function(l){l.avg||(l.avg={}),this.nonNullCount_!==0&&(l.avg[this.field_]=this.sum_/this.nonNullCount_)}}function e(s){this.field_=s,this.init=function(){this.min_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.min_==null||u<this.min_)&&(this.min_=u)},this.storeResult=function(l){l.min||(l.min={}),l.min[this.field_]=this.min_}}function n(s){this.field_=s,this.init=function(){this.max_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.max_==null||u>this.max_)&&(this.max_=u)},this.storeResult=function(l){l.max||(l.max={}),l.max[this.field_]=this.max_}}function r(s){this.field_=s,this.init=function(){this.sum_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.sum_+=parseFloat(u))},this.storeResult=function(l){l.sum||(l.sum={}),l.sum[this.field_]=this.sum_}}function o(s){this.field_=s,this.init=function(){},this.storeResult=function(l){l.count||(l.count={}),l.count[this.field_]=l.group.rows.length}}Slick.Utils.extend(!0,Slick,{Data:{DataView:a,Aggregators:{Avg:t,Min:e,Max:n,Sum:r,Count:o}}})}();const Vv=Us||hs;class my{get eventHandler(){return this._eventHandler}get gridUid(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get locales(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.locales)!==null&&e!==void 0?e:je.locales}set metrics(t){this.renderMetrics(t)}get leftFooterText(){var t,e;return(e=(t=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`))===null||t===void 0?void 0:t.textContent)!==null&&e!==void 0?e:""}set leftFooterText(t){this.renderLeftFooterText(t)}get rightFooterText(){var t,e;return(e=(t=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`))===null||t===void 0?void 0:t.textContent)!==null&&e!==void 0?e:""}set rightFooterText(t){this.renderRightFooterText(t)}constructor(t,e,n,r){var o,s,l,u,h,c,p;if(this.grid=t,this.customFooterOptions=e,this.pubSubService=n,this.translaterService=r,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new Sv,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new Slick.EventHandler,this._enableTranslate=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,this._isLeftFooterOriginallyEmpty=!(!((l=this.gridOptions.customFooterOptions)===null||l===void 0)&&l.leftFooterText),this._isRightFooterOriginallyEmpty=!(!((u=this.gridOptions.customFooterOptions)===null||u===void 0)&&u.rightFooterText),this.registerOnSelectedRowsChangedWhenEnabled(e),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&(!((h=this.pubSubService)===null||h===void 0)&&h.subscribe)){const m=(p=(c=this.translaterService)===null||c===void 0?void 0:c.eventName)!==null&&p!==void 0?p:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(m,()=>this.translateCustomFooterTexts()))}}dispose(){var t;this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),(t=this._footerElement)===null||t===void 0||t.remove()}renderFooter(t){this.translateCustomFooterTexts(),this.createFooterContainer(t)}renderMetrics(t){var e;const n=Vv(t.endTime).format(this.customFooterOptions.dateFormat);this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",n),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",t.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",t.totalItemCount),!((e=this.customFooterOptions.metricTexts)===null||e===void 0)&&e.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(t){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",t)}renderRightFooterText(t){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",t)}translateCustomFooterTexts(){var t,e,n,r,o;if(this.gridOptions.enableTranslate&&(!((t=this.translaterService)===null||t===void 0)&&t.translate)){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const s of Object.keys(this.customFooterOptions.metricTexts))if(s.lastIndexOf("Key")>0){const l=s.substring(0,s.lastIndexOf("Key"));this.customFooterOptions.metricTexts[l]=this.translaterService.translate(this.customFooterOptions.metricTexts[s]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||((e=this.locales)===null||e===void 0?void 0:e.TEXT_LAST_UPDATE)||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||((n=this.locales)===null||n===void 0?void 0:n.TEXT_ITEMS)||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||((r=this.locales)===null||r===void 0?void 0:r.TEXT_ITEMS_SELECTED)||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||((o=this.locales)===null||o===void 0?void 0:o.TEXT_OF)||"TEXT_OF")}createFooterContainer(t){const e=Re("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}}),n=Re("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`});n.innerHTML=Ln(this.gridOptions,this.customFooterOptions.leftFooterText||""),e.appendChild(n),e.appendChild(this.createFooterRightContainer()),this._footerElement=e,t!=null&&t.appendChild&&this._footerElement&&t.appendChild(this._footerElement)}createFooterRightContainer(){var t,e,n,r,o,s,l,u;const h=Re("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(!this._isRightFooterOriginallyEmpty)h.innerHTML=Ln(this.gridOptions,this.customFooterOptions.rightFooterText||"");else if(!this.customFooterOptions.hideMetrics){h.classList.add("metrics");const c=Re("span",{className:"timestamp"},h);if(!this.customFooterOptions.hideLastUpdateTimestamp){const p=this.createFooterLastUpdate();p&&c.appendChild(p)}h.appendChild(Re("span",{className:"item-count",textContent:`${(e=(t=this.metrics)===null||t===void 0?void 0:t.itemCount)!==null&&e!==void 0?e:"0"}`})),this.customFooterOptions.hideTotalItemCount||(h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Re("span",{className:"text-of",textContent:` ${(r=(n=this.customFooterOptions.metricTexts)===null||n===void 0?void 0:n.of)!==null&&r!==void 0?r:"of"} `})),h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Re("span",{className:"total-count",textContent:`${(s=(o=this.metrics)===null||o===void 0?void 0:o.totalItemCount)!==null&&s!==void 0?s:"0"}`}))),h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Re("span",{className:"text-items",textContent:` ${(u=(l=this.customFooterOptions.metricTexts)===null||l===void 0?void 0:l.items)!==null&&u!==void 0?u:"items"} `}))}return h}createFooterLastUpdate(){var t,e,n,r;const o=(n=(e=(t=this.customFooterOptions)===null||t===void 0?void 0:t.metricTexts)===null||e===void 0?void 0:e.lastUpdate)!==null&&n!==void 0?n:"Last Update",s=Vv((r=this.metrics)===null||r===void 0?void 0:r.endTime).format(this.customFooterOptions.dateFormat),l=Re("span");return l.appendChild(Re("span",{className:"text-last-update",textContent:o})),l.appendChild(document.createTextNode(`\r
`)),l.appendChild(Re("span",{className:"last-update-timestamp",textContent:s})),l.appendChild(Re("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),l}registerOnSelectedRowsChangedWhenEnabled(t){var e,n,r,o;if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&t&&!t.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;const l=(o=(n=(e=t.metricTexts)===null||e===void 0?void 0:e.itemsSelected)!==null&&n!==void 0?n:(r=this.locales)===null||r===void 0?void 0:r.TEXT_ITEMS_SELECTED)!==null&&o!==void 0?o:"TEXT_ITEMS_SELECTED";t.leftFooterText=`0 ${l}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(u,h)=>{var c,p,m,v;this._selectedRowCount=h.rows.length;const _=(v=(p=(c=t.metricTexts)===null||c===void 0?void 0:c.itemsSelected)!==null&&p!==void 0?p:(m=this.locales)===null||m===void 0?void 0:m.TEXT_ITEMS_SELECTED)!==null&&v!==void 0?v:"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${_}`})}}}class vy{constructor(){this.dependencies=[]}get(t){const e=this.dependencies.find(n=>n.key===t);return e!=null&&e.instance?e.instance:null}dispose(){this.dependencies=[]}registerInstance(t,e){this.dependencies.some(r=>r.key===t)||this.dependencies.push({key:t,instance:e})}}var wf;const gy=(wf=Zl==null?void 0:Ut)!==null&&wf!==void 0?wf:Zl;window.Sortable=gy;class zv{get eventHandler(){return this._eventHandler}get columnDefinitions(){return this._columnDefinitions||[]}set columnDefinitions(t){this._columnDefinitions=t,this._slickgridInitialized&&this.updateColumnDefinitionsList(this._columnDefinitions),t.length>0&&this.copyColumnWidthsReference(t)}get dataset(){var t;return((t=this.dataView)===null||t===void 0?void 0:t.getItems())||[]}set dataset(t){var e,n;const r=this._currentDatasetLength,o=Qo(t,this.dataset||[]);let l=!!(!((e=this._gridOptions)===null||e===void 0)&&e.enableDeepCopyDatasetOnPageLoad)?fo(t||[]):t;this.slickGrid&&(!((n=this.gridOptions)===null||n===void 0)&&n.enableTreeData)&&Array.isArray(t)&&(t.length>0||t.length!==r||!o)&&(this._isDatasetHierarchicalInitialized=!1,l=this.sortTreeDataset(t,!o)),this.refreshGridData(l||[]),this._currentDatasetLength=(t||[]).length,this.slickGrid&&this.gridOptions.autoFitColumnsOnFirstLoad&&r===0&&this.slickGrid.autosizeColumns()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(t){var e,n;const r=Qo(t,this.sharedService.hierarchicalDataset||[]),o=this._currentDatasetLength;this.sharedService.hierarchicalDataset=t,t&&this.columnDefinitions&&(!((e=this.filterService)===null||e===void 0)&&e.clearFilters)&&this.filterService.clearFilters(),this.dataView&&t&&this.slickGrid&&(!((n=this.sortService)===null||n===void 0)&&n.processTreeDataInitialSort)&&(this.sortService.processTreeDataInitialSort(),setTimeout(()=>{var s,l;const u=(l=(s=this.dataView)===null||s===void 0?void 0:s.getItemCount())!==null&&l!==void 0?l:0;u>0&&(u!==o||!r)&&this.filterService.refreshTreeDataFilters()})),this._isDatasetHierarchicalInitialized=!0}set eventPubSubService(t){this._eventPubSubService=t}get gridOptions(){return this._gridOptions||{}}set gridOptions(t){var e,n,r;let o;!((e=this.slickGrid)===null||e===void 0)&&e.getOptions?o=Slick.Utils.extend(!0,{},this.slickGrid.getOptions(),t):o=this.mergeGridOptions(t),!((n=this.sharedService)===null||n===void 0)&&n.gridOptions&&(!((r=this.slickGrid)===null||r===void 0)&&r.setOptions)&&(this.sharedService.gridOptions=o,this.slickGrid.setOptions(o,!1,!0),this.slickGrid.reRenderColumns(!0)),this._gridOptions=o}get paginationOptions(){return this._paginationOptions}set paginationOptions(t){var e;t&&this._paginationOptions?this._paginationOptions={...this._paginationOptions,...t}:this._paginationOptions=t,this.gridOptions.pagination=this._paginationOptions,this.paginationService.updateTotalItems((e=t==null?void 0:t.totalItems)!==null&&e!==void 0?e:0,!0)}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(t){this._isDatasetInitialized=t}get isGridInitialized(){return this._isGridInitialized}get instances(){return this._slickerGridInstances}get extensions(){return this._extensions}get registeredResources(){return this._registeredResources}constructor(t,e,n,r,o,s){var l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z,L,de;if(this._currentDatasetLength=0,this._hideHeaderRowAfterPageLoad=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isGridInitialized=!1,this._isLocalGrid=!0,this._isPaginationInitialized=!1,this._registeredResources=[],this._slickgridInitialized=!1,this.customDataView=!1,this.totalItems=0,this.subscriptions=[],this.showPagination=!1,t.querySelectorAll(".slickgrid-container").length!==0)return;t.classList.add("grid-pane"),this._gridParentContainerElm=t,this._gridContainerElm=document.createElement("div"),this._gridContainerElm.classList.add("slickgrid-container"),t.appendChild(this._gridContainerElm),this._hideHeaderRowAfterPageLoad=(n==null?void 0:n.showHeaderRow)===!1,this._columnDefinitions=e||[],this._columnDefinitions.length>0&&this.copyColumnWidthsReference(this._columnDefinitions),this._registeredResources=(n==null?void 0:n.externalResources)||(n==null?void 0:n.registerExternalResources)||[],n!=null&&n.registerExternalResources&&console.warn("[Slickgrid-Universal] Please note that the grid option `registerExternalResources` was deprecated, please use `externalResources` instead."),this._gridOptions=this.mergeGridOptions(n||{});const be=!!(!((l=this._gridOptions)===null||l===void 0)&&l.enableDeepCopyDatasetOnPageLoad);this.universalContainerService=(u=s==null?void 0:s.universalContainerService)!==null&&u!==void 0?u:new vy,this.translaterService=(h=s==null?void 0:s.translaterService)!==null&&h!==void 0?h:this._gridOptions.translater,this._eventPubSubService=(c=s==null?void 0:s.eventPubSubService)!==null&&c!==void 0?c:new Vp(t),this._eventPubSubService.eventNamingStyle=(m=(p=this._gridOptions)===null||p===void 0?void 0:p.eventNamingStyle)!==null&&m!==void 0?m:Ro.camelCase;const J=new KC;this.backendUtilityService=(v=s==null?void 0:s.backendUtilityService)!==null&&v!==void 0?v:new Op,this.gridEventService=(_=s==null?void 0:s.gridEventService)!==null&&_!==void 0?_:new W0,this.sharedService=(C=s==null?void 0:s.sharedService)!==null&&C!==void 0?C:new eb,this.collectionService=(x=s==null?void 0:s.collectionService)!==null&&x!==void 0?x:new Gp(this.translaterService),this.extensionUtility=(S=s==null?void 0:s.extensionUtility)!==null&&S!==void 0?S:new B_(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new Gb(J,this.translaterService,this.collectionService),this.filterService=(E=s==null?void 0:s.filterService)!==null&&E!==void 0?E:new z0(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=(D=s==null?void 0:s.resizerService)!==null&&D!==void 0?D:new J0(this._eventPubSubService),this.sortService=(A=s==null?void 0:s.sortService)!==null&&A!==void 0?A:new tb(this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=(P=s==null?void 0:s.treeDataService)!==null&&P!==void 0?P:new ib(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=(M=s==null?void 0:s.paginationService)!==null&&M!==void 0?M:new Y0(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=(B=s==null?void 0:s.extensionService)!==null&&B!==void 0?B:new D0(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService),this.gridStateService=(Z=s==null?void 0:s.gridStateService)!==null&&Z!==void 0?Z:new G0(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=(L=s==null?void 0:s.gridService)!==null&&L!==void 0?L:new U0(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=(de=s==null?void 0:s.groupingAndColspanService)!==null&&de!==void 0?de:new $0(this.extensionUtility,this._eventPubSubService),o&&(this.sharedService.hierarchicalDataset=(be?fo(o||[]):o)||[]);const U=new Slick.EventHandler;this.universalContainerService.registerInstance("PubSubService",this._eventPubSubService),this.universalContainerService.registerInstance("EventPubSubService",this._eventPubSubService),this.universalContainerService.registerInstance("ExtensionUtility",this.extensionUtility),this.universalContainerService.registerInstance("FilterService",this.filterService),this.universalContainerService.registerInstance("CollectionService",this.collectionService),this.universalContainerService.registerInstance("ExtensionService",this.extensionService),this.universalContainerService.registerInstance("GridEventService",this.gridEventService),this.universalContainerService.registerInstance("GridService",this.gridService),this.universalContainerService.registerInstance("GridStateService",this.gridStateService),this.universalContainerService.registerInstance("GroupingAndColspanService",this.groupingService),this.universalContainerService.registerInstance("PaginationService",this.paginationService),this.universalContainerService.registerInstance("ResizerService",this.resizerService),this.universalContainerService.registerInstance("SharedService",this.sharedService),this.universalContainerService.registerInstance("SortService",this.sortService),this.universalContainerService.registerInstance("TranslaterService",this.translaterService),this.universalContainerService.registerInstance("TreeDataService",this.treeDataService),this.initialization(this._gridContainerElm,U),!o&&!this.gridOptions.backendServiceApi&&(this.dataset=r||[],this._currentDatasetLength=this.dataset.length)}emptyGridContainerElm(){var t,e;const n=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.gridContainerId)!==null&&e!==void 0?e:"grid1",r=document.querySelector(`#${n}`);on(r)}dispose(t=!1){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z,L,de;if((e=this._eventPubSubService)===null||e===void 0||e.publish("onBeforeGridDestroy",this.slickGrid),(n=this._eventHandler)===null||n===void 0||n.unsubscribeAll(),(r=this._eventPubSubService)===null||r===void 0||r.publish("onAfterGridDestroyed",!0),(o=this.extensionService)===null||o===void 0||o.dispose(),(s=this.filterService)===null||s===void 0||s.dispose(),(l=this.gridEventService)===null||l===void 0||l.dispose(),(u=this.gridService)===null||u===void 0||u.dispose(),(h=this.gridStateService)===null||h===void 0||h.dispose(),(c=this.groupingService)===null||c===void 0||c.dispose(),(p=this.paginationService)===null||p===void 0||p.dispose(),(m=this.resizerService)===null||m===void 0||m.dispose(),(v=this.sortService)===null||v===void 0||v.dispose(),(_=this.treeDataService)===null||_===void 0||_.dispose(),(C=this.universalContainerService)===null||C===void 0||C.dispose(),this.disposeExternalResources(),(x=this.slickFooter)===null||x===void 0||x.dispose(),(S=this.slickEmptyWarning)===null||S===void 0||S.dispose(),(E=this.slickPagination)===null||E===void 0||E.dispose(),Xd(this.subscriptions),(D=this._eventPubSubService)===null||D===void 0||D.unsubscribeAll(),(A=this.dataView)===null||A===void 0||A.setItems([]),typeof((P=this.dataView)===null||P===void 0?void 0:P.destroy)=="function"&&((M=this.dataView)===null||M===void 0||M.destroy()),(B=this.slickGrid)===null||B===void 0||B.destroy(!0),this.slickGrid=null,on(this._gridContainerElm),on(this._gridParentContainerElm),(Z=this._gridContainerElm)===null||Z===void 0||Z.remove(),(L=this._gridParentContainerElm)===null||L===void 0||L.remove(),this.backendServiceApi){for(const be of Object.keys(this.backendServiceApi))this.backendServiceApi[be]=null;this.backendServiceApi=void 0}for(const be of Object.keys(this.columnDefinitions))this.columnDefinitions[be]=null;for(const be of Object.keys(this.sharedService))this.sharedService[be]=null;this.datasetHierarchical=void 0,this._columnDefinitions=[],t&&this.emptyGridContainerElm(),(de=this._eventPubSubService)===null||de===void 0||de.dispose(),this._slickerGridInstances=null}disposeExternalResources(){if(Array.isArray(this._registeredResources))for(;this._registeredResources.length>0;){const t=this._registeredResources.pop();t!=null&&t.dispose&&t.dispose()}this._registeredResources=[]}initialization(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,E,D,A,P,M,B,Z,L,de,be;if(this.gridOptions&&(this.gridOptions.frozenRow!==void 0&&this.gridOptions.frozenRow>=0||this.gridOptions.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0)&&this.gridOptions.enableMouseWheelScrollHandler===void 0&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._gridContainerElm=t,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._eventHandler=e,this._gridOptions=this.mergeGridOptions(this._gridOptions||{}),this.backendServiceApi=(n=this._gridOptions)===null||n===void 0?void 0:n.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this._eventPubSubService.eventNamingStyle=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.eventNamingStyle)!==null&&o!==void 0?o:Ro.camelCase,this._paginationOptions=(s=this.gridOptions)===null||s===void 0?void 0:s.pagination,this.createBackendApiInternalPostProcessCallback(this._gridOptions),!this.customDataView){let ae={inlineFilters:(h=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.dataView)===null||u===void 0?void 0:u.inlineFilters)!==null&&h!==void 0?h:!1};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new zm,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,ae={...ae,groupItemMetadataProvider:this.groupItemMetadataProvider}),this.dataView=new Slick.Data.DataView(ae),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions||[]),this._gridOptions.autoAddCustomEditorFormatter&&vm(this._columnDefinitions,this._gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this._gridOptions),!((c=this.gridOptions.presets)===null||c===void 0)&&c.pinning&&(this.gridOptions={...this.gridOptions,...this.gridOptions.presets.pinning}),this.slickGrid=new Slick.Grid(t,this.dataView,this._columnDefinitions,this._gridOptions),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.slickGrid,this.sharedService.gridContainerElement=this._gridContainerElm,this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.slickGrid,this._gridOptions,this.dataView),this._slickgridInitialized=!0;const J=(m=(p=this._gridOptions)===null||p===void 0?void 0:p.frozenColumn)!==null&&m!==void 0?m:-1;if(J>=0&&J<=this._columnDefinitions.length&&this._columnDefinitions.length>0&&(this.sharedService.frozenVisibleColumnId=(_=(v=this._columnDefinitions[J])===null||v===void 0?void 0:v.id)!==null&&_!==void 0?_:""),this.registerResources(),this.slickGrid.init(),this.resizerService.init(this.slickGrid,this._gridParentContainerElm),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&(this.slickFooter=new my(this.slickGrid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(this._gridParentContainerElm)),Array.isArray(this.dataset)){const F=!((C=this.gridOptions)===null||C===void 0)&&C.enableTreeData?this.sortTreeDataset(this.dataset):this.dataset;(x=this.dataView)===null||x===void 0||x.setItems(F,this._gridOptions.datasetIdPropertyName)}if(((E=(S=this.slickGrid)===null||S===void 0?void 0:S.getSelectionModel)===null||E===void 0?void 0:E.call(S))&&(!((D=this._gridOptions)===null||D===void 0)&&D.dataView)&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){let F=!1;this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(F=this._gridOptions.dataView.syncGridSelectionWithBackendService);const ae=this._gridOptions.dataView.syncGridSelection;if(typeof ae=="boolean"){let Ke=ae;this._isLocalGrid||(Ke=ae&&F),(A=this.dataView)===null||A===void 0||A.syncGridSelection(this.slickGrid,Ke)}else typeof ae=="object"&&((P=this.dataView)===null||P===void 0||P.syncGridSelection(this.slickGrid,ae.preserveHidden,ae.preserveHiddenOnSelectionChange))}this.slickGrid.invalidate(),((B=(M=this.dataView)===null||M===void 0?void 0:M.getLength())!==null&&B!==void 0?B:0)>0&&(!this._isDatasetInitialized&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0),this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this.gridEventService.bindOnBeforeEditCell(this.slickGrid),this.gridEventService.bindOnCellChange(this.slickGrid),this.gridEventService.bindOnClick(this.slickGrid),!((Z=this.gridOptions)===null||Z===void 0)&&Z.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this._eventPubSubService.publish("onGridCreated",this.slickGrid),this.customDataView||this.executeAfterDataviewCreated(this.gridOptions),this.bindResizeHook(this.slickGrid,this.gridOptions),this._slickerGridInstances={dataView:this.dataView,slickGrid:this.slickGrid,dispose:this.dispose.bind(this),backendService:(de=(L=this.gridOptions)===null||L===void 0?void 0:L.backendServiceApi)===null||de===void 0?void 0:de.service,eventPubSubService:this._eventPubSubService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,extensionUtility:this.extensionUtility,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService},this._extensions=(be=this.extensionService)===null||be===void 0?void 0:be.extensionList,this._eventPubSubService.publish("onSlickerGridCreated",this.instances),this._isGridInitialized=!0}mergeGridOptions(t){const e=Slick.Utils.extend(!0,{},pf,t);return e.enableFiltering&&!e.showHeaderRow&&(e.showHeaderRow=e.enableFiltering),e!=null&&e.pagination&&(t.enablePagination||t.backendServiceApi)&&t.pagination&&Array.isArray(t.pagination.pageSizes)&&(e.pagination.pageSizes=t.pagination.pageSizes),this.sharedService&&!e.enableFiltering&&e.enablePagination&&this._isLocalGrid&&(e.enableFiltering=!0,e.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService.hideHeaderRowAfterPageLoad=!0),e}createBackendApiInternalPostProcessCallback(t){const e=t==null?void 0:t.backendServiceApi;if(e!=null&&e.service){const n=e.service;typeof n.getDatasetName=="function"&&(e.internalPostProcess=r=>{const o=e&&n&&typeof n.getDatasetName=="function"?n.getDatasetName():"";if(r&&r.data&&r.data[o]){const s=r.data[o].hasOwnProperty("nodes")?r.data[o].nodes:r.data[o],l=r.data[o].hasOwnProperty("totalCount")?r.data[o].totalCount:r.data[o].length;this.refreshGridData(s,l||0)}})}}bindDifferentHooks(t,e,n){var r,o;if(e.enableTranslate&&(!((r=this.translaterService)===null||r===void 0)&&r.addPubSubMessaging)&&this.translaterService.addPubSubMessaging(this._eventPubSubService),e.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys()),this.subscriptions.push(this._eventPubSubService.subscribe("onLanguageChange",()=>{e.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),e.createPreHeaderPanel&&!e.enableDraggableGrouping&&this.groupingService.translateGroupingAndColSpan())})),e.backendServiceApi){const s=e.backendServiceApi;!((o=s==null?void 0:s.service)===null||o===void 0)&&o.init&&s.service.init(s.options,e.pagination,this.slickGrid,this.sharedService)}if(n&&t){for(const s in t)t.hasOwnProperty(s)&&s.startsWith("on")&&this._eventHandler.subscribe(t[s],(l,u)=>{var h,c;const p=this._eventPubSubService.getEventNameByNamingConvention(s,(c=(h=this._gridOptions)===null||h===void 0?void 0:h.defaultSlickgridEventPrefix)!==null&&c!==void 0?c:"");return this._eventPubSubService.dispatchCustomEvent(p,{eventData:l,args:u})});for(const s in n)n.hasOwnProperty(s)&&s.startsWith("on")&&this._eventHandler.subscribe(n[s],(l,u)=>{var h,c;const p=this._eventPubSubService.getEventNameByNamingConvention(s,(c=(h=this._gridOptions)===null||h===void 0?void 0:h.defaultSlickgridEventPrefix)!==null&&c!==void 0?c:"");return this._eventPubSubService.dispatchCustomEvent(p,{eventData:l,args:u})});e.enableFiltering&&(this.filterService.init(t),e.backendServiceApi&&!e.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(t):this.filterService.bindLocalOnFilter(t)),e.enableSorting&&(e.backendServiceApi&&!e.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(t):this.sortService.bindLocalOnSort(t)),this._eventHandler.subscribe(n.onRowCountChanged,()=>{var s,l,u;t.invalidate(),this.handleOnItemCountChanged(((s=this.dataView)===null||s===void 0?void 0:s.getFilteredItemCount())||0,(u=(l=this.dataView)===null||l===void 0?void 0:l.getItemCount())!==null&&u!==void 0?u:0)}),this._eventHandler.subscribe(n.onSetItemsCalled,(s,l)=>{var u,h;this.handleOnItemCountChanged(((u=this.dataView)===null||u===void 0?void 0:u.getFilteredItemCount())||0,l.itemCount),l.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!(!((h=this.gridOptions)===null||h===void 0)&&h.resizeByContentOnlyOnFirstLoad))}),e&&e.enableFiltering&&!e.enableRowDetailView&&this._eventHandler.subscribe(n.onRowsChanged,(s,l)=>{l!=null&&l.rows&&Array.isArray(l.rows)&&(l.rows.forEach(u=>t.updateRow(u)),t.render())}),this._eventHandler.subscribe(t.onColumnsReordered,(s,l)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=l.impactedColumns}),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized()}e!=null&&e.colspanCallback&&(n!=null&&n.getItem)&&(n!=null&&n.getItemMetadata)&&(n.getItemMetadata=s=>{let l=null;return e.colspanCallback&&(l=e.colspanCallback(n.getItem(s))),l})}bindBackendCallbackFunctions(t){var e,n,r,o,s,l;const u=t.backendServiceApi,h=u==null?void 0:u.service,c=(e=h==null?void 0:h.options)!==null&&e!==void 0?e:{},p=c?c!=null&&c.hasOwnProperty("executeProcessCommandOnInit")?c.executeProcessCommandOnInit:!0:!1;if(h){if(t!=null&&t.presets){if(h.updateFilters&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&h.updateFilters(t.presets.filters,!0),h.updateSorters&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0){const m=!((n=this._gridOptions)===null||n===void 0)&&n.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);h.updateSorters(void 0,m)}if(h.updatePagination&&t.presets.pagination){const{pageNumber:m,pageSize:v}=t.presets.pagination;h.updatePagination(m,v)}}else{const m=this.filterService.getColumnFilters();m&&h.updateFilters&&h.updateFilters(m,!1)}if(u&&h&&(u.onInit||p)){const m=typeof h.buildQuery=="function"?h.buildQuery():"",v=p?(o=(r=u.process)===null||r===void 0?void 0:r.call(u,m))!==null&&o!==void 0?o:null:(l=(s=u.onInit)===null||s===void 0?void 0:s.call(u,m))!==null&&l!==void 0?l:null;setTimeout(()=>{var _,C,x,S;const E=this.backendUtilityService,D=new Date;u.preProcess&&u.preProcess();const A=(x=(C=(_=this.gridOptions)===null||_===void 0?void 0:_.pagination)===null||C===void 0?void 0:C.totalItems)!==null&&x!==void 0?x:0;v instanceof Promise?v.then(P=>E.executeBackendProcessesCallback(D,P,u,A)).catch(P=>E.onBackendError(P,u)):v&&(!((S=this.rxjs)===null||S===void 0)&&S.isObservable(v))&&this.subscriptions.push(v.subscribe(P=>E.executeBackendProcessesCallback(D,P,u,A),P=>E.onBackendError(P,u)))})}}}bindResizeHook(t,e){if(e.autoFitColumnsOnFirstLoad&&e.autosizeColumnsByCellContentOnFirstLoad||e.enableAutoSizeColumns&&e.enableAutoResizeColumnsByCellContent)throw new Error('[Slickgrid-Universal] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');t&&e.autoFitColumnsOnFirstLoad&&e.enableAutoSizeColumns&&typeof t.autosizeColumns=="function"&&t.autosizeColumns(),e.gridHeight||e.gridWidth?this.resizerService.resizeGrid(0,{height:e.gridHeight,width:e.gridWidth}):this.resizerService.resizeGrid(),t&&(e!=null&&e.enableAutoResize)&&e.autoFitColumnsOnFirstLoad&&e.enableAutoSizeColumns&&typeof t.autosizeColumns=="function"&&t.autosizeColumns()}executeAfterDataviewCreated(t){var e;if(t.enableSorting&&t.presets&&Array.isArray(t.presets.sorters)){const n=!((e=this._gridOptions)===null||e===void 0)&&e.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);this.sortService.loadGridSorters(n)}}paginationChanged(t){var e,n,r;const o=(n=(e=this.gridStateService)===null||e===void 0?void 0:e.needToPreserveRowSelection())!==null&&n!==void 0?n:!1;this.slickGrid&&!o&&(!((r=this._gridOptions)===null||r===void 0)&&r.backendServiceApi)&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.slickGrid.setSelectedRows([]);const{pageNumber:s,pageSize:l}=t;this.sharedService&&l!==void 0&&s!==void 0&&(this.sharedService.currentPagination={pageNumber:s,pageSize:l}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:s,pageSize:l},type:ur.pagination},gridState:this.gridStateService.getCurrentGridState()})}refreshGridData(t,e){var n,r,o,s,l;if(this.slickGrid&&this._gridOptions){if(this._gridOptions.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(t)),this._gridOptions.enableEmptyDataWarningMessage&&Array.isArray(t)){const u=e||t.length;this.displayEmptyDataWarning(u<1)}if(Array.isArray(t)&&this.slickGrid&&(!((n=this.dataView)===null||n===void 0)&&n.setItems)){if(this.dataView.setItems(t,this._gridOptions.datasetIdPropertyName),!this._gridOptions.backendServiceApi&&!this._gridOptions.enableTreeData&&this.dataView.reSort(),t.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this._gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),t&&this.slickGrid.invalidate(),this.showPagination=!!(this._gridOptions&&(this._gridOptions.enablePagination||this._gridOptions.backendServiceApi&&this._gridOptions.enablePagination===void 0)),this._paginationOptions&&(!((r=this._gridOptions)===null||r===void 0)&&r.pagination)&&(!((o=this._gridOptions)===null||o===void 0)&&o.backendServiceApi)){const u=this.setPaginationOptionsWhenPresetDefined(this._gridOptions,this._paginationOptions),h=e!==void 0?e:(l=(s=this._gridOptions)===null||s===void 0?void 0:s.pagination)===null||l===void 0?void 0:l.totalItems;h!==void 0&&h!==this.totalItems&&(this.totalItems=+h),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(u)}if(this.slickGrid&&this._gridOptions.enableAutoResize){const u=this._gridOptions.autoResize&&this._gridOptions.autoResize.delay;this.resizerService.resizeGrid(u||10)}}}}updateColumnDefinitionsList(t){var e,n,r;this.slickGrid&&this._gridOptions&&Array.isArray(t)&&(t=this.swapInternalEditorToSlickGridFactoryEditor(t),this._gridOptions.autoAddCustomEditorFormatter&&vm(t,this._gridOptions.autoAddCustomEditorFormatter),this._gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,t):this.extensionService.renderColumnHeaders(t,!0),this.slickGrid&&(!((e=this._gridOptions)===null||e===void 0)&&e.enableAutoSizeColumns)?this.slickGrid.autosizeColumns():!((n=this._gridOptions)===null||n===void 0)&&n.enableAutoResizeColumnsByCellContent&&(!((r=this.resizerService)===null||r===void 0)&&r.resizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent())}showHeaderRow(t=!0){var e;return(e=this.slickGrid)===null||e===void 0||e.setHeaderRowVisibility(t,!1),this.slickGrid&&t===!0&&this._isGridInitialized&&this.slickGrid.setColumns(this.columnDefinitions),t}setPaginationOptionsWhenPresetDefined(t,e){var n;return!((n=t.presets)===null||n===void 0)&&n.pagination&&e&&!this._isPaginationInitialized&&(e.pageSize=t.presets.pagination.pageSize,e.pageNumber=t.presets.pagination.pageNumber),e}copyColumnWidthsReference(t){t.forEach(e=>e.originalWidth=e.width)}displayEmptyDataWarning(t=!0){var e;(e=this.slickEmptyWarning)===null||e===void 0||e.showEmptyDataMessage(t)}handleOnItemCountChanged(t,e){var n;this._currentDatasetLength=e,this.metrics={startTime:new Date,endTime:new Date,itemCount:t,totalItemCount:e},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&(!((n=this._gridOptions)===null||n===void 0)&&n.enableEmptyDataWarningMessage)&&this.displayEmptyDataWarning(t===0)}initializePaginationService(t){this.slickGrid&&this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.slickGrid,t,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",e=>this.paginationChanged(e)),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",e=>{var n,r,o;this.showPagination=(n=e==null?void 0:e.visible)!==null&&n!==void 0?n:!1,!((r=this.gridOptions)===null||r===void 0)&&r.backendServiceApi&&((o=this.backendUtilityService)===null||o===void 0||o.refreshBackendDataset(this.gridOptions)),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0)}renderPagination(t=!0){var e;!((e=this._gridOptions)===null||e===void 0)&&e.enablePagination&&!this._isPaginationInitialized&&t?(this.slickPagination=new xv(this.paginationService,this._eventPubSubService,this.sharedService,this.translaterService),this.slickPagination.renderPagination(this._gridParentContainerElm),this._isPaginationInitialized=!0):t||(this.slickPagination&&this.slickPagination.dispose(),this._isPaginationInitialized=!1)}loadEditorCollectionAsync(t){var e;const n=(t==null?void 0:t.editor).collectionAsync;(t==null?void 0:t.editor).disabled=!0,n instanceof Promise?n.then(r=>{Array.isArray(r)?this.updateEditorCollection(t,r):(r==null?void 0:r.status)>=200&&r.status<300&&typeof r.json=="function"?r.bodyUsed?console.warn("[SlickGrid-Universal] The response body passed to collectionAsync was already read.Either pass the dataset from the Response or clone the response first using response.clone()"):r.json().then(o=>this.updateEditorCollection(t,o)):r!=null&&r.content&&this.updateEditorCollection(t,r.content)}):!((e=this.rxjs)===null||e===void 0)&&e.isObservable(n)&&setTimeout(()=>{this.subscriptions.push(n.subscribe(r=>this.updateEditorCollection(t,r)))})}insertDynamicPresetColumns(t,e){if(this._columnDefinitions){const n=this._columnDefinitions.findIndex(r=>r.id===t);if(n>=0){const r=this._columnDefinitions[n];(r==null?void 0:r.id)===t&&!e.some(o=>o.id===t)&&(n>0?e.splice(n,0,r):e.unshift(r))}}}loadColumnPresetsWhenDatasetInitialized(){var t,e,n,r,o,s,l,u,h;if(this.slickGrid&&this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){const c=this.gridStateService.getAssociatedGridColumns(this.slickGrid,this.gridOptions.presets.columns);if(c&&Array.isArray(c)&&c.length>0&&Array.isArray(this._columnDefinitions)){if(this.gridOptions.enableRowMoveManager){const p=(n=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.rowMoveManager)===null||e===void 0?void 0:e.columnId)!==null&&n!==void 0?n:"_move";this.insertDynamicPresetColumns(p,c)}if(this.gridOptions.enableCheckboxSelector){const p=(s=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.checkboxSelector)===null||o===void 0?void 0:o.columnId)!==null&&s!==void 0?s:"_checkbox_selector";this.insertDynamicPresetColumns(p,c)}if(this.gridOptions.enableRowDetailView){const p=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.rowDetailView)===null||u===void 0?void 0:u.columnId)!==null&&h!==void 0?h:"_detail_selector";this.insertDynamicPresetColumns(p,c)}c.forEach(p=>p.originalWidth=p.width),this.slickGrid.setColumns(c),this.sharedService.visibleColumns=c}}}loadFilterPresetsWhenDatasetInitialized(){var t,e,n;this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&(Array.isArray(this.gridOptions.presets.filters)||Array.isArray((e=(t=this.gridOptions.presets)===null||t===void 0?void 0:t.treeData)===null||e===void 0?void 0:e.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(((n=this.gridOptions.presets)===null||n===void 0?void 0:n.filters)||[])}loadLocalGridPagination(t){var e;if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(t)?t.length:0,this._paginationOptions&&(!((e=this.dataView)===null||e===void 0)&&e.getPagingInfo)){const r=this.dataView.getPagingInfo();r!=null&&r.hasOwnProperty("totalRows")&&this._paginationOptions.totalItems!==r.totalRows&&(this.totalItems=(r==null?void 0:r.totalRows)||0)}this._paginationOptions.totalItems=this.totalItems;const n=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(n)}}loadRowSelectionPresetWhenExists(){var t,e,n;const r=(t=this.gridOptions)===null||t===void 0?void 0:t.presets,o=(n=(e=this.slickGrid)===null||e===void 0?void 0:e.getSelectionModel)===null||n===void 0?void 0:n.call(e),s=this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection);if(this.slickGrid&&this.dataView&&s&&o&&(r!=null&&r.rowSelection)&&(Array.isArray(r.rowSelection.gridRowIndexes)||Array.isArray(r.rowSelection.dataContextIds))){let l=r.rowSelection.dataContextIds,u=r.rowSelection.gridRowIndexes;Array.isArray(l)&&l.length>0?u=this.dataView.mapIdsToRows(l)||[]:Array.isArray(u)&&u.length>0&&(l=this.dataView.mapRowsToIds(u)||[]),this.slickGrid&&Array.isArray(u)&&(this.slickGrid.setSelectedRows(u),this.dataView.setSelectedIds(l||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}registerExternalResources(t,e=!1){e&&this.disposeExternalResources(),t.forEach(n=>this._registeredResources.push(n)),this.initializeExternalResources(t)}resetExternalResources(){this._registeredResources=[]}preRegisterResources(){if(Array.isArray(this._registeredResources))for(const t of this._registeredResources)(t==null?void 0:t.className)==="RxJsResource"&&this.registerRxJsResource(t)}initializeExternalResources(t){if(Array.isArray(t))for(const e of t)this.slickGrid&&typeof e.init=="function"&&e.init(this.slickGrid,this.universalContainerService)}registerResources(){Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new bf,this._registeredResources.push(this.slickEmptyWarning),this.initializeExternalResources(this._registeredResources)}registerRxJsResource(t){this.rxjs=t,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.universalContainerService.registerInstance("RxJsFacade",this.rxjs),this.universalContainerService.registerInstance("RxJsResource",this.rxjs)}sortTreeDataset(t,e=!1){var n,r;const o=this._currentDatasetLength;let s,l=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(s=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),l=s.flat):Array.isArray(t)&&t.length>0&&(!((r=(n=this.gridOptions)===null||n===void 0?void 0:n.treeDataOptions)===null||r===void 0)&&r.initialSort?(s=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t,this._columnDefinitions||[],this.gridOptions),this.sharedService.hierarchicalDataset=s.hierarchical,l=s.flat):(this.sharedService.hierarchicalDataset=this.treeDataService.convertFlatParentChildToTreeDataset(t,this.gridOptions),l=t||[])),t.length>0&&(e||t.length!==o)&&this.filterService.refreshTreeDataFilters(l),l}swapInternalEditorToSlickGridFactoryEditor(t){const e=Array.isArray(t)?t:[];return e.some(n=>`${n.id}`.includes("."))&&console.error('[Slickgrid-Universal] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),e.map(n=>{var r;!((r=n.editor)===null||r===void 0)&&r.collectionAsync&&this.loadEditorCollectionAsync(n);const o=n.internalColumnEditor||n.editor;return{...n,editor:o==null?void 0:o.model,internalColumnEditor:{...o}}})}translateColumnHeaderTitleKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")}translateColumnGroupKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")}updateEditorCollection(t,e){if(t.editor.collection=e,t.editor.disabled=!1,this.slickGrid){if(Array.isArray(this.columnDefinitions)){const r=this.columnDefinitions.find(o=>o.id===t.id);r&&(r.internalColumnEditor=t.editor)}const n=this.slickGrid.getCellEditor();n!=null&&n.disable&&(n!=null&&n.renderDomElement)&&(typeof n.destroy=="function"&&n.destroy(),n.disable(!1),n.renderDomElement(e))}}}const _y={GridBundle:zv,Aggregators:mf,BindingService:Wu,Editors:vf,Enums:ih,Filters:Hu,Formatters:ln,GroupTotalFormatters:Ti,SortComparers:gl,Utilities:gf};typeof window<"u"&&(window.Slicker=_y);const by={autoEdit:!0,autoCommitEdit:!0,autoFixResizeTimeout:5*60*60,autoFixResizeRequiredGoodCount:5*60*60,autoFixResizeWhenBrokenStyleDetected:!0,cellValueCouldBeUndefined:!0,contextMenu:{hideCloseButton:!1},eventNamingStyle:Ro.lowerCaseWithoutOnPrefix,compositeEditorOptions:{resetEditorButtonCssClass:"mdi mdi-refresh mdi-15px mdi-v-align-text-top",resetFormButtonIconCssClass:"mdi mdi-refresh mdi-16px mdi-flip-h mdi-v-align-text-top",shouldPreviewMassChangeDataset:!0},datasetIdPropertyName:"Id",emptyDataWarning:{message:'<span class="mdi mdi-alert color-warning"></span> No data to display.'},enableDeepCopyDatasetOnPageLoad:!0,enableTextExport:!0,textExportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},enableCellNavigation:!0,customTooltip:{tooltipTextMaxLength:650},enableExcelExport:!0,excelExportOptions:{exportWithFormatter:!0,mimeType:"",sanitizeDataExport:!0},filterTypingDebounce:250,formatterOptions:{thousandSeparator:","},frozenHeaderWidthCalcDifferential:2,columnPicker:{hideForceFitButton:!0},gridMenu:{commandLabels:{clearFrozenColumnsCommandKey:"UNFREEZE_COLUMNS"},hideTogglePreHeaderCommand:!0,hideRefreshDatasetCommand:!0,hideClearFrozenColumnsCommand:!1,hideForceFitButton:!0},headerMenu:{hideFreezeColumnsCommand:!1,iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-arrow-up",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-arrow-down"},sanitizer:a=>typeof a=="string"?a.replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,""):a,showCustomFooter:!0,customFooterOptions:{hideMetrics:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,metricTexts:{itemsSelectedKey:"RECORDS_SELECTED"}},headerRowHeight:35,rowHeight:33,resizeByContentOnlyOnFirstLoad:!1,resizeByContentOptions:{formatterPaddingWidthInPx:8,maxItemToInspectCellContentWidth:500},rowMoveManager:{hideRowMoveShadow:!1},useSalesforceDefaultGridOptions:!0};class Uv extends zv{constructor(t,e,n,r,o,s){super(t,e,n,r,o,s)}mergeGridOptions(t){var r;const e=t.useSalesforceDefaultGridOptions||(r=this._gridOptions)!=null&&r.useSalesforceDefaultGridOptions?by:{},n=Slick.Utils.extend(!0,{},pf,e,t);return n.enableFiltering&&!n.showHeaderRow&&(n.showHeaderRow=n.enableFiltering),n!=null&&n.pagination&&(t.enablePagination||t.backendServiceApi)&&t.pagination&&Array.isArray(t.pagination.pageSizes)&&(n.pagination.pageSizes=t.pagination.pageSizes),!n.enableFiltering&&n.enablePagination&&this._isLocalGrid&&(n.enableFiltering=!0,n.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),n}registerResources(){if(this.gridOptions.enableTextExport&&this._registeredResources.push(new py),this.gridOptions.enableTextExport&&this._registeredResources.push(new dy),this._registeredResources.push(new uy),Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new bf,this._registeredResources.push(this.slickEmptyWarning),this.gridOptions.enableCompositeEditor&&(this._registeredResources.some(t=>t instanceof _f)||(this.slickCompositeEditor=new _f,this._registeredResources.push(this.slickCompositeEditor))),Array.isArray(this._registeredResources))for(const t of this._registeredResources)this.slickGrid&&typeof t.init=="function"&&t.init(this.slickGrid,this.universalContainerService)}}const Wv={GridBundle:Uv,Aggregators:mf,BindingService:Wu,Editors:vf,Enums:ih,Filters:Hu,Formatters:ln,GroupTotalFormatters:Ti,SortComparers:gl,Utilities:gf};typeof window<"u"&&(window.Slicker=Wv),Mn.Aggregators=mf,Mn.BindingService=Wu,Mn.Editors=vf,Mn.Enums=ih,Mn.EventPubSubService=Vp,Mn.Filters=Hu,Mn.Formatters=ln,Mn.GroupTotalFormatters=Ti,Mn.SlickCompositeEditorComponent=_f,Mn.SlickEmptyWarningComponent=bf,Mn.SlickPaginationComponent=xv,Mn.Slicker=Wv,Mn.SortComparers=gl,Mn.Utilities=gf,Mn.VanillaForceGridBundle=Uv,Object.defineProperty(Mn,Symbol.toStringTag,{value:"Module"})});
